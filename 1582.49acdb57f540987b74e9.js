"use strict";(self.webpackChunkreact_redux_arcgis_boilerplate=self.webpackChunkreact_redux_arcgis_boilerplate||[]).push([[1582],{21120:function(t,e,n){n.d(e,{E:function(){return w},w:function(){return i}});var r=n(3223),o=(n(6273),n(41785)),s=n(79207);class i{constructor(t=9,e){this._compareMinX=c,this._compareMinY=d,this._toBBox=t=>t,this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&("function"==typeof e?this._toBBox=e:this._initFormat(e)),this.clear()}destroy(){this.clear(),I.prune(),b.prune(),B.prune(),M.prune()}all(t){u(this._data,t)}search(t,e){let n=this._data;const r=this._toBBox;if(p(t,n))for(I.clear();n;){for(let o=0,s=n.children.length;o<s;o++){const s=n.children[o],i=n.leaf?r(s):s;p(t,i)&&(n.leaf?e(s):_(t,i)?u(s,e):I.push(s))}n=I.pop()}}collides(t){let e=this._data;const n=this._toBBox;if(!p(t,e))return!1;for(I.clear();e;){for(let r=0,o=e.children.length;r<o;r++){const o=e.children[r],s=e.leaf?n(o):o;if(p(t,s)){if(e.leaf||_(t,s))return!0;I.push(o)}}e=I.pop()}return!1}load(t){if(!t.length)return this;if(t.length<this._minEntries){for(let e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this._data.children.length)if(this._data.height===e.height)this._splitRoot(this._data,e);else{if(this._data.height<e.height){const t=this._data;this._data=e,e=t}this._insert(e,this._data.height-e.height-1,!0)}else this._data=e;return this}insert(t){return t&&this._insert(t,this._data.height-1),this}clear(){return this._data=new Y([]),this}remove(t){if(!t)return this;let e,n=this._data,o=null,s=0,i=!1;const u=this._toBBox(t);for(B.clear(),M.clear();n||B.length>0;){if(n||(n=B.pop(),o=B.data[B.length-1],s=M.pop()??0,i=!0),n.leaf&&(e=(0,r.qh)(n.children,t,n.children.length,n.indexHint),-1!==e))return n.children.splice(e,1),B.push(n),this._condense(B),this;i||n.leaf||!_(n,u)?o?(s++,n=o.children[s],i=!1):n=null:(B.push(n),M.push(s),s=0,o=n,n=n.children[0])}return this}toJSON(){return this._data}fromJSON(t){return this._data=t,this}_build(t,e,n,r){const o=n-e+1;let s=this._maxEntries;if(o<=s){const r=new Y(t.slice(e,n+1));return h(r,this._toBBox),r}r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/s**(r-1)));const i=new X([]);i.height=r;const u=Math.ceil(o/s),l=u*Math.ceil(Math.sqrt(s));x(t,e,n,l,this._compareMinX);for(let o=e;o<=n;o+=l){const e=Math.min(o+l-1,n);x(t,o,e,u,this._compareMinY);for(let n=o;n<=e;n+=u){const o=Math.min(n+u-1,e);i.children.push(this._build(t,n,o,r-1))}}return h(i,this._toBBox),i}_insert(t,e,n){const r=this._toBBox,o=n?t:r(t);B.clear();const s=function(t,e,n,r){for(;r.push(e),!0!==e.leaf&&r.length-1!==n;){let n,r=1/0,o=1/0;for(let s=0,i=e.children.length;s<i;s++){const i=e.children[s],u=f(i),h=g(t,i)-u;h<o?(o=h,r=u<r?u:r,n=i):h===o&&u<r&&(r=u,n=i)}e=n||e.children[0]}return e}(o,this._data,e,B);for(s.children.push(t),a(s,o);e>=0&&B.data[e].children.length>this._maxEntries;)this._split(B,e),e--;!function(t,e,n){for(let r=n;r>=0;r--)a(e.data[r],t)}(o,B,e)}_split(t,e){const n=t.data[e],r=n.children.length,o=this._minEntries;this._chooseSplitAxis(n,o,r);const s=this._chooseSplitIndex(n,o,r);if(!s)return;const i=n.children.splice(s,n.children.length-s),u=n.leaf?new Y(i):new X(i);u.height=n.height,h(n,this._toBBox),h(u,this._toBBox),e?t.data[e-1].children.push(u):this._splitRoot(n,u)}_splitRoot(t,e){this._data=new X([t,e]),this._data.height=t.height+1,h(this._data,this._toBBox)}_chooseSplitIndex(t,e,n){let r,o,s;r=o=1/0;for(let i=e;i<=n-e;i++){const e=l(t,0,i,this._toBBox),u=l(t,i,n,this._toBBox),h=y(e,u),a=f(e)+f(u);h<r?(r=h,s=i,o=a<o?a:o):h===r&&a<o&&(o=a,s=i)}return s}_chooseSplitAxis(t,e,n){const r=t.leaf?this._compareMinX:c,o=t.leaf?this._compareMinY:d;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,o)&&t.children.sort(r)}_allDistMargin(t,e,n,r){t.children.sort(r);const o=this._toBBox,s=l(t,0,e,o),i=l(t,n-e,n,o);let u=m(s)+m(i);for(let r=e;r<n-e;r++){const e=t.children[r];a(s,t.leaf?o(e):e),u+=m(s)}for(let r=n-e-1;r>=e;r--){const e=t.children[r];a(i,t.leaf?o(e):e),u+=m(i)}return u}_condense(t){for(let e=t.length-1;e>=0;e--){const n=t.data[e];if(0===n.children.length)if(e>0){const o=t.data[e-1],s=o.children;s.splice((0,r.qh)(s,n,s.length,o.indexHint),1)}else this.clear();else h(n,this._toBBox)}}_initFormat(t){const e=["return a"," - b",";"];this._compareMinX=new Function("a","b",e.join(t[0])),this._compareMinY=new Function("a","b",e.join(t[1])),this._toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}function u(t,e){let n=t;for(b.clear();n;){if(!0===n.leaf)for(const t of n.children)e(t);else b.pushArray(n.children);n=b.pop()??null}}function h(t,e){l(t,0,t.children.length,e,t)}function l(t,e,n,r,o){o||(o=new Y([])),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(let s,i=e;i<n;i++)s=t.children[i],a(o,t.leaf?r(s):s);return o}function a(t,e){t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY)}function c(t,e){return t.minX-e.minX}function d(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function m(t){return t.maxX-t.minX+(t.maxY-t.minY)}function g(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function y(t,e){const n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),o=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,o-n)*Math.max(0,s-r)}function _(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function x(t,e,n,r,o){const i=[e,n];for(;i.length;){const e=i.pop(),n=i.pop();if(e-n<=r)continue;const u=n+Math.ceil((e-n)/r/2)*r;(0,s.q)(t,u,n,e,o),i.push(n,u,u,e)}}const I=new o.A,b=new o.A,B=new o.A,M=new o.A({deallocator:void 0});class w{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class v extends w{constructor(){super(...arguments),this.height=1,this.indexHint=new r.vW}}class Y extends v{constructor(t){super(),this.children=t,this.leaf=!0}}class X extends v{constructor(t){super(),this.children=t,this.leaf=!1}}},85747:function(t,e,n){n.d(e,{N3:function(){return s},Om:function(){return o}});var r=n(65977);class o{constructor(t=null,e={},n,r){this.geometry=t,this.attributes=e,this.centroid=n,this.objectId=r,this.displayId=0,this.geohashX=0,this.geohashY=0}static fromJSON(t,e){const n=t.geometry?r.A.fromJSON(t.geometry):null,s=t.centroid?r.A.fromJSON(t.centroid):null,i=t.attributes[e];return new o(n,t.attributes,s,i)}weakClone(){const t=new o(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}clone(){const t=this.geometry?.clone(),e=new o(t,{...this.attributes},this.centroid?.clone(),this.objectId);return e.displayId=this.displayId,e.geohashX=this.geohashX,e.geohashY=this.geohashY,e}}function s(t){return!!t.geometry?.coords?.length}},97011:function(t,e,n){n.d(e,{A:function(){return r}});class r{constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new r;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}},65977:function(t,e,n){n.d(e,{A:function(){return r}});class r{constructor(t=[],e=[]){this.lengths=t??[],this.coords=e??[]}static fromJSON(t){return new r(t.lengths,t.coords)}static fromRect(t){const[e,n,o,s]=t,i=o-e,u=s-n;return new r([5],[e,n,i,0,0,u,-i,0,0,-u])}get isPoint(){return 0===this.lengths.length&&this.coords.length>=2}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((t,e)=>t+e))}forEachVertex(t){let e=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let n=0;n<this.lengths.length;n++){const r=this.lengths[n];for(let n=0;n<r;n++)t(this.coords[2*(n+e)],this.coords[2*(n+e)+1]);e+=r}}deltaDecode(){const t=this.clone(),{coords:e,lengths:n}=t;let r=0;for(const t of n){for(let n=1;n<t;n++)e[2*(r+n)]+=e[2*(r+n)-2],e[2*(r+n)+1]+=e[2*(r+n)-1];r+=t}return t}clone(t){if(0===this.lengths.length)return new r([],[this.coords[0],this.coords[1]]);const e=2*(0===this.lengths.length?1:this.lengths.reduce(((t,e)=>t+e))),n=this.coords.slice(0,e);return t?(t.set(n),new r(this.lengths,t)):new r(Array.from(this.lengths),Array.from(n))}}},64411:function(t,e,n){n.d(e,{F:function(){return h}});var r=n(6273),o=n(21120),s=n(2532);const i={minX:0,minY:0,maxX:0,maxY:0};function u(t,e,n){(function(t){i.minX=t[0],i.minY=t[1],i.maxX=t[2],i.maxY=t[3]})(e),t.search(i,n)}class h{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new o.w(9,(0,r.A)("esri-csp-restrictions")?t=>({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const t=new Array(this._idByBounds.size);let e=0;this._idByBounds.forEach(((n,r)=>{t[e++]=r})),this._indexInvalid=!1,this._index.clear(),this._index.load(t)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((t=>this._idByBounds.has(t)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const t=(0,s.Ie)();for(const e of this._boundsById.values())e&&(t[0]=Math.min(e[0],t[0]),t[1]=Math.min(e[1],t[1]),t[2]=Math.max(e[2],t[2]),t[3]=Math.max(e[3],t[3]));return t}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(t){const e=this._boundsById.get(t);this._boundsById.delete(t),e&&(this._idByBounds.delete(e),this._indexInvalid||this._index.remove(e))}forEachInBounds(t,e){this._loadIndex(),u(this._index,t,(t=>e(this._idByBounds.get(t))))}get(t){return this._boundsById.get(t)}has(t){return this._boundsById.has(t)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(t,e){if(!this._indexInvalid){const e=this._boundsById.get(t);e&&(this._index.remove(e),this._idByBounds.delete(e))}this._boundsById.set(t,e),e&&(this._idByBounds.set(e,t),this._indexInvalid||(this._boundsToLoad.push(e),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},91582:function(t,e,n){n.d(e,{A:function(){return m}});var r=n(3223),o=n(62991),s=n(57888),i=n(80861),u=n(46373),h=n(2532),l=n(5525),a=n(64411),c=n(84880),d=n(60105);const f=(0,u.vt)();class m{constructor(t){this.geometryInfo=t,this._boundsStore=new a.F,this._featuresById=new Map,this.events=new s.A,this.featureAdapter=d.T}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let t=0;return this._featuresById.forEach((e=>{null!=e.geometry&&e.geometry.coords&&(t+=e.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:t/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(t){if(null==this.fullBounds)return null;const[e,n,r,o]=this.fullBounds;return{xmin:e,ymin:n,xmax:r,ymax:o,spatialReference:(0,c.ag)(t)}}add(t){this._add(t),this._emitChanged()}addMany(t){for(const e of t)this._add(e);this._emitChanged()}upsertMany(t){const e=t.map((t=>this._upsert(t)));return this._emitChanged(),e.filter(r.Ru)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(t){const e=this._featuresById.get(t);return e?(this._remove(e),this._emitChanged(),e):null}removeManyById(t){this._boundsStore.invalidateIndex();for(const e of t){const t=this._featuresById.get(e);t&&this._remove(t)}this._emitChanged()}forEachBounds(t,e){for(const n of t){const t=this._boundsStore.get(n.objectId);t&&e((0,u.Jt)(f,t))}}getFeature(t){return this._featuresById.get(t)}has(t){return this._featuresById.has(t)}forEach(t){this._featuresById.forEach((e=>t(e)))}forEachInBounds(t,e){this._boundsStore.forEachInBounds(t,(t=>{e(this._featuresById.get(t))}))}_emitChanged(){this.events.emit("changed",void 0)}_add(t){if(!t)return;const e=t.objectId;if(null==e)return void i.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new o.A("featurestore:invalid-feature","feature id is missing",{feature:t}));const n=this._featuresById.get(e);let r;if(n?(t.displayId=n.displayId,r=this._boundsStore.get(e),this._boundsStore.delete(e)):null!=this.onFeatureAdd&&this.onFeatureAdd(t),!t.geometry?.coords?.length)return this._boundsStore.set(e,null),void this._featuresById.set(e,t);r=(0,l.jQ)(null!=r?r:(0,h.vt)(),t.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=r&&this._boundsStore.set(e,r),this._featuresById.set(e,t)}_upsert(t){const e=t?.objectId;if(null==e)return i.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new o.A("featurestore:invalid-feature","feature id is missing",{feature:t})),null;const n=this._featuresById.get(e);if(!n)return this._add(t),t;const{geometry:r,attributes:s}=t;for(const t in s)n.attributes[t]=s[t];return r&&(n.geometry=r,this._boundsStore.set(e,(0,l.jQ)((0,h.vt)(),r,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),n}_remove(t){null!=this.onFeatureRemove&&this.onFeatureRemove(t);const e=t.objectId;return this._boundsStore.delete(e),this._featuresById.delete(e),t}}},60105:function(t,e,n){n.d(e,{T:function(){return i}});var r=n(91658),o=n(85747),s=n(65977);const i={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(t,e)=>new o.Om(e,t.attributes,null,t.objectId),getGeometry:t=>t.geometry,getCentroid:(t,e)=>(null==t.centroid&&(t.centroid=(0,r.Q)(new s.A,t.geometry,e.hasZ,e.hasM)),t.centroid)}},5525:function(t,e,n){n.d(e,{B2:function(){return b},BW:function(){return Z},Ch:function(){return ot},DF:function(){return M},Di:function(){return z},E2:function(){return R},IE:function(){return I},Nl:function(){return K},Q4:function(){return st},Rk:function(){return ut},Ux:function(){return J},Ye:function(){return L},ZF:function(){return V},eU:function(){return k},eY:function(){return $},jH:function(){return W},jQ:function(){return rt},kz:function(){return tt},oN:function(){return U},q3:function(){return H},qK:function(){return j},qN:function(){return S},z5:function(){return q},zv:function(){return D}});var r=n(62991),o=n(80861),s=n(57725),i=n(46373),u=n(2532),h=n(56053),l=n(85747),a=n(97011),c=n(65977);function d(t,e){return t?e?4:3:e?3:2}const f=()=>o.A.getLogger("esri.layers.graphics.featureConversionUtils"),m={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},g=(t,e,n,r,o,s)=>{t[n]=o,t[n+1]=s},y=(t,e,n,r,o,s)=>{t[n]=o,t[n+1]=s,t[n+2]=e[r+2]},_=(t,e,n,r,o,s)=>{t[n]=o,t[n+1]=s,t[n+2]=e[r+3]},p=(t,e,n,r,o,s)=>{t[n]=o,t[n+1]=s,t[n+2]=e[r+2],t[n+3]=e[r+3]};function x(t,e,n,r){if(t){if(n)return e&&r?p:y;if(e&&r)return _}else if(e&&r)return y;return g}function I({scale:t,translate:e},n){return Math.round((n-e[0])/t[0])}function b({scale:t,translate:e},n){return Math.round((e[1]-n)/t[1])}function B({scale:t,translate:e},n,r){return n*t[r]+e[r]}function M(t,e,n){return t?e?n?T(t):Y(t):n?A(t):w(t):null}function w(t){const e=t.coords;return{x:e[0],y:e[1]}}function v(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function Y(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function X(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function A(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function F(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function T(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function N(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function G(t,e){return t&&e?N:t?X:e?F:v}function S(t,e,n=G(null!=e.z,null!=e.m)){return n(t,e)}function j(t,e,n){if(null==t)return null;const r=d(e,n),o=[];for(let e=0;e<t.coords.length;e+=r){const n=[];for(let o=0;o<r;o++)n.push(t.coords[e+o]);o.push(n)}return e?n?{points:o,hasZ:e,hasM:n}:{points:o,hasZ:e}:n?{points:o,hasM:n}:{points:o}}function E(t,e,n=d(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const r=t.coords;let o=0;for(const t of e.points)for(let e=0;e<n;e++)r[o++]=t[e];return t}function Z(t,e,n){if(!t)return null;const r=d(e,n),{coords:o,lengths:s}=t,i=[];let u=0;for(const t of s){const e=[];for(let n=0;n<t;n++){const t=[];for(let e=0;e<r;e++)t.push(o[u++]);e.push(t)}i.push(e)}return e?n?{paths:i,hasZ:e,hasM:n}:{paths:i,hasZ:e}:n?{paths:i,hasM:n}:{paths:i}}function P(t,e,n=d(e.hasZ,e.hasM)){const{lengths:r,coords:o}=t;let s=0;for(const t of e.paths){for(const e of t)for(let t=0;t<n;t++)o[s++]=e[t];r.push(t.length)}return t}function q(t,e,n){if(!t)return null;const r=d(e,n),{coords:o,lengths:s}=t,i=[];let u=0;for(const t of s){const e=[];for(let n=0;n<t;n++){const t=[];for(let e=0;e<r;e++)t.push(o[u++]);e.push(t)}i.push(e)}return e?n?{rings:i,hasZ:e,hasM:n}:{rings:i,hasZ:e}:n?{rings:i,hasM:n}:{rings:i}}function L(t,e,n=e.hasZ,r=e.hasM){return k(t,e.rings,n,r)}function k(t,e,n,r){const o=d(n,r),{lengths:s,coords:i}=t;let u=0;ht(t);for(const t of e){for(const e of t)for(let t=0;t<o;t++)i[u++]=e[t];s.push(t.length)}return t}const C=[],O=[];function R(t,e,n,r,o){C[0]=t;const[s]=z(O,C,e,n,r,o);return lt(C),lt(O),s}function z(t,e,n,o,s,i){if(lt(t),!n){for(const n of e){const e=i?n.attributes[i]:void 0;t.push(new l.Om(null,n.attributes,null,e))}return t}switch(n){case"esriGeometryPoint":return function(t,e,n,r,o){const s=G(n,r);for(const{geometry:n,attributes:r}of e){const e=null!=n?s(new c.A,n):null;t.push(new l.Om(e,r,null,o?r[o]:void 0))}return t}(t,e,o,s,i);case"esriGeometryMultipoint":return function(t,e,n,r,o){const s=d(n,r);for(const{geometry:n,attributes:r}of e){const e=null!=n?E(new c.A,n,s):null;t.push(new l.Om(e,r,null,o?r[o]:void 0))}return t}(t,e,o,s,i);case"esriGeometryPolyline":return function(t,e,n,r,o){const s=d(n,r);for(const{geometry:n,attributes:r,centroid:i}of e){const e=null!=n?P(new c.A,n,s):null,u=null!=i?S(new c.A,i):null;t.push(new l.Om(e,r,u,o?r[o]:void 0))}return t}(t,e,o,s,i);case"esriGeometryPolygon":case"esriGeometryMultiPatch":return function(t,e,n,r,o){for(const{geometry:s,centroid:i,attributes:u}of e){const e=null!=s?L(new c.A,s,n,r):null,h=o?u[o]:void 0;null!=i?t.push(new l.Om(e,u,v(new c.A,i),h)):t.push(new l.Om(e,u,null,h))}return t}(t,e,o,s,i);default:f().error("convertToFeatureSet:unknown-geometry",new r.A(`Unable to parse unknown geometry type '${n}'`)),lt(t)}return t}function U(t,e,n,r){O[0]=t,Q(C,O,e,n,r);const o=C[0];return lt(C),lt(O),o}function J(t,e,n){if(null==t)return null;const o=new c.A;return"hasZ"in t&&null==e&&(e=t.hasZ),"hasM"in t&&null==n&&(n=t.hasM),(0,h.fT)(t)?G(null!=e?e:null!=t.z,null!=n?n:null!=t.m)(o,t):(0,h.Bi)(t)?L(o,t,e,n):(0,h.Rg)(t)?P(o,t,d(e,n)):(0,h.U9)(t)?E(o,t,d(e,n)):void f().error("convertFromGeometry:unknown-geometry",new r.A(`Unable to parse unknown geometry type '${t}'`))}function D(t,e,n,o){const s=t&&("coords"in t?t:t.geometry);if(null==s)return null;switch(e){case"esriGeometryPoint":{let t=w;return n&&o?t=T:n?t=Y:o&&(t=A),t(s)}case"esriGeometryMultipoint":return j(s,n,o);case"esriGeometryPolyline":return Z(s,n,o);case"esriGeometryPolygon":return q(s,n,o);default:return f().error("convertToGeometry:unknown-geometry",new r.A(`Unable to parse unknown geometry type '${e}'`)),null}}function Q(t,e,n,o,s){if(lt(t),null==n)return function(t,e){for(const n of e)t.push({attributes:n.attributes});return t}(t,e);switch(n){case"esriGeometryPoint":return function(t,e,n,r){let o=w;n&&r?o=T:n?o=Y:r&&(o=A);for(const n of e){const{geometry:e,attributes:r}=n,s=null!=e?o(e):null;t.push({attributes:r,geometry:s})}return t}(t,e,o,s);case"esriGeometryMultipoint":return function(t,e,n,r){for(const{geometry:o,attributes:s}of e)t.push({attributes:s,geometry:null!=o?j(o,n,r):null});return t}(t,e,o,s);case"esriGeometryPolyline":return function(t,e,n,r){for(const{geometry:o,attributes:s}of e)t.push({attributes:s,geometry:null!=o?Z(o,n,r):null});return t}(t,e,o,s);case"esriGeometryPolygon":return function(t,e,n,r){for(const{geometry:o,attributes:s,centroid:i}of e){const e=null!=o?q(o,n,r):null;if(null!=i){const n=w(i);t.push({attributes:s,centroid:n,geometry:e})}else t.push({attributes:s,geometry:e})}return t}(t,e,o,s);default:f().error("convertToFeatureSet:unknown-geometry",new r.A(`Unable to parse unknown geometry type '${n}'`))}return t}function V(t){const{objectIdFieldName:e,spatialReference:n,transform:r,fields:o,hasM:s,hasZ:i,features:u,geometryType:h,exceededTransferLimit:l,uniqueIdField:a,queryGeometry:c,queryGeometryType:d}=t,f={features:Q([],u,h,i,s),fields:o,geometryType:h,objectIdFieldName:e,spatialReference:n,uniqueIdField:a,queryGeometry:D(c,d,!1,!1)};return r&&(f.transform=r),l&&(f.exceededTransferLimit=l),s&&(f.hasM=s),i&&(f.hasZ=i),f}function H(t,e){const n=new a.A,{hasM:o,hasZ:s,features:i,objectIdFieldName:u,spatialReference:h,geometryType:l,exceededTransferLimit:c,transform:d,fields:m}=t;return m&&(n.fields=m),n.geometryType=l??null,n.objectIdFieldName=u??e??null,n.spatialReference=h??null,n.objectIdFieldName?(i&&z(n.features,i,l,s,o,n.objectIdFieldName),c&&(n.exceededTransferLimit=c),o&&(n.hasM=o),s&&(n.hasZ=s),d&&(n.transform=d),n):(f().error(new r.A("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),n)}function $(t){const{transform:e,features:n,hasM:r,hasZ:o}=t;if(!e)return t;for(const t of n)null!=t.geometry&&ot(t.geometry,t.geometry,r,o,e),null!=t.centroid&&ot(t.centroid,t.centroid,r,o,e);return t.transform=null,t}function W(t,e){const{geometryType:n,features:r,hasM:o,hasZ:s}=e;if(!t)return e;for(let e=0;e<r.length;e++){const i=r[e],u=i.weakClone();u.geometry=new c.A,K(u.geometry,i.geometry,o,s,n,t),i.centroid&&(u.centroid=new c.A,K(u.centroid,i.centroid,o,s,"esriGeometryPoint",t)),r[e]=u}return e.transform=t,e}function K(t,e,n,r,o,s,i=n,u=r){if(ht(t),!e?.coords.length)return null;const h=m[o],{coords:l,lengths:a}=e,c=d(n,r),f=d(n&&i,r&&u),g=x(n,r,i,u);if(!a.length)return g(t.coords,l,0,0,I(s,l[0]),b(s,l[1])),ht(t,c,0),t;let y,_,p,B,M=0,w=0,v=w;for(const e of a){if(e<h)continue;let n=0;w=v,p=y=I(s,l[M]),B=_=b(s,l[M+1]),g(t.coords,l,w,M,p,B),n++,M+=c,w+=f;for(let r=1;r<e;r++,M+=c)p=I(s,l[M]),B=b(s,l[M+1]),p===y&&B===_||(g(t.coords,l,w,M,p-y,B-_),w+=f,n++,y=p,_=B);n>=h&&(t.lengths.push(n),v=w)}return lt(t.coords,v),t.coords.length?t:null}function tt(t,e,n,r,o,s,i=n,u=r){if(ht(t),!e?.coords.length)return null;const h=m[o],{coords:l,lengths:a}=e,c=d(n,r),f=d(n&&i,r&&u),g=x(n,r,i,u);if(!a.length)return g(t.coords,l,0,0,l[0],l[1]),ht(t,c,0),t;let y=0;const _=s*s;for(const e of a){if(e<h){y+=e*c;continue}const n=t.coords.length/f,r=y,o=y+(e-1)*c;g(t.coords,l,t.coords.length,r,l[r],l[r+1]),nt(t.coords,l,c,_,g,r,o),g(t.coords,l,t.coords.length,o,l[o],l[o+1]);const s=t.coords.length/f-n;s>=h?t.lengths.push(s):lt(t.coords,n*f),y+=e*c}return t.coords.length?t:null}function et(t,e,n,r){const o=t[e],s=t[e+1],i=t[n],u=t[n+1],h=t[r],l=t[r+1];let a=i,c=u,d=h-a,f=l-c;if(0!==d||0!==f){const t=((o-a)*d+(s-c)*f)/(d*d+f*f);t>1?(a=h,c=l):t>0&&(a+=d*t,c+=f*t)}return d=o-a,f=s-c,d*d+f*f}function nt(t,e,n,r,o,s,i){let u,h=r,l=0;for(let t=s+n;t<i;t+=n)u=et(e,t,s,i),u>h&&(l=t,h=u);h>r&&(l-s>n&&nt(t,e,n,r,o,s,l),o(t,e,t.length,l,e[l],e[l+1]),i-l>n&&nt(t,e,n,r,o,l,i))}function rt(t,e,n,r){if(!e?.coords?.length)return null;const o=d(n,r);let s=Number.POSITIVE_INFINITY,h=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY;if(e&&e.coords){const t=e.coords;for(let e=0;e<t.length;e+=o){const n=t[e],r=t[e+1];s=Math.min(s,n),l=Math.max(l,n),h=Math.min(h,r),a=Math.max(a,r)}}return(0,i.is)(t)?(0,i.BI)(t,s,h,l,a):(0,u.fA)(s,h,l,a,t),t}function ot(t,e,n,r,o){const{coords:i,lengths:u}=e,h=d(n,r);if(!i.length)return t!==e&&ht(t),t;(0,s.Lw)(o);const{originPosition:l,scale:a,translate:c}=o,f=at;f.originPosition=l;const m=f.scale;m[0]=a[0]??1,m[1]=-(a[1]??1),m[2]=a[2]??1,m[3]=a[3]??1;const g=f.translate;if(g[0]=c[0]??0,g[1]=c[1]??0,g[2]=c[2]??0,g[3]=c[3]??0,!u.length){for(let e=0;e<h;++e)t.coords[e]=B(f,i[e],e);return t!==e&&ht(t,h,0),t}let y=0;for(let e=0;e<u.length;e++){const n=u[e];t.lengths[e]=n;for(let e=0;e<h;++e)t.coords[y+e]=B(f,i[y+e],e);let r=t.coords[y],o=t.coords[y+1];y+=h;for(let e=1;e<n;e++,y+=h){r+=i[y]*m[0],o+=i[y+1]*m[1],t.coords[y]=r,t.coords[y+1]=o;for(let e=2;e<h;++e)t.coords[y+e]=B(f,i[y+e],e)}}return t!==e&&ht(t,i.length,u.length),t}function st(t,e,n,r,o,s){if(ht(t),t.lengths.push(...e.lengths),n===o&&r===s)for(let n=0;n<e.coords.length;n++)t.coords.push(e.coords[n]);else{const i=d(n,r),u=x(n,r,o,s),h=e.coords;for(let e=0;e<h.length;e+=i)u(t.coords,h,t.coords.length,e,h[e],h[e+1])}return t}function it(t,e,n,r){let o=0,s=t[r*e],i=t[r*(e+1)];for(let u=1;u<n;u++){const n=s+t[r*(e+u)],h=i+t[r*(e+u)+1],l=(n-s)*(h+i);s=n,i=h,o+=l}return.5*o}function ut(t,e){const{coords:n,lengths:r}=t;let o=0,s=0;for(let t=0;t<r.length;t++){const i=r[t];s+=it(n,o,i,e),o+=i}return Math.abs(s)}function ht(t,e=0,n=0){lt(t.lengths,n),lt(t.coords,e)}function lt(t,e=0){t.length!==e&&(t.length=e)}const at={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}}}]);
//# sourceMappingURL=1582.49acdb57f540987b74e9.js.map