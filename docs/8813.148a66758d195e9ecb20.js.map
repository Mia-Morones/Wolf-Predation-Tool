{"version":3,"file":"8813.148a66758d195e9ecb20.js","mappings":"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","sources":["webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/layers/StreamLayerView.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../layers/support/FeatureFilter.js\";const r=r=>{let i=class extends r{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}disconnect(){this._doDisconnect()}connect(){this._doConnect()}clear(){this._doClear()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return(this._isUserPaused||this.suspended)&&\"connected\"===this._streamConnectionStatus?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],i.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],i.prototype,\"connectionStatus\",null),s([e({type:o})],i.prototype,\"filter\",void 0),i=s([t(\"esri.views.layers.StreamLayerView\")],i),i};export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Error.js\";import{handlesGroup as t,makeHandle as s}from\"../../../core/handleUtils.js\";import{watch as n}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../rest/support/FeatureSet.js\";import c from\"./FeatureLayerView2D.js\";import{handleNoEngineError as l}from\"./support/handleNoEngineError.js\";import h from\"../../layers/StreamLayerView.js\";let p=class extends(h(c)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null}initialize(){this.addHandles([n((()=>this.layer.customParameters),(async e=>{(await this.getWorker()).streamMessenger.updateCustomParameters(e)})),this.layer.on(\"send-message-to-socket\",(async e=>{(await this.getWorker()).streamMessenger.sendMessageToSocket(e)})),this.layer.on(\"send-message-to-client\",(async e=>{(await this.getWorker()).streamMessenger.sendMessageToClient(e),this._isUserPaused&&\"type\"in e&&\"clear\"===e.type&&this.incrementSourceRefreshVersion()})),n((()=>this.layer.purgeOptions),(()=>this._update())),n((()=>this.suspended),this._onSuspendedChange.bind(this))],\"constructor\"),this._doResume()}destroy(){this._doPause()}get connectionError(){return this.pipelineErrorString?new r(\"stream-controller\",this.pipelineErrorString):null}on(e,r){if(Array.isArray(e))return t(e.map((e=>this.on(e,r))));const n=[\"data-received\",\"message-received\"].includes(e);n&&this.getWorker().then((r=>r.streamMessenger.enableEvent(e,!0)));const o=super.on(e,r),i=this;return s((()=>{o.remove(),n&&(i._workerProxy.closed||i.hasEventListener(e)||i.getWorker().then((r=>r.streamMessenger.enableEvent(e,!1))))}))}async queryLatestObservations(e,t){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new r(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");const s=await this.getWorker();return l(s.features.executeQueryForLatestObservations(this._cleanUpQuery(e),t).then((e=>{const r=a.fromJSON(e);return r.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),r})),new a({features:[]}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){null!=this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}_doResume(){this._refreshInterval=setInterval((()=>this.incrementSourceRefreshVersion()),this.layer.updateInterval)}_doDisconnect(){this.getWorker().then((e=>e.streamMessenger.disconnect())),this._doPause()}_doConnect(){this.getWorker().then((e=>e.streamMessenger.connect())),this.resume()}_doClear(){this.getWorker().then((e=>e.streamMessenger.clear())),null==this._refreshInterval&&this.incrementSourceRefreshVersion()}_createClientOptions(){const e=super._createClientOptions(),r=this;return{...e,get container(){return r.featureContainer},setProperty:e=>{this.set(e.propertyName,e.value)}}}};e([o()],p.prototype,\"pipelineConnectionStatus\",void 0),e([o()],p.prototype,\"pipelineErrorString\",void 0),e([o({readOnly:!0})],p.prototype,\"connectionError\",null),e([o({readOnly:!0})],p.prototype,\"_streamConnectionStatus\",null),p=e([i(\"esri.views.2d.layers.StreamLayerView2D\")],p);const u=p;export{u as default};\n"],"names":["r","i","resume","this","_isUserPaused","suspended","_doResume","pause","_doPause","disconnect","_doDisconnect","connect","_doConnect","clear","_doClear","constructor","s","super","filter","connectionStatus","_streamConnectionStatus","_onSuspendedChange","prototype","readOnly","type","p","arguments","pipelineConnectionStatus","pipelineErrorString","initialize","addHandles","layer","customParameters","async","getWorker","streamMessenger","updateCustomParameters","e","on","sendMessageToSocket","sendMessageToClient","incrementSourceRefreshVersion","purgeOptions","_update","bind","destroy","connectionError","Array","isArray","map","n","includes","then","enableEvent","o","remove","_workerProxy","closed","hasEventListener","queryLatestObservations","t","timeInfo","endField","startField","trackIdField","features","executeQueryForLatestObservations","_cleanUpQuery","fromJSON","forEach","sourceLayer","detach","_refreshInterval","clearInterval","setInterval","updateInterval","_createClientOptions","container","featureContainer","setProperty","set","propertyName","value","u"],"sourceRoot":""}