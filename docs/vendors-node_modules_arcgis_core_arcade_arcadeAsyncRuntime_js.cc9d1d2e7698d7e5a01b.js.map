{"version":3,"file":"vendors-node_modules_arcgis_core_arcade_arcadeAsyncRuntime_js.cc9d1d2e7698d7e5a01b.js","mappings":"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","sources":["webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/arcade/arcadeAsyncRuntime.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{toSymbolId as e}from\"./arcadeEnvironment.js\";import{ArcadeModule as t}from\"./ArcadeModule.js\";import{ArcadeModuleLoader as n}from\"./ArcadeModuleLoader.js\";import{getNestedOptionalValue as r,geometryMember as o}from\"./containerUtils.js\";import a from\"./Dictionary.js\";import{ArcadeExecutionError as i,ExecutionErrorCodes as l,ensureArcadeExecutionError as s}from\"./executionError.js\";import c from\"./Feature.js\";import{NativeFunction as u,ScopeMarshalledFunction as f,ArcadeFunction as p,wrapModuleScopedResponse as w}from\"./FunctionWrapper.js\";import{G as d,a as h,E as m,i as g,c as y,z as v,o as b,b as S,g as x,r as F,q as I,j as R,D as A,F as M,R as C,I as j,A as N,B as k,x as O,C as E,u as B}from\"../chunks/languageUtils.js\";import{addFunctionDeclaration as K}from\"./treeAnalysis.js\";import{A as L}from\"../chunks/array.js\";import{registerFunctions as U}from\"./functions/date.js\";import{registerFunctions as D}from\"./functions/geomasync.js\";import{registerFunctions as G}from\"./functions/geometry.js\";import{registerFunctions as Z}from\"./functions/maths.js\";import{registerFunctions as P}from\"./functions/stats.js\";import{registerFunctions as q}from\"./functions/string.js\";import T from\"../geometry/Geometry.js\";import W from\"../geometry/SpatialReference.js\";const V=100;async function _(e,t){const n=[];for(let r=0;r<t.arguments.length;r++)n.push(await Q(e,t.arguments[r]));return n}async function z(e,t,n){if(!0===t.preparsed)return n(e,null,t.arguments);return n(e,t,await _(e,t))}class Y extends p{constructor(e,t){super(),this.definition=null,this.context=null,this.definition=e,this.context=t}createFunction(e){return(...t)=>{const n={spatialReference:this.context.spatialReference,console:this.context.console,lrucache:this.context.lrucache,timeZone:this.context.timeZone??null,exports:this.context.exports,libraryResolver:this.context.libraryResolver,interceptor:this.context.interceptor,localScope:{},depthCounter:{depth:e.depthCounter+1},globalScope:this.context.globalScope};if(n.depthCounter.depth>64)throw new i(e,l.MaximumCallDepth,null);return Le(this.definition,n,t,null)}}call(e,t){return J(e,t,((n,r,o)=>{const a={spatialReference:e.spatialReference,services:e.services,console:e.console,libraryResolver:e.libraryResolver,exports:e.exports,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{},abortSignal:e.abortSignal,globalScope:e.globalScope,depthCounter:{depth:e.depthCounter.depth+1}};if(a.depthCounter.depth>64)throw new i(e,l.MaximumCallDepth,t);return Le(this.definition,a,o,t)}))}marshalledCall(e,t,n,r){return r(e,t,(async(o,a,i)=>{const l={spatialReference:e.spatialReference,globalScope:n.globalScope,depthCounter:{depth:e.depthCounter.depth+1},libraryResolver:e.libraryResolver,exports:e.exports,console:e.console,abortSignal:e.abortSignal,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:{}};return i=i.map((t=>!g(t)||t instanceof f?t:w(t,e,r))),w(await Le(this.definition,l,i,t),n,r)}))}}class H extends t{constructor(e){super(),this.source=e}async global(e){const t=this.executingContext.globalScope[e.toLowerCase()];if(t.valueset||(t.value=await Q(this.executingContext,t.node),t.valueset=!0),g(t.value)&&!(t.value instanceof f)){const e=new f;e.fn=t.value,e.parameterEvaluator=J,e.context=this.executingContext,t.value=e}return t.value}setGlobal(e,t){if(g(t))throw new i(null,l.AssignModuleFunction,null);this.executingContext.globalScope[e.toLowerCase()]={value:t,valueset:!0,node:null}}hasGlobal(e){return void 0===this.executingContext.exports[e]&&(e=e.toLowerCase()),void 0!==this.executingContext.exports[e]}async loadModule(e){let t=e.spatialReference;null==t&&(t=new W({wkid:102100})),this.moduleScope=Ge({},e.customfunctions,e.timeZone),this.executingContext={spatialReference:t,services:e.services,libraryResolver:new n(e.libraryResolver._moduleSingletons,this.source.syntax.loadedModules),exports:{},abortSignal:void 0===e.abortSignal||null===e.abortSignal?{aborted:!1}:e.abortSignal,globalScope:this.moduleScope,console:e.console??Ze,lrucache:e.lrucache,timeZone:e.timeZone??null,interceptor:e.interceptor,localScope:null,depthCounter:{depth:1}},await ge(this.executingContext,this.source.syntax)}}async function J(e,t,n){if(!0===t.preparsed)return n(e,null,t.arguments);return n(e,t,await _(e,t))}async function Q(e,t){t.breakpoint&&await t.breakpoint();try{switch(t.type){case\"UpdateExpression\":return await pe(e,t);case\"AssignmentExpression\":return await de(e,t);case\"TemplateLiteral\":return await Oe(e,t);case\"Identifier\":return await Ne(e,t);case\"MemberExpression\":return await Re(e,t);case\"Literal\":return t.value;case\"CallExpression\":return await ke(e,t);case\"UnaryExpression\":return await Ae(e,t);case\"BinaryExpression\":return await Ce(e,t);case\"LogicalExpression\":return await je(e,t);case\"ArrayExpression\":return await Me(e,t);case\"ObjectExpression\":return await $(e,t);default:throw new i(e,l.Unrecognized,t)}}catch(n){throw s(e,t,n)}}async function X(e,t){t.breakpoint&&await t.breakpoint();try{switch(t.type){case\"ImportDeclaration\":return await Se(e,t);case\"ExportNamedDeclaration\":return await xe(e,t);case\"VariableDeclaration\":return await Fe(e,t,0);case\"BlockStatement\":return await ge(e,t);case\"FunctionDeclaration\":return await be(e,t);case\"ReturnStatement\":return await ve(e,t);case\"IfStatement\":return await me(e,t);case\"ExpressionStatement\":return await he(e,t);case\"ForStatement\":return await oe(e,t);case\"WhileStatement\":return await ee(e,t);case\"ForInStatement\":return await fe(e,t);case\"BreakStatement\":return N;case\"EmptyStatement\":return v;case\"ContinueStatement\":return k;default:throw new i(e,l.Unrecognized,t)}}catch(n){throw s(e,t,n)}}async function $(e,t){const n=[];for(let a=0;a<t.properties.length;a++){const r=t.properties[a],o=await Q(e,r.value),i=\"Identifier\"===r.key.type?r.key.name:await Q(e,r.key);n[a]={key:i,value:o}}const r={},o=new Map;for(let a=0;a<n.length;a++){const s=n[a];if(g(s.value))throw new i(e,l.NoFunctionInDictionary,t);if(!1===y(s.key))throw new i(e,l.KeyMustBeString,t);let c=s.key.toString();const u=c.toLowerCase();o.has(u)?c=o.get(u):o.set(u,c),s.value===v?r[c]=null:r[c]=s.value}const s=new a(r);return s.immutable=!1,s}async function ee(e,t){const n={testResult:!0,lastAction:v};if(n.testResult=await Q(e,t.test),!1===n.testResult)return v;if(!0!==n.testResult)throw new i(e,l.BooleanConditionRequired,t);for(;!0===n.testResult&&(n.lastAction=await X(e,t.body),n.lastAction!==N)&&!(n.lastAction instanceof C);)if(n.testResult=await Q(e,t.test),!0!==n.testResult&&!1!==n.testResult)throw new i(e,l.BooleanConditionRequired,t);return n.lastAction instanceof C?n.lastAction:v}async function te(e,t,n){const r=await X(e,t.body);return n.lastAction=r,n.lastAction===N||n.lastAction instanceof C?(n.testResult=!1,n):null!==t.update?(await Q(e,t.update),n):n}async function ne(e,t,n){if(null!==t.test){const r=await Q(e,t.test);if(!0===e.abortSignal?.aborted)throw new i(e,l.Cancelled,t);if(n.testResult=r,!1===n.testResult)return n;if(!0!==n.testResult)throw new i(e,l.BooleanConditionRequired,t);return te(e,t,n)}return te(e,t,n)}function re(e,t,n,r,o,a){try{ne(e,t,n).then((()=>{try{!0===n.testResult?++a>V?(a=0,setTimeout((()=>{re(e,t,n,r,o,a)}),0)):re(e,t,n,r,o,a):n.lastAction instanceof C?r(n.lastAction):r(v)}catch(i){o(i)}}),(e=>{o(e)}))}catch(i){o(i)}}async function oe(e,t){try{return null!==t.init&&(\"VariableDeclaration\"===t.init.type?await X(e,t.init):await Q(e,t.init)),await new Promise(((n,r)=>{re(e,t,{testResult:!0,lastAction:v},(e=>{n(e)}),(e=>{r(e)}),0)}))}catch(n){throw n}}function ae(e,t,n,r,o,a,i,l,s,c){try{if(r<=a)return void l(v);o.value=\"k\"===i?n[a]:a,X(e,t.body).then((u=>{try{u instanceof C?l(u):u===N?l(v):++c>V?(c=0,setTimeout((()=>{ae(e,t,n,r,o,a+1,i,l,s,c)}),0)):ae(e,t,n,r,o,a+1,i,l,s,c)}catch(f){s(f)}}),(e=>{s(e)}))}catch(u){s(u)}}function ie(e,t,n,r,o,a,i,l,s){try{if(n.length()<=o)return void i(v);r.value=\"k\"===a?n.get(o):o,X(e,t.body).then((c=>{c instanceof C?i(c):c===N?i(v):++s>V?(s=0,setTimeout((()=>{ie(e,t,n,r,o+1,a,i,l,s)}),0)):ie(e,t,n,r,o+1,a,i,l,s)}),(e=>{l(e)}))}catch(c){l(c)}}function le(e,t,n,r,o,a){try{if(void 0===a&&(a=\"i\"),0===n.length)return void r.resolve(v);ae(e,t,n,n.length,o,0,a,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(i){r.reject(i)}}function se(e,t,n,r,o,a){try{if(void 0===a&&(a=\"i\"),0===n.length())return void r.resolve(v);ie(e,t,n,o,0,a,(e=>{r.resolve(e)}),(e=>{r.reject(e)}),0)}catch(i){r.reject(i)}}function ce(e,t,n,r,o){try{le(e,t,n.keys(),r,o,\"k\")}catch(a){r.reject(a)}}function ue(e,t,n,r,o,a,i,l){try{e.next().then((s=>{try{if(null===s)a(v);else{const u=c.createFromGraphicLikeObject(s.geometry,s.attributes,r,t.timeZone);u._underlyingGraphic=s,o.value=u;X(t,n.body).then((s=>{try{s===N?a(v):s instanceof C?a(s):++l>V?(l=0,setTimeout((()=>{ue(e,t,n,r,o,a,i,l)}),0)):ue(e,t,n,r,o,a,i,l)}catch(c){i(c)}}),(e=>{i(e)}))}}catch(u){i(u)}}),(e=>{i(e)}))}catch(s){i(s)}}async function fe(t,n){return new Promise(((r,o)=>{Q(t,n.right).then((s=>{try{let c;c=\"VariableDeclaration\"===n.left.type?X(t,n.left):Promise.resolve(),c.then((()=>{try{const c=e(\"VariableDeclaration\"===n.left.type?n.left.declarations[0].id:n.left);let u=null;if(null!=t.localScope&&void 0!==t.localScope[c]&&(u=t.localScope[c]),null===u&&void 0!==t.globalScope[c]&&(u=t.globalScope[c]),null===u)return void o(new i(t,l.InvalidIdentifier,n));b(s)||y(s)?le(t,n,s,{reject:o,resolve:r},u):I(s)?se(t,n,s,{reject:o,resolve:r},u):s instanceof a||F(s)?ce(t,n,s,{reject:o,resolve:r},u):B(s)?ue(s.iterator(t.abortSignal),t,n,s,u,(e=>{r(e)}),(e=>{o(e)}),0):le(t,n,[],{reject:o,resolve:r},u)}catch(c){o(c)}}),o)}catch(c){o(c)}}),o)}))}async function pe(t,n){const r=n.argument;if(\"CallExpression\"===r.type)throw new i(t,l.NeverReach,n);if(\"MemberExpression\"===r.type){const e=await Q(t,r.object);let o,s;if(!0===r.computed)o=await Q(t,r.property);else{if(\"Identifier\"!==r.property.type)throw new i(t,l.Unrecognized,n);o=r.property.name}if(b(e)){if(!S(o))throw new i(t,l.ArrayAccessorMustBeNumber,n);if(o<0&&(o=e.length+o),o<0||o>=e.length)throw new i(t,l.OutOfBounds,n);s=x(e[o]),e[o]=\"++\"===n.operator?s+1:s-1}else if(e instanceof a){if(!1===y(o))throw new i(t,l.KeyAccessorMustBeString,n);if(!0!==e.hasField(o))throw new i(t,l.FieldNotFound,n,{key:o});s=x(e.field(o)),e.setField(o,\"++\"===n.operator?s+1:s-1)}else if(e instanceof H){if(!1===y(o))throw new i(t,l.ModuleAccessorMustBeString,n);if(!0!==e.hasGlobal(o))throw new i(t,l.ModuleExportNotFound,n);s=x(await e.global(o)),e.setGlobal(o,\"++\"===n.operator?s+1:s-1)}else{if(!F(e))throw I(e)?new i(t,l.Immutable,n):new i(t,l.InvalidParameter,n);if(!1===y(o))throw new i(t,l.KeyAccessorMustBeString,n);if(!0!==e.hasField(o))throw new i(t,l.FieldNotFound,n,{key:o});s=x(e.field(o)),e.setField(o,\"++\"===n.operator?s+1:s-1)}return!1===n.prefix?s:\"++\"===n.operator?s+1:s-1}const o=e(r);let s;if(null!=t.localScope&&void 0!==t.localScope[o])return s=x(t.localScope[o].value),t.localScope[o]={value:\"++\"===n.operator?s+1:s-1,valueset:!0,node:n},!1===n.prefix?s:\"++\"===n.operator?s+1:s-1;if(void 0!==t.globalScope[o])return s=x(t.globalScope[o].value),t.globalScope[o]={value:\"++\"===n.operator?s+1:s-1,valueset:!0,node:n},!1===n.prefix?s:\"++\"===n.operator?s+1:s-1;throw new i(t,l.InvalidIdentifier,n)}function we(e,t,n,r,o){switch(t){case\"=\":return e===v?null:e;case\"/=\":return x(n)/x(e);case\"*=\":return x(n)*x(e);case\"-=\":return x(n)-x(e);case\"+=\":return y(n)||y(e)?R(n)+R(e):x(n)+x(e);case\"%=\":return x(n)%x(e);default:throw new i(o,l.UnsupportedOperator,r)}}async function de(t,n){const r=n.left;if(\"MemberExpression\"===r.type){const e=await Q(t,r.object);let o;if(!0===r.computed)o=await Q(t,r.property);else{if(\"Identifier\"!==r.property.type)throw new i(t,l.InvalidIdentifier,n);o=r.property.name}const s=await Q(t,n.right);if(b(e)){if(!S(o))throw new i(t,l.ArrayAccessorMustBeNumber,n);if(o<0&&(o=e.length+o),o<0||o>e.length)throw new i(t,l.OutOfBounds,n);if(o===e.length){if(\"=\"!==n.operator)throw new i(t,l.OutOfBounds,n);e[o]=we(s,n.operator,e[o],n,t)}else e[o]=we(s,n.operator,e[o],n,t)}else if(e instanceof a){if(!1===y(o))throw new i(t,l.KeyAccessorMustBeString,n);if(!0===e.hasField(o))e.setField(o,we(s,n.operator,e.field(o),n,t));else{if(\"=\"!==n.operator)throw new i(t,l.FieldNotFound,n,{key:o});e.setField(o,we(s,n.operator,null,n,t))}}else if(e instanceof H){if(!1===y(o))throw new i(t,l.KeyAccessorMustBeString,n);if(!0!==e.hasGlobal(o))throw new i(t,l.ModuleExportNotFound,n);e.setGlobal(o,we(s,n.operator,await e.global(o),n,t))}else{if(!F(e))throw I(e)?new i(t,l.Immutable,n):new i(t,l.InvalidParameter,n);if(!1===y(o))throw new i(t,l.KeyAccessorMustBeString,n);if(!0===e.hasField(o))e.setField(o,we(s,n.operator,e.field(o),n,t));else{if(\"=\"!==n.operator)throw new i(t,l.FieldNotFound,n,{key:o});e.setField(o,we(s,n.operator,null,n,t))}}return v}const o=e(r);if(null!=t.localScope&&void 0!==t.localScope[o]){const e=await Q(t,n.right);return t.localScope[o]={value:we(e,n.operator,t.localScope[o].value,n,t),valueset:!0,node:n.right},v}if(void 0!==t.globalScope[o]){const e=await Q(t,n.right);return t.globalScope[o]={value:we(e,n.operator,t.globalScope[o].value,n,t),valueset:!0,node:n.right},v}throw new i(t,l.InvalidIdentifier,n)}async function he(e,t){const n=await Q(e,t.expression);return n===v?v:new j(n)}async function me(e,t){const n=await Q(e,t.test);if(!0===n)return X(e,t.consequent);if(!1===n)return null!==t.alternate?X(e,t.alternate):v;throw new i(e,l.BooleanConditionRequired,t)}async function ge(e,t){return ye(e,t,0)}async function ye(e,t,n){if(n>=t.body.length)return v;const r=await X(e,t.body[n]);return r instanceof C||r===N||r===k||n===t.body.length-1?r:ye(e,t,n+1)}async function ve(e,t){if(null===t.argument)return new C(v);const n=await Q(e,t.argument);return new C(n)}async function be(t,n){const r=e(n.id);return t.globalScope[r]={valueset:!0,node:null,value:new Y(n,t)},v}async function Se(t,n){const r=e(n.specifiers[0].local),o=t.libraryResolver.loadLibrary(r);let a;return t.libraryResolver._moduleSingletons?.has(o.uri)?a=t.libraryResolver._moduleSingletons.get(o.uri):(a=new H(o),await a.loadModule(t),t.libraryResolver._moduleSingletons?.set(o.uri,a)),t.globalScope[r]={value:a,valueset:!0,node:n},v}async function xe(t,n){if(await X(t,n.declaration),\"FunctionDeclaration\"===n.declaration.type)t.exports[e(n.declaration.id)]=\"function\";else if(\"VariableDeclaration\"===n.declaration.type)for(const r of n.declaration.declarations)t.exports[e(r.id)]=\"variable\";return v}async function Fe(e,t,n){return n>=t.declarations.length?v:(await Ie(e,t.declarations[n]),n===t.declarations.length-1||await Fe(e,t,n+1),v)}async function Ie(t,n){let r=null;if(r=null===n.init?null:await Q(t,n.init),null!==t.localScope){if(r===v&&(r=null),\"Identifier\"!==n.id.type)throw new i(t,l.InvalidIdentifier,n);const o=e(n.id);return void(null!=t.localScope&&(t.localScope[o]={value:r,valueset:!0,node:n.init}))}if(\"Identifier\"!==n.id.type)throw new i(t,l.InvalidIdentifier,n);const o=e(n.id);r===v&&(r=null),t.globalScope[o]={value:r,valueset:!0,node:n.init}}async function Re(e,t){const n=await Q(e,t.object);if(null===n)throw new i(e,l.MemberOfNull,t);if(!1===t.computed){if(\"Identifier\"===t.property.type){if(n instanceof a||F(n))return n.field(t.property.name);if(n instanceof T)return o(n,t.property.name,e,t);if(n instanceof H){if(!n.hasGlobal(t.property.name))throw new i(e,l.InvalidIdentifier,t);return n.global(t.property.name)}throw new i(e,l.InvalidMemberAccessKey,t)}throw new i(e,l.InvalidMemberAccessKey,t)}let r=await Q(e,t.property);if(n instanceof a||F(n)){if(y(r))return n.field(r);throw new i(e,l.InvalidMemberAccessKey,t)}if(n instanceof H){if(y(r))return n.global(r);throw new i(e,l.InvalidMemberAccessKey,t)}if(n instanceof T){if(y(r))return o(n,r,e,t);throw new i(e,l.InvalidMemberAccessKey,t)}if(b(n)){if(S(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length+r),r>=n.length||r<0)throw new i(e,l.OutOfBounds,t);return n[r]}throw new i(e,l.InvalidMemberAccessKey,t)}if(I(n)){if(S(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length()+r),r>=n.length()||r<0)throw new i(e,l.OutOfBounds,t);return n.get(r)}throw new i(e,l.InvalidMemberAccessKey,t)}if(y(n)){if(S(r)&&isFinite(r)&&Math.floor(r)===r){if(r<0&&(r=n.length+r),r>=n.length||r<0)throw new i(e,l.OutOfBounds,t);return n[r]}throw new i(e,l.InvalidMemberAccessKey,t)}throw new i(e,l.InvalidMemberAccessKey,t)}async function Ae(e,t){const n=await Q(e,t.argument);if(h(n)){if(\"!\"===t.operator)return!n;if(\"-\"===t.operator)return-1*x(n);if(\"+\"===t.operator)return 1*x(n);if(\"~\"===t.operator)return~x(n);throw new i(e,l.UnsupportedUnaryOperator,t)}if(\"-\"===t.operator)return-1*x(n);if(\"+\"===t.operator)return 1*x(n);if(\"~\"===t.operator)return~x(n);throw new i(e,l.UnsupportedUnaryOperator,t)}async function Me(e,t){const n=[];for(let r=0;r<t.elements.length;r++)n.push(await Q(e,t.elements[r]));for(let r=0;r<n.length;r++){if(g(n[r]))throw new i(e,l.NoFunctionInArray,t);n[r]===v&&(n[r]=null)}return n}async function Ce(e,t){const n=await Q(e,t.left),r=await Q(e,t.right);switch(t.operator){case\"|\":case\"<<\":case\">>\":case\">>>\":case\"^\":case\"&\":return M(x(n),x(r),t.operator);case\"==\":return m(n,r);case\"!=\":return!m(n,r);case\"<\":case\">\":case\"<=\":case\">=\":return A(n,r,t.operator);case\"+\":return y(n)||y(r)?R(n)+R(r):x(n)+x(r);case\"-\":return x(n)-x(r);case\"*\":return x(n)*x(r);case\"/\":return x(n)/x(r);case\"%\":return x(n)%x(r);default:throw new i(e,l.UnsupportedOperator,t)}}async function je(e,t){const n=await Q(e,t.left);if(!h(n))throw new i(e,l.LogicalExpressionOnlyBoolean,t);switch(t.operator){case\"||\":{if(!0===n)return n;const r=await Q(e,t.right);if(h(r))return r;throw new i(e,l.LogicExpressionOrAnd,t)}case\"&&\":{if(!1===n)return n;const r=await Q(e,t.right);if(h(r))return r;throw new i(e,l.LogicExpressionOrAnd,t)}default:throw new i(e,l.LogicExpressionOrAnd,t)}}async function Ne(t,n){const r=e(n);if(null!=t.localScope&&void 0!==t.localScope[r]){const e=t.localScope[r];if(!0===e.valueset)return e.value;if(null!==e.d)return e.d;e.d=Q(t,e.node);const n=await e.d;return e.value=n,e.valueset=!0,n}if(void 0!==t.globalScope[r]){const e=t.globalScope[r];if(!0===e.valueset)return e.value;if(null!==e.d)return e.d;e.d=Q(t,e.node);const n=await e.d;return e.value=n,e.valueset=!0,n}throw new i(t,l.InvalidIdentifier,n)}async function ke(t,n){if(\"MemberExpression\"===n.callee.type){const e=await Q(t,n.callee.object);if(!(e instanceof H))throw new i(t,l.FunctionNotFound,n);const r=!1===n.callee.computed?n.callee.property.name:await Q(t,n.callee.property);if(!e.hasGlobal(r))throw new i(t,l.FunctionNotFound,n);const o=await e.global(r);if(!g(o))throw new i(t,l.CallNonFunction,n);return o.call(t,n)}if(\"Identifier\"!==n.callee.type)throw new i(t,l.FunctionNotFound,n);const r=e(n.callee);if(null!=t.localScope&&void 0!==t.localScope[r]){const e=t.localScope[r];if(g(e.value))return e.value.call(t,n);throw new i(t,l.CallNonFunction,n)}if(void 0!==t.globalScope[r]){const e=t.globalScope[r];if(g(e.value))return e.value.call(t,n);throw new i(t,l.CallNonFunction,n)}throw new i(t,l.FunctionNotFound,n)}async function Oe(e,t){let n=\"\",r=0;for(const o of t.quasis)if(n+=o.value?o.value.cooked:\"\",!1===o.tail){if(t.expressions[r]){const o=await Q(e,t.expressions[r]);if(g(o))throw new i(e,l.NoFunctionInTemplateLiteral,t);n+=R(o)}r++}return n}const Ee={};async function Be(e,t,n,r){const o=await Q(e,t.arguments[n]);if(m(o,r))return Q(e,t.arguments[n+1]);const a=t.arguments.length-n;return 1===a?Q(e,t.arguments[n]):2===a?null:3===a?Q(e,t.arguments[n+2]):Be(e,t,n+2,r)}async function Ke(e,t,n,r){if(!0===r)return Q(e,t.arguments[n+1]);if(3===t.arguments.length-n)return Q(e,t.arguments[n+2]);const o=await Q(e,t.arguments[n+2]);if(!1===h(o))throw new i(e,l.ModuleExportNotFound,t.arguments[n+2]);return Ke(e,t,n+2,o)}async function Le(t,n,r,o){const a=t.body;if(r.length!==t.params.length)throw new i(n,l.WrongNumberOfParameters,null);for(let i=0;i<r.length;i++){const o=t.params[i];\"Identifier\"===o.type&&null!=n.localScope&&(n.localScope[e(o)]={d:null,value:r[i],valueset:!0,node:null})}const s=await X(n,a);if(s instanceof C)return s.value;if(s===N)throw new i(n,l.UnexpectedToken,o);if(s===k)throw new i(n,l.UnexpectedToken,o);return s instanceof j?s.value:s}U(Ee,z),q(Ee,z),Z(Ee,z),G(Ee,z),P(Ee,z),D({functions:Ee,compiled:!1,signatures:null,evaluateIdentifier:null,mode:\"async\",standardFunction:z,standardFunctionAsync:J}),Ee.iif=async function(e,t){d(null===t.arguments?[]:t.arguments,3,3,e,t);const n=await Q(e,t.arguments[0]);if(!1===h(n))throw new i(e,l.BooleanConditionRequired,t);return Q(e,n?t.arguments[1]:t.arguments[2])},Ee.defaultvalue=async function(e,t){d(null===t.arguments?[]:t.arguments,2,3,e,t);const n=await Q(e,t.arguments[0]);if(3===t.arguments.length){const o=await Q(e,t.arguments[1]),a=r(n,o);return null!=a&&\"\"!==a?a:Q(e,t.arguments[2])}return null==n||\"\"===n?Q(e,t.arguments[1]):n},Ee.decode=async function(e,t){if(t.arguments.length<2)throw new i(e,l.WrongNumberOfParameters,t);if(2===t.arguments.length)return Q(e,t.arguments[1]);if((t.arguments.length-1)%2==0)throw new i(e,l.WrongNumberOfParameters,t);return Be(e,t,1,await Q(e,t.arguments[0]))},Ee.when=async function(e,t){if(t.arguments.length<3)throw new i(e,l.WrongNumberOfParameters,t);if(t.arguments.length%2==0)throw new i(e,l.WrongNumberOfParameters,t);const n=await Q(e,t.arguments[0]);if(!1===h(n))throw new i(e,l.BooleanConditionRequired,t.arguments[0]);return Ke(e,t,0,n)};const Ue={fixSpatialReference:O,parseArguments:_,standardFunction:z,standardFunctionAsync:J,evaluateIdentifier:Ne};for(const We in Ee)Ee[We]={value:new u(Ee[We]),valueset:!0,node:null};const De=function(){};function Ge(e,t,n){const r=new De;null==e&&(e={}),null==t&&(t={});const o=new a({newline:\"\\n\",tab:\"\\t\",singlequote:\"'\",doublequote:'\"',forwardslash:\"/\",backwardslash:\"\\\\\"});o.immutable=!1,r.textformatting={value:o,valueset:!0,node:null};for(const a in t)r[a]={value:new u(t[a]),native:!0,valueset:!0,node:null};for(const a in e)r[a]={value:E(e[a])?c.createFromGraphic(e[a],n):e[a],valueset:!0,node:null};return r}function Ze(e){console.log(e)}De.prototype=Ee,De.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null},De.prototype.pi={value:Math.PI,valueset:!0,node:null};const Pe=Ue;function qe(e){const t={mode:\"async\",compiled:!1,functions:{},signatures:[],standardFunction:z,standardFunctionAsync:J,evaluateIdentifier:Ne};for(let n=0;n<e.length;n++)e[n].registerFunctions(t);for(const n in t.functions)Ee[n]={value:new u(t.functions[n]),valueset:!0,node:null},De.prototype[n]=Ee[n];for(let n=0;n<t.signatures.length;n++)K(t.signatures[n],\"async\")}async function Te(e,t){let r=t.spatialReference;null==r&&(r=new W({wkid:102100}));let o=null;e.usesModules&&(o=new n(new Map,e.loadedModules));const a=Ge(t.vars,t.customfunctions,t.timeZone),s={spatialReference:r,services:t.services,exports:{},libraryResolver:o,abortSignal:void 0===t.abortSignal||null===t.abortSignal?{aborted:!1}:t.abortSignal,globalScope:a,console:t.console??Ze,timeZone:t.timeZone??null,lrucache:t.lrucache,interceptor:t.interceptor,localScope:null,depthCounter:{depth:1}},c=await ge(s,e);if(c instanceof C||c instanceof j){const e=c.value;if(e===v)return null;if(g(e))throw new i(s,l.IllegalResult,null);return e}if(c===v)return null;if(c===N)throw new i(s,l.IllegalResult,null);if(c===k)throw new i(s,l.IllegalResult,null);throw new i(s,l.NeverReach,null)}qe([L]);export{Te as executeScript,qe as extend,Pe as functionHelper};\n"],"names":[],"sourceRoot":""}