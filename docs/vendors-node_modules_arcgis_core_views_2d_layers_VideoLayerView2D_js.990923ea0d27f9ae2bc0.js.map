{"version":3,"file":"vendors-node_modules_arcgis_core_views_2d_layers_VideoLayerView2D_js.990923ea0d27f9ae2bc0.js","mappings":"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","sources":["webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/layers/support/TelemetryDisplay.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/engine/webgl/OverlayContainer.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/engine/webgl/OverlayMultipoint.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/GraphicInstanceStore.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/overlay/OverlayTechnique.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/shaders/OverlayShader.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/layers/VideoLayerView2D.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/layers/graphics/AGraphicContainer.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicBoundsRenderer.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/layers/graphics/GraphicContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../chunks/tslib.es6.js\";import{ClonableMixin as e}from\"../../core/Clonable.js\";import{JSONSupport as r}from\"../../core/JSONSupport.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";let p=class extends(e(r)){constructor(o){super(o),this.frame=null,this.frameCenter=null,this.frameOutline=null,this.lineOfSight=null,this.sensorLocation=null,this.sensorTrail=null}};o([t({type:Boolean})],p.prototype,\"frame\",void 0),o([t({type:Boolean})],p.prototype,\"frameCenter\",void 0),o([t({type:Boolean})],p.prototype,\"frameOutline\",void 0),o([t({type:Boolean})],p.prototype,\"lineOfSight\",void 0),o([t({type:Boolean})],p.prototype,\"sensorLocation\",void 0),o([t({type:Boolean})],p.prototype,\"sensorTrail\",void 0),p=o([s(\"esri.layers.support.TelemetryDisplay\")],p);const l=p;export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{toRadian as t}from\"../../../../core/libs/gl-matrix-2/math/common.js\";import{identity as e,multiply as r,translate as o,scale as i,rotate as s}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/mat3f32.js\";import{fromValues as n}from\"../../../../core/libs/gl-matrix-2/factories/vec2f32.js\";import{fromValues as l}from\"../../../../core/libs/gl-matrix-2/factories/vec3f32.js\";import{normalizeMapX as c}from\"../../../../geometry/support/normalizeUtils.js\";import{getInfo as h}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{getWorldWidth as m}from\"../../viewpointUtils.js\";import{WGLDrawPhase as d}from\"./enums.js\";import p from\"./WGLContainer.js\";import{OverlayTechnique as f}from\"./shaderGraph/techniques/overlay/OverlayTechnique.js\";class u extends p{constructor(){super(...arguments),this._viewStateId=-1,this._dvsMat3=a(),this._overlayTechnique=new f}get dvsMat3(){return this._dvsMat3}beforeRender(t){this._updateMatrices(t),this._updateOverlays(t,this.children);for(const e of this.children)e.beforeRender(t)}doRender(t){if(t.drawPhase!==d.MAP||!this.visible)return;super.doRender(t);const e=this._overlayTechnique;for(const r of this.children)r.draw(t,e)}onDetach(){this._overlayTechnique.shutdown()}_updateMatrices(a){const{state:h}=a,{id:m,size:d,pixelRatio:p,resolution:f,rotation:u,viewpoint:v,displayMat3:_}=h;if(this._viewStateId===m)return;const M=t(u),g=p*d[0],y=p*d[1];this._localOrigin=v.targetGeometry.clone();const{x:w,y:x}=this._localOrigin,b=c(w,h.spatialReference);this._localOrigin.x=b,this._localOrigin.y=x;const j=f*g,O=f*y,R=e(this._dvsMat3);r(R,R,_),o(R,R,n(g/2,y/2)),i(R,R,l(g/j,-y/O,1)),s(R,R,-M),this._viewStateId=m}_updateOverlays(e,r){const{state:o}=e,{rotation:i,spatialReference:s,worldScreenWidth:a,size:n,viewpoint:l}=o,c=this._localOrigin;let d,p=0;const f=h(s);if(f&&s.isWrappable){const e=n[0],r=n[1],c=t(i),h=Math.abs(Math.cos(c)),u=Math.abs(Math.sin(c)),v=Math.round(e*h+r*u),[_,M]=f.valid,g=m(s),{x:y,y:w}=l.targetGeometry,x=[y,w],b=[0,0];o.toScreen(b,x);const j=[0,0];let O;O=v>a?.5*a:.5*v;const R=Math.floor((y+.5*g)/g),q=_+R*g,S=M+R*g,G=[b[0]+O,0];o.toMap(j,G),j[0]>S&&(p=g),G[0]=b[0]-O,o.toMap(j,G),j[0]<q&&(p=-g),d={worldWidth:g,xBounds:[_,M]}}for(const t of r)t.updateDrawCoords(c,p,s,d)}}export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../geometry.js\";import{on as t}from\"../../../../core/events.js\";import e from\"../../../../core/Handles.js\";import{disposeMaybe as r}from\"../../../../core/maybe.js\";import{when as i,initial as o}from\"../../../../core/reactiveUtils.js\";import{createScreenPoint as s}from\"../../../../core/screenUtils.js\";import{create as n}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{project as a}from\"../../../../geometry/projection.js\";import{DisplayObject as h}from\"../DisplayObject.js\";import l from\"../../../layers/support/Geometry.js\";import{TextureWrapMode as u}from\"../../../webgl/enums.js\";import{Texture as m}from\"../../../webgl/Texture.js\";import{TextureDescriptor as d}from\"../../../webgl/TextureDescriptor.js\";import p from\"../../../../geometry/Polygon.js\";import c from\"../../../../geometry/Point.js\";const f=2;class x extends h{constructor(r){super(),this.element=r,this._handles=new e,this.isWrapAround=!1,this.perspectiveTransform=n(),this.wrapAroundShift=0,this.clipGeometry=null,this._handles.add(i((()=>this.element),(()=>{const e=this.element;this.ready(),e&&this._handles.add(t(e,\"play\",(()=>this.requestRender())))}),o))}getMesh(t){throw new Error(\"Method not implemented.\")}destroy(){this._handles.destroy(),this.texture=r(this.texture)}get textureSize(){if(!this.texture)return[1,1];const t=this.texture.descriptor;return[t.width,t.height]}get dvsMat3(){return this.parent.dvsMat3}beforeRender(t){const e=this.element;if(null==e)return;const{context:r}=t,{videoWidth:i,videoHeight:o}=e;if(0!==i&&0!==o){if(this.texture)e.paused||this.texture.setData(e);else{const t=new d;t.wrapMode=u.CLAMP_TO_EDGE,t.preMultiplyAlpha=!0,t.width=i,t.height=o,this.texture=new m(r,t,e)}e.paused||(this.texture.generateMipmap(),this.requestRender()),super.beforeRender(t)}}_createTransforms(){return null}updateDrawCoords(t,e,r,i){const o=this.element,s=this._getFrameInfo();if(!o||!s)return;this._initializeData(t,s,r);const{controlPoints:n,horizon:h}=s,u=Math.sqrt(n.length),m=u,{x:d,y:c}=t,x=this._vertices,y=n[0],g=n[u-1],P=n[(m-1)*u],w=n[(m-1)*u+u-1],_=a(h?h[0].mapPoint:y.mapPoint,r),v=a(h?h[1].mapPoint:g.mapPoint,r),j=a(P.mapPoint,r),A=a(w.mapPoint,r);this.clipGeometry=h?new l({geometry:p.fromJSON({rings:[[[j.x,j.y],[A.x,A.y],[v.x,v.y],[_.x,_.y],[j.x,j.y]]],spatialReference:r})}):null;for(let l=0;l<n.length;l++){const t=n[l],{sourcePoint:e,mapPoint:i}=t;if(null==e||null==i)continue;const o=a(i,r);x[l*f+0]=o.x-d,x[l*f+1]=o.y-c}let M=e;if(i){const t=Math.min(_.x,v.x,j.x,A.x),e=Math.max(_.x,v.x,j.x,A.x),{worldWidth:r,xBounds:o}=i,[s,n]=o;t<s&&e>s?M=r:e>n&&t<n&&(M=-r)}this.wrapAroundShift=M,this.isWrapAround=0!==M}draw(t,e){this.isReady&&this._vertices&&this._indices&&this._texCoords?e.render(t,{transform:{dvs:this.dvsMat3},config:{perspective:this.perspectiveTransform,texSize:this.textureSize,wrapAroundShift:this.wrapAroundShift,isWrapAround:this.isWrapAround,opacity:this.opacity,texture:{texture:this.texture,unit:0}},position:this._vertices,tex:this._texCoords,index:this._indices}):this.requestRender()}_initializeData(t,e,r){if(null!=this._vertices&&null!=this._indices)return;const{controlPoints:i}=e,o=Math.sqrt(i.length),s=o,n=new Float32Array(f*i.length),h=new Uint16Array(2*i.length);for(let m=0;m<i.length;m++){const e=i[m],{sourcePoint:o,mapPoint:s}=e;if(null==o||null==s)continue;const l=a(s,r);n[m*f+0]=l.x-t.x,n[m*f+1]=l.y-t.y,h[2*m+0]=o.x,h[2*m+1]=o.y}const l=new Uint16Array(s*o+(s-2)*(o+2));let u=0;for(let a=0;a<s;a++){for(let t=0;t<o;t++)l[u++]=a*o+t,l[u++]=(a+1)*o+t;a<s-2&&(l[u++]=(a+1)*o+(o-1),l[u++]=(a+1)*o)}this._vertices=n,this._texCoords=h,this._indices=l}_getFrameInfo(){if(!this.groundControlPoints)return null;const t=this._getFrameControlPoints(),e=this.frameHorizonPoints;let r=null;if(e){const t=e.startX,i=e.startY,o=e.endX,n=e.endY;r=[{sourcePoint:s(t,i),mapPoint:new c(e.startLongitude,e.startLatitude)},{sourcePoint:s(o,n),mapPoint:new c(e.endLongitude,e.endLatitude)}]}return{controlPoints:t,horizon:r}}_getFrameControlPoints(){const t=this.groundControlPoints,e=t?.length;if(!e)return[];const r=new Array(e),i=Math.max(...t.map((({x:t})=>t))),o=this.element.videoWidth/i;for(let n=0;n<e;n++){const{x:e,y:i,lat:a,lon:h}=t[n];r[n]={sourcePoint:s(e*o,-i*o),mapPoint:new c(h,a)}}return r}}export{x as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{FeatureTechniqueInstance as e}from\"./TechniqueInstance.js\";import{Techniques as i}from\"./TechniqueRegistry.js\";import{castInstanceId as t}from\"./mesh/instanceIdUtils.js\";let n=0;function a(i,a){return new e(t(n++),i,a)}const l={visualVariableColor:null,visualVariableOpacity:null,visualVariableSizeMinMaxValue:null,visualVariableSizeScaleStops:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null,visualVariableRotation:null,visualVariableSizeOutlineScaleStops:null};class o{constructor(){this.instances={fill:a(i.fill,{uniforms:l,optionalAttributes:{zoomRange:!0}}),marker:a(i.marker,{uniforms:l,optionalAttributes:{zoomRange:!0}}),line:a(i.line,{uniforms:l,optionalAttributes:{zoomRange:!0}}),text:a(i.text,{uniforms:l,optionalAttributes:{zoomRange:!0,referenceSymbol:!1,clipAngle:!1}}),complexFill:a(i.complexFill,{uniforms:l,optionalAttributes:{zoomRange:!0}}),texturedLine:a(i.texturedLine,{uniforms:l,optionalAttributes:{zoomRange:!0}}),animatedMarker:a(i.animatedMarker,{uniforms:l,optionalAttributes:{zoomRange:!0}})},this._instancesById=Object.values(this.instances).reduce(((e,i)=>(e.set(i.instanceId,i),e)),new Map)}getInstance(e){return this._instancesById.get(e)}}export{o as GraphicInstanceStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{destroyMaybe as e}from\"../../../../../../../core/maybe.js\";import{Mesh as t}from\"../../../meshing/Mesh.js\";import{simplePipelineState as s}from\"../../utils.js\";import{Technique as i}from\"../Technique.js\";import{TechniqueType as o}from\"../TechniqueType.js\";import{OverlayShader as r}from\"../shaders/OverlayShader.js\";import{CompareFunction as n,StencilOperation as a,DataType as p,PrimitiveType as h}from\"../../../../../../webgl/enums.js\";class u extends i{constructor(){super(...arguments),this.type=o.Overlay,this._mesh=null,this.shaders={overlay:new r}}render(e,t){const{context:i,painter:o}=e,r=this._getMesh(e,t);o.setPipelineState(s);const{isWrapAround:p,wrapAroundShift:h}=t.config,u={...t.config,wrapAroundShift:0},m={shader:this.shaders.overlay,uniforms:{transform:t.transform,config:u},defines:null,optionalAttributes:null,useComputeBuffer:!1};o.setPipelineState({...s,stencil:{write:!1,test:{compare:n.EQUAL,op:{fail:a.KEEP,zFail:a.KEEP,zPass:a.REPLACE},ref:0,mask:255}}}),o.submitDrawMeshUntyped(i,m,r),p&&(u.wrapAroundShift=h,o.submitDrawMeshUntyped(i,m,r))}shutdown(){e(this._mesh)}_getMesh(e,s){const{context:i}=e;if(this._mesh){const e=this._mesh.vertexBuffers.get(\"positions\");if(!e)throw new Error(\"Buffer not found\");e.setData(s.position)}else{const e=null!=s.index?s.index.length:s.position.length/2;this._mesh=new t(i,{vertex:{positions:s.position,uvs:s.tex},index:null!=s.index?{index:s.index}:void 0,groups:[{attributes:[{name:\"pos\",count:2,type:p.FLOAT,location:0,vertex:\"positions\",stride:8,offset:0},{name:\"tex\",count:2,type:p.UNSIGNED_SHORT,location:1,vertex:\"uvs\",stride:4,offset:0}],index:null!=s.index?\"index\":void 0,primitive:h.TRIANGLE_STRIP}],parts:[{group:0,start:0,count:e}]})}return this._mesh}}export{u as OverlayTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t,a as o}from\"../../../../../../../chunks/tslib.es6.js\";import{location as e,uniform as r,GraphShaderModule as p,VertexInput as i,UniformGroup as s,FragmentOutput as n,input as d,FragmentInput as a}from\"../../GraphShaderModule.js\";import{Float as l,dot as v,Vec3 as c,Vec2 as y,Vec4 as u,texture2D as f,Mat3 as g,Sampler2D as m}from\"../../graph/glsl.js\";class x extends i{}t([e(0,y)],x.prototype,\"pos\",void 0),t([e(1,y)],x.prototype,\"uv\",void 0);class h extends a{}class w extends s{}t([r(g)],w.prototype,\"dvs\",void 0);class S extends s{}t([r(y)],S.prototype,\"perspective\",void 0),t([r(y)],S.prototype,\"texSize\",void 0),t([r(l)],S.prototype,\"wrapAroundShift\",void 0),t([r(l)],S.prototype,\"opacity\",void 0),t([r(m)],S.prototype,\"texture\",void 0);class j extends p{vertex(t){const o=t.uv.divide(this.config.texSize),e=new l(1).add(v(o,this.config.perspective)),r=new c(t.pos.add(new y(this.config.wrapAroundShift,0)),1),p=this.transform.dvs.multiply(r);return{uv:o,glPosition:new u(p.xy.multiply(e),0,e)}}fragment(t){const o=f(this.config.texture,t.uv).multiply(this.config.opacity),e=new n;return e.glFragColor=o,e}}t([r(w)],j.prototype,\"transform\",void 0),t([r(S)],j.prototype,\"config\",void 0),t([o(0,d(x))],j.prototype,\"vertex\",null),t([o(0,d(h))],j.prototype,\"fragment\",null);export{j as OverlayShader};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import i from\"../../../Color.js\";import r from\"../../../Graphic.js\";import\"../../../symbols.js\";import{destroyMaybe as t}from\"../../../core/maybe.js\";import{watch as s,initial as l}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../layers/GraphicsLayer.js\";import h from\"../../../layers/support/TelemetryDisplay.js\";import m from\"../engine/webgl/OverlayContainer.js\";import y from\"../engine/webgl/OverlayMultipoint.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";import c from\"./graphics/GraphicContainer.js\";import f from\"./graphics/GraphicsView2D.js\";import d from\"../../layers/LayerView.js\";import g from\"../../../symbols/SimpleFillSymbol.js\";import u from\"../../../symbols/SimpleLineSymbol.js\";import b from\"../../../symbols/SimpleMarkerSymbol.js\";const v=new i([255,127,0]);let _=class extends(p(d)){constructor(){super(...arguments),this._graphicsLayer=new n,this._frameOutlineGraphic=new r({symbol:new g({outline:{type:\"simple-line\",color:v}})}),this._sensorTrailGraphic=new r({symbol:new u({color:v})}),this._lineOfSightGraphic=new r({symbol:new u({color:v})}),this._sensorLocationGraphic=new r({symbol:new b({color:v})}),this._frameCenterGraphic=new r({symbol:new b({color:v,style:\"cross\"})}),this._overlayContainer=null,this.layer=null,this.symbolColor=v,this.visibleTelemetryElements=null}destroy(){this._graphicsLayer=t(this._graphicsLayer)}initialize(){this.addHandles(s((()=>this.symbolColor),(()=>{this._frameOutlineGraphic.symbol.outline.color=this.symbolColor,this._sensorTrailGraphic.symbol.color=this.symbolColor,this._lineOfSightGraphic.symbol.color=this.symbolColor,this._sensorLocationGraphic.symbol.color=this.symbolColor,this._frameCenterGraphic.symbol.color=this.symbolColor}),l)),this._graphicsLayer.graphics.addMany([this._frameOutlineGraphic,this._sensorTrailGraphic,this._lineOfSightGraphic,this._sensorLocationGraphic,this._frameCenterGraphic]),this.visibleTelemetryElements=new h({frame:this.layer.telemetryDisplay?.frame??!1,frameCenter:this.layer.telemetryDisplay?.frameCenter??!0,frameOutline:this.layer.telemetryDisplay?.frameOutline??!0,lineOfSight:this.layer.telemetryDisplay?.lineOfSight??!0,sensorLocation:this.layer.telemetryDisplay?.sensorLocation??!0,sensorTrail:this.layer.telemetryDisplay?.sensorTrail??!0})}attach(){this._overlayContainer=new m,this.container.addChild(this._overlayContainer),this._addOverlayMultipoint(),this.graphicsView=new f({requestUpdateCallback:()=>this.requestUpdate(),view:this.view,graphics:this._graphicsLayer.graphics,container:new c(this.view.featuresTilingScheme)}),this.container.addChild(this.graphicsView.container),this.addAttachHandles(this._graphicsLayer.on(\"graphic-update\",this.graphicsView.graphicUpdateHandler)),this.addAttachHandles([s((()=>[this.layer.telemetryDisplay?.frame,this.layer.telemetryDisplay?.frameCenter,this.layer.telemetryDisplay?.frameOutline,this.layer.telemetryDisplay?.sensorLocation,this.layer.telemetryDisplay?.sensorTrail,this.layer.telemetryDisplay?.lineOfSight]),(()=>this._updateVisibleTelemetryElements()),l),s((()=>[this.layer.telemetry,this.visibleTelemetryElements?.frameCenter,this.visibleTelemetryElements?.frameOutline,this.visibleTelemetryElements?.sensorLocation,this.visibleTelemetryElements?.sensorTrail,this.visibleTelemetryElements?.lineOfSight]),(()=>this._updateGraphicGeometries()),l)])}detach(){this._overlayContainer.removeAllChildren(),this.container.removeAllChildren(),this.graphicsView=t(this.graphicsView)}supportsSpatialReference(e){return!0}moveEnd(){}viewChange(){this.graphicsView.viewChange()}update(e){this.graphicsView.processUpdate(e)}isUpdating(){return!this.graphicsView||this.graphicsView.updating}_updateVisibleTelemetryElements(){this.visibleTelemetryElements&&this.layer.telemetryDisplay&&(this.visibleTelemetryElements.frame=this.layer.telemetryDisplay.frame,this.visibleTelemetryElements.frameCenter=this.layer.telemetryDisplay.frameCenter,this.visibleTelemetryElements.frameOutline=this.layer.telemetryDisplay.frameOutline,this.visibleTelemetryElements.lineOfSight=this.layer.telemetryDisplay.lineOfSight,this.visibleTelemetryElements.sensorLocation=this.layer.telemetryDisplay.sensorLocation,this.visibleTelemetryElements.sensorTrail=this.layer.telemetryDisplay.sensorTrail)}_updateGraphicGeometries(){const{telemetry:e}=this.layer,{visibleTelemetryElements:i}=this;e&&i&&(i.frameOutline&&e.frameOutline?this._frameOutlineGraphic.geometry=this.layer.telemetry.frameOutline:this._frameOutlineGraphic.geometry=null,i.sensorTrail&&e.sensorTrail?this._sensorTrailGraphic.geometry=this.layer.telemetry.sensorTrail:this._sensorTrailGraphic.geometry=null,i.lineOfSight&&e.lineOfSight?this._lineOfSightGraphic.geometry=this.layer.telemetry.lineOfSight:this._lineOfSightGraphic.geometry=null,i.sensorLocation&&e.sensorLocation?this._sensorLocationGraphic.geometry=this.layer.telemetry.sensorLocation:this._sensorLocationGraphic.geometry=null,i.frameCenter&&e.frameCenter?this._frameCenterGraphic.geometry=this.layer.telemetry.frameCenter:this._frameCenterGraphic.geometry=null)}async _addOverlayMultipoint(){if(!this.layer.videoElement)return;const e=new y(this.layer.videoElement);this.addAttachHandles([s((()=>[this.layer.frameHorizonPoints,this.layer.groundControlPoints]),(()=>{const{visibleTelemetryElements:i}=this;i?.frame?(e.frameHorizonPoints=this.layer.frameHorizonPoints,e.groundControlPoints=this.layer.groundControlPoints,e.opacity=1):e.opacity=0}),l)]),this._overlayContainer.addChild(e),this.view.stage.requestRender()}};e([a()],_.prototype,\"graphicsView\",void 0),e([a()],_.prototype,\"layer\",void 0),e([a()],_.prototype,\"symbolColor\",void 0),e([a({type:h})],_.prototype,\"visibleTelemetryElements\",void 0),_=e([o(\"esri.views.2d.layers.VideoLayerView2D\")],_);const C=_;export{C as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{destroyMaybe as e}from\"../../../../core/maybe.js\";import{AFeatureContainer as t}from\"../../engine/AFeatureContainer.js\";import{FeatureBatchingStrategy as n}from\"../../engine/webgl/enums.js\";import{GraphicInstanceStore as r}from\"../../engine/webgl/shaderGraph/techniques/GraphicInstanceStore.js\";import s from\"./GraphicBoundsRenderer.js\";class i extends t{constructor(e){super(e),this._instanceStore=new r,this.checkHighlight=()=>!0}destroy(){super.destroy(),this._boundsRenderer=e(this._boundsRenderer)}get instanceStore(){return this._instanceStore}enableRenderingBounds(e){this._boundsRenderer=new s(e),this.requestRender()}get hasHighlight(){return this.checkHighlight()}onTileData(e,t){e.onMessage(t),this.contains(e)||this.addChild(e),this.requestRender()}_renderChildren(e,t){e.selection=t;for(const r of this.children){if(!r.visible)continue;const t=r.getDisplayList(this._instanceStore,n.STRICT_ORDER);t?.render(e)}}}export{i as AGraphicContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as t}from\"../../../../core/maybe.js\";import{identity as e,multiply as r,translate as i,scale as s,rotate as o}from\"../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/mat3f32.js\";import{fromValues as n}from\"../../../../core/libs/gl-matrix-2/factories/vec2f32.js\";import{fromValues as l}from\"../../../../core/libs/gl-matrix-2/factories/vec3f32.js\";import{normalizeMapX as f}from\"../../../../geometry/support/normalizeUtils.js\";import{DisplayObject as m}from\"../../engine/DisplayObject.js\";import{createProgramDescriptor as c}from\"../../engine/webgl/Utils.js\";import{BufferObject as u}from\"../../../webgl/BufferObject.js\";import{BlendFactor as _,PrimitiveType as h,DataType as p,Usage as d}from\"../../../webgl/enums.js\";import{VertexArrayObject as g}from\"../../../webgl/VertexArrayObject.js\";const v=Math.PI/180,x=4;class b extends m{constructor(t){super(),this._program=null,this._vao=null,this._vertexBuffer=null,this._indexBuffer=null,this._dvsMat3=a(),this._localOrigin={x:0,y:0},this._getBounds=t}destroy(){this._vao&&(this._vao.dispose(),this._vao=null,this._vertexBuffer=null,this._indexBuffer=null),this._program=t(this._program)}doRender(t){const{context:e}=t,r=this._getBounds();if(r.length<1)return;this._createShaderProgram(e),this._updateMatricesAndLocalOrigin(t),this._updateBufferData(e,r),e.setBlendingEnabled(!0),e.setDepthTestEnabled(!1),e.setStencilWriteMask(0),e.setStencilTestEnabled(!1),e.setBlendFunction(_.ONE,_.ONE_MINUS_SRC_ALPHA),e.setColorMask(!0,!0,!0,!0);const i=this._program;e.bindVAO(this._vao),e.useProgram(i),i.setUniformMatrix3fv(\"u_dvsMat3\",this._dvsMat3),e.gl.lineWidth(1),e.drawElements(h.LINES,8*r.length,p.UNSIGNED_INT,0),e.bindVAO()}_createTransforms(){return{displayViewScreenMat3:a()}}_createShaderProgram(t){if(this._program)return;const e=\"precision highp float;\\n        uniform mat3 u_dvsMat3;\\n\\n        attribute vec2 a_position;\\n\\n        void main() {\\n          mediump vec3 pos = u_dvsMat3 * vec3(a_position, 1.0);\\n          gl_Position = vec4(pos.xy, 0.0, 1.0);\\n        }\",r=\"precision mediump float;\\n      void main() {\\n        gl_FragColor = vec4(0.75, 0.0, 0.0, 0.75);\\n      }\";this._program=t.programCache.acquire(e,r,y().attributes)}_updateMatricesAndLocalOrigin(t){const{state:a}=t,{displayMat3:m,size:c,resolution:u,pixelRatio:_,rotation:h,viewpoint:p}=a,d=v*h,{x:g,y:x}=p.targetGeometry,b=f(g,a.spatialReference);this._localOrigin.x=b,this._localOrigin.y=x;const y=_*c[0],B=_*c[1],M=u*y,j=u*B,A=e(this._dvsMat3);r(A,A,m),i(A,A,n(y/2,B/2)),s(A,A,l(c[0]/M,-B/j,1)),o(A,A,-d)}_updateBufferData(t,e){const{x:r,y:i}=this._localOrigin,s=2*x*e.length,o=new Float32Array(s),a=new Uint32Array(8*e.length);let n=0,l=0;for(const f of e)f&&(o[2*n]=f[0]-r,o[2*n+1]=f[1]-i,o[2*n+2]=f[0]-r,o[2*n+3]=f[3]-i,o[2*n+4]=f[2]-r,o[2*n+5]=f[3]-i,o[2*n+6]=f[2]-r,o[2*n+7]=f[1]-i,a[l]=n+0,a[l+1]=n+3,a[l+2]=n+3,a[l+3]=n+2,a[l+4]=n+2,a[l+5]=n+1,a[l+6]=n+1,a[l+7]=n+0,n+=4,l+=8);if(this._vertexBuffer?this._vertexBuffer.setData(o.buffer):this._vertexBuffer=u.createVertex(t,d.DYNAMIC_DRAW,o.buffer),this._indexBuffer?this._indexBuffer.setData(a):this._indexBuffer=u.createIndex(t,d.DYNAMIC_DRAW,a),!this._vao){const e=y();this._vao=new g(t,e.attributes,e.bufferLayouts,new Map([[\"geometry\",this._vertexBuffer]]),this._indexBuffer)}}}const y=()=>c(\"bounds\",{geometry:[{location:0,name:\"a_position\",count:2,type:p.FLOAT}]});export{b as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{WGLDrawPhase as e,FeatureSelection as r}from\"../../engine/webgl/enums.js\";import{AGraphicContainer as i}from\"./AGraphicContainer.js\";import{renderHighlight as s}from\"../support/util.js\";class t extends i{renderChildren(i){for(const e of this.children)e.setTransform(i.state);if(super.renderChildren(i),this._updateAttributeView(),this.children.some((e=>e.hasData))){switch(i.drawPhase){case e.MAP:this._renderChildren(i,r.All);break;case e.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(i)}this._boundsRenderer&&this._boundsRenderer.doRender(i)}}_renderHighlight(e){s(e,!1,(e=>{this._renderChildren(e,r.Highlight)}))}}export{t as default};\n"],"names":[],"sourceRoot":""}