{"version":3,"file":"vendors-node_modules_arcgis_core_views_3d_layers_graphics_ElevationContext_js-node_modules_ar-f77b49.f3ee26dcf7f229e1458e.js","mappings":"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","sources":["webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/chunks/RibbonLine.glsl.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/layers/graphics/ElevationContext.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/layers/graphics/elevationAlignmentUtils.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/layers/graphics/featureExpressionInfoUtils.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/layers/interfaces.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/support/ElevationProvider.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/support/engineContent/marker.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/DirtyEvents.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/GridLocalOriginFactory.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/LocalOriginFactory.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/Object3D.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/UpdatePolicy.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/WebGLLayer.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/lib/testUtils.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/ProceduralTextureRepository.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/RibbonLineMaterial.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/materials/stippleTextureRepository.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechnique.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/3d/webgl-engine/shaders/ensureColor4.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{ShaderOutput as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ShaderOutput.js\";import{SliceDraw as i}from\"../views/3d/webgl-engine/core/shaderLibrary/Slice.glsl.js\";import{ObjectAndLayerIdColor as t}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/ObjectAndLayerIdColor.glsl.js\";import{RibbonVertexPosition as n}from\"../views/3d/webgl-engine/core/shaderLibrary/attributes/RibbonVertexPosition.glsl.js\";import{LineStipple as o,computePixelSize as r}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/LineStipple.glsl.js\";import{MarkerSizing as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/MarkerSizing.glsl.js\";import{PiUtils as s}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/PiUtils.glsl.js\";import{terrainDepthTest as l}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{alphaCutoff as d}from\"../views/3d/webgl-engine/core/shaderLibrary/util/AlphaCutoff.js\";import{ColorConversion as p}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ColorConversion.glsl.js\";import{addProjViewLocalOrigin as c,addPixelRatio as m}from\"../views/3d/webgl-engine/core/shaderLibrary/util/View.glsl.js\";import{Float2PassUniform as v}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{Float4PassUniform as f}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatPassUniform as g}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as h}from\"../views/3d/webgl-engine/core/shaderModules/interfaces.js\";import{Matrix4PassUniform as D}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";import{ShaderBuilder as S}from\"../views/3d/webgl-engine/core/shaderModules/ShaderBuilder.js\";import{VertexAttribute as u}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{LineMarkerSpace as x}from\"../views/3d/webgl-engine/shaders/LineMarkerTechniqueConfiguration.js\";import{outputColorHighlightOID as L}from\"../views/3d/webgl-engine/shaders/OutputColorHighlightOID.glsl.js\";import{CapType as b}from\"../views/3d/webgl-engine/shaders/RibbonLineTechniqueConfiguration.js\";const w=1;function y(y){const C=new S,{attributes:j,varyings:P,vertex:R,fragment:A}=C,{applyMarkerOffset:F,draped:z,output:T,capType:E,stippleEnabled:V,falloffEnabled:O,roundJoins:W,wireframe:I,innerColorEnabled:N}=y;C.include(s),C.include(n,y),C.include(o,y),C.include(t,y);const _=F&&!z;_&&(R.uniforms.add(new g(\"markerScale\",(e=>e.markerScale))),C.include(a,{space:x.World})),c(R,y),R.uniforms.add(new D(\"inverseProjectionMatrix\",((e,i)=>i.camera.inverseProjectionMatrix)),new v(\"nearFar\",((e,i)=>i.camera.nearFar)),new g(\"miterLimit\",(e=>\"miter\"!==e.join?0:e.miterLimit)),new f(\"viewport\",((e,i)=>i.camera.fullViewport))),R.constants.add(\"LARGE_HALF_FLOAT\",\"float\",65500),j.add(u.POSITION,\"vec3\"),j.add(u.PREVPOSITION,\"vec3\"),j.add(u.NEXTPOSITION,\"vec3\"),j.add(u.SUBDIVISIONFACTOR,\"float\"),j.add(u.UV0,\"vec2\"),P.add(\"vColor\",\"vec4\"),P.add(\"vpos\",\"vec3\"),P.add(\"vLineDistance\",\"float\"),P.add(\"vLineWidth\",\"float\");const M=y.terrainDepthTest&&T===e.Color;M&&P.add(\"depth\",\"float\");const U=V;U&&P.add(\"vLineSizeInv\",\"float\");const k=E===b.ROUND,$=V&&k,H=O||$;H&&P.add(\"vLineDistanceNorm\",\"float\"),k&&(P.add(\"vSegmentSDF\",\"float\"),P.add(\"vReverseSegmentSDF\",\"float\")),R.code.add(h`#define PERPENDICULAR(v) vec2(v.y, -v.x);\nfloat interp(float ncp, vec4 a, vec4 b) {\nreturn (-ncp - a.z) / (b.z - a.z);\n}\nvec2 rotate(vec2 v, float a) {\nfloat s = sin(a);\nfloat c = cos(a);\nmat2 m = mat2(c, -s, s, c);\nreturn m * v;\n}`),R.code.add(h`vec4 projectAndScale(vec4 pos) {\nvec4 posNdc = proj * pos;\nposNdc.xy *= viewport.zw / posNdc.w;\nreturn posNdc;\n}`),R.code.add(h`\n    void clipAndTransform(inout vec4 pos, inout vec4 prev, inout vec4 next, in bool isStartVertex) {\n      float vnp = nearFar[0] * 0.99;\n\n      if(pos.z > -nearFar[0]) {\n        //current pos behind ncp --> we need to clip\n        if (!isStartVertex) {\n          if(prev.z < -nearFar[0]) {\n            //previous in front of ncp\n            pos = mix(prev, pos, interp(vnp, prev, pos));\n            next = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        } else {\n          if(next.z < -nearFar[0]) {\n            //next in front of ncp\n            pos = mix(pos, next, interp(vnp, pos, next));\n            prev = pos;\n          } else {\n            pos = vec4(0.0, 0.0, 0.0, 1.0);\n          }\n        }\n      } else {\n        //current position visible\n        if (prev.z > -nearFar[0]) {\n          //previous behind ncp\n          prev = mix(pos, prev, interp(vnp, pos, prev));\n        }\n        if (next.z > -nearFar[0]) {\n          //next behind ncp\n          next = mix(next, pos, interp(vnp, next, pos));\n        }\n      }\n\n      ${M?\"depth = pos.z;\":\"\"}\n\n      pos = projectAndScale(pos);\n      next = projectAndScale(next);\n      prev = projectAndScale(prev);\n    }\n  `),m(R),R.constants.add(\"aaWidth\",\"float\",V?0:1).main.add(h`\n    // unpack values from uv0.y\n    bool isStartVertex = abs(abs(uv0.y)-3.0) == 1.0;\n\n    float coverage = 1.0;\n\n    // Check for special value of uv0.y which is used by the Renderer when graphics\n    // are removed before the VBO is recompacted. If this is the case, then we just\n    // project outside of clip space.\n    if (uv0.y == 0.0) {\n      // Project out of clip space\n      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\n    }\n    else {\n      bool isJoin = abs(uv0.y) < 3.0;\n      float lineSize = getSize();\n\n      if (lineSize < 1.0) {\n        coverage = lineSize; // convert sub-pixel coverage to alpha\n        lineSize = 1.0;\n      }\n      lineSize += aaWidth;\n\n      float lineWidth = lineSize * pixelRatio;\n      vLineWidth = lineWidth;\n      ${U?h`vLineSizeInv = 1.0 / lineSize;`:\"\"}\n\n      vec4 pos  = view * vec4(position, 1.0);\n      vec4 prev = view * vec4(prevPosition, 1.0);\n      vec4 next = view * vec4(nextPosition, 1.0);\n  `),_&&R.main.add(h`vec4 other = isStartVertex ? next : prev;\nbool markersHidden = areWorldMarkersHidden(pos, other);\nif(!isJoin && !markersHidden) {\npos.xyz += normalize(other.xyz - pos.xyz) * getWorldMarkerSize(pos) * 0.5;\n}`),R.main.add(h`clipAndTransform(pos, prev, next, isStartVertex);\nvec2 left = (pos.xy - prev.xy);\nvec2 right = (next.xy - pos.xy);\nfloat leftLen = length(left);\nfloat rightLen = length(right);`);(V||k)&&R.main.add(h`\n      float isEndVertex = float(!isStartVertex);\n      vec2 segmentOrigin = mix(pos.xy, prev.xy, isEndVertex);\n      vec2 segment = mix(right, left, isEndVertex);\n      ${k?h`vec2 segmentEnd = mix(next.xy, pos.xy, isEndVertex);`:\"\"}\n    `),R.main.add(h`left = (leftLen > 0.001) ? left/leftLen : vec2(0.0, 0.0);\nright = (rightLen > 0.001) ? right/rightLen : vec2(0.0, 0.0);\nvec2 capDisplacementDir = vec2(0, 0);\nvec2 joinDisplacementDir = vec2(0, 0);\nfloat displacementLen = lineWidth;\nif (isJoin) {\nbool isOutside = (left.x * right.y - left.y * right.x) * uv0.y > 0.0;\njoinDisplacementDir = normalize(left + right);\njoinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\nif (leftLen > 0.001 && rightLen > 0.001) {\nfloat nDotSeg = dot(joinDisplacementDir, left);\ndisplacementLen /= length(nDotSeg * left - joinDisplacementDir);\nif (!isOutside) {\ndisplacementLen = min(displacementLen, min(leftLen, rightLen)/abs(nDotSeg));\n}\n}\nif (isOutside && (displacementLen > miterLimit * lineWidth)) {`),W?R.main.add(h`\n        vec2 startDir = leftLen < 0.001 ? right : left;\n        startDir = PERPENDICULAR(startDir);\n\n        vec2 endDir = rightLen < 0.001 ? left : right;\n        endDir = PERPENDICULAR(endDir);\n\n        float factor = ${V?h`min(1.0, subdivisionFactor * ${h.float((w+2)/(w+1))})`:h`subdivisionFactor`};\n\n        float rotationAngle = acos(clamp(dot(startDir, endDir), -1.0, 1.0));\n        joinDisplacementDir = rotate(startDir, -sign(uv0.y) * factor * rotationAngle);\n      `):R.main.add(h`if (leftLen < 0.001) {\njoinDisplacementDir = right;\n}\nelse if (rightLen < 0.001) {\njoinDisplacementDir = left;\n}\nelse {\njoinDisplacementDir = (isStartVertex || subdivisionFactor > 0.0) ? right : left;\n}\njoinDisplacementDir = PERPENDICULAR(joinDisplacementDir);`);const J=E!==b.BUTT;return R.main.add(h`\n        displacementLen = lineWidth;\n      }\n    } else {\n      // CAP handling ---------------------------------------------------\n      joinDisplacementDir = isStartVertex ? right : left;\n      joinDisplacementDir = PERPENDICULAR(joinDisplacementDir);\n\n      ${J?h`capDisplacementDir = isStartVertex ? -right : left;`:\"\"}\n    }\n  `),R.main.add(h`\n    // Displacement (in pixels) caused by join/or cap\n    vec2 dpos = joinDisplacementDir * sign(uv0.y) * displacementLen + capDisplacementDir * displacementLen;\n    float lineDistNorm = sign(uv0.y) * pos.w;\n\n    vLineDistance =  lineWidth * lineDistNorm;\n    ${H?h`vLineDistanceNorm = lineDistNorm;`:\"\"}\n\n    pos.xy += dpos;\n  `),k&&R.main.add(h`vec2 segmentDir = normalize(segment);\nvSegmentSDF = (isJoin && isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentOrigin, segmentDir) * pos.w) ;\nvReverseSegmentSDF = (isJoin && !isStartVertex) ? LARGE_HALF_FLOAT : (dot(pos.xy - segmentEnd, -segmentDir) * pos.w);`),V&&(z?R.uniforms.add(new g(\"worldToScreenRatio\",((e,i)=>1/i.screenToPCSRatio))):R.main.add(h`vec3 segmentCenter = mix((nextPosition + position) * 0.5, (position + prevPosition) * 0.5, isEndVertex);\nfloat worldToScreenRatio = computeWorldToScreenRatio(segmentCenter);`),R.main.add(h`float segmentLengthScreenDouble = length(segment);\nfloat segmentLengthScreen = segmentLengthScreenDouble * 0.5;\nfloat discreteWorldToScreenRatio = discretizeWorldToScreenRatio(worldToScreenRatio);\nfloat segmentLengthRender = length(mix(nextPosition - position, position - prevPosition, isEndVertex));\nvStipplePatternStretch = worldToScreenRatio / discreteWorldToScreenRatio;`),z?R.main.add(h`float segmentLengthPseudoScreen = segmentLengthScreen / pixelRatio * discreteWorldToScreenRatio / worldToScreenRatio;\nfloat startPseudoScreen = uv0.x * discreteWorldToScreenRatio - mix(0.0, segmentLengthPseudoScreen, isEndVertex);`):R.main.add(h`float startPseudoScreen = mix(uv0.x, uv0.x - segmentLengthRender, isEndVertex) * discreteWorldToScreenRatio;\nfloat segmentLengthPseudoScreen = segmentLengthRender * discreteWorldToScreenRatio;`),R.uniforms.add(new g(\"stipplePatternPixelSize\",(e=>r(e)))),R.main.add(h`float patternLength = lineSize * stipplePatternPixelSize;\nvStippleDistanceLimits = computeStippleDistanceLimits(startPseudoScreen, segmentLengthPseudoScreen, segmentLengthScreen, patternLength);\nvStippleDistance = mix(vStippleDistanceLimits.x, vStippleDistanceLimits.y, isEndVertex);\nif (segmentLengthScreenDouble >= 0.001) {\nvec2 stippleDisplacement = pos.xy - segmentOrigin;\nfloat stippleDisplacementFactor = dot(segment, stippleDisplacement) / (segmentLengthScreenDouble * segmentLengthScreenDouble);\nvStippleDistance += (stippleDisplacementFactor - isEndVertex) * (vStippleDistanceLimits.y - vStippleDistanceLimits.x);\n}\nvStippleDistanceLimits *= pos.w;\nvStippleDistance *= pos.w;\nvStippleDistanceLimits = isJoin ?\nvStippleDistanceLimits :\nisStartVertex ?\nvec2(-1e34, vStippleDistanceLimits.y) :\nvec2(vStippleDistanceLimits.x, 1e34);`)),R.main.add(h`\n      // Convert back into NDC\n      pos.xy = (pos.xy / viewport.zw) * pos.w;\n\n      vColor = getColor();\n      vColor.a *= coverage;\n\n      ${I&&!z?\"pos.z -= 0.001 * pos.w;\":\"\"}\n\n      // transform final position to camera space for slicing\n      vpos = (inverseProjectionMatrix * pos).xyz;\n      gl_Position = pos;\n      forwardObjectAndLayerIdColor();\n    }`),M&&C.include(l,y),C.include(i,y),C.include(L,y),A.include(p),A.main.add(h`\n    discardBySlice(vpos);\n    ${M?\"terrainDepthTest(depth);\":\"\"}\n  `),I?A.main.add(h`vec4 finalColor = vec4(1.0, 0.0, 1.0, 1.0);`):(k&&A.main.add(h`\n        float sdf = min(vSegmentSDF, vReverseSegmentSDF);\n        vec2 fragmentPosition = vec2(\n          min(sdf, 0.0),\n          vLineDistance\n        ) * gl_FragCoord.w;\n\n        float fragmentRadius = length(fragmentPosition);\n        float fragmentCapSDF = (fragmentRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale\n        float capCoverage = clamp(0.5 - fragmentCapSDF, 0.0, 1.0);\n\n        if (capCoverage < ${h.float(d)}) {\n          discard;\n        }\n      `),$?A.main.add(h`\n      vec2 stipplePosition = vec2(\n        min(getStippleSDF() * 2.0 - 1.0, 0.0),\n        vLineDistanceNorm * gl_FragCoord.w\n      );\n      float stippleRadius = length(stipplePosition * vLineWidth);\n      float stippleCapSDF = (stippleRadius - vLineWidth) * 0.5; // Divide by 2 to transform from double pixel scale\n      float stippleCoverage = clamp(0.5 - stippleCapSDF, 0.0, 1.0);\n      float stippleAlpha = step(${h.float(d)}, stippleCoverage);\n      `):A.main.add(h`float stippleAlpha = getStippleAlpha();`),T!==e.ObjectAndLayerIdColor&&A.main.add(h`discardByStippleAlpha(stippleAlpha, ${h.float(d)});`),A.uniforms.add(new f(\"intrinsicColor\",(e=>e.color))),A.main.add(h`vec4 color = intrinsicColor * vColor;`),N&&(A.uniforms.add(new f(\"innerColor\",(e=>e.innerColor??e.color)),new g(\"innerWidth\",((e,i)=>e.innerWidth*i.camera.pixelRatio))),A.main.add(h`float distToInner = abs(vLineDistance * gl_FragCoord.w) - innerWidth;\nfloat innerAA = clamp(0.5 - distToInner, 0.0, 1.0);\nfloat innerAlpha = innerColor.a + color.a * (1.0 - innerColor.a);\ncolor = mix(color, vec4(innerColor.rgb, innerAlpha), innerAA);`)),A.main.add(h`vec4 finalColor = blendStipple(color, stippleAlpha);`),O&&(A.uniforms.add(new g(\"falloff\",(e=>e.falloff))),A.main.add(h`finalColor.a *= pow(max(0.0, 1.0 - abs(vLineDistanceNorm * gl_FragCoord.w)), falloff);`)),V||A.main.add(h`float featherStartDistance = max(vLineWidth - 2.0, 0.0);\nfloat value = abs(vLineDistance) * gl_FragCoord.w;\nfloat feather = (value - featherStartDistance) / (vLineWidth - featherStartDistance);\nfinalColor.a *= 1.0 - clamp(feather, 0.0, 1.0);`)),A.main.add(h`outputColorHighlightOID(finalColor, vpos);`),C}const C=Object.freeze(Object.defineProperty({__proto__:null,build:y,ribbonlineNumRoundJoinSubdivisions:w},Symbol.toStringTag,{value:\"Module\"}));export{C as R,y as b,w as r};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{getMetersPerUnit as t,supportsUnit as e}from\"../../../../symbols/support/unitConversionUtils.js\";import{execute as n,clone as s,setContextFeature as i,createFeature as r}from\"./featureExpressionInfoUtils.js\";class o{constructor(){this._meterUnitOffset=0,this._renderUnitOffset=0,this._unit=\"meters\",this._metersPerElevationInfoUnit=1,this._featureExpressionInfoContext=null,this.centerPointInElevationSR=null,this.mode=null}get featureExpressionInfoContext(){return this._featureExpressionInfoContext}get meterUnitOffset(){return this._meterUnitOffset}get unit(){return this._unit}set unit(e){this._unit=e,this._metersPerElevationInfoUnit=t(e)}get requiresSampledElevationInfo(){return\"absolute-height\"!==this.mode}reset(){this.mode=null,this._meterUnitOffset=0,this._renderUnitOffset=0,this._featureExpressionInfoContext=null,this.unit=\"meters\"}set offsetMeters(t){this._meterUnitOffset=t,this._renderUnitOffset=0}set offsetElevationInfoUnits(t){this._meterUnitOffset=t*this._metersPerElevationInfoUnit,this._renderUnitOffset=0}addOffsetRenderUnits(t){this._renderUnitOffset+=t}geometryZWithOffset(t,e){const n=this.calculateOffsetRenderUnits(e);return null!=this.featureExpressionInfoContext?n:t+n}calculateOffsetRenderUnits(t){let e=this._meterUnitOffset;const s=this.featureExpressionInfoContext;return null!=s&&(e+=n(s)*this._metersPerElevationInfoUnit),e/t.unitInMeters+this._renderUnitOffset}setFromElevationInfo(t){this.mode=t.mode,this.unit=e(t.unit)?t.unit:\"meters\",this.offsetElevationInfoUnits=t.offset??0}updateFeatureExpressionInfoContext(t,e,n){if(null==t)return void(this._featureExpressionInfoContext=null);const o=t?.arcade;o&&null!=e&&null!=n?(this._featureExpressionInfoContext=s(t),i(this._featureExpressionInfoContext,r(o.modules,e,n))):this._featureExpressionInfoContext=t}static fromElevationInfo(t){const e=new o;return null!=t&&e.setFromElevationInfo(t),e}}export{o as ElevationContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{copy as e}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as t}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{create as n}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{computeTranslationToOriginAndRotation as o}from\"../../../../geometry/projection/computeTranslationToOriginAndRotation.js\";import{projectBuffer as r}from\"../../../../geometry/projection/projectBuffer.js\";import{isDehydratedPoint as i}from\"../../../../layers/graphics/dehydratedFeatureUtils.js\";import{isSamplePosition as a,getElevationAtPoint as s}from\"../../support/ElevationProvider.js\";import{VertexAttribute as l}from\"../../webgl-engine/lib/VertexAttribute.js\";function u(e,t,n,o,i,a,s,l,u,c,f){const m=x[f.mode];let d,g,p=0;if(r(e,t,n,o,u.spatialReference,i,l))return m?.requiresAlignment(f)?(p=m.applyElevationAlignmentBuffer(o,i,a,s,l,u,c,f),d=a,g=s):(d=o,g=i),r(d,u.spatialReference,g,a,c.spatialReference,s,l)?p:void 0}function c(e,t,n,o,r){const l=(i(e)?e.z:a(e)?e.array[e.offset+2]:e[2])||0;switch(n.mode){case\"on-the-ground\":{const n=s(t,e,\"ground\")??0;return r.verticalDistanceToGround=0,r.sampledElevation=n,void(r.z=n)}case\"relative-to-ground\":{const i=s(t,e,\"ground\")??0,a=n.geometryZWithOffset(l,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case\"relative-to-scene\":{const i=s(t,e,\"scene\")??0,a=n.geometryZWithOffset(l,o);return r.verticalDistanceToGround=a,r.sampledElevation=i,void(r.z=a+i)}case\"absolute-height\":{const i=n.geometryZWithOffset(l,o),a=s(t,e,\"ground\")??0;return r.verticalDistanceToGround=i-a,r.sampledElevation=a,void(r.z=i)}default:return void(r.z=0)}}function f(e,t,n,o){return c(e,t,n,o,D),D.z}function m(e,t,n){return\"on-the-ground\"===t&&\"on-the-ground\"===n?e.staysOnTheGround:t===n||\"on-the-ground\"!==t&&\"on-the-ground\"!==n?null==t||null==n?e.definedChanged:b.UPDATE:e.onTheGroundChanged}function d(e){return\"relative-to-ground\"===e||\"relative-to-scene\"===e}function g(e){return\"absolute-height\"!==e}function p(t,n,r,i,a){c(n,r,a,i,D),E(t,D.verticalDistanceToGround);const s=D.sampledElevation,l=e(C,t.transformation);O[0]=n.x,O[1]=n.y,O[2]=D.z;return o(n.spatialReference,O,l,i.spatialReference)?t.transformation=l:console.warn(\"Could not locate symbol object properly, it might be misplaced\"),s}function E(e,t){for(let n=0;n<e.geometries.length;++n){const o=e.geometries[n].getMutableAttribute(l.CENTEROFFSETANDDISTANCE);o&&o.data[3]!==t&&(o.data[3]=t,e.geometryVertexAttributeUpdated(e.geometries[n],l.CENTEROFFSETANDDISTANCE))}}function v(e,t,n,o,r,i){let a=0;const s=i.spatialReference;t*=3,o*=3;for(let l=0;l<r;++l){const r=e[t],l=e[t+1],u=e[t+2],c=i.getElevation(r,l,u,s,\"ground\")??0;a+=c,n[o]=r,n[o+1]=l,n[o+2]=c,t+=3,o+=3}return a/r}function h(e,t,n,o,r,i,a,s){let l=0;const u=s.calculateOffsetRenderUnits(a),c=s.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let m=0;m<r;++m){const r=e[t],a=e[t+1],s=e[t+2],m=i.getElevation(r,a,s,f,\"ground\")??0;l+=m,n[o]=r,n[o+1]=a,n[o+2]=null==c?s+m+u:m+u,t+=3,o+=3}return l/r}function A(e,t,n,o,r,i,a,s){let l=0;const u=s.calculateOffsetRenderUnits(a),c=s.featureExpressionInfoContext,f=i.spatialReference;t*=3,o*=3;for(let m=0;m<r;++m){const r=e[t],a=e[t+1],s=e[t+2],m=i.getElevation(r,a,s,f,\"scene\")??0;l+=m,n[o]=r,n[o+1]=a,n[o+2]=null==c?s+m+u:m+u,t+=3,o+=3}return l/r}function T(e){const t=e.meterUnitOffset,n=e.featureExpressionInfoContext;return 0!==t||null!=n}function y(e,t,n,o,r,i,a,s){const l=s.calculateOffsetRenderUnits(a),u=s.featureExpressionInfoContext;t*=3,o*=3;for(let c=0;c<r;++c){const r=e[t],i=e[t+1],a=e[t+2];n[o]=r,n[o+1]=i,n[o+2]=null==u?a+l:l,t+=3,o+=3}return 0}class R{constructor(){this.verticalDistanceToGround=0,this.sampledElevation=0,this.z=0}}var b;!function(e){e[e.NONE=0]=\"NONE\",e[e.UPDATE=1]=\"UPDATE\",e[e.RECREATE=2]=\"RECREATE\"}(b||(b={}));const x={\"absolute-height\":{applyElevationAlignmentBuffer:y,requiresAlignment:T},\"on-the-ground\":{applyElevationAlignmentBuffer:v,requiresAlignment:()=>!0},\"relative-to-ground\":{applyElevationAlignmentBuffer:h,requiresAlignment:()=>!0},\"relative-to-scene\":{applyElevationAlignmentBuffer:A,requiresAlignment:()=>!0}},C=t(),D=new R,O=n();export{R as SampleElevationInfo,b as SymbolUpdateType,p as applyElevationAlignmentForHUD,u as applyPerVertexElevationAlignment,m as elevationModeChangeUpdateType,f as evaluateElevationAlignmentAtPoint,c as evaluateElevationInfoAtPoint,d as needsElevationUpdates2D,g as needsElevationUpdates3D,E as updateVertexPointGroundDistance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{throwIfAborted as t}from\"../../../../core/promiseUtils.js\";import{hydrateGeometry as r}from\"../../../../layers/graphics/hydratedFeatures.js\";import{loadArcade as n}from\"../../../../support/arcadeOnDemand.js\";const c=()=>e.getLogger(\"esri.views.3d.layers.graphics.featureExpressionInfoUtils\");function o(e){return{cachedResult:e.cachedResult,arcade:e.arcade?{func:e.arcade.func,context:e.arcade.modules.arcadeUtils.createExecContext(null,{sr:e.arcade.context.spatialReference}),modules:e.arcade.modules}:null}}function u(e){const t=e?.expression;if(\"string\"==typeof t){const e=m(t);if(null!=e)return{cachedResult:e}}return null}async function a(e,r,c,o){const u=e?.expression;if(\"string\"!=typeof u)return null;const a=m(u);if(null!=a)return{cachedResult:a};const s=await n();t(c);const l=s.arcadeUtils,i=l.createSyntaxTree(u);return l.dependsOnView(i)?(null!=o&&o.error(\"Expressions containing '$view' are not supported on ElevationInfo\"),{cachedResult:0}):{arcade:{func:l.createFunction(i),context:l.createExecContext(null,{sr:r}),modules:s}}}function s(e,t,r){return e.arcadeUtils.createFeature(t.attributes,t.geometry,r)}function l(e,t){if(null!=e&&!p(e)){if(!t||!e.arcade)return void c().errorOncePerTick(\"Arcade support required but not provided\");const n=t;n._geometry&&(n._geometry=r(n._geometry)),e.arcade.modules.arcadeUtils.updateExecContext(e.arcade.context,t)}}function i(e){if(null!=e){if(p(e))return e.cachedResult;const t=e.arcade;let r=t?.modules.arcadeUtils.executeFunction(t.func,t.context);return\"number\"!=typeof r&&(e.cachedResult=0,r=0),r}return 0}function d(e,t=!1){let r=e?.featureExpressionInfo;const n=r?.expression;return t||\"0\"===n||(r=null),r??null}const f={cachedResult:0};function p(e){return null!=e.cachedResult}function m(e){return\"0\"===e?0:null}export{o as clone,a as createContext,u as createContextWithoutExpressionSupport,s as createFeature,i as execute,d as extractExpressionInfo,l as setContextFeature,f as zeroContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar e,a,t;!function(e){e[e.RasterImage=0]=\"RasterImage\",e[e.Features=1]=\"Features\"}(e||(e={})),function(e){e[e.MapLayer=0]=\"MapLayer\",e[e.ViewLayer=1]=\"ViewLayer\",e[e.Outline=2]=\"Outline\",e[e.SnappingHint=3]=\"SnappingHint\"}(a||(a={})),function(e){e[e.WithRasterImage=0]=\"WithRasterImage\",e[e.WithoutRasterImage=1]=\"WithoutRasterImage\"}(t||(t={}));export{e as DrapeSourceType,t as DrapeTargetType,a as DrapedRenderGroup};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isDehydratedPoint as e}from\"../../../layers/graphics/dehydratedFeatureUtils.js\";class r{constructor(e,r=null,t=0){this.array=e,this.spatialReference=r,this.offset=t}}function t(e){return\"array\"in e}function a(r,a,n=\"ground\"){if(e(a))return r.getElevation(a.x,a.y,a.z||0,a.spatialReference,n);if(t(a)){let e=a.offset;return r.getElevation(a.array[e++],a.array[e++],a.array[e]||0,a.spatialReference??r.spatialReference,n)}return r.getElevation(a[0],a[1],a[2]||0,r.spatialReference,n)}export{r as SamplePosition,a as getElevationAtPoint,t as isSamplePosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{createPrimitive as r}from\"./sdfPrimitives.js\";import{PixelFormat as e,TextureWrapMode as t}from\"../../../webgl/enums.js\";import{Texture as o}from\"../../../webgl/Texture.js\";import{TextureDescriptor as i}from\"../../../webgl/TextureDescriptor.js\";const m=64,s=m/2,n=s/5,p=m/n,w=.25;function f(p,w){const f=r(p,m,s,n),u=new i;return u.internalFormat=e.RGBA,u.width=m,u.height=m,u.wrapMode=t.CLAMP_TO_EDGE,new o(w,u,f)}export{f as createMarkerTexture,p as markerSizePerLineWidth,s as markerSymbolSize,m as markerTextureSize,n as markerThickness,w as markerTipThicknessFactor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{VisualVariables as t}from\"../shading/VisualVariables.glsl.js\";import{Float3PassUniform as i}from\"../../shaderModules/Float3PassUniform.js\";import{FloatPassUniform as e}from\"../../shaderModules/FloatPassUniform.js\";import{FloatsPassUniform as a}from\"../../shaderModules/FloatsPassUniform.js\";import{glsl as r}from\"../../shaderModules/interfaces.js\";import{VertexAttribute as v}from\"../../../lib/VertexAttribute.js\";const o=8;function c(c,s){const l=c.vertex;l.uniforms.add(new e(\"intrinsicWidth\",(t=>t.width))),s.vvSize?(c.attributes.add(v.SIZEFEATUREATTRIBUTE,\"float\"),l.uniforms.add(new i(\"vvSizeMinSize\",(t=>t.vvSize.minSize)),new i(\"vvSizeMaxSize\",(t=>t.vvSize.maxSize)),new i(\"vvSizeOffset\",(t=>t.vvSize.offset)),new i(\"vvSizeFactor\",(t=>t.vvSize.factor))),l.code.add(r`float getSize() {\nreturn intrinsicWidth * clamp(vvSizeOffset + sizeFeatureAttribute * vvSizeFactor, vvSizeMinSize, vvSizeMaxSize).x;\n}`)):(c.attributes.add(v.SIZE,\"float\"),l.code.add(r`float getSize(){\nreturn intrinsicWidth * size;\n}`)),s.vvOpacity?(c.attributes.add(v.OPACITYFEATUREATTRIBUTE,\"float\"),l.constants.add(\"vvOpacityNumber\",\"int\",8),l.uniforms.add(new a(\"vvOpacityValues\",(t=>t.vvOpacity.values),o),new a(\"vvOpacityOpacities\",(t=>t.vvOpacity.opacityValues),o)),l.code.add(r`float interpolateOpacity( float value ){\nif (value <= vvOpacityValues[0]) {\nreturn vvOpacityOpacities[0];\n}\nfor (int i = 1; i < vvOpacityNumber; ++i) {\nif (vvOpacityValues[i] >= value) {\nfloat f = (value - vvOpacityValues[i-1]) / (vvOpacityValues[i] - vvOpacityValues[i-1]);\nreturn mix(vvOpacityOpacities[i-1], vvOpacityOpacities[i], f);\n}\n}\nreturn vvOpacityOpacities[vvOpacityNumber - 1];\n}\nvec4 applyOpacity( vec4 color ){\nreturn vec4(color.xyz, interpolateOpacity(opacityFeatureAttribute));\n}`)):l.code.add(r`vec4 applyOpacity( vec4 color ){\nreturn color;\n}`),s.vvColor?(c.include(t,s),c.attributes.add(v.COLORFEATUREATTRIBUTE,\"float\"),l.code.add(r`vec4 getColor(){\nreturn applyOpacity(interpolateVVColor(colorFeatureAttribute));\n}`)):(c.attributes.add(v.COLOR,\"vec4\"),l.code.add(r`vec4 getColor(){\nreturn applyOpacity(color);\n}`))}export{c as RibbonVertexPosition};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{RgbaFloatEncoding as e}from\"../util/RgbaFloatEncoding.glsl.js\";import{addCameraPosition as t,addPixelRatio as o}from\"../util/View.glsl.js\";import{Float4PassUniform as i}from\"../../shaderModules/Float4PassUniform.js\";import{FloatPassUniform as r}from\"../../shaderModules/FloatPassUniform.js\";import{glsl as l}from\"../../shaderModules/interfaces.js\";import{Texture2DPassUniform as a}from\"../../shaderModules/Texture2DPassUniform.js\";import{computeLongestPattern as p,computeTextureSize as n}from\"../../../materials/stippleTextureRepository.js\";import{ensureColor4 as s}from\"../../../shaders/ensureColor4.js\";function d(e,t){t.stippleEnabled?c(e,t):f(e)}function c(p,n){const d=!(n.draped&&n.stipplePreferContinuous),{vertex:c,fragment:f}=p;f.include(e),n.draped||(t(c,n),c.uniforms.add(new r(\"worldToScreenPerDistanceRatio\",((e,t)=>1/t.camera.perScreenPixelRatio))),c.code.add(l`float computeWorldToScreenRatio(vec3 segmentCenter) {\nfloat segmentDistanceToCamera = length(segmentCenter - cameraPosition);\nreturn worldToScreenPerDistanceRatio / segmentDistanceToCamera;\n}`)),p.varyings.add(\"vStippleDistance\",\"float\"),p.varyings.add(\"vStippleDistanceLimits\",\"vec2\"),p.varyings.add(\"vStipplePatternStretch\",\"float\"),c.code.add(l`\n    float discretizeWorldToScreenRatio(float worldToScreenRatio) {\n      float step = ${u};\n\n      float discreteWorldToScreenRatio = log(worldToScreenRatio);\n      discreteWorldToScreenRatio = ceil(discreteWorldToScreenRatio / step) * step;\n      discreteWorldToScreenRatio = exp(discreteWorldToScreenRatio);\n      return discreteWorldToScreenRatio;\n    }\n  `),c.code.add(l`vec2 computeStippleDistanceLimits(float startPseudoScreen, float segmentLengthPseudoScreen, float segmentLengthScreen, float patternLength) {`),c.code.add(l`\n    if (segmentLengthPseudoScreen >= ${d?\"patternLength\":\"1e4\"}) {\n  `),o(c),c.code.add(l`float repetitions = segmentLengthScreen / (patternLength * pixelRatio);\nfloat flooredRepetitions = max(1.0, floor(repetitions + 0.5));\nfloat segmentLengthScreenRounded = flooredRepetitions * patternLength;\nfloat stretch = repetitions / flooredRepetitions;\nvStipplePatternStretch = max(0.75, stretch);\nreturn vec2(0.0, segmentLengthScreenRounded);\n}\nreturn vec2(startPseudoScreen, startPseudoScreen + segmentLengthPseudoScreen);\n}`),f.uniforms.add(new a(\"stipplePatternTexture\",(e=>e.stippleTexture)),new r(\"stipplePatternSDFNormalizer\",(e=>m(e.stipplePattern))),new r(\"stipplePatternPixelSizeInv\",(e=>1/S(e)))),f.code.add(l`float getStippleSDF(out bool isClamped) {\nfloat stippleDistanceClamped = clamp(vStippleDistance, vStippleDistanceLimits.x, vStippleDistanceLimits.y);\nvec2 aaCorrectedLimits = vStippleDistanceLimits + vec2(1.0, -1.0) / gl_FragCoord.w;\nisClamped = vStippleDistance < aaCorrectedLimits.x || vStippleDistance > aaCorrectedLimits.y;\nfloat u = stippleDistanceClamped * gl_FragCoord.w * stipplePatternPixelSizeInv * vLineSizeInv;\nu = fract(u);\nfloat encodedSDF = rgba2float(texture(stipplePatternTexture, vec2(u, 0.5)));\nfloat sdf = (encodedSDF * 2.0 - 1.0) * stipplePatternSDFNormalizer;\nreturn (sdf - 0.5) * vStipplePatternStretch + 0.5;\n}\nfloat getStippleSDF() {\nbool ignored;\nreturn getStippleSDF(ignored);\n}\nfloat getStippleAlpha() {\nbool isClamped;\nfloat stippleSDF = getStippleSDF(isClamped);\nfloat antiAliasedResult = clamp(stippleSDF * vLineWidth + 0.5, 0.0, 1.0);\nreturn isClamped ? floor(antiAliasedResult + 0.5) : antiAliasedResult;\n}`),n.stippleOffColorEnabled?(f.uniforms.add(new i(\"stippleOffColor\",(e=>s(e.stippleOffColor)))),f.code.add(l`#define discardByStippleAlpha(stippleAlpha, threshold) {}\n#define blendStipple(color, stippleAlpha) mix(color, stippleOffColor, stippleAlpha)`)):f.code.add(l`#define discardByStippleAlpha(stippleAlpha, threshold) if (stippleAlpha < threshold) { discard; }\n#define blendStipple(color, stippleAlpha) vec4(color.rgb, color.a * stippleAlpha)`)}function f(e){e.fragment.code.add(l`float getStippleAlpha() { return 1.0; }\n#define discardByStippleAlpha(_stippleAlpha_, _threshold_) {}\n#define blendStipple(color, _stippleAlpha_) color`)}function m(e){return e?(Math.floor(.5*(p(e)-1))+.5)/e.pixelRatio:1}function S(e){const t=e.stipplePattern;return t?n(e.stipplePattern)/t.pixelRatio:1}const u=l.float(.4);export{d as LineStipple,S as computePixelSize};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{markerSizePerLineWidth as e}from\"../../../../support/engineContent/marker.js\";import{addPixelRatio as r}from\"../util/View.glsl.js\";import{FloatPassUniform as o}from\"../../shaderModules/FloatPassUniform.js\";import{glsl as t}from\"../../shaderModules/interfaces.js\";import{LineMarkerSpace as a}from\"../../../shaders/LineMarkerTechniqueConfiguration.js\";function n(n,i){const d=n.vertex;r(d),null==d.uniforms.get(\"markerScale\")&&d.constants.add(\"markerScale\",\"float\",1),d.constants.add(\"markerSizePerLineWidth\",\"float\",e).code.add(t`float getLineWidth() {\nreturn max(getSize(), 1.0) * pixelRatio;\n}\nfloat getScreenMarkerSize() {\nreturn markerSizePerLineWidth * markerScale * getLineWidth();\n}`),i.space===a.World&&(d.constants.add(\"maxSegmentLengthFraction\",\"float\",.45),d.uniforms.add(new o(\"perRenderPixelRatio\",((e,r)=>r.camera.perRenderPixelRatio))),d.code.add(t`bool areWorldMarkersHidden(vec4 pos, vec4 other) {\nvec3 midPoint = mix(pos.xyz, other.xyz, 0.5);\nfloat distanceToCamera = length(midPoint);\nfloat screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;\nfloat worldMarkerSize = getScreenMarkerSize() * screenToWorldRatio;\nfloat segmentLen = length(pos.xyz - other.xyz);\nreturn worldMarkerSize > maxSegmentLengthFraction * segmentLen;\n}\nfloat getWorldMarkerSize(vec4 pos) {\nfloat distanceToCamera = length(pos.xyz);\nfloat screenToWorldRatio = perRenderPixelRatio * distanceToCamera * 0.5;\nreturn getScreenMarkerSize() * screenToWorldRatio;\n}`))}export{n as MarkerSizing};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst e=[\"layerObjectAdded\",\"layerObjectRemoved\",\"layerObjectsAdded\",\"layerObjectsRemoved\",\"transformationChanged\",\"shaderTransformationChanged\",\"visibilityChanged\",\"occlusionChanged\",\"highlightChanged\",\"geometryAdded\",\"geometryRemoved\",\"attributesChanged\"];export{e as DirtyEventNames};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{generateUID as t}from\"../../../../core/uid.js\";import{d as i}from\"../../../../chunks/vec32.js\";import{create as r}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as o}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{projectBuffer as s}from\"../../../../geometry/projection/projectBuffer.js\";import{Attribute as e}from\"./Attribute.js\";import{ContentObjectType as n}from\"./ContentObjectType.js\";import{Geometry as a}from\"./Geometry.js\";import{fromValues as h}from\"./LocalOriginFactory.js\";import{Object3D as m}from\"./Object3D.js\";import{gridLocalOriginFactory as c}from\"./testUtils.js\";import{VertexAttribute as g}from\"./VertexAttribute.js\";import{WebGLLayer as d}from\"./WebGLLayer.js\";import{RibbonLineMaterial as f}from\"../materials/RibbonLineMaterial.js\";class _{constructor(i){this._originSR=i,this._rootOriginId=\"root/\"+t(),this._origins=new Map,this._objects=new Map,this._gridSize=5e5}getOrigin(t){const r=this._origins.get(this._rootOriginId);if(null==r){const i=c.rootOrigin;if(null!=i)return this._origins.set(this._rootOriginId,h(i[0],i[1],i[2],this._rootOriginId)),this.getOrigin(t);const r=h(t[0]+Math.random()-.5,t[1]+Math.random()-.5,t[2]+Math.random()-.5,this._rootOriginId);return this._origins.set(this._rootOriginId,r),r}const o=this._gridSize,s=Math.round(t[0]/o),e=Math.round(t[1]/o),n=Math.round(t[2]/o),a=`${s}/${e}/${n}`;let m=this._origins.get(a);const g=.5*o;if(i(l,t,r.vec3),l[0]=Math.abs(l[0]),l[1]=Math.abs(l[1]),l[2]=Math.abs(l[2]),l[0]<g&&l[1]<g&&l[2]<g){if(m){const r=Math.max(...l);i(l,t,m.vec3),l[0]=Math.abs(l[0]),l[1]=Math.abs(l[1]),l[2]=Math.abs(l[2]);if(Math.max(...l)<r)return m}return r}return m||(m=h(s*o,e*o,n*o,a),this._origins.set(a,m)),m}_drawOriginBox(t,i=o(1,1,0,1)){const r=window.view,h=r._stage,c=i.toString();if(!this._objects.has(c)){this._material=new f({width:2,color:i}),h.add(this._material);const t=new d(h,{pickable:!1}),r=new m({castShadow:!1});h.add(r),t.add(r),this._objects.set(c,r)}const _=this._objects.get(c),l=[0,1,5,4,0,2,1,7,6,2,0,1,3,7,5,4,6,2,0],p=l.length,j=new Array(3*p),b=new Array,u=.5*this._gridSize;for(let o=0;o<p;o++)j[3*o]=t[0]+(1&l[o]?u:-u),j[3*o+1]=t[1]+(2&l[o]?u:-u),j[3*o+2]=t[2]+(4&l[o]?u:-u),o>0&&b.push(o-1,o);s(j,this._originSR,0,j,r.renderSpatialReference,0,p);const M=new a(this._material,[[g.POSITION,new e(j,b,3,!0)]],null,n.Line);h.add(M),_.addGeometry(M)}get test(){}}const l=r();export{_ as GridLocalOriginFactory};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{fromValues as r}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";class s{constructor(r,s){this.vec3=r,this.id=s}}function t(t,o,c,e){return new s(r(t,o,c),e)}export{s as LocalOrigin,t as fromValues};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{copy as t,multiply as e,hasIdentityRotation as i}from\"../../../../core/libs/gl-matrix-2/math/mat4.js\";import{IDENTITY as s,create as r}from\"../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{m as o,t as a,j as n,i as m,g as h,p as c,c as l}from\"../../../../chunks/vec32.js\";import{fromValues as d,create as u}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{a as g,c as f}from\"../../../../chunks/sphere.js\";import{maxScale as b}from\"../../support/mathUtils.js\";import{Object3DState as _}from\"./basicInterfaces.js\";import{ContentObject as p}from\"./ContentObject.js\";import{ContentObjectType as v}from\"./ContentObjectType.js\";import{Object3DOccludeeStateID as j,Object3DHighlightStateID as y}from\"./Object3DStateID.js\";import{assert as S}from\"./Util.js\";import{affectsGeometry as x}from\"./VertexAttribute.js\";import{addObject3DStateID as V,removeObject3DStateID as O}from\"../materials/renderers/utils.js\";class A extends p{get geometries(){return this._geometries}get transformation(){return this._transformation??s}set transformation(e){this._transformation=t(this._transformation??r(),e),this._invalidateBoundingVolume(),this._emit(\"transformationChanged\",this)}get shaderTransformation(){return this._shaderTransformation}set shaderTransformation(e){this._shaderTransformation=e?t(this._shaderTransformation??r(),e):null,this._invalidateBoundingVolume(),this._emit(\"shaderTransformationChanged\",this)}get effectiveTransformation(){return this.shaderTransformation??this.transformation}constructor(t={}){super(),this.type=v.Object,this._shaderTransformation=null,this._parentLayer=null,this._visible=!0,this.castShadow=t.castShadow??!0,this.usesVerticalDistanceToGround=t.usesVerticalDistanceToGround??!1,this.graphicUid=t.graphicUid,this.layerUid=t.layerUid,t.isElevationSource&&(this.lastValidElevationBB=new L),this._geometries=t.geometries?Array.from(t.geometries):new Array}dispose(){this._geometries.length=0}get parentLayer(){return this._parentLayer}set parentLayer(t){S(null==this._parentLayer||null==t,\"Object3D can only be added to a single Layer\"),this._parentLayer=t}addGeometry(t){t.visible=this._visible,this._geometries.push(t),this._emit(\"geometryAdded\",{object:this,geometry:t}),this._invalidateBoundingVolume()}removeGeometry(t){const e=this._geometries.splice(t,1)[0];e&&(this._emit(\"geometryRemoved\",{object:this,geometry:e}),this._invalidateBoundingVolume())}removeAllGeometries(){for(;this._geometries.length>0;)this.removeGeometry(0)}geometryVertexAttributeUpdated(t,e,i=!1){this._emit(\"attributesChanged\",{object:this,geometry:t,attribute:e,sync:i}),x(e)&&this._invalidateBoundingVolume()}get visible(){return this._visible}set visible(t){if(this._visible!==t){this._visible=t;for(const t of this._geometries)t.visible=this._visible;this._emit(\"visibilityChanged\",this)}}maskOccludee(){const t=new j;for(const e of this._geometries)e.occludees=V(e.occludees,t);return this._emit(\"occlusionChanged\",this),t}removeOcclude(t){for(const e of this._geometries)e.occludees=O(e.occludees,t);this._emit(\"occlusionChanged\",this)}highlight(t){const e=new y(t);for(const i of this._geometries)i.addHighlight(e);return this._emit(\"highlightChanged\",this),e}removeHighlight(t){for(const e of this._geometries)e.removeHighlight(t);this._emit(\"highlightChanged\",this)}removeStateID(t){t.channel===_.Highlight?this.removeHighlight(t):this.removeOcclude(t)}getCombinedStaticTransformation(t,i){return e(i,this.transformation,t.transformation)}getCombinedShaderTransformation(t,i=r()){return e(i,this.effectiveTransformation,t.transformation)}get boundingVolumeWorldSpace(){return this._bvWorldSpace||(this._bvWorldSpace=this._bvWorldSpace||new M,this._validateBoundingVolume(this._bvWorldSpace,E.WorldSpace)),this._bvWorldSpace}get boundingVolumeObjectSpace(){return this._bvObjectSpace||(this._bvObjectSpace=this._bvObjectSpace||new M,this._validateBoundingVolume(this._bvObjectSpace,E.ObjectSpace)),this._bvObjectSpace}_validateBoundingVolume(t,e){const i=e===E.ObjectSpace;for(const s of this._geometries){const e=s.boundingInfo;e&&T(e,t,i?s.transformation:this.getCombinedShaderTransformation(s))}o(g(t.bounds),t.min,t.max,.5);for(const s of this._geometries){const e=s.boundingInfo;if(null==e)continue;const r=i?s.transformation:this.getCombinedShaderTransformation(s),o=b(r);a(W,e.center,r);const m=n(W,g(t.bounds)),h=e.radius*o;t.bounds[3]=Math.max(t.bounds[3],m+h)}}_invalidateBoundingVolume(){const t=this._bvWorldSpace?.bounds;this._bvObjectSpace=this._bvWorldSpace=void 0,this._parentLayer&&t&&this._parentLayer.notifyObjectBBChanged(this,t)}_emit(t,e){this._parentLayer&&this._parentLayer.events.emit(t,e)}get test(){}}class L{constructor(){this.min=d(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),this.max=d(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE)}isEmpty(){return this.max[0]<this.min[0]&&this.max[1]<this.min[1]&&this.max[2]<this.min[2]}}class M extends L{constructor(){super(...arguments),this.bounds=f()}}function T(t,e,s){const r=t.bbMin,o=t.bbMax;if(i(s)){const t=m(C,s[12],s[13],s[14]);h(B,r,t),h(U,o,t);for(let i=0;i<3;++i)e.min[i]=Math.min(e.min[i],B[i]),e.max[i]=Math.max(e.max[i],U[i])}else if(a(B,r,s),c(r,o))for(let i=0;i<3;++i)e.min[i]=Math.min(e.min[i],B[i]),e.max[i]=Math.max(e.max[i],B[i]);else{a(U,o,s);for(let t=0;t<3;++t)e.min[t]=Math.min(e.min[t],B[t],U[t]),e.max[t]=Math.max(e.max[t],B[t],U[t]);for(let t=0;t<3;++t){l(B,r),l(U,o),B[t]=o[t],U[t]=r[t],a(B,B,s),a(U,U,s);for(let t=0;t<3;++t)e.min[t]=Math.min(e.min[t],B[t],U[t]),e.max[t]=Math.max(e.max[t],B[t],U[t])}}}const C=u(),B=u(),U=u(),W=u();var E;!function(t){t[t.WorldSpace=0]=\"WorldSpace\",t[t.ObjectSpace=1]=\"ObjectSpace\"}(E||(E={}));export{A as Object3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar C;!function(C){C[C.ASYNC=0]=\"ASYNC\",C[C.SYNC=1]=\"SYNC\"}(C||(C={}));export{C as UpdatePolicy};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Evented.js\";import t from\"../../../../core/Handles.js\";import{destroyMaybe as s}from\"../../../../core/maybe.js\";import i from\"../../../../core/PooledArray.js\";import{ContentObject as r}from\"./ContentObject.js\";import{ContentObjectType as o}from\"./ContentObjectType.js\";import{DirtyEventNames as h}from\"./DirtyEvents.js\";import d from\"./Octree.js\";import{UpdatePolicy as c}from\"./UpdatePolicy.js\";class a extends r{constructor(s,r,d=\"\"){super(),this.stage=s,this.apiLayerUid=d,this.type=o.Layer,this.events=new e,this.visible=!0,this.sliceable=!1,this._objectsAdded=new i,this._handles=new t,this._objects=new i,this._pickable=!0,this.visible=r?.visible??!0,this._pickable=r?.pickable??!0,this.updatePolicy=r?.updatePolicy??c.ASYNC,this._disableOctree=r?.disableOctree??!1,s.add(this);for(const e of h)this._handles.add(this.events.on(e,(t=>s.handleEvent(e,t))))}destroy(){this._handles.size&&(this._handles.destroy(),this.stage.remove(this),this.invalidateSpatialQueryAccelerator())}get objects(){return this._objects}set pickable(e){this._pickable=e}get pickable(){return this._pickable&&this.visible}add(e){this._objects.push(e),e.parentLayer=this,this.events.emit(\"layerObjectAdded\",{layer:this,object:e}),null!=this._octree&&this._objectsAdded.push(e)}remove(e){this._objects.removeUnordered(e)&&(e.parentLayer=null,this.events.emit(\"layerObjectRemoved\",{layer:this,object:e}),null!=this._octree&&(this._objectsAdded.removeUnordered(e)||this._octree.remove([e])))}addMany(e){this._objects.pushArray(e);for(const t of e)t.parentLayer=this;this.events.emit(\"layerObjectsAdded\",{layer:this,objects:e}),null!=this._octree&&this._objectsAdded.pushArray(e)}removeMany(e){const t=new Array;if(this._objects.removeUnorderedMany(e,e.length,t),0!==t.length){for(const e of t)e.parentLayer=null;if(this.events.emit(\"layerObjectsRemoved\",{layer:this,objects:t}),null!=this._octree){for(let e=0;e<t.length;)this._objectsAdded.removeUnordered(t[e])?(t[e]=t[t.length-1],t.length-=1):++e;this._octree.remove(t)}}}sync(){this.updatePolicy!==c.SYNC&&this.stage.syncLayer(this.id)}notifyObjectBBChanged(e,t){null==this._octree||this._objectsAdded.includes(e)||this._octree.update(e,t)}getSpatialQueryAccelerator(){return null==this._octree&&this._objects.length>50&&!this._disableOctree?(this._octree=new d((e=>e.boundingVolumeWorldSpace.bounds)),this._octree.add(this._objects.data,this._objects.length)):null!=this._octree&&this._objectsAdded.length>0&&(this._octree.add(this._objectsAdded.data,this._objectsAdded.length),this._objectsAdded.clear()),this._octree}invalidateSpatialQueryAccelerator(){this._octree=s(this._octree),this._objectsAdded.clear()}}function l(e){return null!=e&&e.type===o.Layer}export{a as WebGLLayer,l as isWebGLLayer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst n={stableRendering:!1},e={rootOrigin:null};export{e as gridLocalOriginFactory,n as textTextureAtlas};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{generateUID as e}from\"../../../../core/uid.js\";class t{constructor(t,r,s){this._createTexture=t,this._parametersKey=r,this._repository=new Map,this._orphanCache=s.newCache(`procedural-texture-repository:${e()}`,(e=>e.dispose()))}destroy(){for(const{texture:e}of this._repository.values())e.dispose();this._repository.clear(),this._orphanCache.destroy()}swap(e,t=null){const r=this._acquire(e);return this.release(t),r}release(e){if(null==e)return;const t=this._parametersKey(e),r=this._repository.get(t);if(r&&(r.refCount--,0===r.refCount)){this._repository.delete(t);const{texture:e}=r,s=e.usedMemory;this._orphanCache.put(t,e,s)}}_acquire(e){if(null==e)return null;const t=this._parametersKey(e),s=this._repository.get(t);if(s)return s.refCount++,s.texture;const o=this._orphanCache.pop(t)??this._createTexture(e),i=new r(o);return this._repository.set(t,i),o}}class r{constructor(e){this.texture=e,this.refCount=1}}export{t as ProceduralTextureRepository};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Logger.js\";import{clamp as t}from\"../../../../core/mathUtils.js\";import{createRenderScreenPointArray3 as r}from\"../../../../core/screenUtils.js\";import{copy as i}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{i as s,d as a,f as n,h as o,g as l,c,l as p,j as h,t as u}from\"../../../../chunks/vec32.js\";import{create as f}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ONES as m}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{PlaneIndex as T}from\"../../../../geometry/support/frustum.js\";import{create as d,distance2 as _,fromPoints as E,closestLineSegmentPoint as A}from\"../../../../geometry/support/lineSegment.js\";import{create as R,fromPoints as O,signedDistance as g,getNormal as I}from\"../../../../geometry/support/plane.js\";import{newLayout as S}from\"../../support/buffer/InterleavedLayout.js\";import{isHighlightOrOID as v,isColor as P,isDepth as N,isColorHighlightOIDOrDepth as L,ShaderOutput as C,is2DGeometryOutput as b}from\"../core/shaderLibrary/ShaderOutput.js\";import{alphaCutoff as U}from\"../core/shaderLibrary/util/AlphaCutoff.js\";import{olidEnabled as y}from\"../effects/geometry/olidUtils.js\";import D from\"../lib/GLMaterial.js\";import{Material as j,RenderOccludedFlag as F}from\"../lib/Material.js\";import{RenderSlot as w}from\"../lib/RenderSlot.js\";import{isTranslationMatrix as M}from\"../lib/Util.js\";import{VertexAttribute as x}from\"../lib/VertexAttribute.js\";import{VisualVariablePassParameters as B}from\"./VisualVariablePassParameters.js\";import{LineMarkerAnchor as J}from\"../shaders/LineMarkerTechniqueConfiguration.js\";import{r as H}from\"../../../../chunks/RibbonLine.glsl.js\";import{vertexAttributeLocations as z,RibbonLineTechnique as G}from\"../shaders/RibbonLineTechnique.js\";import{RibbonLineTechniqueConfiguration as k,CapType as V}from\"../shaders/RibbonLineTechniqueConfiguration.js\";var Z;!function(e){e[e.LEFT_JOIN_START=-2]=\"LEFT_JOIN_START\",e[e.LEFT_JOIN_END=-1]=\"LEFT_JOIN_END\",e[e.LEFT_CAP_START=-4]=\"LEFT_CAP_START\",e[e.LEFT_CAP_END=-5]=\"LEFT_CAP_END\",e[e.RIGHT_JOIN_START=2]=\"RIGHT_JOIN_START\",e[e.RIGHT_JOIN_END=1]=\"RIGHT_JOIN_END\",e[e.RIGHT_CAP_START=4]=\"RIGHT_CAP_START\",e[e.RIGHT_CAP_END=5]=\"RIGHT_CAP_END\"}(Z||(Z={}));class W extends j{constructor(e){super(e,q),this._configuration=new k,this.vertexAttributeLocations=z,this.produces=new Map([[w.OPAQUE_MATERIAL,e=>v(e)||P(e)&&this.parameters.renderOccluded===F.OccludeAndTransparentStencil],[w.OPAQUE_MATERIAL_WITHOUT_NORMALS,e=>N(e)],[w.OCCLUDER_MATERIAL,e=>L(e)&&this.parameters.renderOccluded===F.OccludeAndTransparentStencil],[w.TRANSPARENT_OCCLUDER_MATERIAL,e=>L(e)&&this.parameters.renderOccluded===F.OccludeAndTransparentStencil],[w.TRANSPARENT_MATERIAL,e=>e===C.Color&&this.parameters.writeDepth&&this.parameters.renderOccluded!==F.OccludeAndTransparentStencil],[w.TRANSPARENT_MATERIAL_WITHOUT_DEPTH,e=>e===C.Color&&!this.parameters.writeDepth&&this.parameters.renderOccluded!==F.OccludeAndTransparentStencil],[w.DRAPED_MATERIAL,e=>b(e)]])}getConfiguration(e,t){this._configuration.output=e,this._configuration.oitPass=t.oitPass,this._configuration.draped=t.slot===w.DRAPED_MATERIAL;const r=null!=this.parameters.stipplePattern&&e!==C.Highlight;return this._configuration.stippleEnabled=r,this._configuration.stippleOffColorEnabled=r&&null!=this.parameters.stippleOffColor,this._configuration.stipplePreferContinuous=r&&this.parameters.stipplePreferContinuous,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.roundJoins=\"round\"===this.parameters.join,this._configuration.capType=this.parameters.cap,this._configuration.applyMarkerOffset=null!=this.parameters.markerParameters&&$(this.parameters.markerParameters),this._configuration.hasPolygonOffset=this.parameters.hasPolygonOffset,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.vvSize=!!this.parameters.vvSize,this._configuration.vvColor=!!this.parameters.vvColor,this._configuration.vvOpacity=!!this.parameters.vvOpacity,this._configuration.innerColorEnabled=this.parameters.innerWidth>0&&null!=this.parameters.innerColor,this._configuration.falloffEnabled=this.parameters.falloff>0,this._configuration.hasOccludees=t.hasOccludees,this._configuration.occluder=this.parameters.renderOccluded===F.OccludeAndTransparentStencil,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.wireframe=this.parameters.wireframe,this._configuration}get visible(){return this.parameters.color[3]>=U||null!=this.parameters.stipplePattern&&(this.parameters.stippleOffColor?.[3]??0)>U}intersectDraped({attributes:e,screenToWorldRatio:r},i,s,a,n,o){if(!s.options.selectionMode)return;const l=e.get(x.SIZE);let c=this.parameters.width;if(this.parameters.vvSize){const r=e.get(x.SIZEFEATUREATTRIBUTE).data[0];c*=t(this.parameters.vvSize.offset[0]+r*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else l&&(c*=l.data[0]);const p=a[0],h=a[1],u=(c/2+4)*r;let f=Number.MAX_VALUE,m=0;const T=e.get(x.POSITION).data,d=K(this.parameters,e)?T.length-2:T.length-5;for(let _=0;_<d;_+=3){const e=T[_],r=T[_+1],i=(_+3)%T.length,s=p-e,a=h-r,n=T[i]-e,o=T[i+1]-r,l=t((n*s+o*a)/(n*n+o*o),0,1),c=n*l-s,u=o*l-a,d=c*c+u*u;d<f&&(f=d,m=_/3)}f<u*u&&n(o.dist,o.normal,m,!1)}intersect(r,u,f,m,d,R){if(!f.options.selectionMode||!r.visible)return;if(!M(u))return void e.getLogger(\"esri.views.3d.webgl-engine.materials.RibbonLineMaterial\").error(\"intersection assumes a translation-only matrix\");const S=r.attributes,v=S.get(x.POSITION).data;let P=this.parameters.width;if(this.parameters.vvSize){const e=S.get(x.SIZEFEATUREATTRIBUTE).data[0];P*=t(this.parameters.vvSize.offset[0]+e*this.parameters.vvSize.factor[0],this.parameters.vvSize.minSize[0],this.parameters.vvSize.maxSize[0])}else S.has(x.SIZE)&&(P*=S.get(x.SIZE).data[0]);const N=f.camera,L=se;i(L,f.point);const C=P*N.pixelRatio/2+4*N.pixelRatio;s(me[0],L[0]-C,L[1]+C,0),s(me[1],L[0]+C,L[1]+C,0),s(me[2],L[0]+C,L[1]-C,0),s(me[3],L[0]-C,L[1]-C,0);for(let e=0;e<4;e++)if(!N.unprojectFromRenderScreen(me[e],Te[e]))return;O(N.eye,Te[0],Te[1],de),O(N.eye,Te[1],Te[2],_e),O(N.eye,Te[2],Te[3],Ee),O(N.eye,Te[3],Te[0],Ae);let b=Number.MAX_VALUE,U=0;const y=K(this.parameters,S)?v.length-2:v.length-5;for(let e=0;e<y;e+=3){ee[0]=v[e]+u[12],ee[1]=v[e+1]+u[13],ee[2]=v[e+2]+u[14];const t=(e+3)%v.length;if(te[0]=v[t]+u[12],te[1]=v[t+1]+u[13],te[2]=v[t+2]+u[14],g(de,ee)<0&&g(de,te)<0||g(_e,ee)<0&&g(_e,te)<0||g(Ee,ee)<0&&g(Ee,te)<0||g(Ae,ee)<0&&g(Ae,te)<0)continue;if(N.projectToRenderScreen(ee,ae),N.projectToRenderScreen(te,ne),ae[2]<0&&ne[2]>0){a(re,ee,te);const e=N.frustum,t=-g(e[T.NEAR],ee)/n(re,I(e[T.NEAR]));o(re,re,t),l(ee,ee,re),N.projectToRenderScreen(ee,ae)}else if(ae[2]>0&&ne[2]<0){a(re,te,ee);const e=N.frustum,t=-g(e[T.NEAR],te)/n(re,I(e[T.NEAR]));o(re,re,t),l(te,te,re),N.projectToRenderScreen(te,ne)}else if(ae[2]<0&&ne[2]<0)continue;ae[2]=0,ne[2]=0;const r=_(E(ae,ne,ce),L);r<b&&(b=r,c(oe,ee),c(le,te),U=e/3)}const D=f.rayBegin,j=f.rayEnd;if(b<C*C){let e=Number.MAX_VALUE;if(A(E(oe,le,ce),E(D,j,pe),ie)){a(ie,ie,D);const t=p(ie);o(ie,ie,1/t),e=t/h(D,j)}R(e,ie,U,!1)}}get _layout(){const e=S().vec3f(x.POSITION).vec3f(x.PREVPOSITION).vec3f(x.NEXTPOSITION).f32(x.SUBDIVISIONFACTOR).vec2f(x.UV0);return this.parameters.vvSize?e.f32(x.SIZEFEATUREATTRIBUTE):e.f32(x.SIZE),this.parameters.vvColor?e.f32(x.COLORFEATUREATTRIBUTE):e.vec4f(x.COLOR),this.parameters.vvOpacity&&e.f32(x.OPACITYFEATUREATTRIBUTE),y()&&e.vec4u8(x.OBJECTANDLAYERIDCOLOR),e}createBufferWriter(){return new X(this._layout,this.parameters)}createGLMaterial(e){return new Y(e)}validateParameters(e){\"miter\"!==e.join&&(e.miterLimit=0),null!=e.markerParameters&&(e.markerScale=e.markerParameters.width/e.width)}}class Y extends D{constructor(){super(...arguments),this._stipplePattern=null}dispose(){super.dispose(),this._stippleTextures.release(this._stipplePattern),this._stipplePattern=null}beginSlot(e){const t=this._material.parameters.stipplePattern;return this._stipplePattern!==t&&(this._material.setParameters({stippleTexture:this._stippleTextures.swap(t,this._stipplePattern)}),this._stipplePattern=t),this.acquireTechnique(G,e)}}class q extends B{constructor(){super(...arguments),this.width=0,this.color=m,this.join=\"miter\",this.cap=V.BUTT,this.miterLimit=5,this.writeDepth=!0,this.hasPolygonOffset=!1,this.stippleTexture=null,this.stipplePreferContinuous=!0,this.markerParameters=null,this.markerScale=1,this.hasSlicePlane=!1,this.vvFastUpdate=!1,this.isClosed=!1,this.falloff=0,this.innerWidth=0,this.wireframe=!1}get transparent(){return this.color[3]<1||null!=this.stipplePattern&&(this.stippleOffColor?.[3]??0)<1}}class X{constructor(e,t){this.vertexBufferLayout=e,this._parameters=t,this.numJoinSubdivisions=0;const r=t.stipplePattern?1:0;switch(this._parameters.join){case\"miter\":case\"bevel\":this.numJoinSubdivisions=r;break;case\"round\":this.numJoinSubdivisions=H+r}}_isClosed(e){return K(this._parameters,e)}allocate(e){return this.vertexBufferLayout.createBuffer(e)}elementCount(e){const t=2,r=e.get(x.POSITION).indices.length/2+1,i=this._isClosed(e);let s=i?2:2*t;return s+=((i?r:r-1)-(i?0:1))*(2*this.numJoinSubdivisions+4),s+=2,this._parameters.wireframe&&(s=2+4*(s-2)),s}write(e,t,r,i,a,n){const o=he,l=ue,p=fe,f=r.get(x.POSITION),m=f.indices,T=f.data.length/3,d=r.get(x.DISTANCETOSTART)?.data;m&&m.length!==2*(T-1)&&console.warn(\"RibbonLineMaterial does not support indices\");const _=r.get(x.SIZEFEATUREATTRIBUTE)?.data[0]??r.get(x.SIZE)?.data[0]??1;let E=[1,1,1,1],A=0;const R=this.vertexBufferLayout.fields.has(x.COLORFEATUREATTRIBUTE);R?A=r.get(x.COLORFEATUREATTRIBUTE).data[0]:r.has(x.COLOR)&&(E=r.get(x.COLOR).data);const O=this.vertexBufferLayout.fields.has(x.OPACITYFEATUREATTRIBUTE),g=O?r.get(x.OPACITYFEATUREATTRIBUTE).data[0]:0,I=new Float32Array(a.buffer),S=y()?new Uint8Array(a.buffer):null,v=this.vertexBufferLayout.stride/4;let P=n*v;const N=P;let L=0;const C=d?(e,t,r)=>L=d[r]:(e,t,r)=>L+=h(e,t),b=(e,t,r,s,a,n,o)=>{if(I[P++]=t[0],I[P++]=t[1],I[P++]=t[2],I[P++]=e[0],I[P++]=e[1],I[P++]=e[2],I[P++]=r[0],I[P++]=r[1],I[P++]=r[2],I[P++]=s,I[P++]=o,I[P++]=a,I[P++]=_,R)I[P++]=A;else{const e=Math.min(4*n,E.length-4);I[P++]=E[e],I[P++]=E[e+1],I[P++]=E[e+2],I[P++]=E[e+3]}O&&(I[P++]=g),y()&&(i&&(S[4*P]=i[0],S[4*P+1]=i[1],S[4*P+2]=i[2],S[4*P+3]=i[3]),P++)};P+=v,s(l,f.data[0],f.data[1],f.data[2]),e&&u(l,l,e);const U=this._isClosed(r);if(U){const t=f.data.length-3;s(o,f.data[t],f.data[t+1],f.data[t+2]),e&&u(o,o,e)}else s(p,f.data[3],f.data[4],f.data[5]),e&&u(p,p,e),b(l,l,p,1,Z.LEFT_CAP_START,0,0),b(l,l,p,1,Z.RIGHT_CAP_START,0,0),c(o,l),c(l,p);const D=U?0:1,j=U?T:T-1;for(let h=D;h<j;h++){const t=(h+1)%T*3;s(p,f.data[t],f.data[t+1],f.data[t+2]),e&&u(p,p,e),C(o,l,h),b(o,l,p,0,Z.LEFT_JOIN_END,h,L),b(o,l,p,0,Z.RIGHT_JOIN_END,h,L);const r=this.numJoinSubdivisions;for(let e=0;e<r;++e){const t=(e+1)/(r+1);b(o,l,p,t,Z.LEFT_JOIN_END,h,L),b(o,l,p,t,Z.RIGHT_JOIN_END,h,L)}b(o,l,p,1,Z.LEFT_JOIN_START,h,L),b(o,l,p,1,Z.RIGHT_JOIN_START,h,L),c(o,l),c(l,p)}U?(s(p,f.data[3],f.data[4],f.data[5]),e&&u(p,p,e),L=C(o,l,j),b(o,l,p,0,Z.LEFT_JOIN_END,D,L),b(o,l,p,0,Z.RIGHT_JOIN_END,D,L)):(L=C(o,l,j),b(o,l,l,0,Z.LEFT_CAP_END,j,L),b(o,l,l,0,Z.RIGHT_CAP_END,j,L)),Q(I,N+v,I,N,v);P=Q(I,P-v,I,P,v),this._parameters.wireframe&&this._addWireframeVertices(a,N,P,v)}_addWireframeVertices(e,t,r,i){const s=new Float32Array(e.buffer,r*Float32Array.BYTES_PER_ELEMENT),a=new Float32Array(e.buffer,t*Float32Array.BYTES_PER_ELEMENT,r-t);let n=0;const o=e=>n=Q(a,e,s,n,i);for(let l=0;l<a.length-1;l+=2*i)o(l),o(l+2*i),o(l+1*i),o(l+2*i),o(l+1*i),o(l+3*i)}}function Q(e,t,r,i,s){for(let a=0;a<s;a++)r[i++]=e[t++];return i}function K(e,t){if(!e.isClosed)return!1;return t.get(x.POSITION).indices.length>2}function $(e){return e.anchor===J.Tip&&e.hideOnShortSegments&&\"begin-end\"===e.placement&&e.worldSpace}const ee=f(),te=f(),re=f(),ie=f(),se=f(),ae=r(),ne=r(),oe=f(),le=f(),ce=d(),pe=d(),he=f(),ue=f(),fe=f(),me=[r(),r(),r(),r()],Te=[f(),f(),f(),f()],de=R(),_e=R(),Ee=R(),Ae=R();export{q as Parameters,W as RibbonLineMaterial};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{packFloatRGBA as t}from\"../../../../core/floatRGBA.js\";import{ProceduralTextureRepository as e}from\"./ProceduralTextureRepository.js\";import{PixelFormat as r,TextureWrapMode as o}from\"../../../webgl/enums.js\";import{Texture as n}from\"../../../webgl/Texture.js\";import{TextureDescriptor as i}from\"../../../webgl/TextureDescriptor.js\";function u(t,u){return new e((e=>{const{encodedData:u,textureSize:c}=a(e),f=new i;return f.internalFormat=r.RGBA,f.width=c,f.height=1,f.wrapMode=o.REPEAT,new n(t,f,u)}),(t=>`${t.pattern.join(\",\")}-r${t.pixelRatio}`),u)}function a(e){const r=c(e),o=1/e.pixelRatio,n=f(e),i=s(e),u=(Math.floor(.5*(i-1))+.5)*o,a=[];let l=1;for(const t of r){for(let e=0;e<t;e++){const r=l*(Math.min(e,t-1-e)+.5)*o/u*.5+.5;a.push(r)}l=-l}const p=Math.round(r[0]/2),m=[...a.slice(p),...a.slice(0,p)],d=new Uint8Array(4*n);let x=0;for(const c of m)t(c,d,x),x+=4;return{encodedData:d,textureSize:n}}function c(t){return t.pattern.map((e=>Math.round(e*t.pixelRatio)))}function f(t){if(null==t)return 1;const e=c(t);return Math.floor(e.reduce(((t,e)=>t+e)))}function s(t){return c(t).reduce(((t,e)=>Math.max(t,e)))}export{s as computeLongestPattern,f as computeTextureSize,u as createStippleTextureRepository};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import{TextureCoordinateType as t}from\"../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{EmissionSource as o}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{DefaultTechniqueConfiguration as r}from\"../materials/DefaultTechniqueConfiguration.js\";var s,p;!function(e){e[e.Draped=0]=\"Draped\",e[e.Screen=1]=\"Screen\",e[e.World=2]=\"World\",e[e.COUNT=3]=\"COUNT\"}(s||(s={})),function(e){e[e.Center=0]=\"Center\",e[e.Tip=1]=\"Tip\",e[e.COUNT=2]=\"COUNT\"}(p||(p={}));class a extends r{constructor(){super(...arguments),this.space=s.Screen,this.anchor=p.Center,this.occluder=!1,this.hasSlicePlane=!1,this.writeDepth=!1,this.hideOnShortSegments=!1,this.hasCap=!1,this.hasTip=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.textureCoordinateType=t.None,this.emissionSource=o.None,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.hasVvInstancing=!0,this.hasSliceTranslatedView=!0,this.objectAndLayerIdColorInstanced=!1}get draped(){return this.space===s.Draped}}e([i({count:s.COUNT})],a.prototype,\"space\",void 0),e([i({count:p.COUNT})],a.prototype,\"anchor\",void 0),e([i()],a.prototype,\"occluder\",void 0),e([i()],a.prototype,\"hasSlicePlane\",void 0),e([i()],a.prototype,\"writeDepth\",void 0),e([i()],a.prototype,\"hideOnShortSegments\",void 0),e([i()],a.prototype,\"hasCap\",void 0),e([i()],a.prototype,\"hasTip\",void 0),e([i()],a.prototype,\"vvSize\",void 0),e([i()],a.prototype,\"vvColor\",void 0),e([i()],a.prototype,\"vvOpacity\",void 0),e([i()],a.prototype,\"hasOccludees\",void 0),e([i()],a.prototype,\"terrainDepthTest\",void 0),e([i()],a.prototype,\"cullAboveTerrain\",void 0);export{p as LineMarkerAnchor,s as LineMarkerSpace,a as LineMarkerTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{ShaderOutput as e}from\"../core/shaderLibrary/ShaderOutput.js\";import{ReloadableShaderModule as t}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as i}from\"../core/shaderTechnique/ShaderTechnique.js\";import{OITPass as r}from\"../lib/OITPass.js\";import{blending as l,oitDepthTest as s,depthWrite as n,getDrawBuffers as o,OITPolygonOffset as u}from\"../lib/OrderIndependentTransparency.js\";import{RenderSlot as p}from\"../lib/RenderSlot.js\";import{stencilWriteMaskOn as c,stencilToolMaskBaseParams as a,stencilBaseAllZerosParams as f,depthCompareAlways as d,stencilToolTransparentOccluderParams as T,stencilWriteMaskOff as h,stencilToolMaskOccluderParams as O,depthCompareLess as m}from\"../lib/StencilUtils.js\";import{VertexAttribute as E}from\"../lib/VertexAttribute.js\";import{R as P}from\"../../../../chunks/RibbonLine.glsl.js\";import{PrimitiveType as R,SpecialDrawBuffers as I}from\"../../../webgl/enums.js\";import{makePipelineState as b,defaultColorWrite as N,premultipliedAlphaToPremultipliedAlpha as S}from\"../../../webgl/renderState.js\";class g extends i{constructor(e,i,r){super(e,i,new t(P,(()=>import(\"./RibbonLine.glsl.js\"))),r,_),this.primitiveType=i.wireframe?R.LINES:R.TRIANGLE_STRIP}_makePipelineState(t,i){const{oitPass:p,output:d,hasOccludees:T,hasPolygonOffset:h}=t,O=p===r.NONE,m=p===r.FrontFace;return b({blending:t.output===e.Color?l(p):null,depthTest:{func:s(p)},depthWrite:n(t),drawBuffers:d===e.Depth?{buffers:[I.NONE]}:o(p,d),colorWrite:N,stencilWrite:T?c:null,stencilTest:T?i?a:f:null,polygonOffset:O||m?h?A:null:u})}initializePipeline(t){if(t.occluder){const i=t.hasPolygonOffset?A:null;this._occluderPipelineTransparent=b({blending:S,polygonOffset:i,depthTest:d,depthWrite:null,colorWrite:N,stencilWrite:null,stencilTest:T,drawBuffers:t.output===e.Depth?{buffers:[I.NONE]}:null}),this._occluderPipelineOpaque=b({blending:S,polygonOffset:i,depthTest:d,depthWrite:null,colorWrite:N,stencilWrite:h,stencilTest:O,drawBuffers:t.output===e.Depth?{buffers:[I.NONE]}:null}),this._occluderPipelineMaskWrite=b({blending:null,polygonOffset:i,depthTest:m,depthWrite:null,colorWrite:null,stencilWrite:c,stencilTest:a,drawBuffers:t.output===e.Depth?{buffers:[I.NONE]}:null})}return this._occludeePipeline=this._makePipelineState(t,!0),this._makePipelineState(t,!1)}getPipeline(e,t){if(e)return this._occludeePipeline;switch(t){case p.TRANSPARENT_OCCLUDER_MATERIAL:return this._occluderPipelineTransparent??super.getPipeline();case p.OCCLUDER_MATERIAL:return this._occluderPipelineOpaque??super.getPipeline();default:return this._occluderPipelineMaskWrite??super.getPipeline()}}}const A={factor:0,units:-4},_=new Map([[E.POSITION,0],[E.PREVPOSITION,1],[E.NEXTPOSITION,2],[E.SUBDIVISIONFACTOR,3],[E.UV0,4],[E.COLOR,5],[E.COLORFEATUREATTRIBUTE,5],[E.SIZE,6],[E.SIZEFEATUREATTRIBUTE,6],[E.OPACITYFEATUREATTRIBUTE,7],[E.OBJECTANDLAYERIDCOLOR,8]]);export{g as RibbonLineTechnique,_ as vertexAttributeLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../chunks/tslib.es6.js\";import{TextureCoordinateType as t}from\"../core/shaderLibrary/attributes/TextureCoordinateAttribute.glsl.js\";import{EmissionSource as e}from\"../core/shaderLibrary/output/Emissions.glsl.js\";import{parameter as i}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{DefaultTechniqueConfiguration as r}from\"../materials/DefaultTechniqueConfiguration.js\";var s;!function(o){o[o.BUTT=0]=\"BUTT\",o[o.SQUARE=1]=\"SQUARE\",o[o.ROUND=2]=\"ROUND\",o[o.COUNT=3]=\"COUNT\"}(s||(s={}));class p extends r{constructor(){super(...arguments),this.capType=s.BUTT,this.hasSlicePlane=!1,this.hasPolygonOffset=!1,this.writeDepth=!1,this.draped=!1,this.stippleEnabled=!1,this.stippleOffColorEnabled=!1,this.stipplePreferContinuous=!0,this.roundJoins=!1,this.applyMarkerOffset=!1,this.vvSize=!1,this.vvColor=!1,this.vvOpacity=!1,this.falloffEnabled=!1,this.innerColorEnabled=!1,this.hasOccludees=!1,this.occluder=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.wireframe=!1,this.discardInvisibleFragments=!1,this.objectAndLayerIdColorInstanced=!1,this.textureCoordinateType=t.None,this.emissionSource=e.None,this.occlusionPass=!1,this.hasVvInstancing=!0,this.hasSliceTranslatedView=!0}}o([i({count:s.COUNT})],p.prototype,\"capType\",void 0),o([i()],p.prototype,\"hasSlicePlane\",void 0),o([i()],p.prototype,\"hasPolygonOffset\",void 0),o([i()],p.prototype,\"writeDepth\",void 0),o([i()],p.prototype,\"draped\",void 0),o([i()],p.prototype,\"stippleEnabled\",void 0),o([i()],p.prototype,\"stippleOffColorEnabled\",void 0),o([i()],p.prototype,\"stipplePreferContinuous\",void 0),o([i()],p.prototype,\"roundJoins\",void 0),o([i()],p.prototype,\"applyMarkerOffset\",void 0),o([i()],p.prototype,\"vvSize\",void 0),o([i()],p.prototype,\"vvColor\",void 0),o([i()],p.prototype,\"vvOpacity\",void 0),o([i()],p.prototype,\"falloffEnabled\",void 0),o([i()],p.prototype,\"innerColorEnabled\",void 0),o([i()],p.prototype,\"hasOccludees\",void 0),o([i()],p.prototype,\"occluder\",void 0),o([i()],p.prototype,\"terrainDepthTest\",void 0),o([i()],p.prototype,\"cullAboveTerrain\",void 0),o([i()],p.prototype,\"wireframe\",void 0),o([i()],p.prototype,\"discardInvisibleFragments\",void 0),o([i()],p.prototype,\"objectAndLayerIdColorInstanced\",void 0);export{s as CapType,p as RibbonLineTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{s as r}from\"../../../../chunks/vec42.js\";import{ZEROS as o,create as t}from\"../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";function s(t){return null==t?o:4===t.length?t:r(c,t[0],t[1],t[2],1)}const c=t();export{s as ensureColor4};\n"],"names":[],"sourceRoot":""}