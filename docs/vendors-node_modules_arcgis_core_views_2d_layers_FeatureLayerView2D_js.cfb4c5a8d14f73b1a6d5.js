"use strict";
(self["webpackChunkreact_redux_arcgis_boilerplate"] = self["webpackChunkreact_redux_arcgis_boilerplate"] || []).push([["vendors-node_modules_arcgis_core_views_2d_layers_FeatureLayerView2D_js"],{

/***/ "./node_modules/@arcgis/core/AggregateGraphic.js":
/*!*******************************************************!*\
  !*** ./node_modules/@arcgis/core/AggregateGraphic.js ***!
  \*******************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ s; }
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
let p=class extends _Graphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(){super(...arguments),this.isAggregate=!0}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;const t=this.sourceLayer?.featureReduction;return t&&"popupTemplate"in t&&t.popupEnabled?t.popupTemplate:null}getObjectId(){return this.attributes.aggregateId}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_2__.property)({type:Boolean})],p.prototype,"isAggregate",void 0),p=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.AggregateGraphic")],p);const s=p;


/***/ }),

/***/ "./node_modules/@arcgis/core/core/CircularArray.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/core/CircularArray.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ t; }
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
class t{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const s=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,s}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}peekLast(){return 0===this.size?null:this._buffer[(this._start+(this.size-1))%this.maxSize]}find(t){if(0===this.size)return null;for(const s of this._buffer)if(null!=s&&t(s))return s;return null}clear(t){let s=this.dequeue();for(;null!=s;)t&&t(s),s=this.dequeue()}}


/***/ }),

/***/ "./node_modules/@arcgis/core/core/floatRGBA.js":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/core/floatRGBA.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   packFloatRGBA: function() { return /* binding */ o; },
/* harmony export */   unpackFloatRGBA: function() { return /* binding */ r; }
/* harmony export */ });
/* harmony import */ var _mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function o(o,r,e=0){const i=(0,_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(o,0,f);for(let t=0;t<4;t++)r[e+t]=Math.floor(256*l(i*n[t]))}function r(t,o=0){let r=0;for(let n=0;n<4;n++)r+=t[o+n]*e[n];return r}const n=[1,256,65536,16777216],e=[1/256,1/65536,1/16777216,1/4294967296],f=r(new Uint8ClampedArray([255,255,255,255]));function l(t){return t-Math.floor(t)}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/effects/FeatureEffectView.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/effects/FeatureEffectView.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ r; }
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _EffectView_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./EffectView.js */ "./node_modules/@arcgis/core/layers/effects/EffectView.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
let c=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(e){super(e),this._filter=null,this.duration=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("mapview-transitions-duration"),this._excludedEffectView=new _EffectView_js__WEBPACK_IMPORTED_MODULE_7__.EffectView(e),this._includedEffectView=new _EffectView_js__WEBPACK_IMPORTED_MODULE_7__.EffectView(e)}get excludedEffects(){return this._excludedEffectView.effects}set featureEffect(e){this._get("featureEffect")!==e&&this._transitionTo(e)}get filter(){return this._filter||this.featureEffect?.filter||null}get hasEffects(){return this._excludedEffectView.hasEffects||this._includedEffectView.hasEffects}get includedEffects(){return this._includedEffectView.effects}set scale(e){this._set("scale",e),this._excludedEffectView.scale=e,this._includedEffectView.scale=e}get transitioning(){return this._excludedEffectView.transitioning||this._includedEffectView.transitioning}get transitioningToEmpty(){return!this._excludedEffectView.final&&!this._includedEffectView.final}transitionStep(e,t){this._set("scale",t),this.transitioning?(this._includedEffectView.transitionStep(e,t),this._excludedEffectView.transitionStep(e,t),this.transitioning||(this._filter=null)):(this._excludedEffectView.scale=t,this._includedEffectView.scale=t)}endTransition(){this._includedEffectView.endTransition(),this._excludedEffectView.endTransition(),this._filter=null}_transitionTo(e){const t=this._get("featureEffect"),i=e,s=i?.includedEffect,f=i?.excludedEffect,c=this._includedEffectView.canTransitionTo(s)&&this._excludedEffectView.canTransitionTo(f);this._includedEffectView.effect=s,this._excludedEffectView.effect=f,this._set("featureEffect",i),this._filter=i?.filter||t?.filter||null,c||this.endTransition()}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"_filter",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"_excludedEffectView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"_includedEffectView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"duration",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"excludedEffects",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"featureEffect",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"filter",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"hasEffects",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"includedEffects",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({value:0})],c.prototype,"scale",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"transitioning",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)()],c.prototype,"transitioningToEmpty",null),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_6__.subclass)("esri.layers.effects.FeatureEffectView")],c);const r=c;


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/floorFilterUtils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/floorFilterUtils.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getFloorFilterClause: function() { return /* binding */ o; },
/* harmony export */   getLayerFloorFilterClause: function() { return /* binding */ n; }
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function o(o){const n=o.layer;if("floorInfo"in n&&n.floorInfo?.floorField&&"floors"in o.view){return l(o.view.floors,n.floorInfo.floorField)}return null}function n(o,n){return"floorInfo"in n&&n.floorInfo?.floorField?l(o,n.floorInfo.floorField):null}function l(o,n){if(!o?.length)return null;const l=o.filter((o=>""!==o)).map((o=>`'${o}'`));return l.push("''"),`${n} IN (${l.join(",")}) OR ${n} IS NULL`}


/***/ }),

/***/ "./node_modules/@arcgis/core/layers/support/timeSupport.js":
/*!*****************************************************************!*\
  !*** ./node_modules/@arcgis/core/layers/support/timeSupport.js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   combineTimeExtent: function() { return /* binding */ i; }
/* harmony export */ });
/* harmony import */ var _support_timeUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../support/timeUtils.js */ "./node_modules/@arcgis/core/support/timeUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function i(i,n,s){if(null==i?.timeInfo)return null;const{datesInUnknownTimezone:l=!1,timeOffset:o,useViewTime:m}=i;let u=i.timeExtent;l&&(u=(0,_support_timeUtils_js__WEBPACK_IMPORTED_MODULE_0__.toLocalTimeExtent)(u));let r=m?n&&u?n.intersection(u):n||u:u;return!r||r.isEmpty||r.isAllTime?r:(o&&(r=r.offset(-o.value,o.unit)),l&&(r=(0,_support_timeUtils_js__WEBPACK_IMPORTED_MODULE_0__.toUTCTimeExtent)(r)),r.equals(s)?s:r)}


/***/ }),

/***/ "./node_modules/@arcgis/core/rest/support/AggregateFeatureSet.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/rest/support/AggregateFeatureSet.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ m; }
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _AggregateGraphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../AggregateGraphic.js */ "./node_modules/@arcgis/core/AggregateGraphic.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/reader.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/reader.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _FeatureSet_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./FeatureSet.js */ "./node_modules/@arcgis/core/rest/support/FeatureSet.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
let c=class extends _FeatureSet_js__WEBPACK_IMPORTED_MODULE_9__["default"]{constructor(){super(...arguments),this.features=[]}readFeatures(e,t){const o=_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_10__["default"].fromJSON(t.spatialReference),s=[];for(let a=0;a<e.length;a++){const t=e[a],p=_AggregateGraphic_js__WEBPACK_IMPORTED_MODULE_1__["default"].fromJSON(t),c=t.geometry?.spatialReference;null==p.geometry||c||(p.geometry.spatialReference=o);const m=t.aggregateGeometries,i=p.aggregateGeometries;if(m&&null!=i)for(const e in i){const r=i[e],t=m[e],s=t?.spatialReference;null==r||s||(r.spatialReference=o)}s.push(p)}return s}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_3__.property)({type:[_AggregateGraphic_js__WEBPACK_IMPORTED_MODULE_1__["default"]],json:{write:!0}})],c.prototype,"features",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_reader_js__WEBPACK_IMPORTED_MODULE_7__.reader)("features")],c.prototype,"readFeatures",null),c=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.rest.support.AggregateFeatureSet")],c);const m=c;


/***/ }),

/***/ "./node_modules/@arcgis/core/support/tagSymbols.js":
/*!*********************************************************!*\
  !*** ./node_modules/@arcgis/core/support/tagSymbols.js ***!
  \*********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   WebSceneTag: function() { return /* binding */ e; }
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
const e=Symbol("WebScene");


/***/ }),

/***/ "./node_modules/@arcgis/core/support/timeUtils.js":
/*!********************************************************!*\
  !*** ./node_modules/@arcgis/core/support/timeUtils.js ***!
  \********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getTimeExtentFromLayers: function() { return /* binding */ f; },
/* harmony export */   getTimeSliderSettingsFromWebDocument: function() { return /* binding */ g; },
/* harmony export */   getTimeSliderSettingsFromWebMap: function() { return /* binding */ d; },
/* harmony export */   toLocalTimeExtent: function() { return /* binding */ w; },
/* harmony export */   toUTCTimeExtent: function() { return /* binding */ T; }
/* harmony export */ });
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_deprecate_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../core/deprecate.js */ "./node_modules/@arcgis/core/core/deprecate.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_timeUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../core/timeUtils.js */ "./node_modules/@arcgis/core/core/timeUtils.js");
/* harmony import */ var _time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../time/TimeExtent.js */ "./node_modules/@arcgis/core/time/TimeExtent.js");
/* harmony import */ var _webmap_utils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../webmap/utils.js */ "./node_modules/@arcgis/core/webmap/utils.js");
/* harmony import */ var _webscene_utils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../webscene/utils.js */ "./node_modules/@arcgis/core/webscene/utils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function m(t){return void 0!==t.timeInfo}async function u(t,e){return t.widgets?.timeSlider?.fullTimeExtent??f(t.allLayers,e)}function a(t){const e=t.numThumbs??2,n=t.currentTimeExtent;if(n){const{start:t,end:i}=n;return null!=t&&null!=i&&t.getTime()===i.getTime()?"instant":2===e?"time-window":null==t||0===t.getTime()?"cumulative-from-start":"cumulative-from-end"}return 2===e?"time-window":"cumulative-from-start"}function c(t){const{numStops:e,stopInterval:i,stops:r}=t;return r?{dates:(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_2__.clone)(r)}:i?{interval:i.clone()}:{count:e??5}}async function f(e,n){if(0===e.length)return _time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__["default"].allTime;await Promise.all(e.map((t=>t.load({signal:n}))));const i=e.filter(m),r=e.filter((t=>!m(t)&&null!=t.visibilityTimeExtent));if(0===i.length&&0===r.length)return _time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__["default"].allTime;const l=[],o=[];for(const t of i)"feature"!==t?.type&&"map-image"!==t?.type||!t.timeInfo?.hasLiveData?o.push(t):l.push(t);const u=t=>null==t||t.isAllTime,a=[...o.map((t=>{const e=t.timeInfo?.fullTimeExtent,{visibilityTimeExtent:n}=t;return e?.intersection(n)??n})),...r.map((t=>t.visibilityTimeExtent))];if(a.some(u))return _time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__["default"].allTime;const c=l.map((async t=>{const e=(await t.fetchRecomputedExtents({signal:n}))?.timeExtent??t.timeInfo?.fullTimeExtent,{visibilityTimeExtent:i}=t;return e?.intersection(i)??i})),f=(await Promise.allSettled(c)).map((t=>"fulfilled"===t.status?t.value:null));if(f.some(u))return _time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__["default"].allTime;const p=[...f,...a].filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_0__.isSome);if(0===p.length)return _time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__["default"].allTime;return p.reduce(((t,e)=>t.union(e)))}function p(t,e){const n=t.currentTimeExtent;if(!n)return null;const{start:i,end:r}=n,l=i??r??null;switch(e){case"time-window":return new _time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__["default"]({start:i,end:r});case"cumulative-from-start":return new _time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__["default"]({start:null,end:l});case"cumulative-from-end":return new _time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__["default"]({start:l,end:null});case"instant":return new _time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__["default"]({start:l,end:l})}}async function d(t,n){return (0,_core_deprecate_js__WEBPACK_IMPORTED_MODULE_1__.deprecatedFunction)(_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger("esri.support.timeUtils.getTimeSliderSettingsFromWebMap"),"`timeUtils.getTimeSliderSettingsFromWebMap` is deprecated in favor of 'timeUtils.getTimeSliderSettingsFromWebDocument'",{replacement:"timeUtils.getTimeSliderSettingsFromWebDocument",version:"4.30",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-support-timeUtils.html#getTimeSliderSettingsFromWebDocument",warnOnce:!0}),null!=t&&(0,_webmap_utils_js__WEBPACK_IMPORTED_MODULE_6__.isWebMap)(t)?await g(t,n):null}async function g(t,e){if(!(0,_webmap_utils_js__WEBPACK_IMPORTED_MODULE_6__.isWebMap)(t)&&!(0,_webscene_utils_js__WEBPACK_IMPORTED_MODULE_7__.isWebScene)(t))return null;await t.load({signal:e});const n=t?.widgets?.timeSlider;if(!n)return null;const i=await u(t,e),r=n.loop,s=a(n);return{fullTimeExtent:i,loop:r,mode:s,playRate:n.stopDelay??2e3,stops:c(n),timeExtent:p(n,s)}}function T(t){if(!t)return t;const{start:e,end:n}=t;return new _time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__["default"]({start:null!=e?(0,_core_timeUtils_js__WEBPACK_IMPORTED_MODULE_4__.offsetDate)(e,-e.getTimezoneOffset(),"minutes"):e,end:null!=n?(0,_core_timeUtils_js__WEBPACK_IMPORTED_MODULE_4__.offsetDate)(n,-n.getTimezoneOffset(),"minutes"):n})}function w(t){if(!t)return t;const{start:e,end:n}=t;return new _time_TimeExtent_js__WEBPACK_IMPORTED_MODULE_5__["default"]({start:null!=e?(0,_core_timeUtils_js__WEBPACK_IMPORTED_MODULE_4__.offsetDate)(e,e.getTimezoneOffset(),"minutes"):e,end:null!=n?(0,_core_timeUtils_js__WEBPACK_IMPORTED_MODULE_4__.offsetDate)(n,n.getTimezoneOffset(),"minutes"):n})}


/***/ }),

/***/ "./node_modules/@arcgis/core/symbols/cim/SDFHelper.js":
/*!************************************************************!*\
  !*** ./node_modules/@arcgis/core/symbols/cim/SDFHelper.js ***!
  \************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   buildSDF: function() { return /* binding */ u; },
/* harmony export */   getExtent: function() { return /* binding */ m; },
/* harmony export */   getSDFDimensions: function() { return /* binding */ c; },
/* harmony export */   getSDFInfo: function() { return /* binding */ a; },
/* harmony export */   getSDFMetrics: function() { return /* binding */ h; }
/* harmony export */ });
/* harmony import */ var _core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/floatRGBA.js */ "./node_modules/@arcgis/core/core/floatRGBA.js");
/* harmony import */ var _geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../geometry/support/jsonUtils.js */ "./node_modules/@arcgis/core/geometry/support/jsonUtils.js");
/* harmony import */ var _Rect_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Rect.js */ "./node_modules/@arcgis/core/symbols/cim/Rect.js");
/* harmony import */ var _views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../views/2d/engine/webgl/definitions.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
const e=.45;function a(t,o=.5){switch(t.type){case"CIMPointSymbol":{const o=t.symbolLayers;if(!o||1!==o.length)return null;const n=o[0];return"CIMVectorMarker"!==n.type?null:a(n)}case"CIMVectorMarker":{const n=t.markerGraphics;if(!n||1!==n.length)return null;const r=n[0];if(!r)return null;const i=r.geometry;if(!i)return null;const e=r.symbol;return!e||"CIMPolygonSymbol"!==e.type&&"CIMLineSymbol"!==e.type||e.symbolLayers?.some((t=>!!t.effects))?null:{type:"sdf",geom:i,sdfPaddingRatio:o,asFill:"CIMPolygonSymbol"===e.type}}}}function l(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}function s(t){let o=1/0,r=-1/0,i=1/0,e=-1/0;for(const n of t)for(const t of n)t[0]<o&&(o=t[0]),t[0]>r&&(r=t[0]),t[1]<i&&(i=t[1]),t[1]>e&&(e=t[1]);return new _Rect_js__WEBPACK_IMPORTED_MODULE_2__["default"](o,i,r-o,e-i)}function f(t){let o=1/0,n=-1/0,r=1/0,i=-1/0;for(const e of t)for(const t of e)t[0]<o&&(o=t[0]),t[0]>n&&(n=t[0]),t[1]<r&&(r=t[1]),t[1]>i&&(i=t[1]);return[o,r,n,i]}function m(t){return t?t.rings?f(t.rings):t.paths?f(t.paths):(0,_geometry_support_jsonUtils_js__WEBPACK_IMPORTED_MODULE_1__.isExtent)(t)?[t.xmin,t.ymin,t.xmax,t.ymax]:null:null}function c(t,o){const[n,e,a,l]=m(t),s=a-n,f=l-e,c=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__.defaultSdfTextureSize,h=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__.spritePadding,u=Math.floor(.5*(c*o-h)),y=(c-2*(u+h))/Math.max(s,f),d=Math.round(s*y),x=Math.round(f*y);return{pixelDimensions:[s,f],texelDimensions:[Math.round((d+2*u)/y),Math.round((x+2*u)/y)]}}function h(t,o,n,a,l,s,f){const[m,c,h,u]=t;if(h<m||u<c)return{frameSizeRatio:0,anchorX:0,anchorY:0,widthRatio:1,sdfPaddingRatio:.5};const y=h-m,d=u-c,x=Math.max(y,d);let M=.5;if(null!=s&&null!=n){if(!f&&null!=o){s*=(o.ymax-o.ymin)/n}const t=s/(s+x),r=.1;t>e&&t<1&&(M=Math.min(t+r,.99))}const g=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__.defaultSdfTextureSize,p=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__.spritePadding,R=Math.floor(.5*(g*M-p)),w=(g-2*(R+p))/x,P=Math.round(y*w)+2*R,b=Math.round(d*w)+2*R;let C=1;if(o){C=b*(1-M)/((o.ymax-o.ymin)*w)}let I=0,S=0,j=1;a&&(l?o&&n&&o.ymax-o.ymin>0&&(j=(o.xmax-o.xmin)/(o.ymax-o.ymin),I=a.x/(n*j),S=a.y/n):(I=a.x,S=a.y)),o&&(I=.5*(o.xmax+o.xmin)+I*(o.xmax-o.xmin),S=.5*(o.ymax+o.ymin)+S*(o.ymax-o.ymin)),I-=m,S-=c,I*=w,S*=w,I+=R,S+=R;let v=I/P-.5,F=S/b-.5;return l&&n&&(v*=n*j,F*=n),{frameSizeRatio:C,anchorX:v,anchorY:F,widthRatio:j,sdfPaddingRatio:M}}function u(t){const o=l(t.geom),n=s(o),e=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__.defaultSdfTextureSize,a=_views_2d_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_3__.spritePadding,f=Math.floor(.5*(e*t.sdfPaddingRatio-a)),m=e-2*(f+a),c=m/Math.max(n.width,n.height),h=Math.round(n.width*c)+2*f,u=Math.round(n.height*c)+2*f,M=[];for(const r of o)if(r&&r.length>1){const o=[];for(const i of r){let[r,e]=i;r-=n.x,e-=n.y,r*=c,e*=c,r+=f-.5,e+=f-.5,t.asFill?o.push([r,e]):o.push([Math.round(r),Math.round(e)])}if(t.asFill){const t=o.length-1;o[0][0]===o[t][0]&&o[0][1]===o[t][1]||o.push(o[0])}M.push(o)}const g=y(M,h,u,f);return t.asFill&&d(M,h,u,f,g),{data:x(g,f),width:h,height:u,sdfPaddingRatio:t.sdfPaddingRatio,sdfDecodeCoeff:2*f/m}}function y(t,o,n,r){const i=o*n,e=new Array(i),a=r*r+1;for(let l=0;l<i;++l)e[l]=a;for(const l of t){const t=l.length;for(let i=1;i<t;++i){const t=l[i-1],a=l[i];let s,f,m,c;t[0]<a[0]?(s=t[0],f=a[0]):(s=a[0],f=t[0]),t[1]<a[1]?(m=t[1],c=a[1]):(m=a[1],c=t[1]);let h=Math.floor(s)-r,u=Math.floor(f)+r,y=Math.floor(m)-r,d=Math.floor(c)+r;h<0&&(h=0),u>o&&(u=o),y<0&&(y=0),d>n&&(d=n);const x=a[0]-t[0],M=a[1]-t[1],g=x*x+M*M;for(let r=h;r<u;r++)for(let i=y;i<d;i++){const l=r+.5,s=i+.5;let f,m,c=(l-t[0])*x+(s-t[1])*M;c<0?(f=t[0],m=t[1]):c>g?(f=a[0],m=a[1]):(c/=g,f=t[0]+c*x,m=t[1]+c*M);const h=(l-f)*(l-f)+(s-m)*(s-m),u=(n-i-1)*o+r;h<e[u]&&(e[u]=h)}}}for(let l=0;l<i;++l)e[l]=Math.sqrt(e[l]);return e}function d(t,o,n,r,i){for(const e of t){const t=e.length;for(let a=1;a<t;++a){const t=e[a-1],l=e[a];let s,f,m,c;t[0]<l[0]?(s=t[0],f=l[0]):(s=l[0],f=t[0]),t[1]<l[1]?(m=t[1],c=l[1]):(m=l[1],c=t[1]);let h=Math.floor(s),u=Math.floor(f)+1,y=Math.floor(m),d=Math.floor(c)+1;h<r&&(h=r),u>o-r&&(u=o-r),y<r&&(y=r),d>n-r&&(d=n-r);for(let e=y;e<d;++e){if(t[1]>e==l[1]>e)continue;const a=e+.5,s=(n-e-1)*o;for(let o=h;o<u;++o){o+.5<(l[0]-t[0])*(a-t[1])/(l[1]-t[1])+t[0]&&(i[s+o]=-i[s+o])}for(let t=r;t<h;++t)i[s+t]=-i[s+t]}}}}function x(o,n){const r=2*n,i=o.length,e=new Uint8Array(4*i);for(let a=0;a<i;++a){const n=.5-o[a]/r;(0,_core_floatRGBA_js__WEBPACK_IMPORTED_MODULE_0__.packFloatRGBA)(n,e,4*a)}return e}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/color.js":
/*!******************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/color.js ***!
  \******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   premultiplyAlpha: function() { return /* binding */ r; },
/* harmony export */   premultiplyAlphaRGBA: function() { return /* binding */ t; },
/* harmony export */   premultiplyAlphaRGBAArray: function() { return /* binding */ o; },
/* harmony export */   writeColor: function() { return /* binding */ u; }
/* harmony export */ });
/* harmony import */ var _number_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./number.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/number.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function r(n,r=0,t=!1){const o=n[r+3];return n[r]*=o,n[r+1]*=o,n[r+2]*=o,t||(n[r+3]*=255),n}function t(r){if(!r)return 0;const{r:t,g:o,b:u,a:i}=r;return (0,_number_js__WEBPACK_IMPORTED_MODULE_0__.i8888to32)(t*i,o*i,u*i,255*i)}function o(r){if(!r)return 0;const[t,o,u,i]=r;return (0,_number_js__WEBPACK_IMPORTED_MODULE_0__.i8888to32)(t*(i/255),o*(i/255),u*(i/255),i)}function u(n,r,t=0){if(null==r)return n[t]=0,n[t+1]=0,n[t+2]=0,void(n[t+3]=0);const{r:o,g:u,b:i,a:c}=r;n[t]=o*c/255,n[t+1]=u*c/255,n[t+2]=i*c/255,n[t+3]=c}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/FeatureInstanceStore.js":
/*!********************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/FeatureInstanceStore.js ***!
  \********************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ s; }
/* harmony export */ });
/* harmony import */ var _core_string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../core/string.js */ "./node_modules/@arcgis/core/core/string.js");
/* harmony import */ var _TechniqueInstance_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TechniqueInstance.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueInstance.js");
/* harmony import */ var _mesh_instanceIdUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mesh/instanceIdUtils.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/mesh/instanceIdUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
class s{constructor(){this._instanceById=new Map}destroy(){this._instanceById.clear()}get size(){return this._instanceById.size}entries(){return this._instanceById.entries()}updateStart(){this._instanceByIdNext=new Map}updateEnd(){if(!this._instanceByIdNext)throw new Error("InternalError: Found updateEnd call without corresponding updateStart");for(const t of this._instanceById.keys())this._instanceByIdNext.has(t)||this._instanceById.delete(t);for(const[t,n]of this._instanceByIdNext.entries()){const e=this._instanceById.get(t);e?e.setInput(n.getInput()):this._instanceById.set(t,n)}this._instanceByIdNext=null}values(){return this._instanceById.values()}ensureInstance(s,i){let r;if("object"==typeof i&&"optionalAttributes"in i&&"uniforms"in i){r=`${s.type}${JSON.stringify(i.optionalAttributes)}`;const t=i.uniforms;if("object"==typeof t)for(const n in t)r+=`${n}.${null!=t[n]}`}else r=`${s.type}.${JSON.stringify(i)}`;const a=(0,_core_string_js__WEBPACK_IMPORTED_MODULE_0__.numericHash)(r);if(this._instanceByIdNext){const t=new _TechniqueInstance_js__WEBPACK_IMPORTED_MODULE_1__.FeatureTechniqueInstance((0,_mesh_instanceIdUtils_js__WEBPACK_IMPORTED_MODULE_2__.castInstanceId)(a),s,i);return this._instanceByIdNext.set(a,t),t}if(!this._instanceById.has(a)){const t=new _TechniqueInstance_js__WEBPACK_IMPORTED_MODULE_1__.FeatureTechniqueInstance((0,_mesh_instanceIdUtils_js__WEBPACK_IMPORTED_MODULE_2__.castInstanceId)(a),s,i);this._instanceById.set(a,t)}return this._instanceById.get(a)}getInstance(t){return this._instanceById.get(t)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js":
/*!*************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/FeatureLayerView2D.js ***!
  \*************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ re; }
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _AggregateGraphic_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../AggregateGraphic.js */ "./node_modules/@arcgis/core/AggregateGraphic.js");
/* harmony import */ var _geometry_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../geometry.js */ "./node_modules/@arcgis/core/geometry.js");
/* harmony import */ var _Graphic_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../Graphic.js */ "./node_modules/@arcgis/core/Graphic.js");
/* harmony import */ var _core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../core/arrayUtils.js */ "./node_modules/@arcgis/core/core/arrayUtils.js");
/* harmony import */ var _core_Collection_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../core/Collection.js */ "./node_modules/@arcgis/core/core/Collection.js");
/* harmony import */ var _core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../core/compilerUtils.js */ "./node_modules/@arcgis/core/core/compilerUtils.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_handleUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../core/handleUtils.js */ "./node_modules/@arcgis/core/core/handleUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_maybe_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../../core/maybe.js */ "./node_modules/@arcgis/core/core/maybe.js");
/* harmony import */ var _core_object_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../../core/object.js */ "./node_modules/@arcgis/core/core/object.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _layers_effects_FeatureEffectView_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../layers/effects/FeatureEffectView.js */ "./node_modules/@arcgis/core/layers/effects/FeatureEffectView.js");
/* harmony import */ var _layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../../../layers/graphics/featureConversionUtils.js */ "./node_modules/@arcgis/core/layers/graphics/featureConversionUtils.js");
/* harmony import */ var _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../../../layers/support/FeatureFilter.js */ "./node_modules/@arcgis/core/layers/support/FeatureFilter.js");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../../../layers/support/layerUtils.js */ "./node_modules/@arcgis/core/layers/support/layerUtils.js");
/* harmony import */ var _layers_support_timeSupport_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../../../layers/support/timeSupport.js */ "./node_modules/@arcgis/core/layers/support/timeSupport.js");
/* harmony import */ var _rest_support_AggregateFeatureSet_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../../../rest/support/AggregateFeatureSet.js */ "./node_modules/@arcgis/core/rest/support/AggregateFeatureSet.js");
/* harmony import */ var _rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../../../rest/support/FeatureSet.js */ "./node_modules/@arcgis/core/rest/support/FeatureSet.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _LayerView2D_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ./LayerView2D.js */ "./node_modules/@arcgis/core/views/2d/layers/LayerView2D.js");
/* harmony import */ var _features_FeatureContainer_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ./features/FeatureContainer.js */ "./node_modules/@arcgis/core/views/2d/layers/features/FeatureContainer.js");
/* harmony import */ var _features_FeaturePipelineWorkerProxy_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ./features/FeaturePipelineWorkerProxy.js */ "./node_modules/@arcgis/core/views/2d/layers/features/FeaturePipelineWorkerProxy.js");
/* harmony import */ var _features_FeatureSourceEventLog_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ./features/FeatureSourceEventLog.js */ "./node_modules/@arcgis/core/views/2d/layers/features/FeatureSourceEventLog.js");
/* harmony import */ var _features_layerAdapters_CatalogFootprintLayerAdapter_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ./features/layerAdapters/CatalogFootprintLayerAdapter.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/CatalogFootprintLayerAdapter.js");
/* harmony import */ var _features_layerAdapters_FeatureLayerAdapter_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ./features/layerAdapters/FeatureLayerAdapter.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/FeatureLayerAdapter.js");
/* harmony import */ var _features_layerAdapters_InMemoryLayerAdapter_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ./features/layerAdapters/InMemoryLayerAdapter.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/InMemoryLayerAdapter.js");
/* harmony import */ var _features_layerAdapters_KnowledgeGraphSublayerAdapter_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ./features/layerAdapters/KnowledgeGraphSublayerAdapter.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/KnowledgeGraphSublayerAdapter.js");
/* harmony import */ var _features_layerAdapters_OGCFeatureLayerAdapter_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ./features/layerAdapters/OGCFeatureLayerAdapter.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/OGCFeatureLayerAdapter.js");
/* harmony import */ var _features_layerAdapters_OrientedImageryLayerAdapter_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ./features/layerAdapters/OrientedImageryLayerAdapter.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/OrientedImageryLayerAdapter.js");
/* harmony import */ var _features_layerAdapters_ParquetLayerAdapter_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ./features/layerAdapters/ParquetLayerAdapter.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/ParquetLayerAdapter.js");
/* harmony import */ var _features_layerAdapters_StreamLayerAdapter_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ./features/layerAdapters/StreamLayerAdapter.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/StreamLayerAdapter.js");
/* harmony import */ var _features_layerAdapters_SubtypeGroupLayerAdapter_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ./features/layerAdapters/SubtypeGroupLayerAdapter.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/SubtypeGroupLayerAdapter.js");
/* harmony import */ var _features_schema_processor_symbols_ComplexSymbolSchema_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ./features/schema/processor/symbols/ComplexSymbolSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/ComplexSymbolSchema.js");
/* harmony import */ var _support_FeatureCommandQueue_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ./support/FeatureCommandQueue.js */ "./node_modules/@arcgis/core/views/2d/layers/support/FeatureCommandQueue.js");
/* harmony import */ var _support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ./support/handleNoEngineError.js */ "./node_modules/@arcgis/core/views/2d/layers/support/handleNoEngineError.js");
/* harmony import */ var _support_HighlightCounter_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ./support/HighlightCounter.js */ "./node_modules/@arcgis/core/views/2d/layers/support/HighlightCounter.js");
/* harmony import */ var _support_util_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ./support/util.js */ "./node_modules/@arcgis/core/views/2d/layers/support/util.js");
/* harmony import */ var _tiling_FeatureTileSubscriptionManager_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ../tiling/FeatureTileSubscriptionManager.js */ "./node_modules/@arcgis/core/views/2d/tiling/FeatureTileSubscriptionManager.js");
/* harmony import */ var _layers_FeatureLayerView_js__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ../../layers/FeatureLayerView.js */ "./node_modules/@arcgis/core/views/layers/FeatureLayerView.js");
/* harmony import */ var _layers_LayerView_js__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ../../layers/LayerView.js */ "./node_modules/@arcgis/core/views/layers/LayerView.js");
/* harmony import */ var _layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ../../layers/RefreshableLayerView.js */ "./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js");
/* harmony import */ var _geometry_Extent_js__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ../../../geometry/Extent.js */ "./node_modules/@arcgis/core/geometry/Extent.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function X(e,t){const r=new Set;return e&&e.forEach((e=>r.add(e))),t&&t.forEach((e=>r.add(e))),r.has("*")?["*"]:Array.from(r)}const Y=4294967294;let ee=class extends((0,_layers_FeatureLayerView_js__WEBPACK_IMPORTED_MODULE_45__["default"])((0,_layers_RefreshableLayerView_js__WEBPACK_IMPORTED_MODULE_47__["default"])((0,_LayerView2D_js__WEBPACK_IMPORTED_MODULE_26__.LayerView2DMixin)(_layers_LayerView_js__WEBPACK_IMPORTED_MODULE_46__["default"])))){constructor(){super(...arguments),this._commandsQueue=new _support_FeatureCommandQueue_js__WEBPACK_IMPORTED_MODULE_40__["default"]({process:e=>{switch(e.type){case"edit-by-feature":case"edit-by-id":return this._doEdit(e);case"update":return this._doUpdate();case"highlight":return this._updateHighlights()}}}),this._visibilityOverrides=new Set,this._highlightCounter=new _support_HighlightCounter_js__WEBPACK_IMPORTED_MODULE_42__.HighlightCounter,this._lastAvailableFields=[],this._lastTargetState=null,this.eventLog=new _features_FeatureSourceEventLog_js__WEBPACK_IMPORTED_MODULE_29__.FeatureSourceEventLog,this._sourceRefreshVersion=1,this._displayRefreshVersion=1,this._pipelineUpdating=!1,this._fields=null,this.featureEffectView=new _layers_effects_FeatureEffectView_js__WEBPACK_IMPORTED_MODULE_17__["default"]}destroy(){this._workerProxy?.destroy(),this._workerAttached.reject((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.createAbortError)()),this._commandsQueue.destroy()}initialize(){this._workerAttached=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.createResolver)(),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.ignoreAbortErrors)(this._workerAttached.promise),this.addResolvingPromise(this._initProxy()),this.featureEffectView.featureEffect=this.featureEffect,this.featureEffectView.endTransition()}async _initProxy(){const e=this.layer;if("isTable"in e&&e.isTable)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_7__["default"]("featurelayerview:table-not-supported","table feature layer can't be displayed",{layer:e});if("mesh"===e.geometryType)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_7__["default"]("featurelayerview:geometry-type-not-supported",`Geometry type of ${e.geometryType} is not supported`,{layer:e});if(("feature"===e.type||"subtype-group"===e.type)&&!1===(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_21__.getEffectiveLayerCapabilities)(e)?.operations.supportsQuery)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_7__["default"]("featurelayerview:query-not-supported","layer view requires a layer with query capability",{layer:e});this._workerProxy&&this._workerProxy.destroy();const t=this._createClientOptions();this._workerProxy=await (0,_features_FeaturePipelineWorkerProxy_js__WEBPACK_IMPORTED_MODULE_28__.createFeaturePipelineWorkerProxy)(t)}async _attachProxy(){const e={service:await this.layerAdapter.createServiceOptions(this.view),tileInfoJSON:this.view?.featuresTilingScheme?.tileInfo?.toJSON()};let t=[];Array.isArray(e.service.source)&&(t=e.service.source);try{await this._workerProxy.pipeline.onAttach(e,{transferList:t}),this._workerAttached.resolve()}catch(r){this._workerAttached.reject((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.createAbortError)()),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.throwIfNotAbortError)(r)}}async _detachProxy(){return this._workerProxy.pipeline.onDetach()}async getWorker(){return await this._workerAttached.promise,this._workerProxy}get hasAllFeatures(){return this.layer.visible&&!this.suspended&&this.eventLog.hasAllFeatures}get hasAllFeaturesInView(){return this.layer.visible&&!this.suspended&&this.eventLog.hasAllFeaturesInView}get hasFullGeometries(){return this.layer.visible&&!this.suspended&&this.eventLog.hasFullGeometries}get labelingCollisionInfos(){const e=this.layerAdapter.getLabelingDeconflictionInfo(this.view),t=this.layer.geometryType,r=!this.suspended;return e.map((({vvEvaluators:e,deconflictionEnabled:i})=>({container:this.featureContainer,vvEvaluators:e,deconflictionEnabled:i,geometryType:t,visible:r})))}get layerAdapter(){switch(this.layer.type){case"feature":return"memory"===this.layer.source.type?new _features_layerAdapters_InMemoryLayerAdapter_js__WEBPACK_IMPORTED_MODULE_32__.InMemoryLayerAdapter(this.layer):new _features_layerAdapters_FeatureLayerAdapter_js__WEBPACK_IMPORTED_MODULE_31__.FeatureLayerAdapter(this.layer);case"geojson":case"csv":case"wfs":return new _features_layerAdapters_InMemoryLayerAdapter_js__WEBPACK_IMPORTED_MODULE_32__.InMemoryLayerAdapter(this.layer);case"parquet":return new _features_layerAdapters_ParquetLayerAdapter_js__WEBPACK_IMPORTED_MODULE_36__.ParquetLayerAdapter(this.layer);case"subtype-group":return new _features_layerAdapters_SubtypeGroupLayerAdapter_js__WEBPACK_IMPORTED_MODULE_38__.SubtypeGroupLayerAdapter(this.layer);case"ogc-feature":return new _features_layerAdapters_OGCFeatureLayerAdapter_js__WEBPACK_IMPORTED_MODULE_34__.OGCFeatureLayerAdapter(this.layer);case"stream":return new _features_layerAdapters_StreamLayerAdapter_js__WEBPACK_IMPORTED_MODULE_37__.StreamLayerAdapter(this.layer);case"oriented-imagery":return new _features_layerAdapters_OrientedImageryLayerAdapter_js__WEBPACK_IMPORTED_MODULE_35__.OrientedImageryLayerAdapter(this.layer);case"knowledge-graph-sublayer":return new _features_layerAdapters_KnowledgeGraphSublayerAdapter_js__WEBPACK_IMPORTED_MODULE_33__.KnowledgeGraphSublayerAdapter(this.layer);case"catalog-footprint":return new _features_layerAdapters_CatalogFootprintLayerAdapter_js__WEBPACK_IMPORTED_MODULE_30__.CatalogFootprintLayerAdapter(this.layer);default:(0,_core_compilerUtils_js__WEBPACK_IMPORTED_MODULE_6__.neverReached)(this.layer)}return null}get timeExtent(){return (0,_layers_support_timeSupport_js__WEBPACK_IMPORTED_MODULE_22__.combineTimeExtent)(this.layerAdapter.timeOptions,this.view?.timeExtent,this._get("timeExtent"))}getDisplayStatistics(e,t){return this.featureContainer?.getDisplayStatistics(e,t)}async queryHeatmapStatistics(e){return(await this.getWorker()).pipeline.queryHeatmapStatistics(e)}highlight(e,t="default"){let a;e instanceof _Graphic_js__WEBPACK_IMPORTED_MODULE_3__["default"]?a=[e.getObjectId()]:"number"==typeof e||"string"==typeof e?a=[e]:_core_Collection_js__WEBPACK_IMPORTED_MODULE_5__["default"].isCollection(e)&&e.length>0?a=e.map((e=>e?.getObjectId())).toArray():Array.isArray(e)&&e.length>0&&(a="number"==typeof e[0]||"string"==typeof e[0]?e:e.map((e=>e?.getObjectId())));const o=a?.filter(_core_arrayUtils_js__WEBPACK_IMPORTED_MODULE_4__.isSome);return o?.length?(this._addHighlights(o,t),(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_8__.makeHandle)((()=>this._removeHighlights(o,t)))):(0,_core_handleUtils_js__WEBPACK_IMPORTED_MODULE_8__.makeHandle)()}getHighlightIds(){return Array.from(this._highlightCounter.ids())}hasHighlight(){return!this._highlightCounter.empty}async hitTest(e,i){const s=await this.featureContainer.hitTest(i);if(0===s.length)return null;const a=await this.getWorker(),{features:o,aggregates:n}=await a.pipeline.getDisplayFeatures(s),u=this.featureContainer.getSortKeys(s),l=({displayId:e},{displayId:t})=>u.has(e)&&u.has(t)?u.get(e)-u.get(t):e-t;return o.sort(l).reverse(),n.sort(l).reverse(),[...n.map((r=>this._createGraphicHit(e,_AggregateGraphic_js__WEBPACK_IMPORTED_MODULE_1__["default"].fromJSON(r)))),...o.map((t=>this._createGraphicHit(e,_Graphic_js__WEBPACK_IMPORTED_MODULE_3__["default"].fromJSON(t))))]}async queryStatistics(){const e=await this.getWorker();return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(e.pipeline.queryStatistics(),{featureCount:0,ringCount:0,vertexCount:0})}async querySummaryStatistics(e,t,r){const i=await this.getWorker(),s={...t,scale:this.view.scale},a=i.features.executeQueryForSummaryStatistics(this._cleanUpQuery(e),s,r);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(a,{})}async queryAggregateSummaryStatistics(e,t,r){const i={...t,scale:this.view.scale},s=(await this.getWorker()).aggregates.executeQueryForSummaryStatistics(this._cleanUpAggregateQuery(e),i,r);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(s,{})}async queryUniqueValues(e,t,r){const i=await this.getWorker(),s={...t,scale:this.view.scale},a=i.features.executeQueryForUniqueValues(this._cleanUpQuery(e),s,r);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(a,{uniqueValueInfos:[]})}async queryAggregateUniqueValues(e,t,r){const i=await this.getWorker(),s={...t,scale:this.view.scale},a=i.aggregates.executeQueryForUniqueValues(this._cleanUpAggregateQuery(e),s,r);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(a,{uniqueValueInfos:[]})}async queryClassBreaks(e,t,r){const i=await this.getWorker(),s={...t,scale:this.view.scale},a=i.features.executeQueryForClassBreaks(this._cleanUpQuery(e),s,r);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(a,{classBreakInfos:[]})}async queryAggregateClassBreaks(e,t,r){const i=await this.getWorker(),s={...t,scale:this.view.scale},a=i.aggregates.executeQueryForClassBreaks(this._cleanUpAggregateQuery(e),s,r);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(a,{classBreakInfos:[]})}async queryHistogram(e,t,r){const i=await this.getWorker(),s={...t,scale:this.view.scale},a=i.features.executeQueryForHistogram(this._cleanUpQuery(e),s,r);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(a,{bins:[],maxValue:null,minValue:null,normalizationTotal:null})}async queryAggregateHistogram(e,t,r){const i=await this.getWorker(),s={...t,scale:this.view.scale},a=i.aggregates.executeQueryForHistogram(this._cleanUpAggregateQuery(e),s,r);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(a,{bins:[],maxValue:null,minValue:null,normalizationTotal:null})}queryFeatures(e,t){return this.queryFeaturesJSON(e,t).then((e=>{const t=_rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_24__["default"].fromJSON(e);return t.features.forEach((e=>this._setLayersForFeature(e))),t}))}async queryVisibleFeatures(e,t){const r=(await this.getWorker()).pipeline.queryVisibleFeatures(this._cleanUpQuery(e),t),i=await (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(r,{features:[]}),s=_rest_support_FeatureSet_js__WEBPACK_IMPORTED_MODULE_24__["default"].fromJSON(i);return s.features.forEach((e=>this._setLayersForFeature(e))),s}async queryAggregates(e,t){const r=(await this.getWorker()).aggregates.executeQuery(this._cleanUpAggregateQuery(e),t),i=await (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(r,{features:[]}),s=_rest_support_AggregateFeatureSet_js__WEBPACK_IMPORTED_MODULE_23__["default"].fromJSON(i);return s.features.forEach((e=>this._setLayersForFeature(e))),s}async queryAggregateIds(e,t){const r=(await this.getWorker()).aggregates.executeQueryForIds(this._cleanUpAggregateQuery(e),t);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(r,[])}async queryAggregateCount(e,t){const r=(await this.getWorker()).aggregates.executeQueryForCount(this._cleanUpAggregateQuery(e),t);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(r,0)}async queryAggregateJSON(e,t){const r=(await this.getWorker()).aggregates.executeQuery(this._cleanUpAggregateQuery(e),t);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(r,{features:[]})}async queryFeaturesJSON(e,t){const r=(await this.getWorker()).features.executeQuery(this._cleanUpQuery(e),t);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(r,{features:[]})}async queryObjectIds(e,t){const r=(await this.getWorker()).features.executeQueryForIds(this._cleanUpQuery(e),t);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(r,[])}async queryFeatureCount(e,t){const r=(await this.getWorker()).features.executeQueryForCount(this._cleanUpQuery(e),t);return (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(r,0)}async queryExtent(e,t){const r=(await this.getWorker()).features.executeQueryForExtent(this._cleanUpQuery(e),t),i=await (0,_support_handleNoEngineError_js__WEBPACK_IMPORTED_MODULE_41__.handleNoEngineError)(r,{count:0,extent:null});return{count:i.count,extent:_geometry_Extent_js__WEBPACK_IMPORTED_MODULE_48__["default"].fromJSON(i.extent)}}async getSampleFeatures(e){return(await this.getWorker()).pipeline.getSampleFeatures(e)}setVisibility(e,t){t?this._visibilityOverrides.delete(e):this._visibilityOverrides.add(e),this._update()}update(e){if(!this._subscriptionManager)return;this.view.animation&&!this._lastTargetState&&(this._lastTargetState=e.state.clone()),!this.view.animation&&this._lastTargetState&&(this._lastTargetState=null);const t=this._subscriptionManager.update(e.targetState,this._lastTargetState);this.featureContainer.setVisibleTiles(t)}attach(){(0,_core_has_js__WEBPACK_IMPORTED_MODULE_9__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D.attach"),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.ignoreAbortErrors)(this._updatingHandles.addPromise(this._workerAttached.promise)),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.ignoreAbortErrors)(this._attachProxy()),this.featureContainer=new _features_FeatureContainer_js__WEBPACK_IMPORTED_MODULE_27__.FeatureContainer(this),this.container.addChild(this.featureContainer),this.view.timeline.record(`${this.layer.title} (FeatureLayer) Attach`),this._subscriptionManager=new _tiling_FeatureTileSubscriptionManager_js__WEBPACK_IMPORTED_MODULE_44__.FeatureTileSubscriptionManager({tileInfoView:this.view.featuresTilingScheme,updateSubscriptions:e=>{this.featureContainer.updateSubscriptions(e),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.ignoreAbortErrors)(this._updatingHandles.addPromise(this.getWorker().then((t=>t.pipeline.updateSubscriptions(e)))))},isDone:e=>this.featureContainer.isDone(e)}),this.requestUpdate(),this.addAttachHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_14__.watch)((()=>JSON.stringify({displayRefreshVersion:this._displayRefreshVersion,timeExtent:this.timeExtent,clips:this.clips,filter:this.filter,featureEffect:this.featureEffect,sourceRefreshVersion:this._sourceRefreshVersion,timeZone:this.view.timeZone,effect:this.featureEffect,...this.layerAdapter.getUpdateHashProperties(this.view)})),(()=>this._update()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_14__.initial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_14__.watch)((()=>this.updateSuspended),(e=>{e||(this._subscriptionManager.resume(),this.view.labelManager.requestUpdate())})),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_14__.watch)((()=>this.visible),(e=>{this.view.labelManager.requestUpdate()}))]),"stream"!==this.layer.type&&"parquet"!==this.layer.type&&"catalog-footprint"!==this.layer.type&&this.addAttachHandles(this.layer.on("edits",(e=>this._edit(e))))}detach(){(0,_core_has_js__WEBPACK_IMPORTED_MODULE_9__["default"])("esri-2d-update-debug")&&console.debug("FeatureLayerView2D.detach"),this._detachProxy(),this._fields=null,this.featureContainer.destroy(),this.featureContainer=null,this._commandsQueue.clear(),this.container.removeAllChildren(),this._subscriptionManager=(0,_core_maybe_js__WEBPACK_IMPORTED_MODULE_11__.destroyMaybe)(this._subscriptionManager),this._workerProxy.pipeline.onDetach(),this._workerAttached=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.createResolver)(),(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.ignoreAbortErrors)(this._workerAttached.promise),this._lastAvailableFields=[],this._lastSchema=null}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}isUpdating(){const e="renderer"in this.layer&&null!=this.layer.renderer,t=this._commandsQueue.updateTracking.updating,r=null!=this._updatingRequiredFieldsPromise,i=this.featureContainer.updatingHandles.updating,s=this.updateRequested||e&&(t||r)||i||this._pipelineUpdating||this.dataUpdating;if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_9__["default"])("esri-2d-log-updating")){console.log(`Updating FLV2D (${this.layer.id}): ${s}\n  -> updateRequested ${this.updateRequested}\n  -> hasRenderer ${e}\n  -> updatingRequiredFields ${r}\n  -> hasPendingCommand ${t}\n  -> dataUpdating ${this.dataUpdating}\n  -> processing ${this._pipelineUpdating}\n  -> updatingContainer ${i}\n`);for(const e of this.featureContainer.subscriptions())console.log(`    -> Tile[${e.id}] Done: ${e.done}`)}return s}_createClientOptions(){const e=this;return{get container(){return e.featureContainer},setUpdating:e=>{this._set("_pipelineUpdating",e.pipeline),this._set("dataUpdating",e.data)},emitEvent:e=>{this.emit(e.name,e.event)},get eventLog(){return e.eventLog},fetch:t=>Promise.all(t.map((t=>e.view.stage.painter.textureManager.rasterizeItem(t)))),fetchDictionary:e=>Promise.all(e.map((e=>this._fetchDictionaryRequest(e))))}}async _fetchDictionaryRequest(e){try{if("subtype-group"===this.layer.type)throw new Error("InternalError: SubtypeGroupLayer does not support dictionary renderer");const t=this.layer.renderer;if(!t||"dictionary"!==t.type)throw new Error("InternalError: Expected layer to have a DictionaryRenderer");const r=this._lastSchema.processor.mesh.factory.symbology;if("dictionary"!==r.type)throw new Error("InternalError: Expected schema to be of type 'dictionary'");const i={cimAnalyzer:this.view.stage.cimAnalyzer,cimResourceManager:this.view.stage.painter.textureManager.resourceManager,store:this.featureContainer.instanceStore,scaleExpression:r.scaleExpression};this._fields||(this._fields=this.layer.fields.map((e=>e.toJSON())));const s=r.visualVariableUniforms,a=await t.getSymbolAsync(e.feature,{fields:this._fields});if(!a||!a.data)return{type:"dictionary-response",meshes:[]};return{type:"dictionary-response",meshes:await (0,_features_schema_processor_symbols_ComplexSymbolSchema_js__WEBPACK_IMPORTED_MODULE_39__.createComplexSymbolInstances)(a.data,{uniforms:s,path:"renderer",schemaOptions:i})}}catch(t){return{type:"dictionary-response",meshes:[]}}}_cleanUpQuery(e){const t=_rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__["default"].from(e)||this.createQuery();return t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference),t.toJSON()}_cleanUpAggregateQuery(e){const t=_rest_support_Query_js__WEBPACK_IMPORTED_MODULE_25__["default"].from(e)||this.createAggregateQuery();t.outSpatialReference||(t.outSpatialReference=this.view.spatialReference);const r=t.objectIds??[];for(const i of t.aggregateIds??[])r.push(i);return t.objectIds=r,t.aggregateIds=[],t.toJSON()}async _update(){return this._commandsQueue.push({type:"update"})}async _edit(e){if(this.updateSuspended)return void this._subscriptionManager.suspend();const t=this._getEffectiveEdit(e);return t?this._commandsQueue.push(t).catch(_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.throwIfNotAbortError):void 0}async doRefresh(e){this.attached&&(this.updateSuspended&&e||(e?this.incrementSourceRefreshVersion():this.incrementDisplayRefreshVersion()))}incrementSourceRefreshVersion(){this._sourceRefreshVersion=(this._sourceRefreshVersion+1)%Y+1}incrementDisplayRefreshVersion(){this._displayRefreshVersion=(this._displayRefreshVersion+1)%Y+1}_getEffectiveEdit(e){const t="globalIdField"in this.layer&&this.layer.globalIdField,r=e.deletedFeatures.some((e=>-1===e.objectId||!e.objectId)),i=t&&this.availableFields.includes(t);if(r&&!i)return _core_Logger_js__WEBPACK_IMPORTED_MODULE_10__["default"].getLogger(this).error(new _core_Error_js__WEBPACK_IMPORTED_MODULE_7__["default"]("mapview-apply-edits",`Editing the specified service requires the layer's globalIdField, ${t} to be included the layer's outFields for updates to be reflected on the map`)),null;const s=this.layer,a=e.historicMoment?.getTime()??null,n="layerId"in s&&e.editedFeatures?.find((e=>e.layerId===s.layerId));if(n&&this._canEditByFeature(n)){const e=!1,r=!1,i=(0,_support_util_js__WEBPACK_IMPORTED_MODULE_43__.toJSONGeometryType)(this.layer.geometryType),{adds:s,deletes:o,updates:u}=n.editedFeatures,l=this.layer.objectIdField,h=s.map((t=>(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_18__.convertFromFeature)(t,i,e,r))),c=u.map((t=>(0,_layers_graphics_featureConversionUtils_js__WEBPACK_IMPORTED_MODULE_18__.convertFromFeature)(t.current,i,e,r)));return{type:"edit-by-feature",added:h,removed:o.map((e=>"attributes"in e?{globalId:t?e.attributes[t]:null,objectId:l?e.attributes[l]:null}:e)),updated:c,historicMoment:a}}return{type:"edit-by-id",added:e.addedFeatures,updated:e.updatedFeatures,removed:e.deletedFeatures,historicMoment:a}}_canEditByFeature(e){const{adds:t,updates:r}=e.editedFeatures;return t.every((e=>this.view.spatialReference.equals(e.geometry?.spatialReference)))&&r.every((e=>this.view.spatialReference.equals(e.current.geometry?.spatialReference)))}async _doUpdate(){"featureReduction"in this.layer&&this.layer.featureReduction&&this.layer.featureReduction!==this._lastFeatureReduction&&(this.layer.featureReduction=this.layer.featureReduction?.clone(),this._lastFeatureReduction=this.layer.featureReduction);try{if(await this._updateRequiredFields(),this.destroyed||!this.layerAdapter?.hasRequiredSupport||!this._subscriptionManager)return;const e=this.featureContainer.instanceStore;this.featureContainer.attributeView.lockTextureUploads(),e.updateStart();const t=this.featureEffect,r={store:e,cimAnalyzer:this.view.stage.cimAnalyzer,cimResourceManager:this.view.stage.painter.textureManager.resourceManager,scaleExpression:void 0},i=this._createViewSchemaConfig(),s={source:this.layerAdapter.createSourceSchema(i,this._sourceRefreshVersion),processor:await this.layerAdapter.createProcessorSchema(r,i,this._displayRefreshVersion)},a=(0,_core_object_js__WEBPACK_IMPORTED_MODULE_12__.notDeepEqual)(this._lastSchema?.source.mutable,s.source.mutable)||(0,_core_object_js__WEBPACK_IMPORTED_MODULE_12__.notDeepEqual)(this._lastSchema?.processor,s.processor);if(!a)return this.featureContainer.requestRender(),this.featureContainer.attributeView.unlockTextureUploads(),e.updateEnd(),void(this.featureEffectView.featureEffect=t);this._lastSchema=s,this._fields=null;const o=Math.round(performance.now());(0,_core_has_js__WEBPACK_IMPORTED_MODULE_9__["default"])("esri-2d-update-debug")&&console.debug(`Id[${this.layer.uid}] Version[${o}] FeatureLayerView2D._doUpdate`,{changes:a});const n=await this.getWorker();await n.pipeline.updateSchema(s,o),e.updateEnd(),this.featureEffectView.featureEffect=t,this.featureEffectView.endTransition(),this.featureContainer.restartAllAnimations(),this.featureContainer.attributeView.unlockTextureUploads(),this.featureContainer.swapRenderState(),this.featureContainer.requestRender(),(0,_core_has_js__WEBPACK_IMPORTED_MODULE_9__["default"])("esri-2d-update-debug")&&console.debug(`Version[${o}] FeatureLayerView2D.updateEnd`),this.requestUpdate()}catch(e){(0,_core_has_js__WEBPACK_IMPORTED_MODULE_9__["default"])("esri-2d-update-debug")&&console.error("Encountered an error during update",e)}}async _doEdit(e){const t=await this.getWorker();try{this.featureContainer.editStart(),await t.pipeline.onEdits(e),this.featureContainer.editEnd()}catch(r){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.isAbortError)(r),0}}get hasFilter(){const e=this.layerAdapter.hasFilters?.(this.view)??!1;return null!=this.filter||null!=this.timeExtent||this._visibilityOverrides.size>0||e}_getEffectiveAvailableFields(e){const t=X(this._lastAvailableFields,e);return this._lastAvailableFields=t,(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_20__.packFields)(this.layer.fieldsIndex,t)}_createViewSchemaConfig(){const e=[te(this.view,this.layerAdapter,this.timeExtent,this._visibilityOverrides,this.filter),this.featureEffect?.filter?.toJSON()??null];return{availableFields:this._getEffectiveAvailableFields(this.availableFields),filters:e,scale:this.view.scale,timeZone:this.view.timeZone}}_addHighlights(e,t){this._highlightCounter.addGroup(e,t),this._commandsQueue.push({type:"highlight"})}_removeHighlights(e,t){this._highlightCounter.deleteGroup(e,t),this._commandsQueue.push({type:"highlight"})}async _updateHighlights(){const e=[];for(const i of this._highlightCounter.ids()){const t=this._highlightCounter.getHighlightGroups(i),r=this._getHighlightBits(t);e.push({objectId:i,highlightFlags:r})}const t=await this.getWorker();if(this.destroyed)return;const r=t.pipeline.updateHighlight({highlights:e}).catch((e=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_13__.isAbortError)(e)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_10__["default"].getLogger(this).error(e)}));this._updatingHandles.addPromise(r)}_setLayersForFeature(e){e.layer=e.sourceLayer=this.layer,this.layerAdapter.setGraphicOrigin&&this.layerAdapter.setGraphicOrigin(e)}_createGraphicHit(e,t){return this._setLayersForFeature(t),null!=t.geometry&&(t.geometry.spatialReference=this.view.spatialReference),{type:"graphic",graphic:t,layer:this.layer,mapPoint:e}}};function te(e,t,r,i,s){s&&(s=s.clone());const a=null!=s?s.timeExtent:null,o=null!=r&&null!=a?r.intersection(a):r||a;o&&(s??=new _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_19__["default"],s.timeExtent=o),s=t.addFilters?.(s,e)??s;let n=s?.toJSON()??null;return i.size&&(n??=(new _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_19__["default"]).toJSON(),n.hiddenIds=Array.from(i)),n}(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],ee.prototype,"_commandsQueue",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],ee.prototype,"_sourceRefreshVersion",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],ee.prototype,"_displayRefreshVersion",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({readOnly:!0})],ee.prototype,"_pipelineUpdating",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({readOnly:!0})],ee.prototype,"hasAllFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({readOnly:!0})],ee.prototype,"hasAllFeaturesInView",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({readOnly:!0})],ee.prototype,"hasFullGeometries",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],ee.prototype,"featureEffectView",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],ee.prototype,"labelingCollisionInfos",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],ee.prototype,"layerAdapter",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)({readOnly:!0})],ee.prototype,"timeExtent",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_15__.property)()],ee.prototype,"updating",void 0),ee=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_16__.subclass)("esri.views.2d.layers.FeatureLayerView2D")],ee);const re=ee;


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/FeatureContainer.js":
/*!********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/FeatureContainer.js ***!
  \********************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FeatureContainer: function() { return /* binding */ p; }
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/support/UpdatingHandles.js */ "./node_modules/@arcgis/core/core/support/UpdatingHandles.js");
/* harmony import */ var _engine_AFeatureContainer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../engine/AFeatureContainer.js */ "./node_modules/@arcgis/core/views/2d/engine/AFeatureContainer.js");
/* harmony import */ var _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../engine/webgl/enums.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/enums.js");
/* harmony import */ var _engine_webgl_shaderGraph_techniques_FeatureInstanceStore_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../engine/webgl/shaderGraph/techniques/FeatureInstanceStore.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/FeatureInstanceStore.js");
/* harmony import */ var _engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../engine/webgl/shaderGraph/techniques/TechniqueRegistry.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueRegistry.js");
/* harmony import */ var _engine_webgl_shaderGraph_techniques_TechniqueType_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../engine/webgl/shaderGraph/techniques/TechniqueType.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueType.js");
/* harmony import */ var _RenderState_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./RenderState.js */ "./node_modules/@arcgis/core/views/2d/layers/features/RenderState.js");
/* harmony import */ var _support_util_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../support/util.js */ "./node_modules/@arcgis/core/views/2d/layers/support/util.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
class c{constructor(e,s){this.id=e,this.version=s,this._resolver=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.createResolver)(),this._done=!1}get done(){return this._done}get promise(){return this._resolver.promise}end(){this._resolver.resolve(),this._done=!0}destroy(){this._resolver.reject()}}class p extends _engine_AFeatureContainer_js__WEBPACK_IMPORTED_MODULE_3__.AFeatureContainer{constructor(e){super(e.view.featuresTilingScheme),this.updatingHandles=new _core_support_UpdatingHandles_js__WEBPACK_IMPORTED_MODULE_2__.UpdatingHandles,this._hitTestsRequests=[],this._store=new _engine_webgl_shaderGraph_techniques_FeatureInstanceStore_js__WEBPACK_IMPORTED_MODULE_5__["default"],this._visibleTiles=new Set,this._subscriptions=new Map,this._updateStatisticsRequests=[],this._lockStatisticUpdates=!1,this._layerView=e,this.addTransitionable(this._layerView.featureEffectView)}renderChildren(e){if(this._updateAttributeView(),this._renderState?.update(this.attributeView.currentEpoch),this._renderState){const e=Array.from(this._renderState.tiles()).filter((e=>e.needsUpload));if(e.length){e[Math.floor(Math.random()*e.length)].upload(),e.length>=2&&this.requestRender()}for(const t of this._renderState.tiles())t.tryReady(this.attributeView.currentEpoch)&&(this._subscriptions.get(t.key.id)?.end(),this._layerView.requestUpdate(),this.hasLabels&&this._layerView.view.labelManager.requestUpdate(),this.requestRender())}for(const t of this.children)t.setTransform(e.state);switch(super.renderChildren(e),e.drawPhase){case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.MAP:return this._renderMapPhase(e);case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.HIGHLIGHT:return this._renderHighlightPhase(e);case _engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.LABEL:return this._renderLabelPhase(e)}}subscriptions(){return this._subscriptions.values()}get _instanceStore(){return this._store}get instanceStore(){return this._store}get layerView(){return this._layerView}get hasLabels(){return this._layerView.labelingCollisionInfos.length>0}get hasHighlight(){return this._layerView.hasHighlight()}get _layer(){return this._layerView.layer}_getHeatmapInstance(e){if(null==this._instanceStore||!(e.drawPhase&_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_6__.Techniques.heatmap.drawPhase))return null;for(const t of this._instanceStore.values())if(_(t))return t;return null}get children(){return this._renderState?Array.from(this._renderState.tiles()).filter((e=>this._visibleTiles.has(e.key.id))):[]}updateAttributeView(e){this.requestRender(),this.attributeView.requestUpdate(e),this.hasLabels&&this._layerView.view.labelManager.requestUpdate()}updateSubscriptions(e){for(const{tileId:t,version:s}of e.subscribe)if(this._subscriptions.has(t))this._subscriptions.get(t).version=s;else{const e=new c(t,s);this._subscriptions.set(t,e),this.updatingHandles.addPromise(e.promise)}for(const t of e.unsubscribe){const e=this._subscriptions.get(t);e?.destroy(),this._subscriptions.delete(t),this.removeTile(t)}}isDone(e){return!!this._renderState&&this._renderState.isTileDone(e)}async updateRenderState(e){(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-2d-update-debug")&&console.debug(`Version[${e}] FeatureContainer.updateRenderState`),this._renderStateNext=new _RenderState_js__WEBPACK_IMPORTED_MODULE_8__.RenderState((()=>this._stage),e,this.tileInfoView)}getDisplayStatistics(e,t){const s=this._statisticsByLevel.get(e);return s?s.get(t):null}updateStatistics(e,t){if(this._lockStatisticUpdates)return void this._updateStatisticsRequests.push({level:e,statistics:t});let s=this._statisticsByLevel.get(e);s||(s=new Map,this._statisticsByLevel.set(e,s));for(const r of t)s.set(r.fieldName,{minValue:r.minValue,maxValue:r.maxValue})}editStart(){this._renderState?.lockUploads(),this.attributeView.lockTextureUploads(),this._lockStatisticUpdates=!0}editEnd(){this._renderState?.unlockUploads(),this.attributeView.unlockTextureUploads(),this._lockStatisticUpdates=!1;for(const e of this._updateStatisticsRequests)this.updateStatistics(e.level,e.statistics);this._updateStatisticsRequests=[],this.requestRender()}swapRenderState(){this._renderStateNext&&((0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-2d-update-debug")&&console.debug(`Version[${this._renderStateNext.version}] FeatureContainer.update.swapRenderState`),this._renderState?.destroy(),this._renderState=this._renderStateNext,this._renderStateNext=null),this._renderState&&this._renderState.flush(),this.requestRender()}setVisibleTiles(e){this._visibleTiles=e}async onMessage(t,s){(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.throwIfAborted)(s);const r=t.inner;if(!this._subscriptions.has(r.id))return;const i=this._subscriptions.get(r.id);if(i.version!==r.subscriptionVesrion){if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("esri-2d-update-debug")){const e=`${r.subscriptionVesrion} != ${i.version}`;console.debug(`Version[${e}] Tile[${r.id}] FeatureContainer - Dropping message, outdated version]`,r)}return}const n=this._renderStateNext??this._renderState;if(!n)throw new Error("InternalError: No renderState defined");n.version!==r.version&&console.error(`InternalError: Version mismatch. [renderState: ${n.version}, message: ${r.version}]`),n.enqueueUpdate(t),this.requestRender(),this._layerView.view.labelManager.requestUpdate(),this._layerView.requestUpdate()}removeTile(e){(this._renderState||this._renderStateNext)&&(this._renderState&&this._renderState.removeTile(e),this._renderStateNext&&this._renderStateNext.removeTile(e))}hitTest(e){let s=this._hitTestsRequests.find((({x:t,y:s})=>t===e.x&&s===e.y));const r=(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.createResolver)();return s?s.resolvers.push(r):(s={x:e.x,y:e.y,resolvers:[r]},this._hitTestsRequests.push(s)),this.requestRender(),r.promise}getSortKeys(e){const t=new Set(e),s=new Map;for(const r of this.children)if(r.getSortKeys(t).forEach(((e,t)=>s.set(t,e))),s.size===t.size)break;return s}get hasAnimation(){return this.hasLabels}doRender(e){const{minScale:t,maxScale:s}=this._layer.effectiveScaleRange,r=e.state.scale;r<=(t||1/0)&&r>=s&&super.doRender(e)}afterRender(e){super.afterRender(e),this._hitTestsRequests.length&&this.requestRender()}setStencilReference(e){if(null==this._getHeatmapInstance(e))super.setStencilReference(e);else for(const t of this.children)t.stencilRef=_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_6__.Techniques.heatmap.getStencilReference(t)}_renderMapPhase(e){this._layerView.featureEffectView.hasEffects?(this._renderOutsideEffect(e),this._renderInsideEffect(e)):this._renderFeatures(e,_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.FeatureSelection.All),this._hitTestsRequests.length>0&&this._renderHittest(e)}_renderHighlightPhase(e){this.hasHighlight&&(0,_support_util_js__WEBPACK_IMPORTED_MODULE_9__.renderHighlight)(e,!1,(e=>{this._renderFeatures(e,_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.FeatureSelection.Highlight)}))}_renderLabelPhase(e){this._renderFeatures(e,_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.FeatureSelection.All)}_renderInsideEffect(e){const t=e.painter.effects.insideEffect;t.bind(e),this._renderFeatures(e,_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.FeatureSelection.InsideEffect),t.draw(e,this._layerView.featureEffectView.includedEffects),t.unbind()}_renderOutsideEffect(e){const t=e.painter.effects.outsideEffect;t.bind(e),this._renderFeatures(e,_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.FeatureSelection.OutsideEffect),t.draw(e,this._layerView.featureEffectView.excludedEffects),t.unbind()}_renderHittest(e){const{context:t}=e,s=e.painter.effects.hittest,r=t.getBoundFramebufferObject(),a=t.getViewport(),o=e.passOptions,h=e.drawPhase;s.bind(e),e.passOptions=s.createOptions(e,this._hitTestsRequests),e.drawPhase=_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.WGLDrawPhase.HITTEST;const{distance:d,smallSymbolDistance:l}=e.passOptions,u=Math.max(d,l);for(const i of this.children)i.visible&&i.containsScreenPoint(e.state,e.passOptions.position,2*u)&&this._renderTile(i,e,_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.FeatureSelection.All);s.draw(e),s.unbind(),t.bindFramebuffer(r),t.restoreViewport(a),e.passOptions=o,e.drawPhase=h}_renderFeatures(e,t){const s=this._getHeatmapInstance(e);null!=s?this._renderHeatmapFeatures(e,t,s):this._renderGeometryFeatures(e,t)}_renderGeometryFeatures(e,t){for(const s of this.children)s.visible&&this._renderTile(s,e,t)}_renderHeatmapFeatures(e,t,s){for(const r of this.children)r.visible&&this._renderTile(r,e,t,_engine_webgl_shaderGraph_techniques_TechniqueType_js__WEBPACK_IMPORTED_MODULE_7__.TechniqueType.Heatmap);s.techniqueRef.renderResolvePass(e,s)}_renderTile(e,t,s,r){const i=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-force-marker-text-draw-order")?_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.FeatureBatchingStrategy.STRICT_MARKERS_AND_TEXT:_engine_webgl_enums_js__WEBPACK_IMPORTED_MODULE_4__.FeatureBatchingStrategy.BATCHING,n=e.getDisplayList(this._instanceStore,i);t.selection=s,n?.render(t,r)}}function _(e){return e.techniqueRef.type===_engine_webgl_shaderGraph_techniques_TechniqueType_js__WEBPACK_IMPORTED_MODULE_7__.TechniqueType.Heatmap}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/FeaturePipelineWorkerProxy.js":
/*!******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/FeaturePipelineWorkerProxy.js ***!
  \******************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FeaturePipelineWorkerProxy: function() { return /* binding */ n; },
/* harmony export */   createFeaturePipelineWorkerProxy: function() { return /* binding */ t; }
/* harmony export */ });
/* harmony import */ var _core_workers_workers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/workers/workers.js */ "./node_modules/@arcgis/core/core/workers/workers.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
async function t(t){const o=await (0,_core_workers_workers_js__WEBPACK_IMPORTED_MODULE_0__.open)("FeaturePipelineWorker",{client:t,strategy:"dedicated"});return new n(o)}class n{constructor(e){this._connection=e,this.pipeline=this._connection.createInvokeProxy(),this.features=this._connection.createInvokeProxy("features"),this.aggregates=this._connection.createInvokeProxy("aggregates"),this.streamMessenger=this._connection.createInvokeProxy("streamMessenger")}destroy(){this._connection.destroy()}get closed(){return this._connection.closed}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/FeatureSourceEventLog.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/FeatureSourceEventLog.js ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FeatureSourceEventLog: function() { return /* binding */ l; }
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Accessor.js */ "./node_modules/@arcgis/core/core/Accessor.js");
/* harmony import */ var _core_CircularArray_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/CircularArray.js */ "./node_modules/@arcgis/core/core/CircularArray.js");
/* harmony import */ var _core_Evented_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/Evented.js */ "./node_modules/@arcgis/core/core/Evented.js");
/* harmony import */ var _core_ReactiveMap_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../core/ReactiveMap.js */ "./node_modules/@arcgis/core/core/ReactiveMap.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
const n=10;let l=class extends _core_Accessor_js__WEBPACK_IMPORTED_MODULE_1__["default"]{constructor(){super(...arguments),this.events=new _core_Evented_js__WEBPACK_IMPORTED_MODULE_3__["default"],this._updatingStrategy=!0,this._tileToEvent=new _core_ReactiveMap_js__WEBPACK_IMPORTED_MODULE_4__["default"],this._fetchStatus={outstanding:0,done:0}}get hasAllFeatures(){return this._hasAllData()&&(this._strategyInfo?.willQueryAllFeatures??!1)}get hasAllFeaturesInView(){return this._hasAllData()}get hasFullGeometries(){return this._hasAllData()&&(this._strategyInfo?.willQueryFullResolutionGeometry??!1)}onEvent(t){switch(t.type){case"subscribe":case"unsubscribe":case"loaded":case"error":this._handleTileEvent(t);break;case"updateStrategyStart":this._updatingStrategy=!0,this._fetchStatus={done:0,outstanding:0},this._strategyInfo=t.about;break;case"updateStrategyEnd":this._updatingStrategy=!1;break;case"updateFieldsStart":this._fetchStatus={done:0,outstanding:0};break;case"updateFieldsEnd":break;case"updateFieldsError":this.events.emit("error",t);break;case"fetchStart":this._fetchStatus.outstanding+=1,this.events.emit("status",this._fetchStatus);break;case"fetchEnd":this._fetchStatus.done+=1,this.events.emit("status",this._fetchStatus),t.done&&(this._fetchStatus={done:0,outstanding:0})}}_hasAllData(){return!this._updatingStrategy&&this._hasAllTileData()}_hasAllTileData(){for(const t of this._tileToEvent.values()){const e=t.peekLast();if("loaded"!==e?.type)return!1}return!0}_handleTileEvent(t){switch(t.type){case"subscribe":{const e=new _core_CircularArray_js__WEBPACK_IMPORTED_MODULE_2__["default"](n);e.enqueue(t),this._tileToEvent.set(t.tile,e);break}case"unsubscribe":this._tileToEvent.delete(t.tile);break;case"loaded":{const e=this._tileToEvent.get(t.tile);if(!e)return;e.enqueue(t),this._tileToEvent.set(t.tile,e);break}case"error":{const e=this._tileToEvent.get(t.tile);if(!e)return;e.enqueue(t),this._tileToEvent.set(t.tile,e),this.events.emit("error",t);break}}}};(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({readOnly:!0})],l.prototype,"hasAllFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({readOnly:!0})],l.prototype,"hasAllFeaturesInView",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)({readOnly:!0})],l.prototype,"hasFullGeometries",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],l.prototype,"_updatingStrategy",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],l.prototype,"_strategyInfo",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_5__.property)()],l.prototype,"_tileToEvent",void 0),l=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_9__.subclass)("esri.views.2d.layers.features.FeatureSourceEventLog")],l);


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/RenderState.js":
/*!***************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/RenderState.js ***!
  \***************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   RenderState: function() { return /* binding */ l; }
/* harmony export */ });
/* harmony import */ var _core_CircularArray_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/CircularArray.js */ "./node_modules/@arcgis/core/core/CircularArray.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../geometry/support/aaBoundingRect.js */ "./node_modules/@arcgis/core/geometry/support/aaBoundingRect.js");
/* harmony import */ var _tiling_TileInfoView_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../tiling/TileInfoView.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileInfoView.js");
/* harmony import */ var _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../tiling/TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/* harmony import */ var _tiling_TileQueue_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../tiling/TileQueue.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileQueue.js");
/* harmony import */ var _tiling_TileStrategy_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../tiling/TileStrategy.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileStrategy.js");
/* harmony import */ var _engine_webgl_FeatureTile_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../engine/webgl/FeatureTile.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/FeatureTile.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
const r=1e3;class l{constructor(t,i,s){this.getStage=t,this.version=i,this._tileInfoView=s,this._pendingUpdates=new _core_CircularArray_js__WEBPACK_IMPORTED_MODULE_0__["default"](r),this._locked=!1,this._tiles=new Map}destroy(){for(const e of this.tiles())e.destroy();this._pendingUpdates.clear(),this._tiles.clear()}tiles(){return this._tiles.values()}size(){return this._tiles.size}setTiles(e){this._tiles.clear();for(const t of e)this._tiles.set(t.key.id,t)}lockUploads(){this._locked=!0}unlockUploads(){this._locked=!1,this.flush()}enqueueUpdate(e){this._pendingUpdates.enqueue(e)}update(e){if(!this._locked)for(;this._pendingUpdates.size;){const t=this._pendingUpdates.peek();if(null==t||t.inner.attributeEpoch>e)break;this._updateTile(t),this._pendingUpdates.dequeue()}}removeTile(e){const t=this._tiles.get(e);(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("esri-2d-update-debug")&&console.debug(`Tile[${e}] RenderState.removeTile`),t?.destroy(),this._tiles.delete(e)}isTileDone(e){const t=this._tiles.get(e.id);return!!t&&t.isReady}flush(){for(;this._pendingUpdates.size;){const e=this._pendingUpdates.dequeue();null!=e&&this._updateTile(e)}for(const e of this._tiles.values())e.upload()}_updateTile(e){const{inner:t,objectIdMap:i}=e;if((0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("esri-2d-update-debug")){const e=t.debugInfo?.chunkId??"<EnsureEnd>";console.debug(`Version[${t.version}] Tile[${t.id}] Chunk[${e}] RenderState.updateTile [${t.type}]`,t)}const s=this._ensureTile(t.id);if("update"===t.type){const[e,...o]=t.modify;s.onMessage({type:"update",modify:e,remove:t.remove,end:t.end,attributeEpoch:t.attributeEpoch,objectIdMap:i});for(const s of o){const e=this._tiles.get(s.tileId);e&&e.onMessage({type:"update",modify:s,remove:t.remove,end:!1,isPixelBuffer:!0,attributeEpoch:null,objectIdMap:i})}return}if(null==t.append)return void s.onMessage({type:"append",clear:t.clear,debugInfo:t.debugInfo,end:t.end,attributeEpoch:t.attributeEpoch,objectIdMap:i});const[o,...n]=t.append;s.onMessage({type:"append",clear:t.clear,append:o,debugInfo:t.debugInfo,end:t.end,attributeEpoch:t.attributeEpoch,objectIdMap:i});for(const r of n){const e=this._tiles.get(r.tileId);e&&e.onMessage({type:"update",modify:r,remove:[],sort:!1,end:!1,isPixelBuffer:!0,attributeEpoch:null,objectIdMap:i})}}_ensureTile(e){if(!this._tiles.has(e)){const t=this._createTile(e);this._copyPixelBufferedEntitiesInto(t),this._tiles.set(e,t)}return this._tiles.get(e)}_createTile(e){(0,_core_has_js__WEBPACK_IMPORTED_MODULE_2__["default"])("esri-2d-update-debug")&&console.debug(`Version[${this.version}] Tile[${e}] RenderState.createTile`);const r=new _tiling_TileKey_js__WEBPACK_IMPORTED_MODULE_6__["default"](e),l=this._tileInfoView.getTileBounds((0,_geometry_support_aaBoundingRect_js__WEBPACK_IMPORTED_MODULE_4__.create)(),r),d=this._tileInfoView.getTileResolution(r.level),a=new _engine_webgl_FeatureTile_js__WEBPACK_IMPORTED_MODULE_9__.FeatureTile(r,d,l[0],l[3],!0);if(a.stage=this.getStage(),!a.stage){const e=new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("featurelayerview:webgl","Cannot create tile with empty stage");_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger("esri.views.2d.layers.features.RenderState").error(e)}return a}_copyPixelBufferedEntitiesInto(e){let t=7;const i=this._tileInfoView.getLODInfoAt(e.key);for(let s=-1;s<=1;s++)for(let o=-1;o<=1;o++){if(0===s&&0===o)continue;const n=e.key.getNormalizedNeighbor(o,s,i).id,r=this._tiles.get(n);if(null!=r){const i=1<<t;e.copyPixelBufferedEntitesFrom(r,i,o,s)}t--}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/CatalogFootprintLayerAdapter.js":
/*!**********************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/CatalogFootprintLayerAdapter.js ***!
  \**********************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   CatalogFootprintLayerAdapter: function() { return /* binding */ l; }
/* harmony export */ });
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../layers/support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js");
/* harmony import */ var _labelingUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./labelingUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/labelingUtils.js");
/* harmony import */ var _schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../schema/SourceSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/SourceSchema.js");
/* harmony import */ var _schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../schema/processor/SimpleProcessorSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SimpleProcessorSchema.js");
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/rendererUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
class l{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const r=this.layer,t=(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_3__.getLayerDeconflictionEnabled)(r);return[{vvEvaluators:{0:(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_3__.createLabelVVEvaluator)(r.renderer)},deconflictionEnabled:t}]}async createServiceOptions(o){const s=this.layer,{capabilities:i,editingInfo:a,objectIdField:n,globalIdField:l,datesInUnknownTimezone:p,orderBy:u,parsedUrl:c}=s,d=s.fieldsIndex.toJSON(),m=(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_2__.getServiceGeometryType)(s),y=s.timeInfo?.toJSON(),f=s.spatialReference.toJSON(),g=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__.clone)(c);let h=n;if(u?.length){const e=!u[0].valueExpression&&u[0].field;e&&(h=e)}return{type:"feature-service",source:g,isSourceHosted:(0,_layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_1__.isHostedAgolService)(g.path),orderByFields:h,outSpatialReference:o.spatialReference.toJSON(),metadata:{timeReferenceUnknownClient:p,globalIdField:l,fieldsIndex:d,geometryType:m,objectIdField:n,timeInfo:y,spatialReference:f,subtypeField:null,subtypes:null,typeIdField:null,types:null},queryMetadata:{maxRecordCount:i.query.maxRecordCount,supportsCompactGeometry:i.query.supportsCompactGeometry,supportsDefaultSpatialReference:i.query.supportsDefaultSpatialReference,supportsFormatPBF:i.query.supportsFormatPBF,supportsMaxRecordCountFactor:i.query.supportsMaxRecordCountFactor,supportsQuantization:i.query.supportsQuantization,lastEditDate:a?.lastEditDate?.getTime(),snapshotInfo:null}}}createSourceSchema(e,r){const{definitionExpression:t,customParameters:o,timeExtent:s,apiKey:a}=this.layer;return (0,_schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_4__.createFeatureSourceSchema)({definitionExpression:t,customParameters:o,timeExtent:s},e,r,a)}createProcessorSchema(e,r,t){const{fields:o,geometryType:s,orderBy:i,objectIdField:n,renderer:l,labelingInfo:p,labelsVisible:u}=this.layer,c={featureReduction:null,fields:o.map((e=>e.toJSON())),geometryType:s,labelingInfo:p,labelsVisible:u,objectIdField:n,orderBy:i??"default",renderer:l?.clone()};return (0,_schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_5__.createSimpleProcessorSchema)(e,r,c,t)}get hasRequiredSupport(){return (0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_6__.isRendererSupported)(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(e){const r=this.layer,{definitionExpression:t,apiKey:o,renderer:s}=r,i=this.layer.labelsVisible?this.layer.labelingInfo:null,a=JSON.stringify(r.customParameters),n=JSON.stringify(r.orderBy);return{outFields:this.layer.outFields,apiKey:o,customParameters:a,definitionExpression:t,labelingInfo:i,orderBy:n,renderer:s}}setGraphicOrigin(e){e.origin={type:"catalog",layer:this.layer}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/FeatureLayerAdapter.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/FeatureLayerAdapter.js ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FeatureLayerAdapter: function() { return /* binding */ c; }
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../layers/support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./featureReductionUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureReductionUtils.js");
/* harmony import */ var _featureServiceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./featureServiceUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureServiceUtils.js");
/* harmony import */ var _floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./floorFilterUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/floorFilterUtils.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js");
/* harmony import */ var _labelingUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./labelingUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/labelingUtils.js");
/* harmony import */ var _schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../schema/SourceSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/SourceSchema.js");
/* harmony import */ var _schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../schema/processor/SimpleProcessorSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SimpleProcessorSchema.js");
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../support/rendererUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
class c{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const t=this.layer,r=(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_7__.getFeatureReductionDeconflictionEnabled)(t,e)??(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_7__.getLayerDeconflictionEnabled)(t);return[{vvEvaluators:{0:(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_7__.createLabelVVEvaluator)(t.renderer)},deconflictionEnabled:r}]}async createServiceOptions(r){const s=this.layer,{capabilities:i,editingInfo:n,objectIdField:l,typeIdField:p,globalIdField:d,datesInUnknownTimezone:u,orderBy:y,subtypeField:c,refreshInterval:m}=s,f=s.fieldsIndex.toJSON(),h=(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__.getServiceGeometryType)(s),b=s.timeInfo?.toJSON(),g=s.spatialReference.toJSON(),S=s.types?.map((e=>e.toJSON())),F=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(this.layer.parsedUrl);this.layer.dynamicDataSource&&(F.query={layer:JSON.stringify({source:this.layer.dynamicDataSource})});let I=this.layer.objectIdField;if(y?.length){const e=!y[0].valueExpression&&y[0].field;e&&(I=e)}const x=!(null!=n?.lastEditDate)&&m>0,j=!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-snapshot-enabled")&&"point"===s.geometryType&&i?.query.supportsPagination&&!i?.operations.supportsEditing&&!x,R=j&&(0,_featureServiceUtils_js__WEBPACK_IMPORTED_MODULE_4__.exceedsMinimumSnapshotCoverage)(r,s.fullExtent);return{type:"feature-service",source:F,isSourceHosted:(0,_layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_2__.isHostedAgolService)(F.path),orderByFields:I,outSpatialReference:r.spatialReference.toJSON(),metadata:{typeIdField:p??void 0,types:S,timeReferenceUnknownClient:u,subtypeField:c,globalIdField:d,fieldsIndex:f,geometryType:h,objectIdField:l,timeInfo:b,spatialReference:g,subtypes:this.layer.subtypes?.map((e=>e.toJSON()))},queryMetadata:{maxRecordCount:i.query.maxRecordCount,supportsCompactGeometry:i.query.supportsCompactGeometry,supportsDefaultSpatialReference:i.query.supportsDefaultSpatialReference,supportsFormatPBF:i.query.supportsFormatPBF,supportsMaxRecordCountFactor:i.query.supportsMaxRecordCountFactor,supportsQuantization:i.query.supportsQuantization,lastEditDate:n?.lastEditDate?.getTime(),snapshotInfo:{supportsSnapshotMinThreshold:j,supportsSnapshotMaxThreshold:R,snapshotCountThresholds:{min:(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-snapshot-point-min-threshold"),max:(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-snapshot-point-max-threshold")}}}}}createSourceSchema(e,t){const{definitionExpression:r,customParameters:o,gdbVersion:s,historicMoment:i,subtypeCode:a,subtypeField:n,timeExtent:l,apiKey:p}=this.layer;return (0,_schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_8__.createFeatureSourceSchema)({definitionExpression:r,customParameters:o,gdbVersion:s,historicMoment:i,subtypeCode:a,subtypeField:n,timeExtent:l},e,t,p)}createProcessorSchema(e,t,o){const{fields:s,renderer:i,geometryType:a,labelingInfo:n,labelsVisible:l,orderBy:p,objectIdField:d}=this.layer,y={fields:s.map((e=>e.toJSON())),renderer:i?.clone(),featureReduction:(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_3__.getEffectiveFeatureReduction)(this.layer,t),geometryType:a,labelingInfo:n,labelsVisible:l,objectIdField:d,orderBy:p??"default"};return (0,_schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_9__.createSimpleProcessorSchema)(e,t,y,o)}get hasRequiredSupport(){return (0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_10__.isRendererSupported)(this.layer.renderer)}get timeOptions(){return this.layer}hasFilters(e){return (0,_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_5__.hasFloorFilter)(this.layer,e)}addFilters(e,t){return (0,_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_5__.addFloorFilter)(this.layer,e,t)}getUpdateHashProperties(e){const t=this.layer,{definitionExpression:o,renderer:i,gdbVersion:a,apiKey:n,subtypeCode:l}=t,p=this.layer.labelsVisible?this.layer.labelingInfo:null,d=t.historicMoment?.getTime()??void 0,u=JSON.stringify(t.customParameters),y=(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_3__.getEffectiveFeatureReduction)(t,e),c=JSON.stringify(t.orderBy),m=(0,_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_5__.hasFloorFilter)(this.layer,e)?e.floors:null;return{outFields:this.layer.outFields,apiKey:n,customParameters:u,definitionExpression:o,featureReduction:y,floors:m,gdbVersion:a,historicMoment:d,labelingInfo:p,orderBy:c,renderer:i,subtypeCode:l}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/InMemoryLayerAdapter.js":
/*!**************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/InMemoryLayerAdapter.js ***!
  \**************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   InMemoryLayerAdapter: function() { return /* binding */ p; }
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./featureReductionUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureReductionUtils.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js");
/* harmony import */ var _labelingUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./labelingUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/labelingUtils.js");
/* harmony import */ var _schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../schema/SourceSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/SourceSchema.js");
/* harmony import */ var _schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../schema/processor/SimpleProcessorSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SimpleProcessorSchema.js");
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/rendererUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function u(r){if(!("openPorts"in r))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("source-not-supported")}class p{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const r=this.layer,t=(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_3__.getFeatureReductionDeconflictionEnabled)(r,e)??(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_3__.getLayerDeconflictionEnabled)(r);return[{vvEvaluators:{0:(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_3__.createLabelVVEvaluator)(r.renderer)},deconflictionEnabled:t}]}async createServiceOptions(e){const r=this.layer,{capabilities:o,objectIdField:s}=r,i=r.fieldsIndex.toJSON(),n=(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_2__.getServiceGeometryType)(r),l=r.timeInfo?.toJSON(),a=r.spatialReference.toJSON();u(r.source);return{type:"memory",source:await r.source.openPorts(),orderByFields:s,outSpatialReference:e.spatialReference.toJSON(),metadata:{fieldsIndex:i,geometryType:n,objectIdField:s,timeInfo:l,spatialReference:a,subtypes:null,subtypeField:null,globalIdField:null,typeIdField:null,types:null,timeReferenceUnknownClient:null},queryMetadata:{maxRecordCount:o.query.maxRecordCount,supportsCompactGeometry:o.query.supportsCompactGeometry,supportsDefaultSpatialReference:o.query.supportsDefaultSpatialReference,supportsFormatPBF:o.query.supportsFormatPBF,supportsMaxRecordCountFactor:o.query.supportsMaxRecordCountFactor,supportsQuantization:o.query.supportsQuantization,lastEditDate:null,snapshotInfo:null}}}createSourceSchema(e,r){const{definitionExpression:t,timeExtent:o}=this.layer;return (0,_schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_4__.createFeatureSourceSchema)({definitionExpression:t,timeExtent:o,customParameters:null},e,r,null)}createProcessorSchema(e,t,o){const{fields:s,renderer:i,geometryType:n,labelingInfo:a,labelsVisible:u,orderBy:p,objectIdField:c}=this.layer,d={fields:s.map((e=>e.toJSON())),renderer:i?.clone(),featureReduction:(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_1__.getEffectiveFeatureReduction)(this.layer,t),geometryType:n,labelingInfo:a,labelsVisible:u,objectIdField:c,orderBy:p??"default"};return (0,_schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_5__.createSimpleProcessorSchema)(e,t,d,o)}get hasRequiredSupport(){return (0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_6__.isRendererSupported)(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(e){const t=this.layer,{definitionExpression:o,renderer:s}=t,i=this.layer.labelsVisible?this.layer.labelingInfo:null,n=(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_1__.getEffectiveFeatureReduction)(t,e),l=JSON.stringify(t.orderBy);return{outFields:this.layer.outFields,orderBy:l,definitionExpression:o,renderer:s,labelingInfo:i,featureReduction:n}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/KnowledgeGraphSublayerAdapter.js":
/*!***********************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/KnowledgeGraphSublayerAdapter.js ***!
  \***********************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   KnowledgeGraphSublayerAdapter: function() { return /* binding */ a; }
/* harmony export */ });
/* harmony import */ var _featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./featureReductionUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureReductionUtils.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js");
/* harmony import */ var _labelingUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./labelingUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/labelingUtils.js");
/* harmony import */ var _schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../schema/SourceSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/SourceSchema.js");
/* harmony import */ var _schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../schema/processor/SimpleProcessorSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SimpleProcessorSchema.js");
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../support/rendererUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
class a{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const r=this.layer,i=(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_2__.getFeatureReductionDeconflictionEnabled)(r,e)??(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_2__.getLayerDeconflictionEnabled)(r);return[{vvEvaluators:{0:(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_2__.createLabelVVEvaluator)(r.renderer)},deconflictionEnabled:i}]}async createServiceOptions(e){const t=this.layer,{capabilities:o,objectIdField:s}=t,i=t.fieldsIndex.toJSON(),n=(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_1__.getServiceGeometryType)(t),l=t.spatialReference.toJSON();return{type:"memory",source:await t.source.openPorts(),orderByFields:s,outSpatialReference:e.spatialReference.toJSON(),metadata:{fieldsIndex:i,geometryType:n,objectIdField:s,spatialReference:l,globalIdField:null,subtypeField:null,subtypes:null,timeInfo:t.timeInfo?.toJSON(),timeReferenceUnknownClient:null,typeIdField:null,types:null},queryMetadata:{maxRecordCount:o.query.maxRecordCount,supportsCompactGeometry:o.query.supportsCompactGeometry,supportsDefaultSpatialReference:o.query.supportsDefaultSpatialReference,supportsFormatPBF:o.query.supportsFormatPBF,supportsMaxRecordCountFactor:o.query.supportsMaxRecordCountFactor,supportsQuantization:o.query.supportsQuantization,lastEditDate:null,snapshotInfo:null}}}createSourceSchema(e,r){const{definitionExpression:t}=this.layer;return (0,_schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_3__.createFeatureSourceSchema)({definitionExpression:t,customParameters:null},e,r,null)}createProcessorSchema(r,t,o){const{fields:s,renderer:i,geometryType:l,labelingInfo:a,labelsVisible:u,objectIdField:p}=this.layer,c={fields:s.map((e=>e.toJSON())),renderer:i?.clone(),featureReduction:(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_0__.getEffectiveFeatureReduction)(this.layer,t),geometryType:l,labelingInfo:a,labelsVisible:u,objectIdField:p,orderBy:"default"};return (0,_schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_4__.createSimpleProcessorSchema)(r,t,c,o)}get hasRequiredSupport(){return (0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_5__.isRendererSupported)(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(r){const t=this.layer,{definitionExpression:o,renderer:s}=t;return{definitionExpression:o,renderer:s,labelingInfo:this.layer.labelsVisible?this.layer.labelingInfo:null,featureReduction:(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_0__.getEffectiveFeatureReduction)(t,r)}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/OGCFeatureLayerAdapter.js":
/*!****************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/OGCFeatureLayerAdapter.js ***!
  \****************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OGCFeatureLayerAdapter: function() { return /* binding */ u; }
/* harmony export */ });
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./featureReductionUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureReductionUtils.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js");
/* harmony import */ var _labelingUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./labelingUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/labelingUtils.js");
/* harmony import */ var _schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../schema/SourceSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/SourceSchema.js");
/* harmony import */ var _schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../schema/processor/SimpleProcessorSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SimpleProcessorSchema.js");
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../support/rendererUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
class u{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const r=this.layer,t=(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_3__.getFeatureReductionDeconflictionEnabled)(r,e)??(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_3__.getLayerDeconflictionEnabled)(r);return[{vvEvaluators:{0:(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_3__.createLabelVVEvaluator)(r.renderer)},deconflictionEnabled:t}]}async createServiceOptions(r){const o=this.layer,{capabilities:s,objectIdField:a}=o,i=o.fieldsIndex.toJSON(),l=(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_2__.getServiceGeometryType)(o),n=o.timeInfo?.toJSON(),u=o.spatialReference.toJSON(),c=o.source.getSource(),p=this.layer.objectIdField,d=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_0__.clone)(s);return d.query.maxRecordCount=c.maxRecordCount,{type:"ogc",source:c,orderByFields:p,outSpatialReference:r.spatialReference.toJSON(),metadata:{fieldsIndex:i,geometryType:l,objectIdField:a,timeInfo:n,spatialReference:u,globalIdField:null,subtypeField:null,subtypes:null,timeReferenceUnknownClient:null,typeIdField:null,types:null},queryMetadata:{maxRecordCount:d.query.maxRecordCount,supportsCompactGeometry:d.query.supportsCompactGeometry,supportsDefaultSpatialReference:d.query.supportsDefaultSpatialReference,supportsFormatPBF:d.query.supportsFormatPBF,supportsMaxRecordCountFactor:d.query.supportsMaxRecordCountFactor,supportsQuantization:d.query.supportsQuantization,lastEditDate:null,snapshotInfo:null}}}createSourceSchema(e,r){const{customParameters:t,timeExtent:o,apiKey:s}=this.layer;return (0,_schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_4__.createFeatureSourceSchema)({customParameters:t,timeExtent:o},e,r,s)}createProcessorSchema(e,t,o){const{fields:s,renderer:a,geometryType:i,labelingInfo:n,labelsVisible:u,orderBy:c,objectIdField:p}=this.layer,d={fields:s.map((e=>e.toJSON())),renderer:a?.clone(),featureReduction:(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_1__.getEffectiveFeatureReduction)(this.layer,t),geometryType:i,labelingInfo:n,labelsVisible:u,objectIdField:p,orderBy:c??"default"};return (0,_schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_5__.createSimpleProcessorSchema)(e,t,d,o)}get hasRequiredSupport(){return (0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_6__.isRendererSupported)(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(e){const t=this.layer,{renderer:o,apiKey:s}=t,a=this.layer.labelsVisible?this.layer.labelingInfo:null;return{apiKey:s,customParameters:JSON.stringify(t.customParameters),featureReduction:(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_1__.getEffectiveFeatureReduction)(t,e),labelingInfo:a,orderBy:JSON.stringify(t.orderBy),renderer:o}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/OrientedImageryLayerAdapter.js":
/*!*********************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/OrientedImageryLayerAdapter.js ***!
  \*********************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   OrientedImageryLayerAdapter: function() { return /* binding */ m; }
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../layers/support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./featureReductionUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureReductionUtils.js");
/* harmony import */ var _featureServiceUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./featureServiceUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureServiceUtils.js");
/* harmony import */ var _floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./floorFilterUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/floorFilterUtils.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js");
/* harmony import */ var _labelingUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./labelingUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/labelingUtils.js");
/* harmony import */ var _schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../schema/SourceSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/SourceSchema.js");
/* harmony import */ var _schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../schema/processor/SimpleProcessorSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SimpleProcessorSchema.js");
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../support/rendererUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
class m{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const r=this.layer,t=(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_7__.getFeatureReductionDeconflictionEnabled)(r,e)??(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_7__.getLayerDeconflictionEnabled)(r);return[{vvEvaluators:{0:(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_7__.createLabelVVEvaluator)(r.renderer)},deconflictionEnabled:t}]}async createServiceOptions(t){const s=this.layer,{capabilities:i,objectIdField:l,globalIdField:n,orderBy:p,refreshInterval:u}=s,d=s.fieldsIndex.toJSON(),c=(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_6__.getServiceGeometryType)(s),m=s.timeInfo?.toJSON(),f=s.spatialReference.toJSON(),y=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(this.layer.parsedUrl);let h=this.layer.objectIdField;if(p?.length){const e=!p[0].valueExpression&&p[0].field;e&&(h=e)}const b=u>0,g=!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-snapshot-enabled")&&"point"===s.geometryType&&i?.query.supportsPagination&&!i?.operations.supportsEditing&&!b,S=g&&(0,_featureServiceUtils_js__WEBPACK_IMPORTED_MODULE_4__.exceedsMinimumSnapshotCoverage)(t,s.fullExtent);return{type:"feature-service",source:y,isSourceHosted:(0,_layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_2__.isHostedAgolService)(y.path),orderByFields:h,outSpatialReference:t.spatialReference.toJSON(),metadata:{globalIdField:n,fieldsIndex:d,geometryType:c,objectIdField:l,timeInfo:m,spatialReference:f,timeReferenceUnknownClient:!1,subtypeField:null,subtypes:null,typeIdField:null,types:null},queryMetadata:{maxRecordCount:i.query.maxRecordCount,supportsCompactGeometry:i.query.supportsCompactGeometry,supportsDefaultSpatialReference:i.query.supportsDefaultSpatialReference,supportsFormatPBF:i.query.supportsFormatPBF,supportsMaxRecordCountFactor:i.query.supportsMaxRecordCountFactor,supportsQuantization:i.query.supportsQuantization,lastEditDate:null,snapshotInfo:{supportsSnapshotMinThreshold:g,supportsSnapshotMaxThreshold:S,snapshotCountThresholds:{min:(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-snapshot-point-min-threshold"),max:(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-snapshot-point-max-threshold")}}}}}createSourceSchema(e,r){const{definitionExpression:t,customParameters:o,timeExtent:s}=this.layer;return (0,_schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_8__.createFeatureSourceSchema)({definitionExpression:t,customParameters:o,timeExtent:s},e,r,null)}createProcessorSchema(e,r,o){const{fields:s,renderer:i,geometryType:a,labelingInfo:l,labelsVisible:n,orderBy:p,objectIdField:u}=this.layer,c={fields:s.map((e=>e.toJSON())),renderer:i?.clone(),featureReduction:(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_3__.getEffectiveFeatureReduction)(this.layer,r),geometryType:a,labelingInfo:l,labelsVisible:n,objectIdField:u,orderBy:p??"default"};return (0,_schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_9__.createSimpleProcessorSchema)(e,r,c,o)}get hasRequiredSupport(){return (0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_10__.isRendererSupported)(this.layer.renderer)}get timeOptions(){return this.layer}hasFilters(e){return (0,_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_5__.hasFloorFilter)(this.layer,e)}addFilters(e,r){return (0,_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_5__.addFloorFilter)(this.layer,e,r)}getUpdateHashProperties(e){const r=this.layer,{definitionExpression:o,renderer:i,outFields:a}=r,l=this.layer.labelsVisible?this.layer.labelingInfo:null,n=JSON.stringify(r.customParameters),p=(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_3__.getEffectiveFeatureReduction)(r,e);return{outFields:a,orderBy:JSON.stringify(r.orderBy),definitionExpression:o,renderer:i,labelingInfo:l,featureReduction:p,customParameters:n,floors:(0,_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_5__.hasFloorFilter)(this.layer,e)?e.floors:null}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/ParquetLayerAdapter.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/ParquetLayerAdapter.js ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   ParquetLayerAdapter: function() { return /* binding */ o; }
/* harmony export */ });
/* harmony import */ var _featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./featureReductionUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureReductionUtils.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js");
/* harmony import */ var _labelingUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./labelingUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/labelingUtils.js");
/* harmony import */ var _schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../schema/processor/SimpleProcessorSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SimpleProcessorSchema.js");
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/rendererUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
class o{constructor(e){this.layer=e}get hasRequiredSupport(){return (0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_4__.isRendererSupported)(this.layer.renderer)}get timeOptions(){return null}getLabelingDeconflictionInfo(e){const r=this.layer,i=(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_2__.getFeatureReductionDeconflictionEnabled)(r,e)??(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_2__.getLayerDeconflictionEnabled)(r);return[{vvEvaluators:{0:(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_2__.createLabelVVEvaluator)(r.renderer)},deconflictionEnabled:i}]}getUpdateHashProperties(r){const t=this.layer,{renderer:l}=t,s=this.layer.labelsVisible?this.layer.labelingInfo:null,i=JSON.stringify(t.customParameters),a=(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_0__.getEffectiveFeatureReduction)(t,r),o=JSON.stringify(t.orderBy);return{outFields:this.layer.outFields,labelingInfo:s,featureReduction:a,customParameters:i,orderBy:o,renderer:l}}async createServiceOptions(e){const t=(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_1__.getServiceGeometryType)(this.layer);return{type:"parquet",source:{urls:this.layer.urls.items},outSpatialReference:e.spatialReference.toJSON(),geometryInfo:this.layer.source.geometryInfo,metadata:{spatialReference:this.layer.spatialReference,fieldsIndex:this.layer.fieldsIndex.toJSON(),objectIdField:this.layer.objectIdField,geometryType:t,types:null,subtypes:null,timeInfo:null,typeIdField:null,subtypeField:null,globalIdField:null,timeReferenceUnknownClient:null}}}createSourceSchema(e,r){return{type:"parquet",mutable:{sourceRefreshVersion:r,availableFields:e.availableFields,dataFilter:{customParameters:this.layer.customParameters??null}}}}createProcessorSchema(r,t,l){const s={fields:this.layer.fields.map((e=>e.toJSON())),renderer:this.layer.renderer?.clone(),featureReduction:(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_0__.getEffectiveFeatureReduction)(this.layer,t),geometryType:this.layer.geometryType,labelingInfo:this.layer.labelingInfo,labelsVisible:this.layer.labelsVisible,objectIdField:this.layer.objectIdField,orderBy:this.layer.orderBy};return (0,_schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_3__.createSimpleProcessorSchema)(r,t,s,l)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/StreamLayerAdapter.js":
/*!************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/StreamLayerAdapter.js ***!
  \************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   StreamLayerAdapter: function() { return /* binding */ l; }
/* harmony export */ });
/* harmony import */ var _featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./featureReductionUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureReductionUtils.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js");
/* harmony import */ var _labelingUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./labelingUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/labelingUtils.js");
/* harmony import */ var _schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../schema/processor/SimpleProcessorSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SimpleProcessorSchema.js");
/* harmony import */ var _support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../support/rendererUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/support/rendererUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
class l{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){const t=this.layer,o=(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_2__.getFeatureReductionDeconflictionEnabled)(t,e)??(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_2__.getLayerDeconflictionEnabled)(t);return[{vvEvaluators:{0:(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_2__.createLabelVVEvaluator)(t.renderer)},deconflictionEnabled:o}]}async createServiceOptions(e){const r=this.layer,{objectIdField:i}=r,n=(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_1__.getServiceGeometryType)(r),o=r.timeInfo?.toJSON()||null,s=r.spatialReference?r.spatialReference.toJSON():null;return{type:"stream",source:this.layer.parsedUrl,outSpatialReference:e.spatialReference.toJSON(),metadata:{fieldsIndex:this.layer.fieldsIndex.toJSON(),geometryType:n,objectIdField:i,timeInfo:o,timeReferenceUnknownClient:null,spatialReference:s,subtypeField:null,subtypes:null,globalIdField:null,typeIdField:null,types:null}}}createSourceSchema(e,t){const{definitionExpression:r,geometryDefinition:i,customParameters:n}=this.layer;return{type:"stream",mutable:{sourceRefreshVersion:t,availableFields:e.availableFields,dataFilter:{geometryDefinition:i?.toJSON(),definitionExpression:r,customParameters:n??null,maxReconnectionAttempts:this.layer.maxReconnectionAttempts,maxReconnectionInterval:this.layer.maxReconnectionInterval,purgeOptions:this.layer.purgeOptions.toJSON()}}}}createProcessorSchema(t,r,i){const{fields:n,renderer:s,geometryType:l,labelingInfo:a,labelsVisible:c,objectIdField:d}=this.layer,m={fields:n.map((e=>e.toJSON())),renderer:s?.clone(),featureReduction:(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_0__.getEffectiveFeatureReduction)(this.layer,r),geometryType:l,labelingInfo:a,labelsVisible:c,objectIdField:d,orderBy:"default"};return (0,_schema_processor_SimpleProcessorSchema_js__WEBPACK_IMPORTED_MODULE_3__.createSimpleProcessorSchema)(t,r,m,i)}get hasRequiredSupport(){return (0,_support_rendererUtils_js__WEBPACK_IMPORTED_MODULE_4__.isRendererSupported)(this.layer.renderer)}get timeOptions(){return this.layer}getUpdateHashProperties(t){const r=this.layer,{definitionExpression:i,renderer:n}=r,o=this.layer.labelsVisible?this.layer.labelingInfo:null,s=JSON.stringify(r.customParameters);return{definitionExpression:i,renderer:n,labelingInfo:o,featureReduction:(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_0__.getEffectiveFeatureReduction)(r,t),customParameters:s,geometryDefinition:r.geometryDefinition,definitionExpressoin:r.definitionExpression}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/SubtypeGroupLayerAdapter.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/SubtypeGroupLayerAdapter.js ***!
  \******************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   SubtypeGroupLayerAdapter: function() { return /* binding */ m; }
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../core/lang.js */ "./node_modules/@arcgis/core/core/lang.js");
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _core_sql_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../core/sql.js */ "./node_modules/@arcgis/core/core/sql.js");
/* harmony import */ var _layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../layers/support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../layers/support/FeatureFilter.js */ "./node_modules/@arcgis/core/layers/support/FeatureFilter.js");
/* harmony import */ var _featureServiceUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./featureServiceUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureServiceUtils.js");
/* harmony import */ var _floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./floorFilterUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/floorFilterUtils.js");
/* harmony import */ var _geometryUtils_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./geometryUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js");
/* harmony import */ var _labelingUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./labelingUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/labelingUtils.js");
/* harmony import */ var _schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../schema/SourceSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/SourceSchema.js");
/* harmony import */ var _schema_processor_SubtypeProcessorSchema_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../schema/processor/SubtypeProcessorSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SubtypeProcessorSchema.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
class m{constructor(e){this.layer=e}getLabelingDeconflictionInfo(e){return[{vvEvaluators:{},deconflictionEnabled:this.layer.sublayers.every((e=>(0,_labelingUtils_js__WEBPACK_IMPORTED_MODULE_9__.getLayerDeconflictionEnabled)(e)))}]}async createServiceOptions(t){const r=this.layer,{capabilities:i,datesInUnknownTimezone:a,editingInfo:l,globalIdField:p,objectIdField:u,refreshInterval:y,subtypeField:m}=r,c=r.fieldsIndex.toJSON(),d=(0,_geometryUtils_js__WEBPACK_IMPORTED_MODULE_8__.getServiceGeometryType)(r),h=r.timeInfo?.toJSON(),f=r.spatialReference.toJSON(),b=(0,_core_lang_js__WEBPACK_IMPORTED_MODULE_1__.clone)(this.layer.parsedUrl),g=u,S=!(null!=l?.lastEditDate)&&y>0,F=!!(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-snapshot-enabled")&&"point"===r.geometryType&&i?.query.supportsPagination&&!i?.operations.supportsEditing&&!S,x=F&&(0,_featureServiceUtils_js__WEBPACK_IMPORTED_MODULE_6__.exceedsMinimumSnapshotCoverage)(t,r.fullExtent);return{type:"feature-service",source:b,isSourceHosted:(0,_layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_4__.isHostedAgolService)(b.path),orderByFields:g,outSpatialReference:t.spatialReference.toJSON(),metadata:{timeReferenceUnknownClient:a,subtypeField:m,globalIdField:p,fieldsIndex:c,geometryType:d,objectIdField:u,timeInfo:h,spatialReference:f,subtypes:this.layer.subtypes?.map((e=>e.toJSON())),typeIdField:null,types:null},queryMetadata:{maxRecordCount:i.query.maxRecordCount,supportsCompactGeometry:i.query.supportsCompactGeometry,supportsDefaultSpatialReference:i.query.supportsDefaultSpatialReference,supportsFormatPBF:i.query.supportsFormatPBF,supportsMaxRecordCountFactor:i.query.supportsMaxRecordCountFactor,supportsQuantization:i.query.supportsQuantization,lastEditDate:l?.lastEditDate?.getTime(),snapshotInfo:{supportsSnapshotMinThreshold:F,supportsSnapshotMaxThreshold:x,snapshotCountThresholds:{min:(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-snapshot-point-min-threshold"),max:(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-snapshot-point-max-threshold")}}}}}createSourceSchema(e,t){const{definitionExpression:r,customParameters:s,gdbVersion:i,historicMoment:o,subtypeField:a,timeExtent:l,apiKey:n}=this.layer,p={queryScaleRanges:this.layer.sublayers.items.map((e=>({subtypeCode:e.subtypeCode,minScale:e.minScale,maxScale:e.maxScale}))),definitionExpression:r,customParameters:s,gdbVersion:i,historicMoment:o,subtypeField:a,timeExtent:l};return (0,_schema_SourceSchema_js__WEBPACK_IMPORTED_MODULE_10__.createFeatureSourceSchema)(p,e,t,n)}createProcessorSchema(e,t,r){const s={subtypeField:this.layer.subtypeField,sublayers:Array.from(this.layer.sublayers,(e=>({featureReduction:null,geometryType:this.layer.geometryType,labelingInfo:e.labelingInfo,labelsVisible:e.labelsVisible,renderer:e.renderer,subtypeCode:e.subtypeCode,orderBy:null})))};return (0,_schema_processor_SubtypeProcessorSchema_js__WEBPACK_IMPORTED_MODULE_11__.createSubtypeProcessorSchema)(e,t,s,r)}hasFilters(e){return (0,_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_7__.hasFloorFilter)(this.layer,e)||c(this.layer,e)}addFilters(e,t){e=(0,_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_7__.addFloorFilter)(this.layer,e,t);const s=this.layer.sublayers.filter((e=>!d(e,t))).map((e=>e.subtypeCode));if(!s.length)return e;e??=new _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_5__["default"];const o=`NOT ${this.layer.subtypeField} IN (${s.join(",")})`;return e.where=(0,_core_sql_js__WEBPACK_IMPORTED_MODULE_3__.sqlAnd)(e.where,o),e}get hasRequiredSupport(){return!0}get timeOptions(){return this.layer}getUpdateHashProperties(e){const t=this.layer,{definitionExpression:r,gdbVersion:s,apiKey:i}=t,o=t.historicMoment?.getTime()??void 0,l=JSON.stringify(t.customParameters),n=(0,_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_7__.hasFloorFilter)(this.layer,e)?e.floors:null,p=this.layer.sublayers.map((({renderer:e,labelsVisible:t,labelingInfo:r,visible:s})=>({renderer:e,labelsVisible:t,labelingInfo:r,visible:s})));return{outFields:this.layer.outFields,gdbVersion:s,definitionExpression:r,historicMoment:o,customParameters:l,apiKey:i,sublayers:p,floors:n}}setGraphicOrigin(e){const t=this.layer.fieldsIndex.get(this.layer.subtypeField),r=e.attributes[t.name],s=this.layer.sublayers.find((e=>e.subtypeCode===r));e.layer=e.sourceLayer=s}}function c(e,t){return e.sublayers.some((e=>!d(e,t)))}function d(e,r){return e.visible&&(0===e.minScale||(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_2__.floatEqualAbsolute)(r.scale,e.minScale)||r.scale<e.minScale)&&(0===e.maxScale||(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_2__.floatEqualAbsolute)(r.scale,e.maxScale)||r.scale>e.maxScale)}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureReductionUtils.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureReductionUtils.js ***!
  \***************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getEffectiveFeatureReduction: function() { return /* binding */ e; }
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function e(e,a){const c=e.featureReduction;return c&&"selection"!==c.type&&(!("maxScale"in c)||!c.maxScale||c.maxScale<a.scale)?c:null}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureServiceUtils.js":
/*!*************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureServiceUtils.js ***!
  \*************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   exceedsMinimumSnapshotCoverage: function() { return /* binding */ t; }
/* harmony export */ });
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function t(t,e){const n=t.extent,o=e?.clone().intersection(n),i=null!=o?o.width*o.height:0,r=e?e.width*e.height:0,h=0===r?0:i/r,s=(0,_core_has_js__WEBPACK_IMPORTED_MODULE_0__["default"])("featurelayer-snapshot-point-coverage");return!isNaN(h)&&h>=s}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/floorFilterUtils.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/floorFilterUtils.js ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addFloorFilter: function() { return /* binding */ r; },
/* harmony export */   hasFloorFilter: function() { return /* binding */ o; }
/* harmony export */ });
/* harmony import */ var _core_sql_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/sql.js */ "./node_modules/@arcgis/core/core/sql.js");
/* harmony import */ var _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../layers/support/FeatureFilter.js */ "./node_modules/@arcgis/core/layers/support/FeatureFilter.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function o(e,l){return null!=e.floorInfo&&(e.floorInfo.viewAllLevelIds.length>0||l.floors.length>0)}function r(e,o,r){const t=n(e,o?.where,r);return t?(o??=new _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_1__["default"],o.where=t,o):o}function n(l,o,r){if(null==l.floorInfo||!r.floors?.length)return o;let n=r.floors;const{floorField:t,viewAllLevelIds:f}=l.floorInfo;f.length&&(n=f);const s=n.filter((e=>""!==e)).map((e=>"'"+e+"'"));if(s.push("''"),o?.includes(t)){let e=new RegExp("AND \\("+t+".*NULL\\)","g");o=o.replace(e,""),e=new RegExp("\\("+t+".*NULL\\)","g"),o=(o=o.replace(e,"")).replaceAll(/\s+/g," ").trim()}let i="("+t+" IN ({ids}) OR "+t+" IS NULL)";return i=i.replace("{ids}",s.join(", ")),(0,_core_sql_js__WEBPACK_IMPORTED_MODULE_0__.sqlAnd)(o,i)}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getServiceGeometryType: function() { return /* binding */ e; }
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function e(e){switch(e.geometryType){case"point":return"esriGeometryPoint";case"polyline":return"esriGeometryPolyline";case"polygon":return"esriGeometryPolygon";case"multipatch":return"esriGeometryMultiPatch";case"multipoint":return"esriGeometryMultipoint";default:return null}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/labelingUtils.js":
/*!*******************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/labelingUtils.js ***!
  \*******************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createLabelVVEvaluator: function() { return /* binding */ o; },
/* harmony export */   getFeatureReductionDeconflictionEnabled: function() { return /* binding */ r; },
/* harmony export */   getLayerDeconflictionEnabled: function() { return /* binding */ l; }
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/screenUtils.js */ "./node_modules/@arcgis/core/core/screenUtils.js");
/* harmony import */ var _featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./featureReductionUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/featureReductionUtils.js");
/* harmony import */ var _support_visualVariableSimpleUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../support/visualVariableSimpleUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/support/visualVariableSimpleUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function l(n){return(n.labelsVisible&&n.labelingInfo?.every((n=>"none"!==n.deconflictionStrategy)))??!1}function r(n,i){const l=(0,_featureReductionUtils_js__WEBPACK_IMPORTED_MODULE_1__.getEffectiveFeatureReduction)(n,i);if(l?.labelsVisible&&l.labelingInfo?.length)return l.labelingInfo.every((n=>"none"!==n.deconflictionStrategy))}function t(e){return l=>(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)((0,_support_visualVariableSimpleUtils_js__WEBPACK_IMPORTED_MODULE_2__.getSizeForValueSimple)(l,e))}function o(n){const e=null!=n&&"visualVariables"in n&&n.visualVariables;if(!e)return null;for(const i of e)if("size"===i.type)return t(i);return null}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/schema/SourceSchema.js":
/*!***********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/schema/SourceSchema.js ***!
  \***********************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createFeatureSourceSchema: function() { return /* binding */ t; }
/* harmony export */ });
/* harmony import */ var _core_sql_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../core/sql.js */ "./node_modules/@arcgis/core/core/sql.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function t(t,i,s,o){const r=null!=t.subtypeCode?`${t.subtypeField} = ${t.subtypeCode}`:null,n=(0,_core_sql_js__WEBPACK_IMPORTED_MODULE_0__.sqlAnd)(t.definitionExpression,r),a=t.customParameters??{};return o&&(a.token=o),{type:"feature",mutable:{sourceRefreshVersion:s,availableFields:i.availableFields,dataFilter:{queryScaleRanges:t.queryScaleRanges??[],definitionExpression:n,gdbVersion:t.gdbVersion,historicMoment:t.historicMoment?.getTime(),timeExtent:t.timeExtent?.toJSON(),customParameters:a}}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/LabelMatcherSchema.js":
/*!***************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/LabelMatcherSchema.js ***!
  \***************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createLabelMatcherSchema: function() { return /* binding */ l; }
/* harmony export */ });
/* harmony import */ var _layers_support_labelingInfo_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../layers/support/labelingInfo.js */ "./node_modules/@arcgis/core/layers/support/labelingInfo.js");
/* harmony import */ var _layerAdapters_geometryUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../layerAdapters/geometryUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/layerAdapters/geometryUtils.js");
/* harmony import */ var _symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./symbols/SymbolSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/SymbolSchema.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
async function l(a,l,r){const n=l.labelsVisible&&l.labelingInfo||[],i=(0,_layerAdapters_geometryUtils_js__WEBPACK_IMPORTED_MODULE_1__.getServiceGeometryType)(l),m=(0,_layers_support_labelingInfo_js__WEBPACK_IMPORTED_MODULE_0__.validateLabelingInfo)(n,i);return{type:"label",classes:await Promise.all(m.map(((e,s)=>o(a,e,s,r))))}}async function o(e,s,l,o){const r=await (0,_symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_2__.createSymbolMeshSchemas)(s,{path:`${l}`,schemaOptions:e,uniforms:o});return{maxScale:s.maxScale,minScale:s.minScale,expression:s.labelExpressionInfo?.expression??s.labelExpression,where:s.where,meshes:r}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/MatcherSchema.js":
/*!**********************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/MatcherSchema.js ***!
  \**********************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createMatcherSchema: function() { return /* binding */ r; },
/* harmony export */   createSimpleMatcherSchemaFromSymbol: function() { return /* binding */ t; }
/* harmony export */ });
/* harmony import */ var _VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./VisualVariablesSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/VisualVariablesSchema.js");
/* harmony import */ var _symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./symbols/SymbolSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/SymbolSchema.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
async function r(e,a){if(!a)return{type:"simple",meshes:[]};switch(a.type){case"simple":return o(e,a);case"dot-density":return u(e,a);case"class-breaks":return m(e,a);case"unique-value":return c(e,a);case"dictionary":return p(a);case"heatmap":return f(e,a);case"pie-chart":return y(e,a)}}async function t(e,a,l){return{type:"simple",meshes:await (0,_symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_1__.createSymbolMeshSchemas)(a,{schemaOptions:e,path:l,uniforms:{visualVariableColor:null,visualVariableOpacity:null,visualVariableRotation:null,visualVariableSizeStops:null,visualVariableSizeScaleStops:null,visualVariableSizeOutlineScaleStops:null,visualVariableSizeUnitValue:null,visualVariableSizeMinMaxValue:null}})}}async function o(a,l){const n=l.getSymbols(),s=n.length?n[0]:null,r=(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_0__.createVisualVariableUniforms)(l),t="renderer.symbol";return{type:"simple",meshes:await (0,_symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_1__.createSymbolMeshSchemas)(s,{schemaOptions:a,uniforms:r,path:t})}}async function u(a,i){const n=(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_0__.createVisualVariableUniforms)(i),s="renderer.symbol";return{type:"dot-density",meshes:await (0,_symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_1__.createDotDensityMeshSchemas)(i,{schemaOptions:a,uniforms:n,path:s})}}async function m(l,n){const s=(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_0__.createVisualVariableUniforms)(n),r=n.backgroundFillSymbol,t=n.normalizationType,o="log"===t?"esriNormalizeByLog":"percent-of-total"===t?"esriNormalizeByPercentOfTotal":"field"===t?"esriNormalizeByField":null,u=n.classBreakInfos.map((async e=>({meshes:await (0,_symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_1__.createSymbolMeshSchemas)(e.symbol,{path:`renderer-stop-${e.minValue}-${e.maxValue}`,schemaOptions:l,uniforms:s}),min:e.minValue,max:e.maxValue}))),m=(await Promise.all(u)).sort(((e,a)=>e.min-a.min)),c=await (0,_symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_1__.createSymbolMeshSchemas)(r,{schemaOptions:l,path:"renderer.backgroundFill",uniforms:{..._VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_0__.noVisualVariables,visualVariableSizeOutlineScaleStops:s.visualVariableSizeOutlineScaleStops}}),p=await (0,_symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_1__.createSymbolMeshSchemas)(n.defaultSymbol,{schemaOptions:l,path:"renderer.defaultSymbol",uniforms:s});return{type:"interval",field:n.field,expression:n.valueExpression,backgroundFill:c,defaultSymbol:p,intervals:m,normalizationField:n.normalizationField,normalizationTotal:n.normalizationTotal,normalizationType:o,isMaxInclusive:n.isMaxInclusive}}async function c(l,n){const s=[],r=(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_0__.createVisualVariableUniforms)(n),t=await (0,_symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_1__.createSymbolMeshSchemas)(n.backgroundFillSymbol,{schemaOptions:l,path:"renderer.backgroundFill",uniforms:{..._VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_0__.noVisualVariables,visualVariableSizeOutlineScaleStops:r.visualVariableSizeOutlineScaleStops}}),o=await (0,_symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_1__.createSymbolMeshSchemas)(n.defaultSymbol,{schemaOptions:l,path:"renderer.defaultSymbol",uniforms:r});for(const e of n.uniqueValueInfos??[]){const a=await (0,_symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_1__.createSymbolMeshSchemas)(e.symbol,{path:`renderer-unique-value-${e.value}`,schemaOptions:l,uniforms:r});s.push({value:""+e.value,symbol:a})}return{type:"map",field:n.field,expression:n.valueExpression,field2:n.field2,field3:n.field3,fieldDelimiter:n.fieldDelimiter,backgroundFill:t,defaultSymbol:o,map:s}}function p(a){const i=(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_0__.createVisualVariableUniforms)(a),l=a.scaleExpression,n=null!=l&&"1"!==l?{valueExpressionInfo:{type:"CIMExpressionInfo",expression:a.scaleExpression,returnType:"Numeric"},defaultValue:1}:void 0;return{type:"dictionary",fieldMap:a.fieldMap,scaleExpression:n,visualVariableUniforms:i}}async function f(e,a){return{type:"heatmap",meshes:await (0,_symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_1__.createHeatmapMeshSchemas)(a,e)}}async function y(e,a){return{type:"pie-chart",meshes:await (0,_symbols_SymbolSchema_js__WEBPACK_IMPORTED_MODULE_1__.createPieChartMeshSchemas)(a,e)}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SimpleProcessorSchema.js":
/*!******************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SimpleProcessorSchema.js ***!
  \******************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createSimpleProcessorSchema: function() { return /* binding */ o; },
/* harmony export */   getAggregateFields: function() { return /* binding */ u; }
/* harmony export */ });
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../core/screenUtils.js */ "./node_modules/@arcgis/core/core/screenUtils.js");
/* harmony import */ var _layers_support_OrderByInfo_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../../layers/support/OrderByInfo.js */ "./node_modules/@arcgis/core/layers/support/OrderByInfo.js");
/* harmony import */ var _engine_webgl_shaderGraph_techniques_TechniqueType_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../engine/webgl/shaderGraph/techniques/TechniqueType.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueType.js");
/* harmony import */ var _LabelMatcherSchema_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./LabelMatcherSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/LabelMatcherSchema.js");
/* harmony import */ var _MatcherSchema_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./MatcherSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/MatcherSchema.js");
/* harmony import */ var _StorageSchema_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./StorageSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/StorageSchema.js");
/* harmony import */ var _VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./VisualVariablesSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/VisualVariablesSchema.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
async function a(e,r){const t=r.renderer,n=(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_6__.createVisualVariableUniforms)(t);return{symbology:await (0,_MatcherSchema_js__WEBPACK_IMPORTED_MODULE_4__.createMatcherSchema)(e,t),labels:await (0,_LabelMatcherSchema_js__WEBPACK_IMPORTED_MODULE_3__.createLabelMatcherSchema)(e,r,n)}}async function o(e,r,t,i){const s=t.featureReduction;if(s)switch(s.type){case"binning":return f(s,e,r,t,i);case"cluster":return d(s,e,r,t,i)}const l=y(t.orderBy,t.renderer,t.objectIdField),o=(0,_StorageSchema_js__WEBPACK_IMPORTED_MODULE_5__.createStorageSchema)(t.renderer,r.filters),u=await a(e,t),c=m(u.symbology);return{storage:o,mesh:{properties:{sortKey:l,timeZone:r.timeZone,returnMeshObjectId:c,displayRefreshVersion:i},strategy:{type:"feature"},factory:u}}}function u(e,r){return e.fields.map((e=>({...e.toJSON(),type:c(e,r)})))}function c(e,r){const{onStatisticExpression:t,onStatisticField:i,statisticType:s}=e;switch(s){case"min":case"max":case"avg":case"avg_angle":case"sum":case"count":return"esriFieldTypeDouble";case"mode":{if(t){const{returnType:e}=t;return e?"string"===e?"esriFieldTypeString":"esriFieldTypeDouble":"esriFieldTypeString"}const e=r.find((e=>e.name===i));return e?e.type:"esriFieldTypeString"}}}async function f(r,t,a,o,c){const f=u(r,o.fields),d=r.renderer,y=await (0,_MatcherSchema_js__WEBPACK_IMPORTED_MODULE_4__.createMatcherSchema)(t,d),p=(0,_StorageSchema_js__WEBPACK_IMPORTED_MODULE_5__.createStorageSchema)(d,[null,null]),g=(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_6__.createVisualVariableUniforms)(d),b=await (0,_LabelMatcherSchema_js__WEBPACK_IMPORTED_MODULE_3__.createLabelMatcherSchema)(t,{geometryType:"polygon",labelingInfo:r.labelingInfo,labelsVisible:r.labelsVisible},g),h=m(y),v="geohash"===r.binType?{type:"geohash",fixBinLevel:r.fixedBinLevel??3}:{type:"grid",size:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)(r.size),fixedBinLevel:r.fixedBinLevel};return{storage:p,mesh:{properties:{sortKey:null,timeZone:a.timeZone,returnMeshObjectId:h,displayRefreshVersion:c},strategy:{type:"binning",fields:f,index:v,featureFilter:a.filters[0]},factory:{labels:b,symbology:y}}}}async function d(r,t,a,o,c){const f=u(r,o.fields),d={type:"cluster",feature:await (0,_MatcherSchema_js__WEBPACK_IMPORTED_MODULE_4__.createMatcherSchema)(t,r.effectiveFeatureRenderer),cluster:await (0,_MatcherSchema_js__WEBPACK_IMPORTED_MODULE_4__.createMatcherSchema)(t,r.effectiveClusterRenderer)},y=(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_6__.createVisualVariableUniforms)(r.effectiveFeatureRenderer),p={type:"cluster",feature:await (0,_LabelMatcherSchema_js__WEBPACK_IMPORTED_MODULE_3__.createLabelMatcherSchema)(t,o,y),cluster:await (0,_LabelMatcherSchema_js__WEBPACK_IMPORTED_MODULE_3__.createLabelMatcherSchema)(t,{geometryType:"point",labelingInfo:r.labelingInfo,labelsVisible:r.labelsVisible},y)},g=(0,_StorageSchema_js__WEBPACK_IMPORTED_MODULE_5__.createStorageSchema)(r.effectiveFeatureRenderer,[null,null]),b=m(d);return{storage:g,mesh:{properties:{sortKey:null,timeZone:a.timeZone,displayRefreshVersion:c,returnMeshObjectId:b},strategy:{type:"cluster",fields:f,featureFilter:a.filters[0],clusterRadius:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_0__.pt2px)(r.clusterRadius/2)},factory:{labels:p,symbology:d}}}}function y(e,t,i){const s=null!=t&&"unique-value"===t.type&&t.orderByClassesEnabled;if("default"!==e||s||(e=[new _layers_support_OrderByInfo_js__WEBPACK_IMPORTED_MODULE_1__["default"]({field:i,order:"descending"})]),"default"!==e&&e?.length){e.length;const r=e[0],t="ascending"===r.order?"asc":"desc";return r.field?{field:r.field,order:t}:r.valueExpression?{expression:r.valueExpression,order:t}:null}if(s){return{byRenderer:!0,order:"asc"}}return null}function p(e){return e.techniqueType===_engine_webgl_shaderGraph_techniques_TechniqueType_js__WEBPACK_IMPORTED_MODULE_2__.TechniqueType.AnimatedMarker}function m(e){if("simple"===e.type&&e.meshes.some(p))return!0;if("interval"===e.type){if(e.intervals.some((e=>e.meshes.some(p))))return!0;if(e.backgroundFill.some(p))return!0}if("map"===e.type){if(e.map.some((e=>e.symbol.some(p))))return!0;if(e.backgroundFill.some(p))return!0}return!1}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SubtypeProcessorSchema.js":
/*!*******************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/SubtypeProcessorSchema.js ***!
  \*******************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createSubtypeProcessorSchema: function() { return /* binding */ n; }
/* harmony export */ });
/* harmony import */ var _LabelMatcherSchema_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LabelMatcherSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/LabelMatcherSchema.js");
/* harmony import */ var _MatcherSchema_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./MatcherSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/MatcherSchema.js");
/* harmony import */ var _StorageSchema_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./StorageSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/StorageSchema.js");
/* harmony import */ var _VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./VisualVariablesSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/VisualVariablesSchema.js");
/* harmony import */ var _webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../webgl/capabilities.js */ "./node_modules/@arcgis/core/views/webgl/capabilities.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
async function i(e,{subtypeField:t,sublayers:s}){const a=await Promise.all(s.map((({renderer:t})=>(0,_MatcherSchema_js__WEBPACK_IMPORTED_MODULE_1__.createMatcherSchema)(e,t))));return{type:"subtype",subtypeField:t,renderers:s.reduce(((e,{subtypeCode:r},t)=>({...e,[r]:a[t]})),{})}}function o(e,r){const s=(0,_webgl_capabilities_js__WEBPACK_IMPORTED_MODULE_4__.getWebGLCapabilities)();return{type:"subtype",filters:e.filters,capabilities:{maxTextureSize:s.maxTextureSize},subtypeField:r.subtypeField,target:"feature",bindings:r.sublayers.reduce(((e,{renderer:r,subtypeCode:s})=>{const a=(0,_StorageSchema_js__WEBPACK_IMPORTED_MODULE_2__.createVVBindings)(r);return{...e,[s]:a}}),{})}}async function u(r,{subtypeField:t,sublayers:a}){const i=await Promise.all(a.map((t=>{const a=(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_3__.createVisualVariableUniforms)(t.renderer),i={...t,geometryType:t.geometryType??null};return (0,_LabelMatcherSchema_js__WEBPACK_IMPORTED_MODULE_0__.createLabelMatcherSchema)(r,i,a)})));return{type:"subtype",subtypeField:t,renderers:a.reduce(((e,{subtypeCode:r},t)=>({...e,[r]:i[t]})),{})}}async function n(e,r,t,s){return{storage:o(r,t),mesh:{properties:{timeZone:r.timeZone,displayRefreshVersion:s,returnMeshObjectId:!1,sortKey:null},strategy:{type:"feature"},factory:{symbology:await i(e,t),labels:await u(e,t)}}}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/SymbolSchema.js":
/*!*****************************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/SymbolSchema.js ***!
  \*****************************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createDotDensityMeshSchemas: function() { return /* binding */ M; },
/* harmony export */   createHeatmapMeshSchemas: function() { return /* binding */ x; },
/* harmony export */   createLineInstance: function() { return /* binding */ F; },
/* harmony export */   createPieChartMeshSchemas: function() { return /* binding */ C; },
/* harmony export */   createSymbolMeshSchemas: function() { return /* binding */ g; }
/* harmony export */ });
/* harmony import */ var _symbols_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../../../../symbols.js */ "./node_modules/@arcgis/core/symbols.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../../../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../../../../core/screenUtils.js */ "./node_modules/@arcgis/core/core/screenUtils.js");
/* harmony import */ var _renderers_support_heatmapUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../../../../renderers/support/heatmapUtils.js */ "./node_modules/@arcgis/core/renderers/support/heatmapUtils.js");
/* harmony import */ var _symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../../../../../symbols/cim/CIMSymbolHelper.js */ "./node_modules/@arcgis/core/symbols/cim/CIMSymbolHelper.js");
/* harmony import */ var _symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../../../../../symbols/cim/enums.js */ "./node_modules/@arcgis/core/symbols/cim/enums.js");
/* harmony import */ var _symbols_cim_SDFHelper_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../../../../../symbols/cim/SDFHelper.js */ "./node_modules/@arcgis/core/symbols/cim/SDFHelper.js");
/* harmony import */ var _engine_webgl_alignmentUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../../../engine/webgl/alignmentUtils.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/alignmentUtils.js");
/* harmony import */ var _engine_webgl_color_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../../../engine/webgl/color.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/color.js");
/* harmony import */ var _engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../../../engine/webgl/definitions.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/definitions.js");
/* harmony import */ var _engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../../../../engine/webgl/shaderGraph/techniques/TechniqueRegistry.js */ "./node_modules/@arcgis/core/views/2d/engine/webgl/shaderGraph/techniques/TechniqueRegistry.js");
/* harmony import */ var _schemaUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../schemaUtils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/schemaUtils.js");
/* harmony import */ var _VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../VisualVariablesSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/VisualVariablesSchema.js");
/* harmony import */ var _ComplexSymbolSchema_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./ComplexSymbolSchema.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/ComplexSymbolSchema.js");
/* harmony import */ var _utils_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./utils.js */ "./node_modules/@arcgis/core/views/2d/layers/features/schema/processor/symbols/utils.js");
/* harmony import */ var _symbols_SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../../../../../../symbols/SimpleFillSymbol.js */ "./node_modules/@arcgis/core/symbols/SimpleFillSymbol.js");
/* harmony import */ var _symbols_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../../../../../../symbols/SimpleMarkerSymbol.js */ "./node_modules/@arcgis/core/symbols/SimpleMarkerSymbol.js");
/* harmony import */ var _symbols_SimpleLineSymbol_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../../../../../../../symbols/SimpleLineSymbol.js */ "./node_modules/@arcgis/core/symbols/SimpleLineSymbol.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
async function g(i,a){if(!i)return[];switch(i.type){case"simple-fill":return P(i,a);case"picture-fill":return U(i,a);case"simple-marker":return w(i,a);case"picture-marker":return O(i,a);case"simple-line":return F(i,a,!1);case"text":return L(i,a);case"label":return R(i,a);case"cim":return (0,_ComplexSymbolSchema_js__WEBPACK_IMPORTED_MODULE_13__.createComplexSymbolInstances)(i.data,a);case"web-style":{const e=await i.fetchCIMSymbol();return (0,_ComplexSymbolSchema_js__WEBPACK_IMPORTED_MODULE_13__.createComplexSymbolInstances)(e.data,a)}case"line-3d":return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger("esri.views.layers.FeatureLayerView").warn("unsupported-symbol",`Symbol of type "${i.type}" unsupported in MapView. Defaulting to simple-line`),F(new _symbols_SimpleLineSymbol_js__WEBPACK_IMPORTED_MODULE_17__["default"],a,!1);case"point-3d":return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger("esri.views.layers.FeatureLayerView").warn("unsupported-symbol",`Symbol of type "${i.type}" unsupported in MapView. Defaulting to simple-marker`),w(new _symbols_SimpleMarkerSymbol_js__WEBPACK_IMPORTED_MODULE_16__["default"],a);case"polygon-3d":return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger("esri.views.layers.FeatureLayerView").warn("unsupported-symbol",`Symbol of type "${i.type}" unsupported in MapView. Defaulting to simple-fill`),P(new _symbols_SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_15__["default"],a);case"mesh-3d":case"label-3d":return _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger("esri.views.layers.FeatureLayerView").warn("unsupported-symbol",`Symbol of type "${i.type}" unsupported in MapView. Ignoring`),[];case"CIMSymbolReference":throw new Error("InternalError: CIMSymbolReference should already be resolved")}}async function M(e,i){const{schemaOptions:a}=i,{store:l}=a,r=new Array(_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_9__.dotDensityMaxFields),t=new Array(_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_9__.dotDensityMaxFields/4);for(let p=0;p<_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_9__.dotDensityMaxFields;p++){const i=p<e.attributes.length?e.attributes[p].color:null;r[p]=[0,0,0,0],(0,_engine_webgl_color_js__WEBPACK_IMPORTED_MODULE_8__.writeColor)(r[p],i)}for(let u=0;u<_engine_webgl_definitions_js__WEBPACK_IMPORTED_MODULE_9__.dotDensityMaxFields/4;u++)t[u]=[0,0,0,0],t[u][0]=4*u<e.attributes.length?1:0,t[u][1]=4*u+1<e.attributes.length?1:0,t[u][2]=4*u+2<e.attributes.length?1:0,t[u][3]=4*u+3<e.attributes.length?1:0;const o={uniforms:{isActive:t,colors:r,dotValue:e.dotValue,dotScale:e.referenceScale,blending:e.dotBlendingEnabled,dotSize:e.dotSize,seed:e.seed},optionalAttributes:{}},s=l.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.dotDensity,o).createMeshInfo({effects:null}),n=[],f=new _symbols_SimpleFillSymbol_js__WEBPACK_IMPORTED_MODULE_15__["default"]({color:e.backgroundColor??[0,0,0,0],outline:null}),b=await g(f,i);if(n.push(...b),n.push(s),e.outline){const a=F(e.outline,i,!0);n.push(...a)}return n}async function x(e,l){const{store:r}=l,{radius:t,minDensity:o,maxDensity:s,referenceScale:n,field:u,valueExpression:c,colorStops:f}=e,b=(0,_renderers_support_heatmapUtils_js__WEBPACK_IMPORTED_MODULE_3__.generateGradient)(f);return[r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.heatmap,{uniforms:{radius:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__.pt2px)(t),minDensity:o,maxDensity:s,referenceScale:n,isFieldActive:!(!u&&!c),gradient:b,gradientHash:b.join(",")},optionalAttributes:{}}).createMeshInfo({effects:null})]}async function C(e,a){const{store:l}=a,r=e.outline?.width||0,t=(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_12__.createVisualVariableUniforms)(e),o=l.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.pieChart,{uniforms:{shader:{outlineWidth:Math.round((0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__.pt2px)(r)),defaultColor:(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_11__.premultiplyColor)(e.defaultColor),outlineColor:(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_11__.premultiplyColor)(e.outline?.color),othersColor:(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_11__.premultiplyColor)(e.othersCategory?.color),donutRatio:e.holePercentage,sectorThreshold:e.othersCategory?.threshold||0,colors:e.attributes.map((e=>(0,_schemaUtils_js__WEBPACK_IMPORTED_MODULE_11__.premultiplyColor)(e.color))),visualVariableOpacity:t.visualVariableOpacity,visualVariableSizeMinMaxValue:t.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:t.visualVariableSizeScaleStops,visualVariableSizeStops:t.visualVariableSizeStops,visualVariableSizeUnitValue:t.visualVariableSizeUnitValue,hittestUniforms:null},numberOfFields:e.attributes.length},optionalAttributes:{}}).createMeshInfo({size:e.size,outlineWidth:r,effects:null,scaleInfo:null,minPixelBuffer:(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_12__.getMaxSizeVVSize)(t)});return[...e.backgroundFillSymbol?await P(e.backgroundFillSymbol,{schemaOptions:a,path:"",uniforms:_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_12__.noVisualVariables}):[],o]}function I(e){if("path"===e.style){if(null==e.path)throw new Error("Symbol with a style of type path must define a path");return{type:"sprite-rasterization-param",overrides:[],resource:{type:"path",path:e.path,asFill:!0}}}const i=_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_4__.CIMSymbolHelper.fromSimpleMarker(e);if("outline"in e&&e.outline&&"none"!==e.outline.style){if("solid"!==e.outline.style){if(!i||!i.symbolLayers)throw new Error("Error handling marker! ");return{type:"sprite-rasterization-param",resource:i.symbolLayers[0],overrides:[]}}}return{type:"sprite-rasterization-param",resource:(0,_symbols_cim_SDFHelper_js__WEBPACK_IMPORTED_MODULE_6__.getSDFInfo)(i),overrides:[]}}async function w(e,i){const{uniforms:a,schemaOptions:r}=i,{store:o}=r;if("path"===e.style||e.outline&&"solid"!==e.outline.style&&"none"!==e.outline.style){const r=_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_4__.CIMSymbolHelper.fromSimpleMarker(e);if(!r||!r.symbolLayers)throw new Error("Error handling marker! ");if(a.visualVariableRotation&&(r.angleAlignment="Map"),"path"!==e.style){const e=r.symbolLayers[0];if((0,_utils_js__WEBPACK_IMPORTED_MODULE_14__.hasSizeVVUniform)(i.uniforms)){const a=(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_12__.getMaxSizeVVSize)(i.uniforms,0,1);if(a>e.size){const i=a/e.size;e.size=a;const l=e.markerGraphics?.[0].symbol;(l.symbolLayers&&l.symbolLayers[0]).width*=i}}}return (0,_ComplexSymbolSchema_js__WEBPACK_IMPORTED_MODULE_13__.createComplexSymbolInstances)({type:"CIMSymbolReference",symbol:r},i)}const s=o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.marker,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity,visualVariableSizeMinMaxValue:a.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:a.visualVariableSizeScaleStops,visualVariableSizeStops:a.visualVariableSizeStops,visualVariableSizeUnitValue:a.visualVariableSizeUnitValue,visualVariableRotation:a.visualVariableRotation},optionalAttributes:{zoomRange:!1}}),n=I(e);let u=e.color?.toArray()??[0,0,0,0];"CIMVectorMarker"===n.resource.type&&(u=[255,255,255,255]);const c="triangle"===e.style?124/116:1,f=e.size,b=f*c,S=null!=a.visualVariableColor&&("cross"===e.style||"x"===e.style);return[s.createMeshInfo({type:"simple",color:u,height:f,width:b,offsetX:e.xoffset,offsetY:e.yoffset,angle:e.angle,alignment:(0,_utils_js__WEBPACK_IMPORTED_MODULE_14__.hasRotationVVUniform)(a)?_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_5__.Alignment.MAP:_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_5__.Alignment.SCREEN,outlineColor:e.outline?.color?.toArray()??[0,0,0,0],outlineSize:e.outline?.width??1,referenceSize:f,sprite:n,overrideOutlineColor:S,hasSizeVV:(0,_utils_js__WEBPACK_IMPORTED_MODULE_14__.hasSizeVVUniform)(a),placement:null,effects:null,transforms:null,scaleInfo:null,minPixelBuffer:(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_12__.getMaxSizeVVSize)(a)})]}function O(e,i){const{uniforms:a,schemaOptions:r}=i,{store:o}=r,s=o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.marker,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity,visualVariableSizeMinMaxValue:a.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:a.visualVariableSizeScaleStops,visualVariableSizeStops:a.visualVariableSizeStops,visualVariableSizeUnitValue:a.visualVariableSizeUnitValue,visualVariableRotation:a.visualVariableRotation},optionalAttributes:{zoomRange:!1}}),n=_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_4__.CIMSymbolHelper.createPictureMarkerRasterizationParam(e);if(!n)return[];return[s.createMeshInfo({type:"picture",color:[255,255,255,255],height:e.height,width:e.width,offsetX:e.xoffset,offsetY:e.yoffset,angle:e.angle,alignment:(0,_utils_js__WEBPACK_IMPORTED_MODULE_14__.hasRotationVVUniform)(a)?_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_5__.Alignment.MAP:_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_5__.Alignment.SCREEN,outlineColor:null,outlineSize:0,referenceSize:e.height,sprite:n,overrideOutlineColor:!1,hasSizeVV:(0,_utils_js__WEBPACK_IMPORTED_MODULE_14__.hasSizeVVUniform)(a),placement:null,effects:null,transforms:null,scaleInfo:null,minPixelBuffer:(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_12__.getMaxSizeVVSize)(a)})]}function A(e,i,a){const{uniforms:l,schemaOptions:r}=a,{store:s}=r,n=s.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.marker,{uniforms:{visualVariableColor:l.visualVariableColor,visualVariableOpacity:l.visualVariableOpacity,visualVariableSizeMinMaxValue:l.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:l.visualVariableSizeScaleStops,visualVariableSizeStops:l.visualVariableSizeStops,visualVariableSizeUnitValue:l.visualVariableSizeUnitValue,visualVariableRotation:l.visualVariableRotation},optionalAttributes:{zoomRange:!1}}),u=I(e),c=6,f=c*i.width,b=f,S=e.color?.toArray()??i.color?.toArray()??[0,0,0,0],V="cross"===e.style||"x"===e.style;let h;switch(e.placement){case"begin-end":h=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_5__.ExtremityPlacement.Both;break;case"begin":h=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_5__.ExtremityPlacement.JustBegin;break;case"end":h=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_5__.ExtremityPlacement.JustEnd;break;default:h=_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_5__.ExtremityPlacement.None}const z={type:"cim-marker-placement-param",placement:{type:"CIMMarkerPlacementAtExtremities",angleToLine:!0,offset:0,extremityPlacement:h,offsetAlongLine:0},overrides:[]};return[n.createMeshInfo({type:"simple",color:S,height:b,width:f,offsetX:0,offsetY:0,angle:0,alignment:(0,_utils_js__WEBPACK_IMPORTED_MODULE_14__.hasRotationVVUniform)(l)?_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_5__.Alignment.MAP:_symbols_cim_enums_js__WEBPACK_IMPORTED_MODULE_5__.Alignment.SCREEN,outlineColor:S,outlineSize:V?i.width:0,referenceSize:b/c,sprite:u,overrideOutlineColor:V&&null!=l.visualVariableColor,hasSizeVV:(0,_utils_js__WEBPACK_IMPORTED_MODULE_14__.hasSizeVVUniform)(l),placement:z,transforms:null,effects:null,scaleInfo:null,minPixelBuffer:(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_12__.getMaxSizeVVSize)(l)})]}function L(e,i){const{uniforms:a,schemaOptions:r}=i,{store:t}=r;return[t.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.text,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity,visualVariableRotation:a.visualVariableRotation,visualVariableSizeMinMaxValue:a.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:a.visualVariableSizeScaleStops,visualVariableSizeStops:a.visualVariableSizeStops,visualVariableSizeUnitValue:a.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!1,clipAngle:!1,referenceSymbol:!1}}).createMeshInfo({boxBackgroundColor:e.backgroundColor?.toArray(),boxBorderLineColor:e.borderLineColor?.toArray(),boxBorderLineSize:e.borderLineSize??0,color:e.color?.toArray()??[0,0,0,0],offsetX:e.xoffset,offsetY:e.yoffset,postAngle:e.angle,fontSize:e.font.size,decoration:e.font.decoration,haloColor:e.haloColor?.toArray()??[0,0,0,0],haloSize:e.haloSize??0,outlineColor:[0,0,0,0],outlineSize:0,lineWidth:e.lineWidth,lineHeightRatio:e.lineHeight,horizontalAlignment:e.horizontalAlignment,verticalAlignment:e.verticalAlignment,useCIMAngleBehavior:!1,glyphs:{type:"text-rasterization-param",resource:{type:"text",font:e.font.toJSON(),textString:e.text,symbol:_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_4__.CIMSymbolHelper.createCIMTextSymbolfromTextSymbol(e)},overrides:[]},referenceSize:null,effects:null,placement:null,scaleInfo:null,transforms:null,scaleFactor:1,minPixelBuffer:(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_12__.getMaxSizeVVSize)(a),repeatLabel:null,repeatLabelDistance:null,allowOverrun:null,labelPosition:null})]}function R(e,a){const{schemaOptions:r,uniforms:t}=a,{store:o}=r,s=e.symbol,{allowOverrun:u,repeatLabel:c,repeatLabelDistance:f}=e,b={maxScale:e.maxScale??0,minScale:e.minScale??0},S=o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.label,{uniforms:{visualVariableColor:null,visualVariableOpacity:null,visualVariableRotation:t.visualVariableRotation,visualVariableSizeMinMaxValue:t.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:t.visualVariableSizeScaleStops,visualVariableSizeStops:t.visualVariableSizeStops,visualVariableSizeUnitValue:t.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!0,clipAngle:!0,referenceSymbol:!0}}),V=e.labelPlacement,[y,v]=(0,_engine_webgl_alignmentUtils_js__WEBPACK_IMPORTED_MODULE_7__.getAlignmentFromPlacement)(V);return[S.createMeshInfo({boxBackgroundColor:s.backgroundColor?.toArray(),boxBorderLineColor:s.borderLineColor?.toArray(),boxBorderLineSize:s.borderLineSize??0,color:s.color?.toArray()??[0,0,0,0],offsetX:s.xoffset,offsetY:s.yoffset,postAngle:s.angle,fontSize:s.font.size,decoration:s.font.decoration,outlineColor:[0,0,0,0],outlineSize:0,haloColor:s.haloColor?.toArray()??[0,0,0,0],haloSize:s.haloSize??0,lineWidth:s.lineWidth,lineHeightRatio:s.lineHeight,horizontalAlignment:y,verticalAlignment:v,repeatLabel:c,repeatLabelDistance:(0,_core_screenUtils_js__WEBPACK_IMPORTED_MODULE_2__.pt2px)(f),allowOverrun:u,labelPosition:e.labelPosition,scaleInfo:b,minPixelBuffer:(0,_VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_12__.getMaxSizeVVSize)(t),useCIMAngleBehavior:!1,glyphs:{type:"text-rasterization-param",resource:{type:"text",font:s.font.toJSON(),textString:s.text,symbol:_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_4__.CIMSymbolHelper.createCIMTextSymbolfromTextSymbol(s),primitiveName:"label-override"},useLegacyLabelEvaluationRules:null==e.labelExpressionInfo?.expression,overrides:[{type:"CIMPrimitiveOverride",valueExpressionInfo:{type:"CIMExpressionInfo",expression:e.labelExpressionInfo?.expression??e.labelExpression,returnType:"String"},primitiveName:"label-override",propertyName:"textString",defaultValue:""}]},referenceSize:null,effects:null,placement:null,transforms:null,scaleFactor:1})]}function k(e,i){const a=e.width;return{outlineColor:e.color?.toArray()||[0,0,0,1],width:a,referenceWidth:a,capType:e.cap??"round",joinType:e.join??"round",miterLimit:e.miterLimit,hasSizeVV:i}}function j(e,i){const{uniforms:a,schemaOptions:l}=i,{store:r}=l,t=e.color?.toArray()??[0,0,0,0],o={type:"sprite-rasterization-param",resource:{type:"fill-style",style:e.style},overrides:[]};if("solid"===e.outline?.style){return[r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.patternOutlineFill,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity,visualVariableSizeScaleStops:a.visualVariableSizeOutlineScaleStops,visualVariableSizeMinMaxValue:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null},optionalAttributes:{zoomRange:!1}}).createMeshInfo({color:t,...k(e.outline,!!a.visualVariableSizeOutlineScaleStops),sprite:o,scaleInfo:null,effects:null})]}const s=[],n=r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.patternFill,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity},optionalAttributes:{zoomRange:!1}}).createMeshInfo({color:e.color?.toArray()??[0,0,0,0],sprite:o,scaleInfo:null,effects:null});return s.push(n),e.outline&&s.push(...F(e.outline,i,!0)),s}function E(e,i){const{uniforms:a,schemaOptions:l}=i,{store:r}=l,t=e.color?.toArray()??[0,0,0,0];if("none"!==e.style&&"solid"===e.outline?.style){return[r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.outlineFill,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity,visualVariableSizeScaleStops:a.visualVariableSizeOutlineScaleStops,visualVariableSizeMinMaxValue:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null},optionalAttributes:{zoomRange:!1}}).createMeshInfo({color:t,...k(e.outline,!!a.visualVariableSizeOutlineScaleStops),scaleInfo:null,effects:null})]}const o=[];if("none"!==e.style){const e=r.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.fill,{uniforms:{visualVariableColor:a.visualVariableColor,visualVariableOpacity:a.visualVariableOpacity},optionalAttributes:{zoomRange:!1}}).createMeshInfo({color:t,scaleInfo:null,effects:null});o.push(e)}return e.outline&&o.push(...F(e.outline,i,!0)),o}async function P(e,i){if("cim"===e.type)return (0,_ComplexSymbolSchema_js__WEBPACK_IMPORTED_MODULE_13__.createComplexSymbolInstances)(e.data,i);const{style:a}=e;return a&&"none"!==a&&"solid"!==a?j(e,i):E(e,i)}function U(e,i){const{outline:a}=e,{uniforms:r,schemaOptions:t}=i,{store:o}=t,s=[],n=_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_4__.CIMSymbolHelper.createPictureFillRasterizationParam(e);if(!n)return[];const{width:u,height:c,xoffset:f,yoffset:b,xscale:m,yscale:S}=e,V={color:[255,255,255,255],sprite:n,height:c,aspectRatio:u/c,offsetX:f,offsetY:b,scaleX:m,scaleY:S,angle:0,applyRandomOffset:!1,sampleAlphaOnly:!1,scaleProportionally:!1,effects:null,scaleInfo:null};if("solid"===a?.style){return[o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.complexOutlineFill,{uniforms:{visualVariableColor:r.visualVariableColor,visualVariableOpacity:r.visualVariableOpacity,visualVariableSizeScaleStops:r.visualVariableSizeOutlineScaleStops,visualVariableSizeMinMaxValue:null,visualVariableSizeStops:null,visualVariableSizeUnitValue:null},optionalAttributes:{zoomRange:!1}}).createMeshInfo({...V,...k(a,!!r.visualVariableSizeOutlineScaleStops)})]}const y=o.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.complexFill,{uniforms:{visualVariableColor:r.visualVariableColor,visualVariableOpacity:r.visualVariableOpacity},optionalAttributes:{zoomRange:!1}});return s.push(y.createMeshInfo(V)),a&&s.push(...F(a,i,!0)),s}function F(e,i,a){const{color:l,style:t,width:o,cap:s,join:n}=e,{schemaOptions:u}=i,{store:c}=u,f=[],b=a?{..._VisualVariablesSchema_js__WEBPACK_IMPORTED_MODULE_12__.noVisualVariables,visualVariableSizeScaleStops:i.uniforms.visualVariableSizeOutlineScaleStops}:i.uniforms,m={uniforms:{visualVariableColor:b.visualVariableColor,visualVariableOpacity:b.visualVariableOpacity,visualVariableSizeMinMaxValue:b.visualVariableSizeMinMaxValue,visualVariableSizeScaleStops:b.visualVariableSizeScaleStops,visualVariableSizeStops:b.visualVariableSizeStops,visualVariableSizeUnitValue:b.visualVariableSizeUnitValue},optionalAttributes:{zoomRange:!1}},V={color:l?.toArray()??[0,0,0,0],width:o,referenceWidth:o,capType:s,joinType:n,miterLimit:e.miterLimit,hasSizeVV:(0,_utils_js__WEBPACK_IMPORTED_MODULE_14__.hasSizeVVUniform)(b),effects:null,scaleInfo:null};if(null==t||"solid"===t){const e=c.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.line,m).createMeshInfo(V);f.push(e)}else if("none"!==t){const e=c.ensureInstance(_engine_webgl_shaderGraph_techniques_TechniqueRegistry_js__WEBPACK_IMPORTED_MODULE_10__.Techniques.texturedLine,m).createMeshInfo({...V,offsetAlongLine:0,shouldScaleDash:!0,shouldSampleAlphaOnly:!1,isSDF:!0,sprite:{type:"sprite-rasterization-param",resource:{type:"dash",dashTemplate:(0,_symbols_cim_CIMSymbolHelper_js__WEBPACK_IMPORTED_MODULE_4__.slsDashToTemplateArray)(t,s)},overrides:[]}});f.push(e)}return null!=e.marker&&f.push(...A(e.marker,e,i)),f}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/support/HighlightCounter.js":
/*!*******************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/support/HighlightCounter.js ***!
  \*******************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   HighlightCounter: function() { return /* binding */ e; }
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
const t=new Set;class e{constructor(){this._idToCounters=new Map}get empty(){return 0===this._idToCounters.size}addGroup(t,e){for(const o of t){let t=this._idToCounters.get(o);t||(t=new Map,this._idToCounters.set(o,t)),t.set(e,(t.get(e)||0)+1)}}deleteGroup(t,e){for(const o of t){const t=this._idToCounters.get(o);if(!t)continue;let s=t.get(e);if(null==s)return;s--,s>0?t.set(e,s):t.delete(e),0===t.size&&this._idToCounters.delete(o)}}getHighlightGroups(e){const o=this._idToCounters.get(e);if(!o)return t;const s=new Set;for(const[t,n]of o)n>0&&s.add(t);return s}ids(){return this._idToCounters.keys()}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/support/handleNoEngineError.js":
/*!**********************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/support/handleNoEngineError.js ***!
  \**********************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   handleNoEngineError: function() { return /* binding */ n; }
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
async function n(n,r){try{return await n}catch(t){if("no-queryEngine"!==t.name)throw t;return r}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/layers/support/visualVariableSimpleUtils.js":
/*!****************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/layers/support/visualVariableSimpleUtils.js ***!
  \****************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getSizeForValueSimple: function() { return /* binding */ i; }
/* harmony export */ });
/* harmony import */ var _core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../../core/mathUtils.js */ "./node_modules/@arcgis/core/core/mathUtils.js");
/* harmony import */ var _renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../../renderers/support/lengthUtils.js */ "./node_modules/@arcgis/core/renderers/support/lengthUtils.js");
/* harmony import */ var _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../../renderers/visualVariables/support/sizeVariableUtils.js */ "./node_modules/@arcgis/core/renderers/visualVariables/support/sizeVariableUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
const r=Math.PI;function i(e,t){switch(t.transformationType){case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.Additive:return s(e,t);case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.Constant:return o(t,e);case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.ClampedLinear:return u(e,t);case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.Proportional:return l(e,t);case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.Stops:return c(e,t);case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.RealWorldSize:return m(e,t);case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.Identity:return e;case _renderers_visualVariables_support_sizeVariableUtils_js__WEBPACK_IMPORTED_MODULE_2__.TransformationType.Unknown:return null}}function a(e,t){return"number"==typeof e?e:i(t,e)}function s(e,t){return e+(a(t.minSize,e)||t.minDataValue)}function o(e,t){const n=e.stops;let r=n?.length&&n[0].size;return null==r&&(r=e.minSize),a(r,t)}function u(e,t){const n=t.minDataValue,r=t.maxDataValue,i=(e-n)/(r-n),s=a(t.minSize,e),o=a(t.maxSize,e);return e<=n?s:e>=r?o:s+i*(o-s)}function l(t,n){const r=t/n.minDataValue,i=a(n.minSize,t),s=a(n.maxSize,t);let o=null;return o=r*i,(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(o,i,s)}function c(e,t){const[n,r,i]=p(e,t.cache.ipData);if(n===r)return a(t.stops[n].size,e);{const s=a(t.stops[n].size,e);return s+(a(t.stops[r].size,e)-s)*i}}function m(n,i){const s=_renderers_support_lengthUtils_js__WEBPACK_IMPORTED_MODULE_1__.meterIn[i.valueUnit],o=a(i.minSize,n),u=a(i.maxSize,n),{valueRepresentation:l}=i;let c=null;return c="area"===l?2*Math.sqrt(n/r)/s:"radius"===l||"distance"===l?2*n/s:n/s,(0,_core_mathUtils_js__WEBPACK_IMPORTED_MODULE_0__.clamp)(c,o,u)}function p(e,t){if(!t)return;let n=0,r=t.length-1;return t.some(((t,i)=>e<t?(r=i,!0):(n=i,!1))),[n,r,(e-t[n])/(t[r]-t[n])]}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/2d/tiling/FeatureTileSubscriptionManager.js":
/*!*************************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/2d/tiling/FeatureTileSubscriptionManager.js ***!
  \*************************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   FeatureTileSubscriptionManager: function() { return /* binding */ o; }
/* harmony export */ });
/* harmony import */ var _TileKey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./TileKey.js */ "./node_modules/@arcgis/core/views/2d/tiling/TileKey.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function s(e,s){const t=new Set;for(const i of e instanceof Set?e.values():e.keys())s.has(i)||t.add(i);return t}class t{constructor(e,s,t){const i=t?e.getTileCoverage(t,0,!0,"closest"):null,o=e.getTileCoverage(s,0,!0,"closest");if(this._tileKeys=new Map,i)for(const n of i.keys())this._tileKeys.set(n.id,n);if(o)for(const n of o.keys())this._tileKeys.set(n.id,n)}get coverageSet(){return new Set(this._tileKeys.keys())}keys(){return this._tileKeys.values()}}class i{constructor(e){this.version=e}}class o{constructor(e){this._subscriptions=new Map,this._visible=new Set,this._paused=new Set,this._version=0,this._config=e}destroy(){}get _coverageSet(){return this._coverage?.coverageSet??new Set}suspend(){this._suspendedOverage=this._coverage,this._coverage=null,this._updateSubscriptions()}resume(){null==this._coverage&&(this._coverage=this._suspendedOverage,this._suspendedOverage=null,this._updateSubscriptions())}update(e,s){return this._version=(this._version+1)%Number.MAX_SAFE_INTEGER,this._updateCoverage(e,s),this._updateSubscriptions(),new Set(this._visible)}_updateCoverage(e,s){this._coverage=new t(this._config.tileInfoView,e,s)}_updateSubscriptions(){const e=this._coverageSet,t=this._updateVisibility(),o=s(t,e),n=s(this._subscriptions,t),r=s(e,this._subscriptions),a=s(n,e),c=s(o,a),u=s(c,this._paused);this._visible=t;for(const s of r.values())this._subscriptions.set(s,new i(this._version));for(const s of u.values())this._paused.add(s);for(const s of a.values())this._subscriptions.delete(s),this._paused.delete(s);(r.size||a.size||u.size)&&this._sendUpdateSubscriptions(r,a,u)}_sendUpdateSubscriptions(e,s,t){const i=Array.from(e.values()).map((e=>({tileId:e,version:this._subscriptions.get(e).version})));this._config.updateSubscriptions({subscribe:i,unsubscribe:Array.from(s.values()),pause:Array.from(t.values())})}_updateVisibility(){const s=new Set,t=new Set;if(!this._coverage)return s;for(const e of this._coverage.keys()){if(this._config.isDone(e)){s.add(e.id);continue}if(this._addVisibleParent(s,t,e))continue;this._addVisibleChildren(s,e)||s.add(e.id)}const i=new _TileKey_js__WEBPACK_IMPORTED_MODULE_0__["default"](0,0,0,0),o=new _TileKey_js__WEBPACK_IMPORTED_MODULE_0__["default"](0,0,0,0);for(const e of t){i.id=e;for(const e of s)o.id=e,i.containsChild(o)&&s.delete(e)}return s}_addVisibleParent(s,t,i){let o=!1;for(const n of this._visible.values()){new _TileKey_js__WEBPACK_IMPORTED_MODULE_0__["default"](n).containsChild(i)&&(s.add(n),t.add(n),o=!0)}return o}_addVisibleChildren(s,t){let i=!1;for(const o of this._visible.values()){const n=new _TileKey_js__WEBPACK_IMPORTED_MODULE_0__["default"](o);t.containsChild(n)&&(s.add(o),i=!0)}return i}}


/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/FeatureLayerView.js":
/*!********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/FeatureLayerView.js ***!
  \********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ _; }
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/property.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/property.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/* harmony import */ var _layers_support_FeatureEffect_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../layers/support/FeatureEffect.js */ "./node_modules/@arcgis/core/layers/support/FeatureEffect.js");
/* harmony import */ var _layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../layers/support/FeatureFilter.js */ "./node_modules/@arcgis/core/layers/support/FeatureFilter.js");
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/* harmony import */ var _layers_support_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../layers/support/floorFilterUtils.js */ "./node_modules/@arcgis/core/layers/support/floorFilterUtils.js");
/* harmony import */ var _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../rest/support/Query.js */ "./node_modules/@arcgis/core/rest/support/Query.js");
/* harmony import */ var _support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../support/arcadeOnDemand.js */ "./node_modules/@arcgis/core/support/arcadeOnDemand.js");
/* harmony import */ var _support_popupUtils_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./support/popupUtils.js */ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
const _=_=>{let q=class extends _{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.dataUpdating=!1,this.filter=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){this.addHandles([(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.watch)((()=>{const e=this.layer;return[e&&"elevationInfo"in e?e.elevationInfo?.featureExpressionInfo:null,e&&"displayField"in e?e.displayField:null,e&&"timeInfo"in e&&e.timeInfo,e&&"renderer"in e&&e.renderer,e&&"labelingInfo"in e&&e.labelingInfo,e&&"floorInfo"in e&&e.floorInfo,this.filter,this.featureEffect,this.timeExtent]}),(()=>this._handleRequiredFieldsChange()),_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.syncAndInitial),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.on)((()=>this.view?.floors),"change",(()=>this._handleRequiredFieldsChange())),(0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_5__.on)((()=>{const e=this.layer;return e&&"sublayers"in e?e.sublayers:null}),"change",(()=>this._handleRequiredFieldsChange()))])}get availableFields(){if(!this.layer)return[];const{layer:e,layer:{fieldsIndex:t},requiredFields:r}=this;return"outFields"in e&&e.outFields?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.fixFields)(t,[...(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.unpackFieldNames)(t,e.outFields),...r]):(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.fixFields)(t,r)}get featureEffect(){return this.layer&&"featureEffect"in this.layer?this.layer.featureEffect:null}set featureEffect(e){this._override("featureEffect",e)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error("missing implementation")}createQuery(){const e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},t=null!=this.filter?this.filter.createQuery(e):new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_13__["default"](e);if("floorInfo"in this.layer&&this.layer.floorInfo){const e=(0,_layers_support_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_12__.getFloorFilterClause)(this);null!=e&&(t.where=t.where?`(${t.where}) AND (${e})`:e)}return null!=this.timeExtent&&(t.timeExtent=null!=t.timeExtent?t.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),t}createAggregateQuery(){const e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference};return new _rest_support_Query_js__WEBPACK_IMPORTED_MODULE_13__["default"](e)}queryFeatures(e,t){throw new Error("missing implementation")}queryObjectIds(e,t){throw new Error("missing implementation")}queryFeatureCount(e,t){throw new Error("missing implementation")}queryExtent(e,t){throw new Error("missing implementation")}async fetchPopupFeaturesFromGraphics(e,t){return this._validateFetchPopupFeatures(e,t),this._fetchPopupFeatures(e,t)}_loadArcadeModules(e){return e.expressionInfos?.length||Array.isArray(e.content)&&e.content.some((e=>"expression"===e.type))?(0,_support_arcadeOnDemand_js__WEBPACK_IMPORTED_MODULE_14__.loadArcade)():Promise.resolve()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",e),e.then((()=>{this._updatingRequiredFieldsPromise===e&&this._set("_updatingRequiredFieldsPromise",null)}))}async _updateRequiredFields(){if(!this.layer||!this.view)return;const e="3d"===this.view.type,{layer:t,layer:{fieldsIndex:i,objectIdField:o}}=this,s="renderer"in t&&t.renderer,n="orderBy"in t&&t.orderBy,l="featureReduction"in t?t.featureReduction:null,a=new Set,u=await Promise.allSettled([s?s.collectRequiredFields(a,i):null,(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectLabelingFields)(a,t),e&&"elevationInfo"in t?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectElevationFields)(a,t):null,null!=this.filter?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectFilterFields)(a,t,this.filter):null,e||null==this.featureEffect?null:(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectFilterFields)(a,t,this.featureEffect.filter),!e&&l?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectFeatureReductionFields)(a,t,l):null,!e&&n?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectOrderByInfos)(a,t,n):null]);if("timeInfo"in t&&t.timeInfo&&this.timeExtent&&(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectFields)(a,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),"floorInfo"in t&&t.floorInfo&&(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectFields)(a,t.fieldsIndex,[t.floorInfo.floorField]),"feature"===t.type&&e&&null!=t.infoFor3D&&(null==t.globalIdField&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error("globalIdField missing on 3DObjectFeatureLayer"),(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectFields)(a,t.fieldsIndex,[t.globalIdField])),"subtype-group"===t.type){(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectField)(a,i,t.subtypeField);const e=t.sublayers.map((e=>Promise.all([e.renderer?.collectRequiredFields(a,i),(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectLabelingFields)(a,e)])));await Promise.allSettled(e)}if("catalog-footprint"===t.type&&t.parent){const e=t.parent;(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectFields)(a,i,[e.itemNameField,e.itemSourceField,e.itemTypeField,e.maxScaleField,e.minScaleField])}for(const d of u)"rejected"===d.status&&_core_Logger_js__WEBPACK_IMPORTED_MODULE_3__["default"].getLogger(this).error(d.reason);(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectField)(a,i,o),e&&"displayField"in t&&t.displayField&&(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.collectField)(a,i,t.displayField);const p=Array.from(a).sort();this._set("requiredFields",p)}_validateFetchPopupFeatures(e,r){if(null!=r)for(const i of e){const e=i.origin&&"layer"in i.origin?i.origin.layer:i.layer;if("popupEnabled"in e&&!e.popupEnabled)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:e});if(i.isAggregate){const r="featureReduction"in e?e.featureReduction:null;if(!(r&&"popupTemplate"in r&&r.popupEnabled&&r.popupTemplate))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:e})}else if("popupTemplate"in e){if(!(0,_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_15__.getFetchPopupTemplate)(e,r))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:e})}}}_popupFeatureHasRequiredFields(e,t){return (0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.featureHasFields)(t,e)}async _fetchPopupFeatures(e,t){const r=new Array(e.length),o=new Map,s=await this._createPopupQuery(e.map((e=>e.origin?.layer??e.layer)),t);for(let n=0;n<e.length;n++){const l=e[n];if(l.isAggregate){r[n]=l;continue}const a=l.origin?.layer??l.layer;if(!a||!("popupEnabled"in a))continue;const u=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_11__.unpackFieldNames)(this.layer.fieldsIndex,s.outFields),p=(0,_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_15__.getFetchPopupTemplate)(a,t);if(null==p)continue;const d=await this._loadArcadeModules(p);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(t);d&&d.arcadeUtils.hasGeometryOperations(p)||!this._popupFeatureHasRequiredFields(l,u)?o.set(l.getObjectId(),{graphic:l,index:n}):r[n]=l}if("stream"===this.layer.type||"parquet"===this.layer.type||0===o.size)return r.filter(Boolean);s.objectIds=Array.from(o.keys());try{const e=await this.layer.queryFeatures(s,t);for(const t of e.features){const{graphic:{geometry:e,origin:i},index:s}=o.get(t.getObjectId());t.geometry||=e,t.origin=i,r[s]=t}}catch{}return r.filter(Boolean)}async _createPopupQuery(e,t){const r=this.layer.createQuery(),o=new Set;let s=!1;const n=e??[this.layer];for(const l of n){if(!("popupEnabled"in l))continue;const e=(0,_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_15__.getFetchPopupTemplate)(l,t);if(null==e)continue;const r=await this._loadArcadeModules(e);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(t);const n=r&&r.arcadeUtils.hasGeometryOperations(e);s=!("point"!==this.layer.geometryType&&!n);const a=await (0,_support_popupUtils_js__WEBPACK_IMPORTED_MODULE_15__.getRequiredFields)(this.layer,e);(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_4__.throwIfAborted)(t);for(const t of a)o.add(t)}if(r.returnGeometry=s,r.returnZ=s,r.returnM=s,r.outFields=Array.from(o),r.outSpatialReference=this.view.spatialReference,"floorInfo"in this.layer&&this.layer.floorInfo){const e=(0,_layers_support_floorFilterUtils_js__WEBPACK_IMPORTED_MODULE_12__.getFloorFilterClause)(this);null!=e&&(r.where=r.where?`(${r.where}) AND (${e})`:e)}return r}canResume(){return!!super.canResume()&&(null==this.timeExtent||!this.timeExtent.isEmpty)}getTest(){}get test(){}};return (0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],q.prototype,"_updatingRequiredFieldsPromise",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({readOnly:!0})],q.prototype,"availableFields",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({readOnly:!0})],q.prototype,"dataUpdating",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({type:_layers_support_FeatureEffect_js__WEBPACK_IMPORTED_MODULE_9__["default"]})],q.prototype,"featureEffect",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({type:_layers_support_FeatureFilter_js__WEBPACK_IMPORTED_MODULE_10__["default"]})],q.prototype,"filter",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],q.prototype,"layer",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({type:Number})],q.prototype,"maximumNumberOfFeatures",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({readOnly:!0,type:Boolean})],q.prototype,"maximumNumberOfFeaturesExceeded",null),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)({readOnly:!0})],q.prototype,"requiredFields",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],q.prototype,"suspended",void 0),(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_property_js__WEBPACK_IMPORTED_MODULE_6__.property)()],q.prototype,"view",void 0),q=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_8__.subclass)("esri.views.layers.FeatureLayerView")],q),q};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js":
/*!************************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/RefreshableLayerView.js ***!
  \************************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": function() { return /* binding */ i; }
/* harmony export */ });
/* harmony import */ var _chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../chunks/tslib.es6.js */ "./node_modules/@arcgis/core/chunks/tslib.es6.js");
/* harmony import */ var _core_Logger_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Logger.js */ "./node_modules/@arcgis/core/core/Logger.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_has_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/has.js */ "./node_modules/@arcgis/core/core/has.js");
/* harmony import */ var _core_RandomLCG_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../core/RandomLCG.js */ "./node_modules/@arcgis/core/core/RandomLCG.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../core/accessorSupport/decorators/subclass.js */ "./node_modules/@arcgis/core/core/accessorSupport/decorators/subclass.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
const i=i=>{let a=class extends i{initialize(){this.addHandles((0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_3__.on)((()=>this.layer),"refresh",(r=>{this.doRefresh(r.dataChanged).catch((r=>{(0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_2__.isAbortError)(r)||_core_Logger_js__WEBPACK_IMPORTED_MODULE_1__["default"].getLogger(this).error(r)}))})),"RefreshableLayerView")}};return a=(0,_chunks_tslib_es6_js__WEBPACK_IMPORTED_MODULE_0__._)([(0,_core_accessorSupport_decorators_subclass_js__WEBPACK_IMPORTED_MODULE_7__.subclass)("esri.views.layers.RefreshableLayerView")],a),a};


/***/ }),

/***/ "./node_modules/@arcgis/core/views/layers/support/popupUtils.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@arcgis/core/views/layers/support/popupUtils.js ***!
  \**********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   getFetchPopupTemplate: function() { return /* binding */ p; },
/* harmony export */   getRequiredFields: function() { return /* binding */ n; },
/* harmony export */   hasPopupTemplate: function() { return /* binding */ u; }
/* harmony export */ });
/* harmony import */ var _layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../layers/support/fieldUtils.js */ "./node_modules/@arcgis/core/layers/support/fieldUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
async function n(n,p=n.popupTemplate){if(null==p)return[];const u=await p.getRequiredFields(n.fieldsIndex),{lastEditInfoEnabled:t}=p,{objectIdField:d,typeIdField:s,globalIdField:i,relationships:a}=n;if(u.includes("*"))return["*"];const o=t?(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.getFeatureEditFields)(n):[],f=(0,_layers_support_fieldUtils_js__WEBPACK_IMPORTED_MODULE_0__.fixFields)(n.fieldsIndex,[...u,...o]);return s&&f.push(s),f&&d&&n.fieldsIndex?.has(d)&&!f.includes(d)&&f.push(d),f&&i&&n.fieldsIndex?.has(i)&&!f.includes(i)&&f.push(i),a&&a.forEach((e=>{const{keyField:l}=e;f&&l&&n.fieldsIndex?.has(l)&&!f.includes(l)&&f.push(l)})),f}function p(e,l){return e.popupTemplate?e.popupTemplate:null!=l&&l.defaultPopupTemplateEnabled&&null!=e.defaultPopupTemplate?e.defaultPopupTemplate:null}function u(e,l){return null!=p(e,{defaultPopupTemplateEnabled:l})}


/***/ }),

/***/ "./node_modules/@arcgis/core/webscene/utils.js":
/*!*****************************************************!*\
  !*** ./node_modules/@arcgis/core/webscene/utils.js ***!
  \*****************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isWebScene: function() { return /* binding */ t; }
/* harmony export */ });
/* harmony import */ var _support_tagSymbols_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../support/tagSymbols.js */ "./node_modules/@arcgis/core/support/tagSymbols.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function t(t){return null!=t&&"object"==typeof t&&_support_tagSymbols_js__WEBPACK_IMPORTED_MODULE_0__.WebSceneTag in t}


/***/ })

}]);
//# sourceMappingURL=vendors-node_modules_arcgis_core_views_2d_layers_FeatureLayerView2D_js.cfb4c5a8d14f73b1a6d5.js.map