"use strict";(self.webpackChunkreact_redux_arcgis_boilerplate=self.webpackChunkreact_redux_arcgis_boilerplate||[]).push([[1814,3679],{91814:function(e,t,i){function n(e,t,i){i=i||2;var n,o,a,l,c,h,u,d=t&&t.length,y=d?t[0]*i:e.length,v=r(e,0,y,i,!0),x=[];if(!v||v.next===v.prev)return x;if(d&&(v=p(e,t,v,i)),e.length>80*i){n=a=e[0],o=l=e[1];for(var m=i;m<y;m+=i)(c=e[m])<n&&(n=c),(h=e[m+1])<o&&(o=h),c>a&&(a=c),h>l&&(l=h);u=0!==(u=Math.max(a-n,l-o))?1/u:0}return s(v,x,i,n,o,u),x}function r(e,t,i,n,r){var o,s;if(r===O(e,t,i,n)>0)for(o=t;o<i;o+=n)s=C(o,e[o],e[o+1],s);else for(o=i-n;o>=t;o-=n)s=C(o,e[o],e[o+1],s);if(s&&w(s,s.next)){var a=s.next;I(s),s=a}return s}function o(e,t){if(!e)return e;t||(t=e);var i,n=e;do{if(i=!1,n.steiner||!w(n,n.next)&&0!==M(n.prev,n,n.next))n=n.next;else{var r=n.prev;if(I(n),(n=t=r)===n.next)break;i=!0}}while(i||n!==t);return t}function s(e,t,i,n,r,p,u){if(e){!u&&p&&x(e,n,r,p);for(var d,y,v=e;e.prev!==e.next;)if(d=e.prev,y=e.next,p?l(e,n,r,p):a(e))t.push(d.i/i),t.push(e.i/i),t.push(y.i/i),I(e),e=y.next,v=y.next;else if((e=y)===v){u?1===u?s(e=c(o(e),t,i),t,i,n,r,p,2):2===u&&h(e,t,i,n,r,p):s(o(e),t,i,n,r,p,1);break}}}function a(e){var t=e.prev,i=e,n=e.next;if(M(t,i,n)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(g(t.x,t.y,i.x,i.y,n.x,n.y,r.x,r.y)&&M(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function l(e,t,i,n){var r=e.prev,o=e,s=e.next;if(M(r,o,s)>=0)return!1;for(var a=r.x<o.x?r.x<s.x?r.x:s.x:o.x<s.x?o.x:s.x,l=r.y<o.y?r.y<s.y?r.y:s.y:o.y<s.y?o.y:s.y,c=r.x>o.x?r.x>s.x?r.x:s.x:o.x>s.x?o.x:s.x,h=r.y>o.y?r.y>s.y?r.y:s.y:o.y>s.y?o.y:s.y,p=m(a,l,t,i,n),u=m(c,h,t,i,n),d=e.prevZ,y=e.nextZ;d&&d.z>=p&&y&&y.z<=u;){if(d!==e.prev&&d!==e.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&M(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,y!==e.prev&&y!==e.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,y.x,y.y)&&M(y.prev,y,y.next)>=0)return!1;y=y.nextZ}for(;d&&d.z>=p;){if(d!==e.prev&&d!==e.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,d.x,d.y)&&M(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;y&&y.z<=u;){if(y!==e.prev&&y!==e.next&&g(r.x,r.y,o.x,o.y,s.x,s.y,y.x,y.y)&&M(y.prev,y,y.next)>=0)return!1;y=y.nextZ}return!0}function c(e,t,i){var n=e;do{var r=n.prev,s=n.next.next;!w(r,s)&&b(r,n,n.next,s)&&V(r,s)&&V(s,r)&&(t.push(r.i/i),t.push(n.i/i),t.push(s.i/i),I(n),I(n.next),n=e=s),n=n.next}while(n!==e);return o(n)}function h(e,t,i,n,r,a){var l=e;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&_(l,c)){var h=A(l,c);return l=o(l,l.next),h=o(h,h.next),s(l,t,i,n,r,a),void s(h,t,i,n,r,a)}c=c.next}l=l.next}while(l!==e)}function p(e,t,i,n){var s,a,l,c=[];for(s=0,a=t.length;s<a;s++)(l=r(e,t[s]*n,s<a-1?t[s+1]*n:e.length,n,!1))===l.next&&(l.steiner=!0),c.push(f(l));for(c.sort(u),s=0;s<c.length;s++)i=o(i=y(c[s],i),i.next);return i}function u(e,t){return e.x-t.x}function d(e){if(e.next.prev===e)return e;let t=e;for(;;){const i=t.next;if(i.prev===t||i===t||i===e)break;t=i}return t}function y(e,t){var i=function(e,t){var i,n=t,r=e.x,o=e.y,s=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var a=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s){if(s=a,a===r){if(o===n.y)return n;if(o===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!i)return null;if(r===s)return i;var l,c=i,h=i.x,p=i.y,u=1/0;n=i;do{r>=n.x&&n.x>=h&&r!==n.x&&g(o<p?r:s,o,h,p,o<p?s:r,o,n.x,n.y)&&(l=Math.abs(o-n.y)/(r-n.x),V(n,e)&&(l<u||l===u&&(n.x>i.x||n.x===i.x&&v(i,n)))&&(i=n,u=l)),n=n.next}while(n!==c);return i}(e,t);if(!i)return t;var n=A(i,e),r=o(i,i.next);let s=d(n);return o(s,s.next),r=d(r),d(t===i?r:t)}function v(e,t){return M(e.prev,e,t.prev)<0&&M(t.next,e,e.next)<0}function x(e,t,i,n){var r=e;do{null===r.z&&(r.z=m(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,i,n,r,o,s,a,l,c=1;do{for(i=e,e=null,o=null,s=0;i;){for(s++,n=i,a=0,t=0;t<c&&(a++,n=n.nextZ);t++);for(l=c;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;i=n}o.nextZ=null,c*=2}while(s>1)}(r)}function m(e,t,i,n,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f(e){var t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function g(e,t,i,n,r,o,s,a){return(r-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(n-a)-(i-s)*(t-a)>=0&&(i-s)*(o-a)-(r-s)*(n-a)>=0}function _(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&b(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(V(e,t)&&V(t,e)&&function(e,t){var i=e,n=!1,r=(e.x+t.x)/2,o=(e.y+t.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&r<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}(e,t)&&(M(e.prev,e,t.prev)||M(e,t.prev,t))||w(e,t)&&M(e.prev,e,e.next)>0&&M(t.prev,t,t.next)>0)}function M(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function b(e,t,i,n){var r=S(M(e,t,i)),o=S(M(e,t,n)),s=S(M(i,n,e)),a=S(M(i,n,t));return r!==o&&s!==a||!(0!==r||!G(e,i,t))||!(0!==o||!G(e,n,t))||!(0!==s||!G(i,e,n))||!(0!==a||!G(i,t,n))}function G(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function S(e){return e>0?1:e<0?-1:0}function V(e,t){return M(e.prev,e,e.next)<0?M(e,t,e.next)>=0&&M(e,e.prev,t)>=0:M(e,t,e.prev)<0||M(e,e.next,t)<0}function A(e,t){var i=new k(e.i,e.x,e.y),n=new k(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function C(e,t,i,n){var r=new k(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function I(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function k(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,i,n){for(var r=0,o=t,s=i-n;o<i;o+=n)r+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return r}i.d(t,{e:function(){return n}}),n.deviation=function(e,t,i,n){var r=t&&t.length,o=r?t[0]*i:e.length,s=Math.abs(O(e,0,o,i));if(r)for(var a=0,l=t.length;a<l;a++){var c=t[a]*i,h=a<l-1?t[a+1]*i:e.length;s-=Math.abs(O(e,c,h,i))}var p=0;for(a=0;a<n.length;a+=3){var u=n[a]*i,d=n[a+1]*i,y=n[a+2]*i;p+=Math.abs((e[u]-e[y])*(e[d+1]-e[u+1])-(e[u]-e[d])*(e[y+1]-e[u+1]))}return 0===s&&0===p?0:Math.abs((p-s)/s)},n.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},n=0,r=0;r<e.length;r++){for(var o=0;o<e[r].length;o++)for(var s=0;s<t;s++)i.vertices.push(e[r][o][s]);r>0&&(n+=e[r-1].length,i.holes.push(n))}return i}},31753:function(e,t,i){i.d(t,{A6:function(){return x},B8:function(){return d},Xd:function(){return h},Xr:function(){return y},Yc:function(){return O},hZ:function(){return f},lw:function(){return p},t2:function(){return I},x8:function(){return c}});var n=i(79441),r=i(19165),o=i(19913),s=i(78115),a=i(80347),l=i(74772);function c(e,t,i){i*=.5;const n=Math.sin(i);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(i),e}function h(e,t){const i=2*Math.acos(t[3]),n=Math.sin(i/2);return n>(0,s.FD)()?(e[0]=t[0]/n,e[1]=t[1]/n,e[2]=t[2]/n):(e[0]=1,e[1]=0,e[2]=0),i}function p(e,t,i){const n=t[0],r=t[1],o=t[2],s=t[3],a=i[0],l=i[1],c=i[2],h=i[3];return e[0]=n*h+s*a+r*c-o*l,e[1]=r*h+s*l+o*a-n*c,e[2]=o*h+s*c+n*l-r*a,e[3]=s*h-n*a-r*l-o*c,e}function u(e,t,i,n){const r=t[0],o=t[1],a=t[2],l=t[3];let c,h,p,u,d,y=i[0],v=i[1],x=i[2],m=i[3];return h=r*y+o*v+a*x+l*m,h<0&&(h=-h,y=-y,v=-v,x=-x,m=-m),1-h>(0,s.FD)()?(c=Math.acos(h),p=Math.sin(c),u=Math.sin((1-n)*c)/p,d=Math.sin(n*c)/p):(u=1-n,d=n),e[0]=u*r+d*y,e[1]=u*o+d*v,e[2]=u*a+d*x,e[3]=u*l+d*m,e}function d(e,t){const i=t[0],n=t[1],r=t[2],o=t[3],s=i*i+n*n+r*r+o*o,a=s?1/s:0;return e[0]=-i*a,e[1]=-n*a,e[2]=-r*a,e[3]=o*a,e}function y(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function v(e,t){const i=t[0]+t[4]+t[8];let n;if(i>0)n=Math.sqrt(i+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{let i=0;t[4]>t[0]&&(i=1),t[8]>t[3*i+i]&&(i=2);const r=(i+1)%3,o=(i+2)%3;n=Math.sqrt(t[3*i+i]-t[3*r+r]-t[3*o+o]+1),e[i]=.5*n,n=.5/n,e[3]=(t[3*r+o]-t[3*o+r])*n,e[r]=(t[3*r+i]+t[3*i+r])*n,e[o]=(t[3*o+i]+t[3*i+o])*n}return e}function x(e,t,i,n){const r=.5*Math.PI/180;t*=r,i*=r,n*=r;const o=Math.sin(t),s=Math.cos(t),a=Math.sin(i),l=Math.cos(i),c=Math.sin(n),h=Math.cos(n);return e[0]=o*l*h-s*a*c,e[1]=s*a*h+o*l*c,e[2]=s*l*c-o*a*h,e[3]=s*l*h+o*a*c,e}const m=l.c,f=l.s,g=l.g,_=p,M=l.d,w=l.h,b=l.l,G=l.j,S=G,V=l.b,A=V,C=l.n,I=l.a,k=l.e;function O(e,t,i){const n=(0,a.f)(t,i);return n<-.999999?((0,a.e)(T,E,t),(0,a.G)(T)<1e-6&&(0,a.e)(T,Z,t),(0,a.n)(T,T),c(e,T,Math.PI),e):n>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):((0,a.e)(T,t,i),e[0]=T[0],e[1]=T[1],e[2]=T[2],e[3]=1+n,C(e,e))}const T=(0,o.vt)(),E=(0,o.fA)(1,0,0),Z=(0,o.fA)(0,1,0);const P=(0,r.vt)(),R=(0,r.vt)();const z=(0,n.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:g,calculateW:function(e,t){const i=t[0],n=t[1],r=t[2];return e[0]=i,e[1]=n,e[2]=r,e[3]=Math.sqrt(Math.abs(1-i*i-n*n-r*r)),e},conjugate:y,copy:m,dot:w,equals:k,exactEquals:I,fromEuler:x,fromMat3:v,getAxisAngle:h,identity:function(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e},invert:d,len:S,length:G,lerp:b,mul:_,multiply:p,normalize:C,random:function(e){const t=s.Ov,i=t(),n=t(),r=t(),o=Math.sqrt(1-i),a=Math.sqrt(i);return e[0]=o*Math.sin(2*Math.PI*n),e[1]=o*Math.cos(2*Math.PI*n),e[2]=a*Math.sin(2*Math.PI*r),e[3]=a*Math.cos(2*Math.PI*r),e},rotateX:function(e,t,i){i*=.5;const n=t[0],r=t[1],o=t[2],s=t[3],a=Math.sin(i),l=Math.cos(i);return e[0]=n*l+s*a,e[1]=r*l+o*a,e[2]=o*l-r*a,e[3]=s*l-n*a,e},rotateY:function(e,t,i){i*=.5;const n=t[0],r=t[1],o=t[2],s=t[3],a=Math.sin(i),l=Math.cos(i);return e[0]=n*l-o*a,e[1]=r*l+s*a,e[2]=o*l+n*a,e[3]=s*l-r*a,e},rotateZ:function(e,t,i){i*=.5;const n=t[0],r=t[1],o=t[2],s=t[3],a=Math.sin(i),l=Math.cos(i);return e[0]=n*l+r*a,e[1]=r*l-n*a,e[2]=o*l+s*a,e[3]=s*l-o*a,e},rotationTo:O,scale:M,set:f,setAxes:function(e,t,i,n){const r=z;return r[0]=i[0],r[3]=i[1],r[6]=i[2],r[1]=n[0],r[4]=n[1],r[7]=n[2],r[2]=-t[0],r[5]=-t[1],r[8]=-t[2],C(e,v(e,r))},setAxisAngle:c,slerp:u,sqlerp:function(e,t,i,n,r,o){return u(P,t,r,o),u(R,i,n,o),u(e,P,R,2*o*(1-o)),e},sqrLen:A,squaredLength:V,str:function(e){return"quat("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}},Symbol.toStringTag,{value:"Module"}))},32159:function(e,t,i){i.d(t,{Y0:function(){return c},lO:function(){return h}});var n=i(34670),r=i(44153),o=i(67488);const s=new r.A(n.fv),a=new r.A(n.FY),l=new r.A(n.LJ),c=new r.A(n.Ro);function h(e){const t=p.get(e);if(t)return t;let i=s;if(e)if(e===a)i=a;else if(e===l)i=l;else{const t=e.wkid,n=e.latestWkid;if(null!=t||null!=n)(0,o.tl)(t)||(0,o.tl)(n)?i=a:((0,o.ZL)(t)||(0,o.ZL)(n))&&(i=l);else{const t=e.wkt2??e.wkt;if(t){const e=t.toUpperCase();e===u?i=a:e===d&&(i=l)}}}return p.set(e,i),i}const p=new Map,u=a.wkt.toUpperCase(),d=l.wkt.toUpperCase()},5896:function(e,t,i){i.d(t,{J:function(){return _}});i(3313);var n=i(20857),r=(i(3438),i(70214)),o=i(23572),s=i(8636),a=i(53334),l=i(56560),c=i(19913),h=i(85953),p=i(93617),u=i(51879),d=i(36598),y=i(1912),v=i(38648),x=i(44153),m=i(60936),f=i(68231),g=i(24826);class _ extends d.b{constructor(e){super(),this._graphicsLayer=e,this._symbolPairingsByType=new Map}visualizeIntersectionPoint(e,t){return this._visualizeSnappingIndicator(new y.A({x:e.intersectionPoint[0],y:e.intersectionPoint[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol("intersectionPoint",t.view.effectiveTheme.accentColor))}visualizePoint(e,t){return this._visualizeSnappingIndicator(new y.A({x:e.point[0],y:e.point[1],spatialReference:t.spatialReference}),this._getOrCreateSymbol("point",t.view.effectiveTheme.accentColor))}visualizeLine(e,t){return this._visualizeSnappingIndicator(new v.A({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:(0,s.PZ)(x.A,t.spatialReference)}),this._getOrCreateSymbol("line",t.view.effectiveTheme.accentColor))}visualizeParallelSign(e,t){return this._visualizeSnappingIndicator(new v.A({paths:[[[...e.lineStart],[...e.lineEnd]]],spatialReference:(0,s.PZ)(x.A,t.spatialReference)}),this._getOrCreateSymbol("parallelSign",t.view.effectiveTheme.accentColor))}visualizeRightAngleQuad(e,t){const i=(0,l.vt)(),n=(0,l.vt)(),r=(0,c.vt)();(0,a.Re)(i,(0,p.Xz)(e.centerVertex),(0,p.Xz)(e.previousVertex)),(0,a.Re)(n,(0,p.Xz)(e.nextVertex),(0,p.Xz)(e.previousVertex)),(0,a.$A)(r,i,n);const o="rightAngleQuad"+(r[2]<0?45:225);return this._visualizeSnappingIndicator(new v.A({paths:[[[...e.previousVertex],[...e.centerVertex],[...e.nextVertex]]],spatialReference:(0,s.PZ)(x.A,t.spatialReference)}),this._getOrCreateSymbol(o,t.view.effectiveTheme.accentColor))}_visualizeSnappingIndicator(e,t){const i=new n.A({geometry:e,symbol:t});return this._graphicsLayer.add(i),(0,r.hA)((()=>{this._graphicsLayer.remove(i)}))}_getOrCreateSymbol(e,t){const i=this._symbolPairingsByType;return i.get(e)?.color!==t&&i.set(e,{color:t,symbol:M(e,t)}),i.get(e).symbol}}function M(e,t){const i=[...t.toRgb(),255*t.a];switch(e){case"point":return new f.A({outline:{width:.5,color:[0,0,0,1]},size:10,color:t});case"intersectionPoint":return new f.A({outline:new g.A({width:1.5,color:t}),size:15,color:[0,0,0,0]});case"line":return new m.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:h.uT.Butt,joinStyle:h.wd.Round,miterLimit:10,width:(0,o.PN)(u.N.lineHintWidthTarget),color:i}]}}});case"parallelSign":return new m.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:i}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:i}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}});case"rightAngleQuad45":case"rightAngleQuad225":{const n="rightAngleQuad45"===e?45:225;return new m.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:(0,o.PN)(u.N.rightAngleHintSize),rotation:n,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:(0,o.PN)(u.N.rightAngleHintOutlineSize),color:i},{type:"CIMSolidFill",enable:!0,color:[...t.toRgb(),255*t.a*.4]}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}})}}}},59206:function(e,t,i){i.r(t),i.d(t,{default:function(){return he}});var n=i(82392),r=(i(3313),i(20857)),o=i(3132),s=i(58842),a=i(62991),l=i(57888),c=i(80861),h=i(57725),p=i(61985),u=i(81482),d=(i(6273),i(67498),i(26325)),y=i(11021),v=i(11682),x=i(68231),m=i(84456),f=i(5896),g=i(19264),_=i(27263),M=i(34243),w=i(1277),b=i(70214),G=i(7743),S=i(23572),V=i(1912),A=i(12849),C=i(81245),I=i(55959),k=i(55016),O=i(59702);let T=class extends O.w{constructor(e){super(e),this.type="translate-vertex",this.distance=G.r7,this.elevation=null,this.area=null,this.totalLength=null}clear(){this.distance=G.r7,this.elevation=null,this.area=null,this.totalLength=null}};(0,n._)([(0,u.MZ)()],T.prototype,"type",void 0),(0,n._)([(0,u.MZ)()],T.prototype,"distance",void 0),(0,n._)([(0,u.MZ)()],T.prototype,"elevation",void 0),(0,n._)([(0,u.MZ)()],T.prototype,"area",void 0),(0,n._)([(0,u.MZ)()],T.prototype,"totalLength",void 0),T=(0,n._)([(0,d.$)("esri.views.interactive.tooltip.infos.TranslateVertexTooltipInfo")],T);var E=i(82580),Z=i(49970),P=i(68489);function R(e,t){function i(){const e=t(),i=e.sketchOptions.tooltips.effectiveEnabled?e.activeTooltipInfo:null;return{...e,activeTooltipInfo:i}}let n=!1;function r(e){n||(n=!0,e(),n=!1)}return(0,b.vE)([(0,p.wB)((()=>{const e=i();return{context:e,geometry:e.graphic?.geometry,vertexGeometry:e.selectedVertex?.geometry}}),(({context:t})=>{r((()=>{(function(e){const t=e.activeTooltipInfo;if(t){switch(t?.type){case"move-point":return function(e,{graphic:t}){z(e,t,t?.geometry)}(t,e);case"selected-vertex":return function(e,{graphic:t,selectedVertex:i}){z(e,t,i?.geometry);const n=t?.geometry;switch(n?.type){case"polygon":e.geometryType="polygon",e.totalLength.visible=!1,e.area.actual=(0,E.n)(n);break;case"polyline":e.geometryType="polyline",e.totalLength.actual=(0,Z.ob)(n),e.area.visible=!1}}(t,e)}t.sketchOptions=e.sketchOptions}})(t),e.info=t.activeTooltipInfo}))}),p.pc),(0,p.wB)((()=>{const e=i(),{activeTooltipInfo:t}=e;if(t&&"key"in t)return{context:e,key:t.key}}),((e,t)=>{e&&t&&e.key!==t.key&&r((()=>L(e.context)))}),p.OH),(0,A.sZ)(e,{onBeforePaste:()=>{n=!0},onAfterPaste:()=>{L(i()),n=!1}})])}function z(e,t,i){t&&"point"===i?.type&&(e.setLocationFromPoint(i),e.elevation.actual=(0,P.Of)(i),e.elevation.visible=!!t.geometry?.hasZ,e.elevation.readOnly=!1,e.elevation.showAsZ=!0)}function L(e){function t(t,i){const n=i?.geometry;if(!n||"point"!==n.type)return;const{dx:r,dy:o,dz:s}=(0,A.mu)(t,n);if(0===r&&0===o&&0===s)return;const{x:a,y:l,z:c,m:h,spatialReference:p}=n,u=new V.A({x:a+r,y:l+o,z:null!=c?c+s:void 0,m:h,spatialReference:p});e.updateGeometry(i,u,n,r,o)}const{activeTooltipInfo:i,graphic:n,selectedVertex:r}=e;switch(i?.type){case"move-point":return t(i,n);case"selected-vertex":return t(i,r)}}function H(e,t,i){if(!i)return;const{x:n,y:r}=i.origin,o=t.toMap(i),s=t.toMap((0,S.tc)(n,r)),a=(0,Z.Kt)(s,o);e.distance=null!=a?a:G.r7}var F=i(36818),U=i(82795),D=i(19793),B=i(92750),$=i(13243),q=i(3130),X=i(28535),K=i(38648);class N{constructor(e,t,i){this.graphic=e,this.mover=t,this.selected=i,this.type="reshape-start"}}class j{constructor(e,t,i){this.graphic=e,this.mover=t,this.selected=i,this.type="reshape"}}class Y{constructor(e,t,i){this.graphic=e,this.mover=t,this.selected=i,this.type="reshape-stop"}}class Q{constructor(e,t,i){this.mover=e,this.dx=t,this.dy=i,this.type="move-start"}}class W{constructor(e,t,i){this.mover=e,this.dx=t,this.dy=i,this.type="move"}}class J{constructor(e,t,i){this.mover=e,this.dx=t,this.dy=i,this.type="move-stop"}}class ee{constructor(e){this.added=e,this.type="vertex-select"}}class te{constructor(e){this.removed=e,this.type="vertex-deselect"}}class ie{constructor(e,t,i,n){this.added=e,this.graphic=t,this.oldGraphic=i,this.vertices=n,this.type="vertex-add"}}class ne{constructor(e,t,i,n){this.removed=e,this.graphic=t,this.oldGraphic=i,this.vertices=n,this.type="vertex-remove"}}const re=F.W.reshapeGraphics,oe={vertices:{default:new x.A({style:"circle",size:re.vertex.size,color:re.vertex.color,outline:{color:re.vertex.outlineColor,width:1}}),hover:new x.A({style:"circle",size:re.vertex.hoverSize,color:re.vertex.hoverColor,outline:{color:re.vertex.hoverOutlineColor,width:1}}),selected:new x.A({style:"circle",size:re.selected.size,color:re.selected.color,outline:{color:re.selected.outlineColor,width:1}})},midpoints:{default:new x.A({style:"circle",size:re.midpoint.size,color:re.midpoint.color,outline:{color:re.midpoint.outlineColor,width:1}}),hover:new x.A({style:"circle",size:re.midpoint.size,color:re.midpoint.color,outline:{color:re.midpoint.outlineColor,width:1}})}};let se=class extends l.A.EventedAccessor{constructor(e){super(e),this._updateHandlesOnExternalGeometryChange=null,this._activeOperationInfo=null,this._editGeometryOperations=null,this._graphicAttributes={esriSketchTool:"box"},this._mover=null,this._snappingContext=null,this._snappingGraphicsLayer=null,this._hoverGraphic=null,this._snappingTask=null,this._stagedVertex=null,this.tooltip=null,this.activeTooltipInfo=null,this.callbacks={onReshapeStart(){},onReshape(){},onReshapeStop(){},onMoveStart(){},onMove(){},onMoveStop(){},onGraphicClick(){}},this.enableMidpoints=!0,this.enableMovement=!0,this.enableVertices=!0,this.graphic=null,this.layer=null,this.midpointGraphics=new s.A,this.midpointSymbol=new x.A({style:"circle",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}}),this.selectedVertices=new s.A,this.snappingManager=null,this.symbols=oe,this.sketchOptions=new q.A,this.type="reshape",this.vertexGraphics=new s.A,this.view=null}initialize(){const e=this.view;this._highlightHelper=new M.A({view:e}),this._setup(),this._updateHandlesOnExternalGeometryChange=(0,p.C1)((()=>this.graphic?.geometry),(e=>{if(!e)return;const t=new Set(this.selectedVertices.map((e=>e.attributes?.pointIndex)));this._highlightHelper.removeAll(),this._setUpHighlights(),this._setupGraphics(),this._clearSelection(),this.vertexGraphics.filter((e=>t.has(e.attributes.pointIndex))).forEach((e=>this._addToSelection(e)));const{enableMovement:i,_mover:n,graphic:r,midpointGraphics:o,vertexGraphics:s}=this,a=s.concat(o).items;i&&a.push(r),n?.set("graphics",a)}),p.OH),this.tooltip=(0,A.A)((()=>({view:e,options:this.sketchOptions.tooltips}))),this.tooltipInfos=function(e){const t={sketchOptions:e,viewType:"2d"};return{movePoint:new C.F(t),selectedVertex:new I.d(t),translateGraphic:new k.M(t),translateVertices:new T(t)}}(this.sketchOptions),this.addHandles([(0,p.z7)((()=>e?.ready),(()=>{const{layer:e,view:t}=this;(0,w.Y)(t,e),this.addHandles(t.on("key-down",(e=>this._keyDownHandler(e)),U.o.TOOL))}),{once:!0,initial:!0}),(0,p.wB)((()=>this.graphic),(()=>this.refresh())),(0,p.wB)((()=>this.layer),((e,t)=>{t&&(this._clearSelection(),this._resetGraphics(t)),this.refresh()})),(0,p.wB)((()=>this.enableMidpoints),(()=>this.refresh())),R(this.tooltip,(()=>this._tooltipsContext)),(0,p.wB)((()=>this.view.effectiveTheme.accentColor),(()=>this._updateSymbolsForTheme()),p.Vh),this._updateHandlesOnExternalGeometryChange]),this._updateTooltip()}destroy(){this._reset(),this._mover?.destroy(),this._mover=null,this.tooltip=(0,h.pR)(this.tooltip)}get _coordinateHelper(){return this._editGeometryOperations?.data.coordinateHelper??(0,D.BV)(!!this.graphic.geometry?.hasZ,!!this.graphic.geometry?.hasM,this.view.spatialReference)}get _selectedVertex(){return 1===this.selectedVertices.length?this.selectedVertices.at(0):void 0}get _tooltipsContext(){return{sketchOptions:this.sketchOptions,activeTooltipInfo:this.activeTooltipInfo,graphic:this.graphic,selectedVertex:this._selectedVertex,updateGeometry:(e,t,i,n,r)=>{this._setUpGeometryHelper();const o=e===this.graphic;o?this._emitMoveStartEvent(0,0):this._emitReshapeStartEvent(e);if(this._syncGeometryAfterVertexMove(e,t,n,r,!0),o){const{view:e}=this,n=e.toScreen(i),r=e.toScreen(t),o=(r?.x??0)-(n?.x??0),s=(r?.y??0)-(n?.y??0);this._emitMoveEvent(o,s),this._emitMoveStopEvent(o,s)}else this._emitReshapeEvent(e),this._emitReshapeStopEvent(e);this._editGeometryOperations=(0,h.pR)(this._editGeometryOperations)}}}set highlightsEnabled(e){this._highlightHelper?.removeAll(),this._set("highlightsEnabled",e),this._setUpHighlights()}get state(){const e=this.view.ready,t=!(!this.graphic||!this.layer);return e&&t?"active":e?"ready":"disabled"}isUIGraphic(e){const t=[];return this.graphic&&t.push(this.graphic),t.concat(this.vertexGraphics.items,this.midpointGraphics.items),t.length>0&&t.includes(e)}refresh(){this._reset(),this._setup()}reset(){this.graphic=null}clearSelection(){this._clearSelection()}removeSelectedVertices(){const{selectedVertices:e}=this;e.length&&this._removeVertices(e)}_setup(){const{graphic:e,layer:t}=this;if(!t||null==e?.geometry)return;const i=e.geometry;"mesh"!==i.type&&"extent"!==i.type?("polygon"===i.type&&(0,y.uC)(i),this._setUpHighlights(),this._setupGraphics(),this._setupMover()):this._logGeometryTypeError()}_setUpHighlights(){this.highlightsEnabled&&this.graphic&&this._highlightHelper?.add(this.graphic)}_setUpGeometryHelper(){const e=this.graphic.geometry;if(null==e||"mesh"===e.type||"extent"===e.type)return void this._logGeometryTypeError();const t="multipoint"===e.type?new K.A({paths:[e.points],spatialReference:e.spatialReference}):e;this._editGeometryOperations=$.p.fromGeometry(t,m.RT.Local)}_saveSnappingContextForHandle(e,t){this._snappingGraphicsLayer=new v.A({listMode:"hide",internal:!0,title:"Reshape snapping layer"}),this.view.map.layers.add(this._snappingGraphicsLayer);const i=this._editGeometryOperations;(0,h.Lw)(i),this._snappingContext=new X.e({editGeometryOperations:i,elevationInfo:{mode:"on-the-ground",offset:0},pointer:t.viewEvent?.pointerType||"mouse",excludeFeature:this.graphic,feature:this.graphic,visualizer:new f.J(this._snappingGraphicsLayer),vertexHandle:this._getVertexFromEditGeometry(e)})}_reset(){this._clearSelection(),this._highlightHelper?.removeAll(),this._updateTooltip(),this._resetGraphics(),this._resetSnappingStateVars(),this._activeOperationInfo=null,this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor="default"}_resetSnappingStateVars(){null!=this.snappingManager&&this.snappingManager.doneSnapping(),null!=this._snappingGraphicsLayer&&(this.view?.map&&this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy()),this._editGeometryOperations=(0,h.pR)(this._editGeometryOperations),this._snappingTask=(0,h.DC)(this._snappingTask),this._snappingTask=null,this._snappingContext=null,this._stagedVertex=null}_resetGraphics(e){this._removeMidpointGraphics(e),this._removeVertexGraphics(e),this.selectedVertices.removeAll(),this._updateTooltip()}_removeMidpointGraphics(e){const t=e||this.layer;t&&t.removeMany(this.midpointGraphics.items),this.midpointGraphics.items.forEach((e=>e.destroy())),this.midpointGraphics.removeAll()}_removeVertexGraphics(e){const t=e||this.layer;t&&t.removeMany(this.vertexGraphics.items),this.vertexGraphics.items.forEach((e=>e.destroy())),this.vertexGraphics.removeAll()}_setupGraphics(){const e=this.graphic.geometry;if(null!=e&&("polyline"===e.type||"polygon"===e.type)){const t=ae(e);this.enableMidpoints&&this._setUpMidpointGraphics(t),this.enableVertices&&this._setUpVertexGraphics(t)}}_setUpMidpointGraphics(e){this._removeMidpointGraphics();const t=this._createMidpointGraphics(e);this.midpointGraphics.addMany(t),this.layer.addMany(t)}_setUpVertexGraphics(e){this._removeVertexGraphics();const t=this._createVertexGraphics(e);this.vertexGraphics.addMany(t),this._storeRelatedVertexIndices(),this.layer.addMany(t)}_createVertexGraphics(e){const{_graphicAttributes:t,symbols:i}=this,n=[];return e?.forEach(((e,o)=>{e.forEach(((e,s)=>{n.push(new r.A({geometry:this._coordinateHelper.arrayToPoint(e),symbol:i?.vertices?.default,attributes:{...t,pathIndex:o,pointIndex:s}}))}))})),n}_createMidpointGraphics(e){const{_graphicAttributes:t,symbols:i}=this,n=[];for(let o=0;o<e.length;o++){const s=e[o];for(let e=0;e<s.length;e++){const a=(e+1)%s.length;if("polyline"===this.graphic.geometry?.type&&0===a)continue;const l=s[e],c=s[a],h=this._getMidpoint(l,c);n.push(new r.A({geometry:h,symbol:i.midpoints.default,attributes:{...t,pathIndex:o,pointIndexStart:e,pointIndexEnd:a}}))}}return n}_updateSymbolsForTheme(){const e=this.view.effectiveTheme.accentColor;this.symbols={vertices:{...this.symbols.vertices,default:this.symbols.vertices.default.clone().set("color",e),hover:this.symbols.vertices.hover?.clone().set("color",e)},midpoints:{...this.symbols.midpoints}};for(const e of this.vertexGraphics)this._isSelected(e)?e.symbol=this.symbols.vertices.selected:this._hoverGraphic===e?e.symbol=this.symbols.vertices.hover:e.symbol=this.symbols.vertices.default}_storeRelatedVertexIndices(){const e=this.vertexGraphics.items;if(!e)return;const t=e.map((({geometry:e})=>({x:e.x,y:e.y})));for(let i=0;i<t.length;i++){const n=[];for(let e=0;e<t.length;e++){if(i===e)continue;const r=t[i],o=t[e];r.x===o.x&&r.y===o.y&&n.push(e)}e[i].attributes.relatedGraphicIndices=n}}_setupMover(){const{enableMovement:e,graphic:t,midpointGraphics:i,vertexGraphics:n,view:r}=this,o=n.concat(i).items;e&&o.push(t),this._mover=new _.default({enableMoveAllGraphics:!1,highlightsEnabled:!1,indicatorsEnabled:!1,graphics:o,view:r,callbacks:{onGraphicClick:e=>this._onGraphicClickCallback(e),onGraphicMoveStart:e=>this._onGraphicMoveStartCallback(e),onGraphicMove:e=>this._onGraphicMoveCallback(e),onGraphicMoveStop:e=>this._onGraphicMoveStopCallback(e),onGraphicPointerOver:e=>this._onGraphicPointerOverCallback(e),onGraphicPointerOut:e=>this._onGraphicPointerOutCallback(e)}})}_onGraphicClickCallback(e){e.viewEvent.stopPropagation();const t=e.graphic;if(t===this.graphic)this.clearSelection(),this.emit("graphic-click",e),this.callbacks.onGraphicClick?.(e);else if(this._isMidpoint(t)){if(2===e.viewEvent.button)return;const i=this.graphic.clone(),n=this._createVertexFromMidpoint(t);this.refresh(),this._emitVertexAddEvent([t],i,n)}else this._isVertex(t)&&(e.viewEvent.stopPropagation(),2===e.viewEvent.button?this._removeVertices(t):(e.viewEvent.native.shiftKey||this._clearSelection(),this.selectedVertices.includes(t)?this._removeFromSelection(t,!0):this._addToSelection(t)))}_setUpOperation(e){const{graphic:t,dx:i,dy:n}=e,r=t===this.graphic;this._resetSnappingStateVars(),this._setUpGeometryHelper(),this._saveSnappingContextForHandle(t,e),this._activeOperationInfo={target:this.graphic,mover:t,operationType:r?"move":"reshape",totalDx:i,totalDy:n}}_onGraphicMoveStartCallback(e){const{dx:t,dy:i,graphic:n}=e;if(n===this.graphic){const{geometry:r}=n;return this._setUpOperation(e),this._emitMoveStartEvent(t,i),void(null!=r&&"point"===r.type&&this._onHandleMove(n,t,i,e,(()=>{this._updateTooltip(this.graphic,e.viewEvent),this._emitMoveEvent(t,i)})))}if(!this.selectedVertices.includes(n)){if(this._clearSelection(),this._isMidpoint(n)){const e=this.graphic.clone(),t=this._createVertexFromMidpoint(n);this._emitVertexAddEvent([n],e,t)}this._addToSelection(n)}this._setUpOperation(e),this._emitReshapeStartEvent(n),this._onHandleMove(n,t,i,e,(()=>{this._updateTooltip(n,e.viewEvent),this._emitReshapeEvent(n)}))}_onGraphicMoveCallback(e){const t=this._activeOperationInfo;if(!t)return;const{dx:i,dy:n,graphic:r}=e;t.totalDx+=i,t.totalDy+=n;const{operationType:o}=t,{geometry:s}=r;if(null!=s)if("move"!==o)this._onHandleMove(r,i,n,e,(()=>{this._updateTooltip(r,e.viewEvent),this._emitReshapeEvent(r)}));else if("point"===s.type)this._onHandleMove(r,i,n,e,(()=>{this._updateTooltip(this.graphic,e.viewEvent),this._emitMoveEvent(i,n)}));else if("polyline"===s.type||"polygon"===s.type){const t=ae(s);this._updateVertexGraphicLocations(t),this._updateTooltip(this.graphic,e.viewEvent),this._emitMoveEvent(i,n)}}_onGraphicMoveStopCallback(e){const t=this._activeOperationInfo;if(!t)return;const{dx:i,dy:n,graphic:r}=e,{operationType:o}=t;t.totalDx+=i,t.totalDy+=n,this._onHandleMove(r,i,n,e,(()=>"move"===o?this._emitMoveStopEvent():this._emitReshapeStopEvent(r))),this._isMidpoint(r)?this.refresh():(this._updateTooltip(this._isVertex(r)?r:null),this._resetSnappingStateVars(),this._activeOperationInfo=null)}_updateVertexGraphicLocations(e){const{_coordinateHelper:t}=this;for(const i of this.vertexGraphics){const{pathIndex:n,pointIndex:r}=i.attributes;i.geometry=t.arrayToPoint(e[n][r])}this._updateMidpointGraphicLocations(e)}_updateMidpointGraphicLocations(e){for(const t of this.midpointGraphics){const{pathIndex:i,pointIndexStart:n,pointIndexEnd:r}=t.attributes,o=e[i];t.geometry=this._getMidpoint(o[n],o[r])}}_getMidpoint(e,t){const{_coordinateHelper:i}=this,n=i.arrayToVector(e),r=i.arrayToVector(t),o=i.toXYZ(n),s=i.toXYZ(r),[a,l,c]=(0,y.t9)(o,s),h=i.hasM()?0:void 0;return new V.A({x:a,y:l,z:c,m:h,spatialReference:i.spatialReference})}_getVertexFromEditGeometry(e){const[t,i]=le(e);return(0,h.Lw)(this._editGeometryOperations),this._editGeometryOperations.data.components[t].vertices[i]}_onHandleMove(e,t,i,n,r){(0,h.DC)(this._snappingTask);const s=this._snappingContext;if(!s)return;const a=e.geometry,l="graphic-move-stop"===n.type;if(null!=this.snappingManager&&this.selectedVertices.length<2&&!l){const n=this.snappingManager;this._stagedVertex=n.update({point:a,context:s}),this._syncGeometryAfterVertexMove(e,new V.A(this._stagedVertex),t,i,l),r(),this._snappingTask=(0,o.UT)((async o=>{const c=await n.snap({point:a,context:s,signal:o});c.valid&&(this._stagedVertex=c.apply(),this._syncGeometryAfterVertexMove(e,new V.A(this._stagedVertex),t,i,l),r())}))}else{const n=null!=this._stagedVertex?new V.A(this._stagedVertex):a;this._syncGeometryAfterVertexMove(e,n,t,i,l),r()}}_syncGeometryAfterVertexMove(e,t,i,n,r=!1){const o=this._editGeometryOperations?.data.geometry;if(o)if("point"===o.type)e.geometry=t;else if("mesh"===o.type)e.geometry=o.centerAt(t);else{const{_coordinateHelper:s}=this,[a,l]=le(e);let c=(0,y.$K)(o);const h=c[a].length-1,p=s.pointToArray(t);c[a][l]=p,"polygon"===o.type&&(0===l?c[a][h]=p:l===h&&(c[a][0]=p)),this._isVertex(e)&&(c=this._moveRelatedCoordinates(c,e,p),c=this._moveSelectedHandleCoordinates(c,e,i,n,"polygon"===o.type),this._updateMidpointGraphicLocations(c)),this._updateGraphicGeometry(o.clone());const u=s.pointToVector(t),d=this._getVertexFromEditGeometry(e),v=s.getZ(u),x=u[0]-d.pos[0],m=u[1]-d.pos[1],f=null!=v?v-d.pos[2]:0;this._editGeometryOperations?.moveVertices([d],x,m,f),r&&(this._mover?this._mover.updateGeometry(this._mover.graphics.indexOf(e),t):e.geometry=t)}}_moveRelatedCoordinates(e,t,i){const{relatedGraphicIndices:n}=t.attributes;for(const r of n){const n=this.vertexGraphics.at(r),{pathIndex:o,pointIndex:s}=n.attributes;e[o][s]=i,n.geometry=t.geometry}return e}_moveSelectedHandleCoordinates(e,t,i,n,r){for(const o of this.selectedVertices)if(o!==t){const{pathIndex:t,pointIndex:s,relatedGraphicIndices:a}=o.attributes,l=(0,g.lR)(o.geometry,i,n,this.view),c=(0,y.$K)(l),h=e[t].length-1;e[t][s]=c,o.geometry=l,r&&(0===s?e[t][h]=c:s===h&&(e[t][0]=c));for(const t of a){const i=this.vertexGraphics.at(t),{pathIndex:n,pointIndex:r}=i.attributes;e[n][r]=c,i.geometry=l}}return e}_onGraphicPointerOverCallback(e){const t=e.graphic;this._hoverGraphic=t;const i=this._isVertex(t);i&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.hover),this._updateTooltip(i?t:null),this._updateHoverCursor(t)}_onGraphicPointerOutCallback(e){const t=e.graphic;this._hoverGraphic=null,this._isVertex(t)&&!this._isSelected(t)&&(t.symbol=this.symbols.vertices.default),this.view.cursor="default",this._updateTooltip()}_createVertexFromMidpoint(e){const{_graphicAttributes:t,graphic:i}=this,n=i.geometry;if(null==n||"polygon"!==n.type&&"polyline"!==n.type)return[];const r=n.clone(),o=[],{pathIndex:s,pointIndexStart:a,pointIndexEnd:l}=e.attributes,c=(0,y.$K)(e.geometry),h=0===l?a+1:l,p=(0,y.$K)(r);return p[s].splice(h,0,c),e.attributes={...t,pathIndex:s,pointIndex:h,relatedGraphicIndices:[]},o.push({coordinates:p[s][h],componentIndex:s,vertexIndex:h}),this._updateGraphicGeometry(r),o}_addToSelection(e){const t=ce(e);for(const e of t)e.symbol=this.symbols.vertices.selected,this.selectedVertices.add(e),this._updateTooltip(e);this._emitSelectEvent(t)}_removeFromSelection(e,t){const{vertices:i}=this.symbols,n=t?i.hover:i.default;this.selectedVertices.remove(e),e.symbol=n,this._emitDeselectEvent([e]),this._updateTooltip()}_clearSelection(){const e=this.selectedVertices.toArray();if(e.length>0){for(const t of e)t.set("symbol",this.symbols.vertices.default);this.selectedVertices.removeAll(),this._emitDeselectEvent(e),this._updateTooltip()}}_keyDownHandler(e){null==this._activeOperationInfo&&(0,A.wG)(e,this.tooltip)||B.NE.delete.includes(e.key)&&!e.repeat&&this.selectedVertices.length&&this._removeVertices(this.selectedVertices)}_removeVertices(e){const t=this.graphic.geometry;if(null==t||"polygon"!==t.type&&"polyline"!==t.type)return;if("polygon"===t.type&&this.vertexGraphics.length<4||this.vertexGraphics.length<3)return;const i=this.graphic.clone(),n=t.clone();let r=(0,y.$K)(n);const o=[],s=ce(e);for(const e of s){const{x:t,y:i}=e.geometry;for(let e=0;e<r.length;e++){const n=r[e];for(let s=0;s<n.length;s++){const[a,l]=n[s];t===a&&i===l&&(o.push({coordinates:r[e][s],componentIndex:e,vertexIndex:s}),r[e].splice(Number(s),1))}}}if("polygon"===n.type)r=r.filter((e=>{if(e.length<2)return!1;const[t,i]=e[0],[n,r]=e[e.length-1];return(2!==e.length||t!==n||i!==r)&&(t===n&&i===r||e.push(e[0]),!0)})),n.rings=r;else{for(const e of r)1===e.length&&r.splice(r.indexOf(e),1);n.paths=r}this._updateGraphicGeometry(n),this.refresh(),this._emitVertexRemoveEvent(s,i,o)}_isVertex(e){return this.vertexGraphics.includes(e)}_isSelected(e){return this._isVertex(e)&&this.selectedVertices.includes(e)}_isMidpoint(e){return this.midpointGraphics.includes(e)}_updateHoverCursor(e){this.view.cursor=this._isMidpoint(e)?"copy":"move"}_updateTooltip(e,t){let i=null;const{graphic:n,view:r,tooltipInfos:o}=this,s=n?.geometry;"point"===s?.type?i=o.movePoint:this._selectedVertex?i=o.selectedVertex:e===this.graphic?(i=o.translateGraphic,function(e,t,i){e.clear(),H(e,t,i)}(i,r,t)):e&&this.selectedVertices.length>1&&(i=o.translateVertices,function(e,t,i,n){e.clear(),"polygon"===i?.type?e.area=(0,E.n)(i):"polyline"===i?.type&&(e.totalLength=(0,Z.ob)(i)),H(e,t,n)}(i,r,s,t)),this.activeTooltipInfo=i}_updateGraphicGeometry(e){this._updateHandlesOnExternalGeometryChange?.pause(),this.graphic.geometry=e,this._updateHandlesOnExternalGeometryChange?.resume()}_emitMoveStartEvent(e,t){const i=new Q(this.graphic,e,t);this.emit("move-start",i),this.callbacks.onMoveStart?.(i)}_emitMoveEvent(e,t){const i=new W(this.graphic,e,t);this.emit("move",i),this.callbacks.onMove?.(i)}_emitMoveStopEvent(e,t){if(null==e||null==t){const i=this._activeOperationInfo;if(!i)return;e=i.totalDx,t=i.totalDy}const i=new J(this.graphic,e,t);this.emit("move-stop",i),this.callbacks.onMoveStop?.(i)}_emitReshapeStartEvent(e){const t=new N(this.graphic,e,this.selectedVertices.toArray());this.emit("reshape-start",t),this.callbacks.onReshapeStart?.(t)}_emitReshapeEvent(e){const t=new j(this.graphic,e,this.selectedVertices.toArray());this.emit("reshape",t),this.callbacks.onReshape?.(t)}_emitReshapeStopEvent(e){const t=new Y(this.graphic,e,this.selectedVertices.toArray());this.emit("reshape-stop",t),this.callbacks.onReshapeStop?.(t)}_emitSelectEvent(e){const t=new ee(e);this.emit("select",t),this.callbacks.onVertexSelect?.(t)}_emitDeselectEvent(e){const t=new te(e);this.emit("deselect",t),this.callbacks.onVertexDeselect?.(t)}_emitVertexAddEvent(e,t,i){const n=new ie(e,this.graphic,t,i);this.emit("vertex-add",n),this.callbacks.onVertexAdd?.(n)}_emitVertexRemoveEvent(e,t,i){const n=new ne(e,this.graphic,t,i);this.emit("vertex-remove",n),this.callbacks.onVertexRemove?.(n)}_logGeometryTypeError(){c.A.getLogger(this).error(new a.A("reshape:invalid-geometry","Reshape operation not supported for the provided graphic. The geometry type is not supported."))}};function ae(e){const t=(0,y.$K)(e.clone());if("polygon"===e.type)for(const e of t){const t=e[e.length-1];e[0][0]===t[0]&&e[0][1]===t[1]&&e.length>2&&e.pop()}return t}function le({attributes:e}){return[e?.pathIndex||0,e?.pointIndex||0]}function ce(e){return e instanceof r.A?[e]:[...e]}(0,n._)([(0,u.MZ)()],se.prototype,"_activeOperationInfo",void 0),(0,n._)([(0,u.MZ)()],se.prototype,"_coordinateHelper",null),(0,n._)([(0,u.MZ)()],se.prototype,"_editGeometryOperations",void 0),(0,n._)([(0,u.MZ)()],se.prototype,"tooltip",void 0),(0,n._)([(0,u.MZ)()],se.prototype,"tooltipInfos",void 0),(0,n._)([(0,u.MZ)()],se.prototype,"activeTooltipInfo",void 0),(0,n._)([(0,u.MZ)()],se.prototype,"_selectedVertex",null),(0,n._)([(0,u.MZ)()],se.prototype,"_tooltipsContext",null),(0,n._)([(0,u.MZ)()],se.prototype,"callbacks",void 0),(0,n._)([(0,u.MZ)()],se.prototype,"enableMidpoints",void 0),(0,n._)([(0,u.MZ)()],se.prototype,"enableMovement",void 0),(0,n._)([(0,u.MZ)()],se.prototype,"enableVertices",void 0),(0,n._)([(0,u.MZ)()],se.prototype,"graphic",void 0),(0,n._)([(0,u.MZ)({value:!0})],se.prototype,"highlightsEnabled",null),(0,n._)([(0,u.MZ)()],se.prototype,"layer",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],se.prototype,"midpointGraphics",void 0),(0,n._)([(0,u.MZ)()],se.prototype,"midpointSymbol",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],se.prototype,"selectedVertices",void 0),(0,n._)([(0,u.MZ)()],se.prototype,"snappingManager",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],se.prototype,"state",null),(0,n._)([(0,u.MZ)()],se.prototype,"symbols",void 0),(0,n._)([(0,u.MZ)({type:q.A})],se.prototype,"sketchOptions",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],se.prototype,"type",void 0),(0,n._)([(0,u.MZ)({readOnly:!0})],se.prototype,"vertexGraphics",void 0),(0,n._)([(0,u.MZ)()],se.prototype,"view",void 0),se=(0,n._)([(0,d.$)("esri.views.draw.support.Reshape")],se);const he=se},36818:function(e,t,i){i.d(t,{W:function(){return p}});var n=i(93814);const r={main:new n.A([255,127,0]),selected:new n.A([255,255,255]),outline:new n.A([0,0,0,.5]),selectedOutline:new n.A([255,255,255]),hoverOutline:new n.A([255,255,255]),secondary:new n.A([255,255,255]),secondaryOutline:new n.A([100,100,100]),transparent:new n.A([0,0,0,0])};function o(e,t){Object.assign(e,t)}class s{constructor(e){this.size=8,this.hoverSize=10,this.color=r.main,this.hoverColor=r.main,this.outlineColor=r.outline,this.hoverOutlineColor=r.hoverOutline,o(this,e)}}class a{constructor(e){this.color=r.secondary,this.hoverColor=r.main,o(this,e)}}class l{constructor(e){this.color=r.transparent,this.hoverColor=r.transparent,this.outlineColor=r.main,this.hoverOutlineColor=r.main,this.stagedColor=r.transparent,this.stagedOutlineColor=r.secondary,o(this,e)}}class c{constructor(e){this.vertex=new s,this.midpoint=new s({color:r.secondary,outlineColor:r.secondaryOutline,size:6}),this.selected=new s({color:r.selected,hoverColor:r.selected,hoverOutlineColor:r.hoverOutline}),o(this,e)}}class h{constructor(e){this.center=new s({color:r.secondaryOutline}),this.fill=new l,this.line=new a,this.vertex=new s({color:r.selected,outlineColor:r.main,hoverColor:r.selected,hoverOutlineColor:r.secondaryOutline}),o(this,e)}}const p=new class{constructor(e){this.reshapeGraphics=new c,this.transformGraphics=new h,o(this,e)}}},81245:function(e,t,i){i.d(t,{F:function(){return l}});var n=i(82392),r=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),s=i(59702),a=i(42595);let l=class extends((0,a.B)(s.w)){constructor(e){super(e),this.type="move-point",this.allFields.forEach((e=>{e.lockable=!1,e.setActual(null)}))}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation]}};(0,n._)([(0,r.MZ)()],l.prototype,"allFields",null),l=(0,n._)([(0,o.$)("esri.views.interactive.tooltip.infos.MovePointTooltipInfo")],l)},55959:function(e,t,i){i.d(t,{d:function(){return c}});var n=i(82392),r=i(81482),o=(i(6273),i(80861),i(67498),i(26325)),s=i(96744),a=i(59702),l=i(42595);let c=class extends((0,l.B)(a.w)){constructor(e){super(e),this.type="selected-vertex",this.area=(0,s.Am)(),this.totalLength=(0,s.fr)(),this.geometryType="polyline",this.allFields.forEach((e=>{e.lockable=!1,e.setActual(null)}))}get allFields(){return[this.longitude,this.latitude,this.x,this.y,this.elevation,"polygon"===this.geometryType?this.area:this.totalLength]}};(0,n._)([(0,r.MZ)()],c.prototype,"geometryType",void 0),(0,n._)([(0,r.MZ)()],c.prototype,"allFields",null),c=(0,n._)([(0,o.$)("esri.views.interactive.tooltip.infos.SelectedVertexTooltipInfo")],c)},55016:function(e,t,i){i.d(t,{M:function(){return l}});var n=i(82392),r=i(7743),o=i(81482),s=(i(6273),i(80861),i(67498),i(26325)),a=i(59702);let l=class extends a.w{constructor(e){super(e),this.type="translate",this.distance=r.r7}clear(){this.distance=r.r7}};(0,n._)([(0,o.MZ)()],l.prototype,"type",void 0),(0,n._)([(0,o.MZ)()],l.prototype,"distance",void 0),l=(0,n._)([(0,s.$)("esri.views.interactive.tooltip.infos.TranslateTooltipInfo")],l)}}]);
//# sourceMappingURL=3679.e362cc9f0cfceb33a276.js.map