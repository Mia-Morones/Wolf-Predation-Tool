{"version":3,"file":"vendors-node_modules_arcgis_core_views_2d_layers_MapImageLayerView2D_js.26d5f59b1bde7005c0c4.js","mappings":"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","sources":["webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/layers/support/ExportImageParameters.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/layers/support/timeSupport.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/support/tagSymbols.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/support/timeUtils.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/layers/MapImageLayerView2D.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/layers/MapImageLayerView.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/webscene/utils.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Accessor.js\";import{sqlAnd as s}from\"../../core/sql.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";import{isInScaleRange as a}from\"../../geometry/support/scaleUtils.js\";import{getLayerFloorFilterClause as o}from\"./floorFilterUtils.js\";import{isExportDynamic as l}from\"./sublayerUtils.js\";const n={visible:\"visibleSublayers\",definitionExpression:\"layerDefs\",labelingInfo:\"hasDynamicLayers\",labelsVisible:\"hasDynamicLayers\",opacity:\"hasDynamicLayers\",minScale:\"visibleSublayers\",maxScale:\"visibleSublayers\",renderer:\"hasDynamicLayers\",source:\"hasDynamicLayers\"};let y=class extends r{constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map((e=>{const r=o(this.floors,e);return e.toExportImageJSON(r)}));return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&l(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(e){this._get(\"layer\")!==e&&(this._set(\"layer\",e),this.removeHandles(\"layer\"),e&&this.addHandles([e.allSublayers.on(\"change\",(()=>this.notifyChange(\"visibleSublayers\"))),e.on(\"sublayer-update\",(e=>this.notifyChange(n[e.propertyName])))],\"layer\"))}get layers(){const e=this.visibleSublayers;return e?e.length?\"show:\"+e.map((e=>e.id)).join(\",\"):\"show:-1\":null}get layerDefs(){const e=!!this.floors?.length,r=this.visibleSublayers.filter((r=>null!=r.definitionExpression||e&&null!=r.floorInfo));return r.length?JSON.stringify(r.reduce(((e,r)=>{const t=o(this.floors,r),i=s(t,r.definitionExpression);return null!=i&&(e[r.id]=i),e}),{})):null}get version(){this.commitProperty(\"layers\"),this.commitProperty(\"layerDefs\"),this.commitProperty(\"dynamicLayers\");const e=this.layer;return e&&(e.commitProperty(\"dpi\"),e.commitProperty(\"imageFormat\"),e.commitProperty(\"imageTransparency\"),e.commitProperty(\"gdbVersion\")),(this._get(\"version\")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const r=this.layer.sublayers,s=this.scale,t=r=>{r.visible&&(0===s||a(s,r.minScale,r.maxScale))&&(r.sublayers?r.sublayers.forEach(t):e.unshift(r))};r&&r.forEach(t);const i=this._get(\"visibleSublayers\");return!i||i.length!==e.length||i.some(((r,s)=>e[s]!==r))?e:i}toJSON(){const e=this.layer;let r={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?r.dynamicLayers=this.dynamicLayers:r={...r,layers:this.layers,layerDefs:this.layerDefs},r}};e([t({readOnly:!0})],y.prototype,\"dynamicLayers\",null),e([t()],y.prototype,\"floors\",void 0),e([t({readOnly:!0})],y.prototype,\"hasDynamicLayers\",null),e([t()],y.prototype,\"layer\",null),e([t({readOnly:!0})],y.prototype,\"layers\",null),e([t({readOnly:!0})],y.prototype,\"layerDefs\",null),e([t({type:Number})],y.prototype,\"scale\",void 0),e([t({readOnly:!0})],y.prototype,\"version\",null),e([t({readOnly:!0})],y.prototype,\"visibleSublayers\",null),y=e([i(\"esri.layers.support.ExportImageParameters\")],y);export{y as ExportImageParameters};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{toLocalTimeExtent as e,toUTCTimeExtent as t}from\"../../support/timeUtils.js\";function i(i,n,s){if(null==i?.timeInfo)return null;const{datesInUnknownTimezone:l=!1,timeOffset:o,useViewTime:m}=i;let u=i.timeExtent;l&&(u=e(u));let r=m?n&&u?n.intersection(u):n||u:u;return!r||r.isEmpty||r.isAllTime?r:(o&&(r=r.offset(-o.value,o.unit)),l&&(r=t(r)),r.equals(s)?s:r)}export{i as combineTimeExtent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst e=Symbol(\"WebScene\");export{e as WebSceneTag};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{isSome as t}from\"../core/arrayUtils.js\";import{deprecatedFunction as e}from\"../core/deprecate.js\";import{clone as n}from\"../core/lang.js\";import i from\"../core/Logger.js\";import{offsetDate as r}from\"../core/timeUtils.js\";import s from\"../time/TimeExtent.js\";import{isWebMap as l}from\"../webmap/utils.js\";import{isWebScene as o}from\"../webscene/utils.js\";function m(t){return void 0!==t.timeInfo}async function u(t,e){return t.widgets?.timeSlider?.fullTimeExtent??f(t.allLayers,e)}function a(t){const e=t.numThumbs??2,n=t.currentTimeExtent;if(n){const{start:t,end:i}=n;return null!=t&&null!=i&&t.getTime()===i.getTime()?\"instant\":2===e?\"time-window\":null==t||0===t.getTime()?\"cumulative-from-start\":\"cumulative-from-end\"}return 2===e?\"time-window\":\"cumulative-from-start\"}function c(t){const{numStops:e,stopInterval:i,stops:r}=t;return r?{dates:n(r)}:i?{interval:i.clone()}:{count:e??5}}async function f(e,n){if(0===e.length)return s.allTime;await Promise.all(e.map((t=>t.load({signal:n}))));const i=e.filter(m),r=e.filter((t=>!m(t)&&null!=t.visibilityTimeExtent));if(0===i.length&&0===r.length)return s.allTime;const l=[],o=[];for(const t of i)\"feature\"!==t?.type&&\"map-image\"!==t?.type||!t.timeInfo?.hasLiveData?o.push(t):l.push(t);const u=t=>null==t||t.isAllTime,a=[...o.map((t=>{const e=t.timeInfo?.fullTimeExtent,{visibilityTimeExtent:n}=t;return e?.intersection(n)??n})),...r.map((t=>t.visibilityTimeExtent))];if(a.some(u))return s.allTime;const c=l.map((async t=>{const e=(await t.fetchRecomputedExtents({signal:n}))?.timeExtent??t.timeInfo?.fullTimeExtent,{visibilityTimeExtent:i}=t;return e?.intersection(i)??i})),f=(await Promise.allSettled(c)).map((t=>\"fulfilled\"===t.status?t.value:null));if(f.some(u))return s.allTime;const p=[...f,...a].filter(t);if(0===p.length)return s.allTime;return p.reduce(((t,e)=>t.union(e)))}function p(t,e){const n=t.currentTimeExtent;if(!n)return null;const{start:i,end:r}=n,l=i??r??null;switch(e){case\"time-window\":return new s({start:i,end:r});case\"cumulative-from-start\":return new s({start:null,end:l});case\"cumulative-from-end\":return new s({start:l,end:null});case\"instant\":return new s({start:l,end:l})}}async function d(t,n){return e(i.getLogger(\"esri.support.timeUtils.getTimeSliderSettingsFromWebMap\"),\"`timeUtils.getTimeSliderSettingsFromWebMap` is deprecated in favor of 'timeUtils.getTimeSliderSettingsFromWebDocument'\",{replacement:\"timeUtils.getTimeSliderSettingsFromWebDocument\",version:\"4.30\",see:\"https://developers.arcgis.com/javascript/latest/api-reference/esri-support-timeUtils.html#getTimeSliderSettingsFromWebDocument\",warnOnce:!0}),null!=t&&l(t)?await g(t,n):null}async function g(t,e){if(!l(t)&&!o(t))return null;await t.load({signal:e});const n=t?.widgets?.timeSlider;if(!n)return null;const i=await u(t,e),r=n.loop,s=a(n);return{fullTimeExtent:i,loop:r,mode:s,playRate:n.stopDelay??2e3,stops:c(n),timeExtent:p(n,s)}}function T(t){if(!t)return t;const{start:e,end:n}=t;return new s({start:null!=e?r(e,-e.getTimezoneOffset(),\"minutes\"):e,end:null!=n?r(n,-n.getTimezoneOffset(),\"minutes\"):n})}function w(t){if(!t)return t;const{start:e,end:n}=t;return new s({start:null!=e?r(e,e.getTimezoneOffset(),\"minutes\"):e,end:null!=n?r(n,n.getTimezoneOffset(),\"minutes\"):n})}export{f as getTimeExtentFromLayers,g as getTimeSliderSettingsFromWebDocument,d as getTimeSliderSettingsFromWebMap,w as toLocalTimeExtent,T as toUTCTimeExtent};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../chunks/tslib.es6.js\";import e from\"../../../core/Logger.js\";import{isAbortError as i}from\"../../../core/promiseUtils.js\";import{watch as r}from\"../../../core/reactiveUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as a}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GraphicsCollection as h}from\"../../../support/GraphicsCollection.js\";import{BitmapContainer as o}from\"../engine/BitmapContainer.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";import n from\"./graphics/GraphicsView2D.js\";import g from\"./graphics/HighlightGraphicContainer.js\";import l from\"./support/ExportStrategy.js\";import m from\"../../layers/LayerView.js\";import c from\"../../layers/MapImageLayerView.js\";import d from\"../../layers/RefreshableLayerView.js\";import{MapServiceLayerViewHelper as u}from\"../../layers/support/MapServiceLayerViewHelper.js\";import{createQueryGeometry as f}from\"../../support/drapedUtils.js\";let y=class extends(c(d(p(m)))){constructor(){super(...arguments),this._highlightGraphics=new h,this._updateHash=\"\"}fetchPopupFeaturesAtLocation(t,e){return this._popupHighlightHelper.fetchPopupFeaturesAtLocation(t,e)}update(t){const r=`${this.exportImageVersion}/${t.state.id}/${t.pixelRatio}/${t.stationary}`;this._updateHash!==r&&(this._updateHash=r,this.strategy.update(t).catch((t=>{i(t)||e.getLogger(this).error(t)})),t.stationary&&this._popupHighlightHelper.updateHighlightedFeatures(t.state.resolution)),this._highlightView.processUpdate(t)}attach(){const{imageMaxWidth:t,imageMaxHeight:e,version:i}=this.layer,s=i>=10.3,a=i>=10;this._bitmapContainer=new o,this.container.addChild(this._bitmapContainer),this._highlightView=new n({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:()=>this.requestUpdate(),container:new g(this.view.featuresTilingScheme),defaultPointSymbolEnabled:!1}),this.container.addChild(this._highlightView.container),this._popupHighlightHelper=new u({createFetchPopupFeaturesQueryGeometry:(t,e)=>f(t,e,this.view),highlightGraphics:this._highlightGraphics,highlightGraphicUpdated:(t,e)=>{this._highlightView.graphicUpdateHandler({graphic:t,property:e})},layerView:this,updatingHandles:this._updatingHandles}),this.strategy=new l({container:this._bitmapContainer,fetchSource:this.fetchImageBitmap.bind(this),requestUpdate:this.requestUpdate.bind(this),imageMaxWidth:t,imageMaxHeight:e,imageRotationSupported:s,imageNormalizationSupported:a,hidpi:!0}),this.addAttachHandles(r((()=>this.exportImageVersion),(()=>this.requestUpdate()))),this.requestUpdate()}detach(){this.strategy.destroy(),this.container.removeAllChildren(),this._bitmapContainer.removeAllChildren(),this._highlightView.destroy(),this._popupHighlightHelper.destroy()}viewChange(){}moveEnd(){this.requestUpdate()}supportsSpatialReference(t){return this.layer.serviceSupportsSpatialReference(t)}async doRefresh(){this._updateHash=\"\",this.requestUpdate()}isUpdating(){return this.strategy.updating||this.updateRequested}fetchImage(t,e,i,r){return this.layer.fetchImage(t,e,i,{timeExtent:this.timeExtent,floors:this.floors,...r})}fetchImageBitmap(t,e,i,r){return this.layer.fetchImageBitmap(t,e,i,{timeExtent:this.timeExtent,floors:this.floors,...r})}highlight(t){return this._popupHighlightHelper.highlight(t)}};t([s()],y.prototype,\"strategy\",void 0),t([s()],y.prototype,\"updating\",void 0),y=t([a(\"esri.views.2d.layers.MapImageLayerView2D\")],y);const w=y;export{w as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as r}from\"../../core/accessorSupport/decorators/subclass.js\";import{ExportImageParameters as o}from\"../../layers/support/ExportImageParameters.js\";import{combineTimeExtent as s}from\"../../layers/support/timeSupport.js\";const i=i=>{let p=class extends i{initialize(){this.exportImageParameters=new o({layer:this.layer})}destroy(){this.exportImageParameters.destroy(),this.exportImageParameters=null}get floors(){return this.view?.floors??null}get exportImageVersion(){return this.exportImageParameters?.commitProperty(\"version\"),this.commitProperty(\"timeExtent\"),this.commitProperty(\"floors\"),(this._get(\"exportImageVersion\")||0)+1}get timeExtent(){return s(this.layer,this.view?.timeExtent,this._get(\"timeExtent\"))}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([t()],p.prototype,\"exportImageParameters\",void 0),e([t({readOnly:!0})],p.prototype,\"floors\",null),e([t({readOnly:!0})],p.prototype,\"exportImageVersion\",null),e([t()],p.prototype,\"layer\",void 0),e([t()],p.prototype,\"suspended\",void 0),e([t({readOnly:!0})],p.prototype,\"timeExtent\",null),p=e([r(\"esri.views.layers.MapImageLayerView\")],p),p};export{i as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{WebSceneTag as o}from\"../support/tagSymbols.js\";function t(t){return null!=t&&\"object\"==typeof t&&o in t}export{t as isWebScene};\n"],"names":[],"sourceRoot":""}