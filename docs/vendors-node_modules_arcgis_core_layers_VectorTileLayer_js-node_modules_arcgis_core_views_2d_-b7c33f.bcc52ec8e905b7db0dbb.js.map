{"version":3,"file":"vendors-node_modules_arcgis_core_layers_VectorTileLayer_js-node_modules_arcgis_core_views_2d_-b7c33f.bcc52ec8e905b7db0dbb.js","mappings":"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","sources":["webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/layers/VectorTileLayer.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/layers/support/SpriteSource.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/layers/support/imageUtils.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/layers/support/vectorTileLayerLoader.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TilemapIndex.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/engine/vectorTiles/TilemapRequest.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/StyleDefinition.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/VectorTileSource.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/engine/vectorTiles/style/VectorTilesRequestManager.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/engine/vectorTiles/tileInfoUtils.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/webgl/VertexElementDescriptor.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../request.js\";import{createTask as r}from\"../core/asyncUtils.js\";import i from\"../core/Error.js\";import{clone as o}from\"../core/lang.js\";import{MultiOriginJSONMixin as s}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as l}from\"../core/promiseUtils.js\";import{urlToObject as a,addQueryParameters as n,isProtocolRelative as p,normalize as y}from\"../core/urlUtils.js\";import{property as u}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{reader as c}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as h}from\"../core/accessorSupport/decorators/writer.js\";import d from\"../geometry/Extent.js\";import S from\"../geometry/SpatialReference.js\";import f from\"./Layer.js\";import{APIKeyMixin as g}from\"./mixins/APIKeyMixin.js\";import{ArcGISCachedService as v}from\"./mixins/ArcGISCachedService.js\";import{ArcGISService as j}from\"./mixins/ArcGISService.js\";import{BlendLayer as _}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as w}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as b}from\"./mixins/OperationalLayer.js\";import{PortalLayer as T}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as x}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as L}from\"./mixins/ScaleRangeLayer.js\";import{checkWebPSupport as U}from\"./support/imageUtils.js\";import I from\"./support/SpriteSource.js\";import R from\"./support/TileInfo.js\";import{TilemapCache as O}from\"./support/TilemapCache.js\";import{loadMetadata as P}from\"./support/vectorTileLayerLoader.js\";import{createForItemRead as M}from\"../portal/support/jsonContext.js\";import{parseKnownArcGISOnlineDomain as C}from\"../portal/support/urlUtils.js\";import{e as V}from\"../chunks/persistableUrlUtils.js\";import{areSchemasOverlapping as D,unionTileInfos as k}from\"../views/2d/engine/vectorTiles/tileInfoUtils.js\";import E from\"../views/2d/engine/vectorTiles/style/StyleRepository.js\";import{getWebGLCapabilities as N}from\"../views/webgl/capabilities.js\";let B=class extends(_(L(x(v(j(b(T(w(g(s(f))))))))))){constructor(...e){super(...e),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.isReference=null,this.operationalLayerType=\"VectorTileLayer\",this.path=null,this.refreshInterval=0,this.style=null,this.tilemapCache=null,this.type=\"vector-tile\",this.url=null}normalizeCtorArgs(e,t){return\"string\"==typeof e?{url:e,...t}:e}destroy(){if(this.sourceNameToSource)for(const e of Object.values(this.sourceNameToSource))e?.destroy();this.primarySource?.destroy(),this._spriteSourceMap.clear()}async prefetchResources(e){await this.loadSpriteSource(globalThis.devicePixelRatio||1,e)}load(e){const r=this.loadFromPortal({supportedTypes:[\"Vector Tile Service\"],supportsData:!1},e).catch(l).then((async()=>{if(!this.portalItem?.id)return;const r=`${this.portalItem.itemCdnUrl}/resources/styles/root.json`;(await t(r,{...e,query:{f:\"json\",...this.customParameters,token:this.apiKey}})).data&&this.read({url:r},M(this.portalItem,\"portal-item\"))})).catch(l).then((()=>this._loadStyle(e)));return this.addResolvingPromise(r),Promise.resolve(this)}get attributionDataUrl(){const e=this.currentStyleInfo,t=e?.serviceUrl&&a(e.serviceUrl);if(!t)return null;const r=this._getDefaultAttribution(t.path);return r?n(r,{...this.customParameters,token:this.apiKey}):null}get capabilities(){const e=this.primarySource;return e?e.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){return this.primarySource?.fullExtent||null}get initialExtent(){return this.primarySource?.initialExtent||null}get parsedUrl(){return this.serviceUrl?a(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo?.serviceUrl||null}get spatialReference(){return this.tileInfo?.spatialReference??null}get styleUrl(){return this.currentStyleInfo?.styleUrl||null}writeStyleUrl(e,t){e&&p(e)&&(e=`https:${e}`);const r=C(e);t.styleUrl=V(e,r)}get tileInfo(){const e=[];for(const r in this.sourceNameToSource)e.push(this.sourceNameToSource[r]);let t=this.primarySource?.tileInfo||new R;if(e.length>1)for(let r=0;r<e.length;r++)D(t,e[r].tileInfo)&&(t=k(t,e[r].tileInfo));return t}readTilemapCache(e,t){const r=t.capabilities?.includes(\"Tilemap\");return r?new O({layer:this}):null}readVersion(e,t){return t.version?parseFloat(t.version):parseFloat(t.currentVersion)}async loadSpriteSource(e=1,t){if(!this._spriteSourceMap.has(e)){const r=N().maxTextureSize,i=this.currentStyleInfo?.spriteUrl?n(this.currentStyleInfo.spriteUrl,{...this.customParameters,token:this.apiKey}):null,o=new I({type:\"url\",spriteUrl:i,pixelRatio:e,spriteFormat:this.currentStyleInfo?.spriteFormat},r);await o.load(t),this._spriteSourceMap.set(e,o)}return this._spriteSourceMap.get(e)}async setSpriteSource(e,t){if(!e)return null;const r=N().maxTextureSize,i=e.spriteUrl,o=i?n(i,{...this.customParameters,token:this.apiKey}):null;if(!o&&\"url\"===e.type)return null;const s=new I(e,r);try{await s.load(t);const r=e.pixelRatio||1;return this._spriteSourceMap.clear(),this._spriteSourceMap.set(r,s),o&&this.currentStyleInfo&&(this.currentStyleInfo.spriteUrl=o),this.emit(\"spriteSource-change\",{spriteSource:s}),s}catch(a){l(a)}return null}async loadStyle(e,t){const i=e||this.style||this.url;return this._loadingTask&&\"string\"==typeof i&&this.url===i||(this._loadingTask?.abort(),this._loadingTask=r((e=>(this._spriteSourceMap.clear(),this._getSourceAndStyle(i,{signal:e}))),t)),this._loadingTask.promise}getStyleLayerId(e){return this.styleRepository.getStyleLayerId(e)}getStyleLayerIndex(e){return this.styleRepository.getStyleLayerIndex(e)}getPaintProperties(e){return o(this.styleRepository?.getPaintProperties(e))}setPaintProperties(e,t){const r=this.styleRepository.isPainterDataDriven(e);this.styleRepository.setPaintProperties(e,t);const i=this.styleRepository.isPainterDataDriven(e);this.emit(\"paint-change\",{layer:e,paint:t,isDataDriven:r||i})}getStyleLayer(e){return o(this.styleRepository.getStyleLayer(e))}setStyleLayer(e,t){this.styleRepository.setStyleLayer(e,t),this.emit(\"style-layer-change\",{layer:e,index:t})}deleteStyleLayer(e){this.styleRepository.deleteStyleLayer(e),this.emit(\"delete-style-layer\",{layer:e})}getLayoutProperties(e){return o(this.styleRepository.getLayoutProperties(e))}setLayoutProperties(e,t){this.styleRepository.setLayoutProperties(e,t),this.emit(\"layout-change\",{layer:e,layout:t})}setStyleLayerVisibility(e,t){this.styleRepository.setStyleLayerVisibility(e,t),this.emit(\"style-layer-visibility-change\",{layer:e,visibility:t})}getStyleLayerVisibility(e){return this.styleRepository.getStyleLayerVisibility(e)}write(e,t){return t?.origin&&!this.styleUrl?(t.messages&&t.messages.push(new i(\"vectortilelayer:unsupported\",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(e,t)}getTileUrl(e,t,r){return null}async _getSourceAndStyle(e,t){if(!e)throw new Error(\"invalid style!\");const r=await P(e,{...t,query:{...this.customParameters,token:this.apiKey}});if(\"webp\"===r.spriteFormat){await U(\"lossy\")||(r.spriteFormat=\"png\")}this._set(\"currentStyleInfo\",{...r}),\"string\"==typeof e?(this.url=e,this.style=null):(this.url=null,this.style=e),this._set(\"sourceNameToSource\",r.sourceNameToSource),this._set(\"primarySource\",r.sourceNameToSource[r.primarySourceName]),this._set(\"styleRepository\",new E(r.style)),this.read(r.layerDefinition,{origin:\"service\"}),this.emit(\"load-style\")}_getDefaultAttribution(e){const t=e.match(/^https?:\\/\\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\\.arcgis\\.com(\\/[^/]+)?\\/arcgis\\/rest\\/services\\/([^/]+(\\/[^/]+)*)\\/vectortileserver/i),r=[\"OpenBasemap_v2\",\"OpenBasemap_GCS_v2\",\"OpenStreetMap_v2\",\"OpenStreetMap_Daylight_v2\",\"OpenStreetMap_Export_v2\",\"OpenStreetMap_FTS_v2\",\"OpenStreetMap_GCS_v2\",\"World_Basemap\",\"World_Basemap_v2\",\"World_Basemap_Export_v2\",\"World_Basemap_GCS_v2\",\"World_Basemap_WGS84\",\"World_Contours_v2\",\"World_Hillshade_v2\"];if(!t)return;const i=t[2]&&t[2].toLowerCase();if(!i)return;const o=t[1]||\"\";for(const s of r)if(s.toLowerCase().includes(i))return y(`//static.arcgis.com/attribution/Vector${o}/${s}`)}async _loadStyle(e){return this._loadingTask?.promise??this.loadStyle(null,e)}};e([u({readOnly:!0})],B.prototype,\"attributionDataUrl\",null),e([u({type:[\"show\",\"hide\"]})],B.prototype,\"listMode\",void 0),e([u({json:{read:!0,write:!0}})],B.prototype,\"blendMode\",void 0),e([u({readOnly:!0,json:{read:!1}})],B.prototype,\"capabilities\",null),e([u({readOnly:!0})],B.prototype,\"currentStyleInfo\",void 0),e([u({json:{read:!1},readOnly:!0,type:d})],B.prototype,\"fullExtent\",null),e([u({json:{read:!1},readOnly:!0,type:d})],B.prototype,\"initialExtent\",null),e([u({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],B.prototype,\"isReference\",void 0),e([u({type:[\"VectorTileLayer\"]})],B.prototype,\"operationalLayerType\",void 0),e([u({readOnly:!0})],B.prototype,\"parsedUrl\",null),e([u({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],B.prototype,\"path\",void 0),e([u({type:Number,json:{write:!1,origins:{\"web-map\":{write:!1},\"web-scene\":{write:!1},\"portal-item\":{write:!1}}}})],B.prototype,\"refreshInterval\",void 0),e([u()],B.prototype,\"style\",void 0),e([u({readOnly:!0})],B.prototype,\"serviceUrl\",null),e([u({type:S,readOnly:!0})],B.prototype,\"spatialReference\",null),e([u({readOnly:!0})],B.prototype,\"styleRepository\",void 0),e([u({readOnly:!0})],B.prototype,\"sourceNameToSource\",void 0),e([u({readOnly:!0})],B.prototype,\"primarySource\",void 0),e([u({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{\"web-document\":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],B.prototype,\"styleUrl\",null),e([h([\"portal-item\",\"web-document\"],\"styleUrl\")],B.prototype,\"writeStyleUrl\",null),e([u({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:R})],B.prototype,\"tileInfo\",null),e([u()],B.prototype,\"tilemapCache\",void 0),e([c(\"service\",\"tilemapCache\",[\"capabilities\",\"tileInfo\"])],B.prototype,\"readTilemapCache\",null),e([u({json:{read:!1},readOnly:!0,value:\"vector-tile\"})],B.prototype,\"type\",void 0),e([u({json:{origins:{\"web-document\":{read:{source:\"styleUrl\"}},\"portal-item\":{read:{source:\"url\"}}},write:!1,read:!1}})],B.prototype,\"url\",void 0),e([u({readOnly:!0})],B.prototype,\"version\",void 0),e([c(\"version\",[\"version\",\"currentVersion\"])],B.prototype,\"readVersion\",null),B=e([m(\"esri.layers.VectorTileLayer\")],B);const A=B;export{A as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import e from\"../../core/Error.js\";import i from\"../../core/Logger.js\";import{isArrayBuffer as s,isUint8ClampedArray as r}from\"../../core/typedArrayUtil.js\";import{urlToObject as a,objectToQuery as o}from\"../../core/urlUtils.js\";const h=1.15;class n{constructor(t,e){this._spriteSource=t,this._maxTextureSize=e,this.devicePixelRatio=1,this._spriteImageFormat=\"png\",this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus=\"not-loaded\",\"url\"===t.type&&t.spriteFormat&&(this._spriteImageFormat=t.spriteFormat),t.pixelRatio&&(this.devicePixelRatio=t.pixelRatio),this.baseURL=t.spriteUrl}get spriteNames(){const t=[];for(const e in this._spritesData)t.push(e);return t.sort(),t}getSpriteInfo(t){return this._spritesData?this._spritesData[t]:null}async load(t){if(this.baseURL){this.loadStatus=\"loading\";try{await this._loadSprites(t),this.loadStatus=\"loaded\"}catch{this.loadStatus=\"failed\"}}else this.loadStatus=\"failed\"}async _loadSprites(t){this._isRetina=this.devicePixelRatio>h;const{width:s,height:r,data:a,json:o}=await this._getSpriteData(this._spriteSource,t),n=Object.keys(o);if(!n||0===n.length||!a)return this._spritesData=this.image=null,void(this.width=this.height=0);this._spritesData=o,this.width=s,this.height=r;const d=Math.max(this._maxTextureSize,4096);if(s>d||r>d){const t=`Sprite resource for style ${this.baseURL} is bigger than the maximum allowed of ${d} pixels}`;throw i.getLogger(\"esri.layers.support.SpriteSource\").error(t),new e(\"SpriteSource\",t)}let p;for(let e=0;e<a.length;e+=4)p=a[e+3]/255,a[e]=a[e]*p,a[e+1]=a[e+1]*p,a[e+2]=a[e+2]*p;this.image=a}async _getSpriteData(i,n){if(\"image\"===i.type){let t,a;if(this.devicePixelRatio<h){if(!i.spriteSource1x)throw new e(\"SpriteSource\",\"no image data provided for low resolution sprites!\");t=i.spriteSource1x.image,a=i.spriteSource1x.json}else{if(!i.spriteSource2x)throw new e(\"SpriteSource\",\"no image data provided for high resolution sprites!\");t=i.spriteSource2x.image,a=i.spriteSource2x.json}return\"width\"in t&&\"height\"in t&&\"data\"in t&&(s(t.data)||r(t.data))?{width:t.width,height:t.height,data:new Uint8Array(t.data),json:a}:{...d(t),json:a}}const p=a(this.baseURL),l=p.query?\"?\"+o(p.query):\"\",g=this._isRetina?\"@2x\":\"\",u=`${p.path}${g}.${this._spriteImageFormat}${l}`,c=`${p.path}${g}.json${l}`,[m,S]=await Promise.all([t(c,n),t(u,{responseType:\"image\",...n})]);return{...d(S.data),json:m.data}}}function d(t){const e=document.createElement(\"canvas\"),i=e.getContext(\"2d\");e.width=t.width,e.height=t.height,i.drawImage(t,0,0,t.width,t.height);const s=i.getImageData(0,0,t.width,t.height);return{width:t.width,height:t.height,data:new Uint8Array(s.data)}}export{n as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nlet A=null;function o(o){if(A)return A;const l={lossy:\"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA\",lossless:\"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==\",alpha:\"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==\",animation:\"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA\"};return A=new Promise((A=>{const n=new Image;n.onload=()=>{n.onload=n.onerror=null,A(n.width>0&&n.height>0)},n.onerror=()=>{n.onload=n.onerror=null,A(!1)},n.src=\"data:image/webp;base64,\"+l[o]})),A}export{o as checkWebPSupport};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../request.js\";import{clone as t}from\"../../core/lang.js\";import{throwIfAborted as r}from\"../../core/promiseUtils.js\";import{isProtocolRelative as o,isAbsolute as s,join as l,removeTrailingSlash as n,normalize as i,removeFile as u,getAppBaseUrl as c,addQueryParameters as a}from\"../../core/urlUtils.js\";import{wgs84 as f,webMercator as p}from\"../../geometry/support/spatialReferenceUtils.js\";import{geographicToWebMercator as y}from\"../../geometry/support/webMercatorUtils.js\";import m from\"../../views/2d/engine/vectorTiles/style/VectorTileSource.js\";async function x(e,t){const r={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:\"\",spriteFormat:\"png\"},[o,s]=\"string\"==typeof e?[e,null]:[null,e.jsonUrl];await S(r,\"esri\",e,s,t);return{layerDefinition:r.validatedSource,url:o,serviceUrl:r.sourceUrl,style:r.style,styleUrl:r.styleUrl,spriteUrl:r.style.sprite&&d(r.styleBase,r.style.sprite),spriteFormat:r.spriteFormat,glyphsUrl:r.style.glyphs&&d(r.styleBase,r.style.glyphs),sourceNameToSource:r.sourceNameToSource,primarySourceName:r.primarySourceName}}function d(...e){let t;for(const r of e)if(null!=r)if(o(r)){if(t){const e=t.split(\"://\")[0];t=e+\":\"+r.trim()}}else t=s(r)?r:l(t,r);return t?n(t):void 0}async function S(t,o,s,l,n){let u,c,a;if(r(n),\"string\"==typeof s){const t=i(s);a=await e(t,{...n,responseType:\"json\",query:{f:\"json\",...n?.query}}),a.ssl&&(u&&(u=u.replace(/^http:/i,\"https:\")),c&&(c=c.replace(/^http:/i,\"https:\"))),u=t,c=t}else null!=s&&(a={data:s},u=s.jsonUrl||null,c=l);const f=a?.data;if(w(f))return t.styleUrl=u||null,j(t,f,c,n);if(U(f))return t.sourceUrl?g(t,f,c,!1,o,n):(t.sourceUrl=u||null,g(t,f,c,!0,o,n));throw new Error(\"You must specify the URL or the JSON for a service or for a style.\")}function h(e){return\"object\"==typeof e&&!!e&&\"tilejson\"in e&&null!=e.tilejson}function w(e){return!!e&&\"sources\"in e&&!!e.sources}function U(e){return!w(e)}async function j(e,t,r,o){const s=r?u(r):c();e.styleBase=s,e.style=t,t[\"sprite-format\"]&&\"webp\"===t[\"sprite-format\"].toLowerCase()&&(e.spriteFormat=\"webp\");const l=[];if(t.sources&&t.sources.esri){const r=t.sources.esri;r.url?await S(e,\"esri\",d(s,r.url),void 0,o):l.push(S(e,\"esri\",r,s,o))}for(const n of Object.keys(t.sources))\"esri\"!==n&&\"vector\"===t.sources[n].type&&(t.sources[n].url?l.push(S(e,n,d(s,t.sources[n].url),void 0,o)):t.sources[n].tiles&&l.push(S(e,n,t.sources[n],s,o)));await Promise.all(l)}async function g(e,t,r,o,s,l){const i=r?n(r)+\"/\":c(),u=v(t),f=new m(s,a(i,l?.query??{}),u);if(!o&&e.primarySourceName in e.sourceNameToSource){const t=e.sourceNameToSource[e.primarySourceName];if(!t.isCompatibleWith(f))return;null!=f.fullExtent&&(null!=t.fullExtent?t.fullExtent.union(f.fullExtent):t.fullExtent=f.fullExtent.clone()),t.tileInfo&&f.tileInfo&&t.tileInfo.lods.length<f.tileInfo.lods.length&&(t.tileInfo=f.tileInfo)}if(o&&(e.sourceBase=i,e.source=t,e.validatedSource=u,e.primarySourceName=s),e.sourceNameToSource[s]=f,!h(e)&&\"defaultStyles\"in t&&!e.style){if(null==t.defaultStyles)throw new Error;return\"string\"==typeof t.defaultStyles?S(e,\"\",d(i,t.defaultStyles,\"root.json\"),void 0,l):S(e,\"\",t.defaultStyles,d(i,\"root.json\"),l)}}function v(e){const r=512;if(N(e)){const t=e?.tileInfo;return null!=t&&(null==t.rows&&(t.rows=r),null==t.cols&&(t.cols=r)),e}const o={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100,latestWkid:3857}};let s=null;if(h(e)){const{bounds:r}=e;if(r){const e=y({x:r[0],y:r[1],spatialReference:t(f)}),o=y({x:r[2],y:r[3],spatialReference:t(f)});s={xmin:e.x,ymin:e.y,xmax:o.x,ymax:o.y,spatialReference:t(p)}}}null===s&&(s=o);let l=78271.51696400007,n=295828763.7957775;const i=[],u=e.hasOwnProperty(\"maxzoom\")&&null!=e.maxzoom?+e.maxzoom:22,c=0,a=0;for(let t=0;t<=u;t++)i.push({level:t,scale:n,resolution:l}),l/=2,n/=2;return{capabilities:\"TilesOnly\",initialExtent:s,fullExtent:o,minScale:c,maxScale:a,tiles:e.tiles,tileInfo:{rows:r,cols:r,dpi:96,format:\"pbf\",origin:{x:-20037508.342787,y:20037508.342787},lods:i,spatialReference:t(p)}}}function N(e){return e.hasOwnProperty(\"tileInfo\")}export{x as loadMetadata};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{throwIfAborted as t}from\"../../../../core/promiseUtils.js\";import r from\"../../tiling/TileKey.js\";class l{constructor(e){this.url=e}destroy(){this._tileIndexPromise=null}async fetchTileIndex(){return this._tileIndexPromise||(this._tileIndexPromise=e(this.url).then((e=>e.data.index))),this._tileIndexPromise}async dataKey(e,r){const l=await this.fetchTileIndex();return t(r),this._getIndexedDataKey(l,e)}_getIndexedDataKey(e,t){const l=[t];if(t.level<0||t.row<0||t.col<0||t.row>>t.level>0||t.col>>t.level>0)return null;let i=t;for(;0!==i.level;)i=new r(i.level-1,i.row>>1,i.col>>1,i.world),l.push(i);let o,s,n=e,a=l.pop();if(1===n)return a;for(;l.length;)if(o=l.pop(),s=(1&o.col)+((1&o.row)<<1),n){if(0===n[s]){a=null;break}if(1===n[s]){a=o;break}a=o,n=n[s]}return a}}export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport e from\"../../../../request.js\";import{destroyMaybe as t}from\"../../../../core/maybe.js\";import{isAbortError as i}from\"../../../../core/promiseUtils.js\";import r from\"../../tiling/TileKey.js\";class l{constructor(e,t){this._tilemap=e,this._tileIndexUrl=t}destroy(){this._tilemap=t(this._tilemap),this._tileIndexPromise=null}async fetchTileIndex(t){return this._tileIndexPromise||(this._tileIndexPromise=e(this._tileIndexUrl,{query:{...t?.query}}).then((e=>e.data.index))),this._tileIndexPromise}dataKey(e,t){const{level:l,row:s,col:o}=e,n=new r(e);return this._tilemap.fetchAvailabilityUpsample(l,s,o,n,t).then((()=>(n.world=e.world,n))).catch((e=>{if(i(e))throw e;return null}))}}export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{CapType as e,JoinType as t}from\"../../../../../symbols/cim/enums.js\";var a,i,n,l,u,m,o,r,p;!function(e){e[e.BACKGROUND=0]=\"BACKGROUND\",e[e.FILL=1]=\"FILL\",e[e.LINE=2]=\"LINE\",e[e.SYMBOL=3]=\"SYMBOL\",e[e.CIRCLE=4]=\"CIRCLE\"}(a||(a={})),function(e){e[e.VISIBLE=0]=\"VISIBLE\",e[e.NONE=1]=\"NONE\"}(i||(i={})),function(e){e[e.POINT=0]=\"POINT\",e[e.LINE=1]=\"LINE\",e[e.LINE_CENTER=2]=\"LINE_CENTER\"}(n||(n={})),function(e){e[e.MAP=0]=\"MAP\",e[e.VIEWPORT=1]=\"VIEWPORT\",e[e.AUTO=2]=\"AUTO\"}(l||(l={})),function(e){e[e.AUTO=0]=\"AUTO\",e[e.LEFT=1]=\"LEFT\",e[e.CENTER=2]=\"CENTER\",e[e.RIGHT=3]=\"RIGHT\"}(u||(u={})),function(e){e[e.CENTER=0]=\"CENTER\",e[e.LEFT=1]=\"LEFT\",e[e.RIGHT=2]=\"RIGHT\",e[e.TOP=3]=\"TOP\",e[e.BOTTOM=4]=\"BOTTOM\",e[e.TOP_LEFT=5]=\"TOP_LEFT\",e[e.TOP_RIGHT=6]=\"TOP_RIGHT\",e[e.BOTTOM_LEFT=7]=\"BOTTOM_LEFT\",e[e.BOTTOM_RIGHT=8]=\"BOTTOM_RIGHT\"}(m||(m={})),function(e){e[e.NONE=0]=\"NONE\",e[e.UPPERCASE=1]=\"UPPERCASE\",e[e.LOWERCASE=2]=\"LOWERCASE\"}(o||(o={})),function(e){e[e.MAP=0]=\"MAP\",e[e.VIEWPORT=1]=\"VIEWPORT\"}(r||(r={})),function(e){e[e.HORIZONTAL=0]=\"HORIZONTAL\",e[e.VERTICAL=1]=\"VERTICAL\"}(p||(p={}));class f{}f.backgroundLayoutDefinition={visibility:{type:\"enum\",values:[\"visible\",\"none\"],default:i.VISIBLE}},f.fillLayoutDefinition={visibility:{type:\"enum\",values:[\"visible\",\"none\"],default:i.VISIBLE}},f.lineLayoutDefinition={visibility:{type:\"enum\",values:[\"visible\",\"none\"],default:i.VISIBLE},\"line-cap\":{type:\"enum\",values:[\"butt\",\"round\",\"square\"],default:e.BUTT},\"line-join\":{type:\"enum\",values:[\"bevel\",\"round\",\"miter\"],default:t.MITER},\"line-miter-limit\":{type:\"number\",default:2},\"line-round-limit\":{type:\"number\",default:1.05}},f.symbolLayoutDefinition={visibility:{type:\"enum\",values:[\"visible\",\"none\"],default:i.VISIBLE},\"symbol-avoid-edges\":{type:\"boolean\",default:!1},\"symbol-placement\":{type:\"enum\",values:[\"point\",\"line\",\"line-center\"],default:n.POINT},\"symbol-sort-key\":{type:\"number\",default:-1},\"symbol-spacing\":{type:\"number\",minimum:1,default:250},\"icon-allow-overlap\":{type:\"boolean\",default:!1},\"icon-anchor\":{type:\"enum\",values:[\"center\",\"left\",\"right\",\"top\",\"bottom\",\"top-left\",\"top-right\",\"bottom-left\",\"bottom-right\"],default:m.CENTER},\"icon-ignore-placement\":{type:\"boolean\",default:!1},\"icon-image\":{type:\"string\"},\"icon-keep-upright\":{type:\"boolean\",default:!1},\"icon-offset\":{type:\"array\",value:\"number\",length:2,default:[0,0]},\"icon-optional\":{type:\"boolean\",default:!1},\"icon-padding\":{type:\"number\",minimum:0,default:2},\"icon-rotate\":{type:\"number\",default:0},\"icon-rotation-alignment\":{type:\"enum\",values:[\"map\",\"viewport\",\"auto\"],default:l.AUTO},\"icon-size\":{type:\"number\",minimum:0,default:1},\"text-allow-overlap\":{type:\"boolean\",default:!1},\"text-anchor\":{type:\"enum\",values:[\"center\",\"left\",\"right\",\"top\",\"bottom\",\"top-left\",\"top-right\",\"bottom-left\",\"bottom-right\"],default:m.CENTER},\"text-field\":{type:\"string\"},\"text-font\":{type:\"array\",value:\"string\",default:[\"Open Sans Regular\",\"Arial Unicode MS Regular\"]},\"text-ignore-placement\":{type:\"boolean\",default:!1},\"text-justify\":{type:\"enum\",values:[\"auto\",\"left\",\"center\",\"right\"],default:u.CENTER},\"text-keep-upright\":{type:\"boolean\",default:!0},\"text-letter-spacing\":{type:\"number\",default:0},\"text-line-height\":{type:\"number\",default:1.2},\"text-max-angle\":{type:\"number\",minimum:0,default:45},\"text-max-width\":{type:\"number\",minimum:0,default:10},\"text-offset\":{type:\"array\",value:\"number\",length:2,default:[0,0]},\"text-optional\":{type:\"boolean\",default:!1},\"text-padding\":{type:\"number\",minimum:0,default:2},\"text-rotate\":{type:\"number\",default:0},\"text-rotation-alignment\":{type:\"enum\",values:[\"map\",\"viewport\",\"auto\"],default:l.AUTO},\"text-size\":{type:\"number\",minimum:0,default:16},\"text-transform\":{type:\"enum\",values:[\"none\",\"uppercase\",\"lowercase\"],default:o.NONE},\"text-writing-mode\":{type:\"array\",value:\"enum\",values:[\"horizontal\",\"vertical\"],default:[p.HORIZONTAL]}},f.circleLayoutDefinition={visibility:{type:\"enum\",values:[\"visible\",\"none\"],default:i.VISIBLE}},f.backgroundPaintDefinition={\"background-color\":{type:\"color\",default:[0,0,0,1]},\"background-opacity\":{type:\"number\",minimum:0,maximum:1,default:1},\"background-pattern\":{type:\"string\"}},f.fillPaintDefinition={\"fill-antialias\":{type:\"boolean\",default:!0},\"fill-color\":{type:\"color\",default:[0,0,0,1]},\"fill-opacity\":{type:\"number\",minimum:0,maximum:1,default:1},\"fill-outline-color\":{type:\"color\",default:[0,0,0,0]},\"fill-pattern\":{type:\"string\"},\"fill-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0]},\"fill-translate-anchor\":{type:\"enum\",values:[\"map\",\"viewport\"],default:r.MAP}},f.linePaintDefinition={\"line-blur\":{type:\"number\",minimum:0,default:0},\"line-color\":{type:\"color\",default:[0,0,0,1]},\"line-dasharray\":{type:\"array\",value:\"number\",default:[]},\"line-gap-width\":{type:\"number\",minimum:0,default:0},\"line-offset\":{type:\"number\",default:0},\"line-opacity\":{type:\"number\",minimum:0,maximum:1,default:1},\"line-pattern\":{type:\"string\"},\"line-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0]},\"line-translate-anchor\":{type:\"enum\",values:[\"map\",\"viewport\"],default:r.MAP},\"line-width\":{type:\"number\",minimum:0,default:1}},f.symbolPaintDefinition={\"icon-color\":{type:\"color\",default:[0,0,0,1]},\"icon-halo-blur\":{type:\"number\",minimum:0,default:0},\"icon-halo-color\":{type:\"color\",default:[0,0,0,0]},\"icon-halo-width\":{type:\"number\",minimum:0,default:0},\"icon-opacity\":{type:\"number\",minimum:0,maximum:1,default:1},\"icon-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0]},\"icon-translate-anchor\":{type:\"enum\",values:[\"map\",\"viewport\"],default:r.MAP},\"text-color\":{type:\"color\",default:[0,0,0,1]},\"text-halo-blur\":{type:\"number\",minimum:0,default:0},\"text-halo-color\":{type:\"color\",default:[0,0,0,0]},\"text-halo-width\":{type:\"number\",minimum:0,default:0},\"text-opacity\":{type:\"number\",minimum:0,maximum:1,default:1},\"text-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0]},\"text-translate-anchor\":{type:\"enum\",values:[\"map\",\"viewport\"],default:r.MAP}},f.rasterPaintDefinition={\"raster-opacity\":{type:\"number\",minimum:0,maximum:1,default:1},\"raster-hue-rotate\":{type:\"number\",default:0},\"raster-brightness-min\":{type:\"number\",minimum:0,maximum:1,default:0},\"raster-brightness-max\":{type:\"number\",minimum:0,maximum:1,default:1},\"raster-saturation\":{type:\"number\",minimum:-1,maximum:1,default:0},\"raster-contrast\":{type:\"number\",minimum:-1,maximum:1,default:0},\"raster-fade-duration\":{type:\"number\",minimum:0,default:300}},f.circlePaintDefinition={\"circle-blur\":{type:\"number\",minimum:0,default:0},\"circle-color\":{type:\"color\",default:[0,0,0,1]},\"circle-opacity\":{type:\"number\",minimum:0,maximum:1,default:1},\"circle-radius\":{type:\"number\",minimum:0,default:5},\"circle-stroke-color\":{type:\"color\",default:[0,0,0,1]},\"circle-stroke-opacity\":{type:\"number\",minimum:0,maximum:1,default:1},\"circle-stroke-width\":{type:\"number\",minimum:0,default:0},\"circle-translate\":{type:\"array\",value:\"number\",length:2,default:[0,0]},\"circle-translate-anchor\":{type:\"enum\",values:[\"map\",\"viewport\"],default:r.MAP}};export{l as RotationAlignment,f as StyleDefinition,a as StyleLayerType,m as SymbolAnchor,n as SymbolPlacement,u as TextJustification,o as TextTransform,p as TextWritingMode,r as TranslateAnchor,i as Visibility};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{clone as t}from\"../../../../../core/lang.js\";import{urlToObject as e,isAbsolute as i,join as l,addQueryParameters as s}from\"../../../../../core/urlUtils.js\";import r from\"../../../../../geometry/Extent.js\";import o from\"../../../../../layers/support/TileInfo.js\";import{TilemapCache as n}from\"../../../../../layers/support/TilemapCache.js\";import a from\"../TilemapIndex.js\";import p from\"../TilemapRequest.js\";import{request as h}from\"./VectorTilesRequestManager.js\";class m{constructor(h,m,u){this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.initialExtent=null,this.name=h,this.sourceUrl=m;const f=e(this.sourceUrl),c=t(u),x=c.tiles;if(f)for(let t=0;t<x.length;t++){const r=e(x[t]);r&&(i(r.path)||(r.path=l(f.path,r.path)),x[t]=s(r.path,{...f.query,...r.query}))}this.tileServers=x;const d=u.capabilities&&u.capabilities.split(\",\").map((t=>t.toLowerCase().trim())),y=!0===u?.exportTilesAllowed,T=!0===d?.includes(\"tilemap\"),I=y&&u.hasOwnProperty(\"maxExportTilesCount\")?u.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:y,supportsTileMap:T},exportTiles:y?{maxExportTilesCount:+I}:null},this.tileInfo=o.fromJSON(c.tileInfo);const g=u.tileMap?s(l(f.path,u.tileMap),f.query??{}):null;T?(this.type=\"vector-tile\",this.tilemap=new p(new n({layer:{parsedUrl:f,tileInfo:this.tileInfo},minLOD:c.minLOD??this.tileInfo.lods[0].level,maxLOD:c.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}),g)):g&&(this.tilemap=new a(g)),this.fullExtent=r.fromJSON(u.fullExtent),this.initialExtent=r.fromJSON(u.initialExtent)}destroy(){this.tilemap?.destroy()}async getRefKey(t,e){return this.tilemap?this.tilemap.dataKey(t,e):t}requestTile(t,e,i,l){const s=this.tileServers[e%this.tileServers.length];return h(s,t,e,i,l)}isCompatibleWith(t){const e=this.tileInfo,i=t.tileInfo;if(!e.spatialReference.equals(i.spatialReference))return!1;if(!e.origin.equals(i.origin))return!1;if(Math.round(e.dpi)!==Math.round(i.dpi))return!1;const l=e.lods,s=i.lods,r=Math.min(l.length,s.length);for(let o=0;o<r;o++){const t=l[o],e=s[o];if(t.level!==e.level||Math.round(t.scale)!==Math.round(e.scale))return!1}return!0}}export{m as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../../../../request.js\";import{clone as r}from\"../../../../../core/lang.js\";import{getOrCreateMapValue as o}from\"../../../../../core/MapUtils.js\";import{isAborted as e,onAbort as s}from\"../../../../../core/promiseUtils.js\";import{urlToObject as i,addQueryParameters as n}from\"../../../../../core/urlUtils.js\";class l{constructor(t){this._tileUrl=t,this._promise=null,this._abortController=null,this._abortOptions=[]}getData(t){(null==this._promise||e(this._abortController?.signal))&&(this._promise=this._makeRequest(this._tileUrl));const o=this._abortOptions;return o.push(t),s(t,(()=>{o.every((t=>e(t)))&&this._abortController.abort()})),this._promise.then((t=>r(t)))}async _makeRequest(r){this._abortController=new AbortController;const{data:o}=await t(r,{responseType:\"array-buffer\",signal:this._abortController.signal});return o}}const a=new Map;function c(t,r,o,e,s){const l=i(t),a=l.query;if(a)for(const[i,n]of Object.entries(a))switch(n){case\"{x}\":a[i]=e.toString();break;case\"{y}\":a[i]=o.toString();break;case\"{z}\":a[i]=r.toString()}const c=l.path;return p(n(c.replaceAll(/\\{z\\}/gi,r.toString()).replaceAll(/\\{y\\}/gi,o.toString()).replaceAll(/\\{x\\}/gi,e.toString()),{...l.query}),s)}function p(t,r){return o(a,t,(()=>new l(t))).getData(r).finally((()=>a.delete(t)))}export{c as request};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport l from\"../../../../geometry/Point.js\";import e from\"../../../../layers/support/LOD.js\";import n from\"../../../../layers/support/TileInfo.js\";const s=1e-6;function r(l,e){if(l===e)return!0;if(null==l&&null!=e)return!1;if(null!=l&&null==e)return!1;if(null==l||null==e)return!1;if(!l.spatialReference.equals(e.spatialReference)||l.dpi!==e.dpi)return!1;const n=l.origin,r=e.origin;if(Math.abs(n.x-r.x)>=s||Math.abs(n.y-r.y)>=s)return!1;let o,t;l.lods[0].scale>e.lods[0].scale?(o=l,t=e):(t=l,o=e);for(let i=o.lods[0].scale;i>=t.lods[t.lods.length-1].scale-s;i/=2)if(Math.abs(i-t.lods[0].scale)<s)return!0;return!1}function o(s,r){if(s===r)return s;if(null==s&&null!=r)return r;if(null!=s&&null==r)return s;if(null==s||null==r)return null;const o=s.size[0],t=s.format,i=s.dpi,u=new l({x:s.origin.x,y:s.origin.y}),a=s.spatialReference,f=s.lods[0].scale>r.lods[0].scale?s.lods[0]:r.lods[0],d=s.lods[s.lods.length-1].scale<=r.lods[r.lods.length-1].scale?s.lods[s.lods.length-1]:r.lods[r.lods.length-1],c=f.scale,p=f.resolution,g=d.scale,h=[];let m=c,y=p,x=0;for(;m>g;)h.push(new e({level:x,resolution:y,scale:m})),x++,m/=2,y/=2;return new n({size:[o,o],dpi:i,format:t||\"pbf\",origin:u,lods:h,spatialReference:a})}export{r as areSchemasOverlapping,o as unionTileInfos};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nclass t{constructor(t,s,i,h,o,e=!1,r=0){this.name=t,this.count=s,this.type=i,this.offset=h,this.stride=o,this.normalized=e,this.divisor=r}}export{t as VertexElementDescriptor};\n"],"names":[],"sourceRoot":""}