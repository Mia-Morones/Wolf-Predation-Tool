"use strict";(self.webpackChunkreact_redux_arcgis_boilerplate=self.webpackChunkreact_redux_arcgis_boilerplate||[]).push([[269],{5525:function(t,e,r){r.d(e,{B2:function(){return F},BW:function(){return O},Ch:function(){return ot},DF:function(){return P},Di:function(){return U},E2:function(){return Q},IE:function(){return w},Nl:function(){return K},Q4:function(){return st},Rk:function(){return ut},Ux:function(){return E},Ye:function(){return k},ZF:function(){return $},eU:function(){return j},eY:function(){return X},jH:function(){return H},jQ:function(){return nt},kz:function(){return tt},oN:function(){return B},q3:function(){return W},qK:function(){return Z},qN:function(){return N},z5:function(){return V},zv:function(){return J}});var n=r(62991),o=r(80861),s=r(57725),i=r(46373),u=r(2532),a=r(56053),c=r(85747),l=r(97011),f=r(65977);function h(t,e){return t?e?4:3:e?3:2}const d=()=>o.A.getLogger("esri.layers.graphics.featureConversionUtils"),p={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0,esriGeometryMultiPatch:3,esriGeometryEnvelope:0},m=(t,e,r,n,o,s)=>{t[r]=o,t[r+1]=s},y=(t,e,r,n,o,s)=>{t[r]=o,t[r+1]=s,t[r+2]=e[n+2]},g=(t,e,r,n,o,s)=>{t[r]=o,t[r+1]=s,t[r+2]=e[n+3]},_=(t,e,r,n,o,s)=>{t[r]=o,t[r+1]=s,t[r+2]=e[n+2],t[r+3]=e[n+3]};function b(t,e,r,n){if(t){if(r)return e&&n?_:y;if(e&&n)return g}else if(e&&n)return y;return m}function w({scale:t,translate:e},r){return Math.round((r-e[0])/t[0])}function F({scale:t,translate:e},r){return Math.round((e[1]-r)/t[1])}function x({scale:t,translate:e},r,n){return r*t[n]+e[n]}function P(t,e,r){return t?e?r?D(t):G(t):r?A(t):S(t):null}function S(t){const e=t.coords;return{x:e[0],y:e[1]}}function M(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t}function G(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2]}}function I(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t}function A(t){const e=t.coords;return{x:e[0],y:e[1],m:e[2]}}function C(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.m,t}function D(t){const e=t.coords;return{x:e[0],y:e[1],z:e[2],m:e[3]}}function v(t,e){return t.coords[0]=e.x,t.coords[1]=e.y,t.coords[2]=e.z,t.coords[3]=e.m,t}function T(t,e){return t&&e?v:t?I:e?C:M}function N(t,e,r=T(null!=e.z,null!=e.m)){return r(t,e)}function Z(t,e,r){if(null==t)return null;const n=h(e,r),o=[];for(let e=0;e<t.coords.length;e+=n){const r=[];for(let o=0;o<n;o++)r.push(t.coords[e+o]);o.push(r)}return e?r?{points:o,hasZ:e,hasM:r}:{points:o,hasZ:e}:r?{points:o,hasM:r}:{points:o}}function R(t,e,r=h(e.hasZ,e.hasM)){t.lengths[0]=e.points.length;const n=t.coords;let o=0;for(const t of e.points)for(let e=0;e<r;e++)n[o++]=t[e];return t}function O(t,e,r){if(!t)return null;const n=h(e,r),{coords:o,lengths:s}=t,i=[];let u=0;for(const t of s){const e=[];for(let r=0;r<t;r++){const t=[];for(let e=0;e<n;e++)t.push(o[u++]);e.push(t)}i.push(e)}return e?r?{paths:i,hasZ:e,hasM:r}:{paths:i,hasZ:e}:r?{paths:i,hasM:r}:{paths:i}}function q(t,e,r=h(e.hasZ,e.hasM)){const{lengths:n,coords:o}=t;let s=0;for(const t of e.paths){for(const e of t)for(let t=0;t<r;t++)o[s++]=e[t];n.push(t.length)}return t}function V(t,e,r){if(!t)return null;const n=h(e,r),{coords:o,lengths:s}=t,i=[];let u=0;for(const t of s){const e=[];for(let r=0;r<t;r++){const t=[];for(let e=0;e<n;e++)t.push(o[u++]);e.push(t)}i.push(e)}return e?r?{rings:i,hasZ:e,hasM:r}:{rings:i,hasZ:e}:r?{rings:i,hasM:r}:{rings:i}}function k(t,e,r=e.hasZ,n=e.hasM){return j(t,e.rings,r,n)}function j(t,e,r,n){const o=h(r,n),{lengths:s,coords:i}=t;let u=0;at(t);for(const t of e){for(const e of t)for(let t=0;t<o;t++)i[u++]=e[t];s.push(t.length)}return t}const z=[],L=[];function Q(t,e,r,n,o){z[0]=t;const[s]=U(L,z,e,r,n,o);return ct(z),ct(L),s}function U(t,e,r,o,s,i){if(ct(t),!r){for(const r of e){const e=i?r.attributes[i]:void 0;t.push(new c.Om(null,r.attributes,null,e))}return t}switch(r){case"esriGeometryPoint":return function(t,e,r,n,o){const s=T(r,n);for(const{geometry:r,attributes:n}of e){const e=null!=r?s(new f.A,r):null;t.push(new c.Om(e,n,null,o?n[o]:void 0))}return t}(t,e,o,s,i);case"esriGeometryMultipoint":return function(t,e,r,n,o){const s=h(r,n);for(const{geometry:r,attributes:n}of e){const e=null!=r?R(new f.A,r,s):null;t.push(new c.Om(e,n,null,o?n[o]:void 0))}return t}(t,e,o,s,i);case"esriGeometryPolyline":return function(t,e,r,n,o){const s=h(r,n);for(const{geometry:r,attributes:n,centroid:i}of e){const e=null!=r?q(new f.A,r,s):null,u=null!=i?N(new f.A,i):null;t.push(new c.Om(e,n,u,o?n[o]:void 0))}return t}(t,e,o,s,i);case"esriGeometryPolygon":case"esriGeometryMultiPatch":return function(t,e,r,n,o){for(const{geometry:s,centroid:i,attributes:u}of e){const e=null!=s?k(new f.A,s,r,n):null,a=o?u[o]:void 0;null!=i?t.push(new c.Om(e,u,M(new f.A,i),a)):t.push(new c.Om(e,u,null,a))}return t}(t,e,o,s,i);default:d().error("convertToFeatureSet:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${r}'`)),ct(t)}return t}function B(t,e,r,n){L[0]=t,Y(z,L,e,r,n);const o=z[0];return ct(z),ct(L),o}function E(t,e,r){if(null==t)return null;const o=new f.A;return"hasZ"in t&&null==e&&(e=t.hasZ),"hasM"in t&&null==r&&(r=t.hasM),(0,a.fT)(t)?T(null!=e?e:null!=t.z,null!=r?r:null!=t.m)(o,t):(0,a.Bi)(t)?k(o,t,e,r):(0,a.Rg)(t)?q(o,t,h(e,r)):(0,a.U9)(t)?R(o,t,h(e,r)):void d().error("convertFromGeometry:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${t}'`))}function J(t,e,r,o){const s=t&&("coords"in t?t:t.geometry);if(null==s)return null;switch(e){case"esriGeometryPoint":{let t=S;return r&&o?t=D:r?t=G:o&&(t=A),t(s)}case"esriGeometryMultipoint":return Z(s,r,o);case"esriGeometryPolyline":return O(s,r,o);case"esriGeometryPolygon":return V(s,r,o);default:return d().error("convertToGeometry:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${e}'`)),null}}function Y(t,e,r,o,s){if(ct(t),null==r)return function(t,e){for(const r of e)t.push({attributes:r.attributes});return t}(t,e);switch(r){case"esriGeometryPoint":return function(t,e,r,n){let o=S;r&&n?o=D:r?o=G:n&&(o=A);for(const r of e){const{geometry:e,attributes:n}=r,s=null!=e?o(e):null;t.push({attributes:n,geometry:s})}return t}(t,e,o,s);case"esriGeometryMultipoint":return function(t,e,r,n){for(const{geometry:o,attributes:s}of e)t.push({attributes:s,geometry:null!=o?Z(o,r,n):null});return t}(t,e,o,s);case"esriGeometryPolyline":return function(t,e,r,n){for(const{geometry:o,attributes:s}of e)t.push({attributes:s,geometry:null!=o?O(o,r,n):null});return t}(t,e,o,s);case"esriGeometryPolygon":return function(t,e,r,n){for(const{geometry:o,attributes:s,centroid:i}of e){const e=null!=o?V(o,r,n):null;if(null!=i){const r=S(i);t.push({attributes:s,centroid:r,geometry:e})}else t.push({attributes:s,geometry:e})}return t}(t,e,o,s);default:d().error("convertToFeatureSet:unknown-geometry",new n.A(`Unable to parse unknown geometry type '${r}'`))}return t}function $(t){const{objectIdFieldName:e,spatialReference:r,transform:n,fields:o,hasM:s,hasZ:i,features:u,geometryType:a,exceededTransferLimit:c,uniqueIdField:l,queryGeometry:f,queryGeometryType:h}=t,d={features:Y([],u,a,i,s),fields:o,geometryType:a,objectIdFieldName:e,spatialReference:r,uniqueIdField:l,queryGeometry:J(f,h,!1,!1)};return n&&(d.transform=n),c&&(d.exceededTransferLimit=c),s&&(d.hasM=s),i&&(d.hasZ=i),d}function W(t,e){const r=new l.A,{hasM:o,hasZ:s,features:i,objectIdFieldName:u,spatialReference:a,geometryType:c,exceededTransferLimit:f,transform:h,fields:p}=t;return p&&(r.fields=p),r.geometryType=c??null,r.objectIdFieldName=u??e??null,r.spatialReference=a??null,r.objectIdFieldName?(i&&U(r.features,i,c,s,o,r.objectIdFieldName),f&&(r.exceededTransferLimit=f),o&&(r.hasM=o),s&&(r.hasZ=s),h&&(r.transform=h),r):(d().error(new n.A("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function X(t){const{transform:e,features:r,hasM:n,hasZ:o}=t;if(!e)return t;for(const t of r)null!=t.geometry&&ot(t.geometry,t.geometry,n,o,e),null!=t.centroid&&ot(t.centroid,t.centroid,n,o,e);return t.transform=null,t}function H(t,e){const{geometryType:r,features:n,hasM:o,hasZ:s}=e;if(!t)return e;for(let e=0;e<n.length;e++){const i=n[e],u=i.weakClone();u.geometry=new f.A,K(u.geometry,i.geometry,o,s,r,t),i.centroid&&(u.centroid=new f.A,K(u.centroid,i.centroid,o,s,"esriGeometryPoint",t)),n[e]=u}return e.transform=t,e}function K(t,e,r,n,o,s,i=r,u=n){if(at(t),!e?.coords.length)return null;const a=p[o],{coords:c,lengths:l}=e,f=h(r,n),d=h(r&&i,n&&u),m=b(r,n,i,u);if(!l.length)return m(t.coords,c,0,0,w(s,c[0]),F(s,c[1])),at(t,f,0),t;let y,g,_,x,P=0,S=0,M=S;for(const e of l){if(e<a)continue;let r=0;S=M,_=y=w(s,c[P]),x=g=F(s,c[P+1]),m(t.coords,c,S,P,_,x),r++,P+=f,S+=d;for(let n=1;n<e;n++,P+=f)_=w(s,c[P]),x=F(s,c[P+1]),_===y&&x===g||(m(t.coords,c,S,P,_-y,x-g),S+=d,r++,y=_,g=x);r>=a&&(t.lengths.push(r),M=S)}return ct(t.coords,M),t.coords.length?t:null}function tt(t,e,r,n,o,s,i=r,u=n){if(at(t),!e?.coords.length)return null;const a=p[o],{coords:c,lengths:l}=e,f=h(r,n),d=h(r&&i,n&&u),m=b(r,n,i,u);if(!l.length)return m(t.coords,c,0,0,c[0],c[1]),at(t,f,0),t;let y=0;const g=s*s;for(const e of l){if(e<a){y+=e*f;continue}const r=t.coords.length/d,n=y,o=y+(e-1)*f;m(t.coords,c,t.coords.length,n,c[n],c[n+1]),rt(t.coords,c,f,g,m,n,o),m(t.coords,c,t.coords.length,o,c[o],c[o+1]);const s=t.coords.length/d-r;s>=a?t.lengths.push(s):ct(t.coords,r*d),y+=e*f}return t.coords.length?t:null}function et(t,e,r,n){const o=t[e],s=t[e+1],i=t[r],u=t[r+1],a=t[n],c=t[n+1];let l=i,f=u,h=a-l,d=c-f;if(0!==h||0!==d){const t=((o-l)*h+(s-f)*d)/(h*h+d*d);t>1?(l=a,f=c):t>0&&(l+=h*t,f+=d*t)}return h=o-l,d=s-f,h*h+d*d}function rt(t,e,r,n,o,s,i){let u,a=n,c=0;for(let t=s+r;t<i;t+=r)u=et(e,t,s,i),u>a&&(c=t,a=u);a>n&&(c-s>r&&rt(t,e,r,n,o,s,c),o(t,e,t.length,c,e[c],e[c+1]),i-c>r&&rt(t,e,r,n,o,c,i))}function nt(t,e,r,n){if(!e?.coords?.length)return null;const o=h(r,n);let s=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(e&&e.coords){const t=e.coords;for(let e=0;e<t.length;e+=o){const r=t[e],n=t[e+1];s=Math.min(s,r),c=Math.max(c,r),a=Math.min(a,n),l=Math.max(l,n)}}return(0,i.is)(t)?(0,i.BI)(t,s,a,c,l):(0,u.fA)(s,a,c,l,t),t}function ot(t,e,r,n,o){const{coords:i,lengths:u}=e,a=h(r,n);if(!i.length)return t!==e&&at(t),t;(0,s.Lw)(o);const{originPosition:c,scale:l,translate:f}=o,d=lt;d.originPosition=c;const p=d.scale;p[0]=l[0]??1,p[1]=-(l[1]??1),p[2]=l[2]??1,p[3]=l[3]??1;const m=d.translate;if(m[0]=f[0]??0,m[1]=f[1]??0,m[2]=f[2]??0,m[3]=f[3]??0,!u.length){for(let e=0;e<a;++e)t.coords[e]=x(d,i[e],e);return t!==e&&at(t,a,0),t}let y=0;for(let e=0;e<u.length;e++){const r=u[e];t.lengths[e]=r;for(let e=0;e<a;++e)t.coords[y+e]=x(d,i[y+e],e);let n=t.coords[y],o=t.coords[y+1];y+=a;for(let e=1;e<r;e++,y+=a){n+=i[y]*p[0],o+=i[y+1]*p[1],t.coords[y]=n,t.coords[y+1]=o;for(let e=2;e<a;++e)t.coords[y+e]=x(d,i[y+e],e)}}return t!==e&&at(t,i.length,u.length),t}function st(t,e,r,n,o,s){if(at(t),t.lengths.push(...e.lengths),r===o&&n===s)for(let r=0;r<e.coords.length;r++)t.coords.push(e.coords[r]);else{const i=h(r,n),u=b(r,n,o,s),a=e.coords;for(let e=0;e<a.length;e+=i)u(t.coords,a,t.coords.length,e,a[e],a[e+1])}return t}function it(t,e,r,n){let o=0,s=t[n*e],i=t[n*(e+1)];for(let u=1;u<r;u++){const r=s+t[n*(e+u)],a=i+t[n*(e+u)+1],c=(r-s)*(a+i);s=r,i=a,o+=c}return.5*o}function ut(t,e){const{coords:r,lengths:n}=t;let o=0,s=0;for(let t=0;t<n.length;t++){const i=n[t];s+=it(r,o,i,e),o+=i}return Math.abs(s)}function at(t,e=0,r=0){ct(t.lengths,r),ct(t.coords,e)}function ct(t,e=0){t.length!==e&&(t.length=e)}const lt={originPosition:"lowerLeft",scale:[1,1,1,1],translate:[0,0,0,0]}},90269:function(t,e,r){r.d(e,{A:function(){return Z}});var n=r(82392),o=r(73783),s=r(62991),i=r(6273),u=r(37623),a=r(19759),c=r(81482),l=(r(80861),r(67498),r(26325)),f=r(67488),h=r(52360),d=r(17308),p=r(36321),m=r(15830),y=(r(3313),r(95254)),g=r(33432),_=r(8e3);var b=r(30271),w=r(500),F=r(57725),x=r(55792),P=r(5525);function S(t,e){return e}function M(t,e,r,n){switch(r){case 0:return C(t,e+n,0);case 1:return"lowerLeft"===t.originPosition?C(t,e+n,1):function({translate:t,scale:e},r,n){return t[n]-r*e[n]}(t,e+n,1)}}function G(t,e,r,n){return 2===r?C(t,e,2):M(t,e,r,n)}function I(t,e,r,n){return 2===r?0===e?0:C(t,e,3):M(t,e,r,n)}function A(t,e,r,n){return 3===r?0===e?0:C(t,e,3):G(t,e,r,n)}function C({translate:t,scale:e},r,n){return t[n]+r*e[n]}class D{constructor(t){this._options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=S,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this._options.applyTransform&&(t.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!t.hasZ)return;const e=(0,x.N)(t.geometryType,this._options.sourceSpatialReference,t.spatialReference);if(null!=e)for(const r of t.features)e(r.geometry)}createSpatialReference(){return{}}addField(t,e){const r=t.fields;(0,F.Lw)(r),r.push(e);const n=r.map((t=>t.name));this._attributesConstructor=function(){for(const t of n)this[t]=null}}addFeature(t,e){t.features.push(e)}prepareFeatures(t){switch(this._transform=t.transform,this._options.applyTransform&&t.transform&&(this._applyTransform=this._deriveApplyTransform(t)),this._mValueOffset=null,this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),t.geometryType){case"esriGeometryPoint":this.addCoordinate=(t,e,r)=>this.addCoordinatePoint(t,e,r),this.createGeometry=t=>this.createPointGeometry(t);break;case"esriGeometryPolygon":this.addCoordinate=(t,e,r)=>this._addCoordinatePolygon(t,e,r),this.createGeometry=t=>this._createPolygonGeometry(t);break;case"esriGeometryPolyline":this.addCoordinate=(t,e,r)=>this._addCoordinatePolyline(t,e,r),this.createGeometry=t=>this._createPolylineGeometry(t);break;case"esriGeometryMultipoint":this.addCoordinate=(t,e,r)=>this._addCoordinateMultipoint(t,e,r),this.createGeometry=t=>this._createMultipointGeometry(t)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(t,e,r){0===this._lengths.length&&(this._toAddInCurrentPath=e),this._lengths.push(e)}addQueryGeometry(t,e){const{queryGeometry:r,queryGeometryType:n}=e,o=(0,P.Ch)(r.clone(),r,!1,!1,this._transform),s=(0,P.zv)(o,n,!1,!1);t.queryGeometryType=n,t.queryGeometry={...s}}createPointGeometry(t){const e={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(e.z=0),t.hasM&&(e.m=0),e}addCoordinatePoint(t,e,r){const n=this._transform;switch(e=this._applyTransform(n,e,r,0),r){case 0:t.x=e;break;case 1:t.y=e;break;case 2:"z"in t?t.z=e:t.m=e;break;case 3:t.m=e}}_transformPathLikeValue(t,e){let r=0;e<=1&&(r=this._previousCoordinate[e],this._previousCoordinate[e]+=t);const n=this._transform;return null!==this._mValueOffset&&0===t&&e>0&&!(e%this._mValueOffset)?0:this._applyTransform(n,t,e,r)}_addCoordinatePolyline(t,e,r){this._dehydratedAddPointsCoordinate(t.paths,e,r)}_addCoordinatePolygon(t,e,r){this._dehydratedAddPointsCoordinate(t.rings,e,r)}_addCoordinateMultipoint(t,e,r){0===r&&t.points.push([]);const n=this._transformPathLikeValue(e,r);t.points[t.points.length-1].push(n)}_createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}_dehydratedAddPointsCoordinate(t,e,r){0===r&&0==this._toAddInCurrentPath--&&(t.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const n=this._transformPathLikeValue(e,r),o=t[t.length-1];0===r&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),o.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=n}_deriveApplyTransform(t){const{hasZ:e,hasM:r}=t;return e&&r?A:e?G:r?I:M}}var v=r(74704);async function T(t,e,r){const n=(0,p.Dl)(t),o={...r},s=g.A.from(e),i=!s.quantizationParameters,{data:u}=await(0,y.IJ)(n,s,new D({sourceSpatialReference:s.sourceSpatialReference,applyTransform:i}),o);return u}let N=class extends o.A{constructor(t){super(t),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,a.An)(this.url)}async execute(t,e){const r=await this.executeJSON(t,e);return this.featureSetFromJSON(t,r,e)}async executeJSON(t,e){const r=this._normalizeQuery(t),n=null!=t.outStatistics?.[0],o=(0,i.A)("featurelayer-pbf-statistics"),s=!n||o;let u;if(this.pbfSupported&&s)try{u=await T(this.url,r,e)}catch(t){if("query:parsing-pbf"!==t.name)throw t;this.pbfSupported=!1}return this.pbfSupported&&s||(u=await(0,w.e)(this.url,r,e)),this._normalizeFields(u.fields),u}async featureSetFromJSON(t,e,n){if(!this._queryIs3DObjectFormat(t)||null==this.infoFor3D||!e.features)return v.A.fromJSON(e);const{meshFeatureSetFromJSON:o}=await(0,u.qr)(Promise.all([r.e(9963),r.e(1013),r.e(7717)]).then(r.bind(r,78621)),n);return o(t,this.infoFor3D,e)}executeForCount(t,e){return(0,m.I)(this.url,this._normalizeQuery(t),e)}executeForExtent(t,e){return async function(t,e,r){const n=(0,p.Dl)(t),o=await(0,y.Jf)(n,g.A.from(e),{...r}),s=o.data.extent;return!s||isNaN(s.xmin)||isNaN(s.ymin)||isNaN(s.xmax)||isNaN(s.ymax)?{count:o.data.count,extent:null}:{count:o.data.count,extent:_.A.fromJSON(s)}}(this.url,this._normalizeQuery(t),e)}executeForIds(t,e){return(0,b.V)(this.url,this._normalizeQuery(t),e)}async executeRelationshipQuery(t,e){const[{default:n},{executeRelationshipQuery:o}]=await(0,u.qr)(Promise.all([Promise.resolve().then(r.bind(r,63498)),r.e(8028).then(r.bind(r,38028))]),e);return t=n.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),o(this.url,t,e)}async executeRelationshipQueryForCount(t,e){const[{default:n},{executeRelationshipQueryForCount:o}]=await(0,u.qr)(Promise.all([Promise.resolve().then(r.bind(r,63498)),r.e(8028).then(r.bind(r,38028))]),e);return t=n.from(t),(this.gdbVersion||this.dynamicDataSource)&&((t=t.clone()).gdbVersion=t.gdbVersion||this.gdbVersion,t.dynamicDataSource=t.dynamicDataSource||this.dynamicDataSource),o(this.url,t,e)}async executeAttachmentQuery(t,e){const{executeAttachmentQuery:n,fetchAttachments:o,processAttachmentQueryResult:s}=await(0,u.qr)(r.e(9810).then(r.bind(r,99810)),e),i=(0,p.Dl)(this.url);return s(i,await(this.queryAttachmentsSupported?n(i,t,e):o(i,t,e)))}async executeBinsQuery(t,e){const{executeBinsQuery:n}=await(0,u.qr)(r.e(1126).then(r.bind(r,11126)),e);return n(this.parsedUrl,t,e)}async executeTopFeaturesQuery(t,e){const{executeTopFeaturesQuery:n}=await(0,u.qr)(r.e(3304).then(r.bind(r,73304)),e);return n(this.parsedUrl,t,this.sourceSpatialReference,e)}async executeForTopIds(t,e){const{executeForTopIds:n}=await(0,u.qr)(r.e(9766).then(r.bind(r,9766)),e);return n(this.parsedUrl,t,e)}async executeForTopExtents(t,e){const{executeForTopExtents:n}=await(0,u.qr)(r.e(3981).then(r.bind(r,53981)),e);return n(this.parsedUrl,t,e)}async executeForTopCount(t,e){const{executeForTopCount:n}=await(0,u.qr)(r.e(2751).then(r.bind(r,52751)),e);return n(this.parsedUrl,t,e)}_normalizeQuery(t){let e=g.A.from(t);e.sourceSpatialReference=e.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(e=e===t?e.clone():e,e.gdbVersion=t.gdbVersion||this.gdbVersion,e.dynamicDataSource=t.dynamicDataSource?d.L.from(t.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:r}=this;if(null!=r&&this._queryIs3DObjectFormat(t)){e=e===t?e.clone():e,e.formatOf3DObjects=null;const n=(0,h.U9)(r),o=(0,h.CW)(r);for(const t of r.queryFormats){if(t===n){e.formatOf3DObjects=t;break}t!==o||e.formatOf3DObjects||(e.formatOf3DObjects=t)}if(!e.formatOf3DObjects)throw new s.A("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(e.outSpatialReference&&!(0,f.aI)(e.outSpatialReference,this.sourceSpatialReference))throw new s.A("query:unsupported-out-spatial-reference","3D object feature services do not support projection of geometries");if(null==e.outFields||!e.outFields.includes("*")){e=e===t?e.clone():e,null==e.outFields&&(e.outFields=[]);const{originX:n,originY:o,originZ:s,translationX:i,translationY:u,translationZ:a,scaleX:c,scaleY:l,scaleZ:f,rotationX:h,rotationY:d,rotationZ:p,rotationDeg:m}=r.transformFieldRoles;e.outFields.push(n,o,s,i,u,a,c,l,f,h,d,p,m)}}return e}_normalizeFields(t){if(null!=this.fieldsIndex&&null!=t)for(const e of t){const t=this.fieldsIndex.get(e.name);t&&Object.assign(e,t.toJSON())}}_queryIs3DObjectFormat(t){return null!=this.infoFor3D&&!0===t.returnGeometry&&"xyFootprint"!==t.multipatchOption&&!t.outStatistics}};(0,n._)([(0,c.MZ)({type:d.L})],N.prototype,"dynamicDataSource",void 0),(0,n._)([(0,c.MZ)()],N.prototype,"fieldsIndex",void 0),(0,n._)([(0,c.MZ)()],N.prototype,"gdbVersion",void 0),(0,n._)([(0,c.MZ)()],N.prototype,"infoFor3D",void 0),(0,n._)([(0,c.MZ)({readOnly:!0})],N.prototype,"parsedUrl",null),(0,n._)([(0,c.MZ)()],N.prototype,"pbfSupported",void 0),(0,n._)([(0,c.MZ)()],N.prototype,"queryAttachmentsSupported",void 0),(0,n._)([(0,c.MZ)()],N.prototype,"sourceSpatialReference",void 0),(0,n._)([(0,c.MZ)({type:String})],N.prototype,"url",void 0),N=(0,n._)([(0,l.$)("esri.layers.graphics.sources.support.QueryTask")],N);const Z=N},52360:function(t,e,r){r.d(e,{CW:function(){return d},Fm:function(){return a},JQ:function(){return h},JZ:function(){return F},ND:function(){return m},R_:function(){return i},U9:function(){return f},fu:function(){return o},nr:function(){return p},oF:function(){return s},rq:function(){return c},z$:function(){return l}});const n=[["binary","application/octet-stream","bin",""]];function o(t,e){return null!=g(e.name,t?.supportedFormats??[])}function s(t,e){if(!t)return!1;const r=c(e,t.supportedFormats??[]);return null!=r&&t.editFormats.includes(r)}function i(t,e){return _(function(t,e){const r=t.toLowerCase();return y(e).find((t=>b(t)===r))}(t,e))}function u(t,e){return _(g(t,e))}function a(t,e){return b(function(t,e){return y(e).find((e=>_(e)===t))}(t,e))}function c(t,e){return u(t.name,e)??i(t.type,e)}function l(t,e,r){return i(t,r)??u(e,r)}function f({supportedFormats:t}){return l("model/gltf-binary","glb",t)}function h(t){const e=f(t);return null!=e&&t.editFormats.includes(e)}function d({supportedFormats:t}){return l("model/gltf+json","gltf",t)}function p({supportedFormats:t}){return l("application/esri3do-SR_world","wld",t)}function m({supportedFormats:t}){return l("application/esri3do-SR_prj","prj",t)}function y(t){return[...n,...t]}function g(t,e){const r=t.toLowerCase();return y(e).find((t=>w(t).some((t=>r.endsWith(t)))))}function _(t){return t?.[0]}function b(t){return t?.[1].toLowerCase()}function w(t){return t?.[2].split(",").map((t=>t.toLowerCase()))??[]}function F(t){return t.tables?.find((t=>"assetMaps"===t.role))}},15830:function(t,e,r){r.d(e,{I:function(){return i}});var n=r(36321),o=r(95254),s=r(33432);async function i(t,e,r){const i=(0,n.Dl)(t),{data:u}=await(0,o.gW)(i,s.A.from(e),r);return u.count}},30271:function(t,e,r){r.d(e,{V:function(){return i}});var n=r(36321),o=r(95254),s=r(33432);async function i(t,e,r){const i=(0,n.Dl)(t),{data:u}=await(0,o.Pk)(i,s.A.from(e),r);return u.objectIds}}}]);
//# sourceMappingURL=269.67aaf829e92b89a05b88.js.map