"use strict";(self.webpackChunkreact_redux_arcgis_boilerplate=self.webpackChunkreact_redux_arcgis_boilerplate||[]).push([[2882],{18546:function(e,t,n){n.d(t,{a:function(){return u},f:function(){return c},n:function(){return o}});var r=n(62088);function o(e,t){u(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function u(e,t,n=2,o=n){const u=t.length/2;let c=0,i=0;if((0,r.cy)(t)||(0,r.dk)(t)){for(let r=0;r<u;++r)e[c]=t[i],e[c+1]=t[i+1],c+=n,i+=o;return}const s=(0,r.a3)(t);if((0,r.JI)(t))for(let r=0;r<u;++r)e[c]=Math.max(t[i]/s,-1),e[c+1]=Math.max(t[i+1]/s,-1),c+=n,i+=o;else for(let r=0;r<u;++r)e[c]=t[i]/s,e[c+1]=t[i+1]/s,c+=n,i+=o}function c(e,t,n,r){const o=e.typedBuffer,u=e.typedBufferStride,c=r?.count??e.count;let i=(r?.dstIndex??0)*u;for(let e=0;e<c;++e)o[i]=t,o[i+1]=n,i+=u}Object.freeze(Object.defineProperty({__proto__:null,fill:c,normalizeIntegerBuffer:u,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:"Module"}))},80820:function(e,t,n){function r(e,t){o(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function o(e,t,n=3,r=n){const o=t.length/r;let u=0,c=0;for(let i=0;i<o;++i)e[u]=t[c],e[u+1]=t[c+1],e[u+2]=t[c+2],u+=n,c+=r}function u(e,t,n,r,o){const u=e.typedBuffer,c=e.typedBufferStride,i=o?.count??e.count;let s=(o?.dstIndex??0)*c;for(let e=0;e<i;++e)u[s]=t,u[s+1]=n,u[s+2]=r,s+=c}n.d(t,{a:function(){return r},c:function(){return o},f:function(){return u}});Object.freeze(Object.defineProperty({__proto__:null,copy:o,copyView:r,fill:u},Symbol.toStringTag,{value:"Module"}))},22715:function(e,t,n){function r(e,t){o(e.typedBuffer,t,e.typedBufferStride)}function o(e,t,n=4){const r=t.typedBuffer,o=t.typedBufferStride,u=t.count;let c=0,i=0;for(let t=0;t<u;++t)e[c]=r[i],e[c+1]=r[i+1],e[c+2]=r[i+2],e[c+3]=r[i+3],c+=n,i+=o}function u(e,t,n,r,o,u){const c=e.typedBuffer,i=e.typedBufferStride,s=u?.count??e.count;let a=(u?.dstIndex??0)*i;for(let e=0;e<s;++e)c[a]=t,c[a+1]=n,c[a+2]=r,c[a+3]=o,a+=i}n.d(t,{a:function(){return o},c:function(){return r},f:function(){return u}});Object.freeze(Object.defineProperty({__proto__:null,copy:o,copyView:r,fill:u},Symbol.toStringTag,{value:"Module"}))},38456:function(e,t,n){function r(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}}n.d(t,{GJ:function(){return r}})},52882:function(e,t,n){n.r(t),n.d(t,{loadGLTFMesh:function(){return M}});var r=n(93814),o=n(38116),u=n(62991),c=n(80294),i=n(4506),s=n(82541),a=n(79441),f=n(19913),l=n(76982),d=n(2366),p=n(64855),m=n(46874),y=n(4388),g=n(47206),x=n(28364),T=n(40041),h=n(72449),B=n(66335),b=n(38456);Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){const r=e.typedBuffer,o=e.typedBufferStride,u=t.typedBuffer,c=t.typedBufferStride,i=n?n.count:t.count;let s=(n?.dstIndex??0)*o,a=(n?.srcIndex??0)*c;for(let e=0;e<i;++e){for(let e=0;e<9;++e)r[s+e]=u[a+e];s+=o,a+=c}}},Symbol.toStringTag,{value:"Module"}));Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){const r=e.typedBuffer,o=e.typedBufferStride,u=t.typedBuffer,c=t.typedBufferStride,i=n?n.count:t.count;let s=(n?.dstIndex??0)*o,a=(n?.srcIndex??0)*c;for(let e=0;e<i;++e){for(let e=0;e<16;++e)r[s+e]=u[a+e];s+=o,a+=c}}},Symbol.toStringTag,{value:"Module"}));n(91994);var v=n(18546),w=n(80820),O=n(22715);function A(e,t){return new e(new ArrayBuffer(t*e.ElementCount*(0,b.GJ)(e.ElementType)))}var _=n(81587),E=n(22380),S=n(66400),R=n(82021),C=n(17079),N=n(33550),I=n(68716);async function M(e,t,n){const s=new E.R(function(e){const t=e?.resolveFile;return t?{busy:!1,request:async(e,n,r)=>{const u=t?.(e)??e,c="image"===n?"image":"binary"===n||"image+type"===n?"array-buffer":"json";return(await(0,o.A)(u,{responseType:c,signal:r?.signal,timeout:0})).data}}:null}(n)),a=(await(0,S.loadGLTF)(s,t,n,!0)).model,d=a.lods.shift(),h=new Map,B=new Map;a.textures.forEach(((e,t)=>h.set(t,function(e){return new m.A({data:((0,C.x3)(e.data),e.data),wrap:G(e.parameters.wrap)})}(e)))),a.materials.forEach(((e,t)=>B.set(t,function(e,t){const n=new r.A(function(e,t){return(0,l.fA)(P(e[0]),P(e[1]),P(e[2]),t)}(e.color,e.opacity)),o=e.emissiveFactor?new r.A(function(e){return(0,f.fA)(P(e[0]),P(e[1]),P(e[2]))}(e.emissiveFactor)):null,u=e=>e?new y.A({scale:e.scale?[e.scale[0],e.scale[1]]:[1,1],rotation:(0,i.KJ)(e.rotation??0),offset:e.offset?[e.offset[0],e.offset[1]]:[0,0]}):null;return new p.A({color:n,colorTexture:t.get(e.textureColor),normalTexture:t.get(e.textureNormal),emissiveColor:o,emissiveTexture:t.get(e.textureEmissive),occlusionTexture:t.get(e.textureOcclusion),alphaMode:k(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:t.get(e.textureMetallicRoughness),colorTextureTransform:u(e.colorTextureTransform),normalTextureTransform:u(e.normalTextureTransform),occlusionTextureTransform:u(e.occlusionTextureTransform),emissiveTextureTransform:u(e.emissiveTextureTransform),metallicRoughnessTextureTransform:u(e.metallicRoughnessTextureTransform)})}(e,h))));const b=function(e){let t=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1},r=new Map,o=new Map,u=[];for(const i of e.parts){const{attributes:{position:e,normal:s,color:a,tangent:f,texCoord0:l}}=i,d=`\n      ${D(e,r)}/\n      ${D(s,r)}/\n      ${D(a,r)}/\n      ${D(f,r)}/\n      ${D(l,r)}/\n      ${L(i.transform)}\n    `;let p=!1;const m=(0,c.tE)(o,d,(()=>(p=!0,{start:t,length:e.count})));p&&(t+=e.count),s&&(n.normal=!0),a&&(n.color=!0),f&&(n.tangent=!0),l&&(n.texCoord0=!0),u.push({gltf:i,writeVertices:p,region:m})}return{vertexAttributes:{position:A(T.Xm,t),normal:n.normal?A(T.xs,t):null,tangent:n.tangent?A(T.Eq,t):null,color:n.color?A(T.XP,t):null,texCoord0:n.texCoord0?A(T.gH,t):null},parts:u,components:[]}}(d);for(const e of b.parts)U(b,e,B);const{position:v,normal:w,tangent:O,color:R,texCoord0:N}=b.vertexAttributes,I=(0,x.TE)(e,n),M=e.spatialReference.isGeographic?(0,x.TE)(e):I,j=(0,_.UR)({vertexAttributes:{position:v.typedBuffer,normal:w?.typedBuffer,tangent:O?.typedBuffer},vertexSpace:M,spatialReference:e.spatialReference},I,{allowBufferReuse:!0,sourceUnit:n?.unitConversionDisabled?void 0:"meters"});if(!j)throw new u.A("load-gltf-mesh:vertex-space-projection",`Failed to load mesh from glTF because we could not convert the vertex space from ${M.type} to ${I.type}`);return{transform:null,vertexSpace:I,components:b.components,spatialReference:e.spatialReference,vertexAttributes:new g.H({...j,color:R?.typedBuffer,uv:N?.typedBuffer})}}function D(e,t){if(null==e)return"-";const n=e.typedBuffer;return`${(0,c.tE)(t,n.buffer,(()=>t.size))}/${n.byteOffset}/${n.byteLength}`}function L(e){return null!=e?e.toString():"-"}function U(e,t,n){t.writeVertices&&function(e,t){const{position:n,normal:r,tangent:o,color:u,texCoord0:c}=e.vertexAttributes,f=t.region.start,{attributes:l,transform:d}=t.gltf,p=l.position.count;if((0,h.d)(n.slice(f,p),l.position,d),null!=l.normal&&null!=r){const e=(0,s.Ge)((0,a.vt)(),d),t=r.slice(f,p);(0,h.c)(t,l.normal,e),(0,i.or)(e)&&(0,h.e)(t,t)}else null!=r&&(0,w.f)(r,0,0,1,{dstIndex:f,count:p});if(null!=l.tangent&&null!=o){const e=(0,s.z0)((0,a.vt)(),d),t=o.slice(f,p);(0,B.a)(t,l.tangent,e),(0,i.or)(e)&&(0,B.n)(t,t)}else null!=o&&(0,O.f)(o,0,0,1,1,{dstIndex:f,count:p});if(null!=l.texCoord0&&null!=c?(0,v.n)(c.slice(f,p),l.texCoord0):null!=c&&(0,v.f)(c,0,0,{dstIndex:f,count:p}),null!=l.color&&null!=u){const e=l.color,t=u.slice(f,p);if(4===e.elementCount)e instanceof T.Eq?(0,B.s)(t,e,255):e instanceof T.XP?(0,O.c)(t,e):e instanceof T.Uz&&(0,B.s)(t,e,1/256);else{(0,O.f)(t,255,255,255,255);const n=T.eI.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof T.xs?(0,h.s)(n,e,255):e instanceof T.eI?(0,w.a)(n,e):e instanceof T.nS&&(0,h.s)(n,e,1/256)}}else null!=u&&(0,O.f)(u.slice(f,p),255,255,255,255)}(e,t);const{indices:r,attributes:o,primitiveType:u,material:c}=t.gltf;let f=(0,R.x)(r||o.position.count,u);const l=t.region.start;if(l){const e=new Uint32Array(f);for(let t=0;t<f.length;t++)e[t]+=l;f=e}e.components.push(new d.A({name:t.gltf.name,faces:f,material:n.get(c),shading:o.normal?"source":"flat",trustSourceNormals:!0}))}function k(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function G(e){return{horizontal:j(e.s),vertical:j(e.t)}}function j(e){switch(e){case I.pF.CLAMP_TO_EDGE:return"clamp";case I.pF.MIRRORED_REPEAT:return"mirror";case I.pF.REPEAT:return"repeat"}}function P(e){return e**(1/N.T)*255}},22380:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(38116),o=n(3132),u=n(62991),c=n(37623),i=n(19759);class s{constructor(e){this._streamDataRequester=e}async loadJSON(e,t){return this._load("json",e,t)}async loadBinary(e,t){return(0,i.DB)(e)?((0,c.Te)(t),(0,i.lJ)(e)):this._load("binary",e,t)}async loadImage(e,t){return this._load("image",e,t)}async _load(e,t,n){if(null==this._streamDataRequester)return(await(0,r.A)(t,{responseType:a[e]})).data;const i=await(0,o.Ke)(this._streamDataRequester.request(t,e,n));if(!0===i.ok)return i.value;throw(0,c.QP)(i.error),new u.A("glt-loader-request-error",`Request for resource failed: ${i.error}`)}}const a={image:"image",binary:"array-buffer",json:"json","image+type":void 0}},82021:function(e,t,n){n.d(t,{x:function(){return c}});var r=n(62088),o=n(51831),u=n(68716);function c(e,t){switch(t){case u.WR.TRIANGLES:return"number"==typeof(n=e)?(0,o.tM)(n):(0,r.mg)(n)?new Uint16Array(n):n;case u.WR.TRIANGLE_STRIP:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return[];const n=t-2,r=(0,o.my)(3*n);if("number"==typeof e){let e=0;for(let t=0;t<n;t+=1)t%2==0?(r[e++]=t,r[e++]=t+1,r[e++]=t+2):(r[e++]=t+1,r[e++]=t,r[e++]=t+2)}else{let t=0;for(let o=0;o<n;o+=1)o%2==0?(r[t++]=e[o],r[t++]=e[o+1],r[t++]=e[o+2]):(r[t++]=e[o+1],r[t++]=e[o],r[t++]=e[o+2])}return r}(e);case u.WR.TRIANGLE_FAN:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const n=t-2,r=n<=65536?new Uint16Array(3*n):new Uint32Array(3*n);if("number"==typeof e){let e=0;for(let t=0;t<n;++t)r[e++]=0,r[e++]=t+1,r[e++]=t+2;return r}const o=e[0];let u=e[1],c=0;for(let t=0;t<n;++t){const n=e[t+2];r[c++]=o,r[c++]=u,r[c++]=n,u=n}return r}(e)}var n}},17079:function(e,t,n){n.d(t,{KB:function(){return i},Xi:function(){return u},pn:function(){return s},x3:function(){return c}});var r=n(6273),o=n(10875);class u{constructor(e){this.data=e,this.type="encoded-mesh-texture",this.encoding=o.JS.KTX2_ENCODING}}function c(e){return"encoded-mesh-texture"===e?.type}async function i(e){const t=new Blob([e]),n=await t.text();return JSON.parse(n)}async function s(e,t){if(t===o.JS.KTX2_ENCODING)return new u(e);const n=new Blob([e],{type:t}),c=URL.createObjectURL(n),i=new Image;if((0,r.A)("esri-iPhone"))return new Promise(((e,t)=>{const n=()=>{o(),e(i)},r=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(c),i.removeEventListener("load",n),i.removeEventListener("error",r)};i.addEventListener("load",n),i.addEventListener("error",r),i.src=c}));try{i.src=c,await i.decode()}catch(e){}return URL.revokeObjectURL(c),i}},10875:function(e,t,n){var r,o,u,c,i,s,a,f;n.d(t,{Am:function(){return c},C7:function(){return u},JS:function(){return f},Mg:function(){return s},dd:function(){return i},it:function(){return o},s2:function(){return r},sf:function(){return a}}),function(e){e[e.None=0]="None",e[e.Front=1]="Front",e[e.Back=2]="Back",e[e.COUNT=3]="COUNT"}(r||(r={})),function(e){e[e.Less=0]="Less",e[e.Lequal=1]="Lequal",e[e.COUNT=2]="COUNT"}(o||(o={})),function(e){e[e.BACKGROUND=0]="BACKGROUND",e[e.UPDATE=1]="UPDATE"}(u||(u={})),function(e){e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"}(c||(c={})),function(e){e[e.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",e[e.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(i||(i={})),function(e){e[e.Highlight=0]="Highlight",e[e.MaskOccludee=1]="MaskOccludee"}(s||(s={})),function(e){e[e.Blend=0]="Blend",e[e.Opaque=1]="Opaque",e[e.Mask=2]="Mask",e[e.MaskBlend=3]="MaskBlend",e[e.COUNT=4]="COUNT"}(a||(a={})),function(e){e.DDS_ENCODING="image/vnd-ms.dds",e.KTX2_ENCODING="image/ktx2",e.BASIS_ENCODING="image/x.basis"}(f||(f={}))},33550:function(e,t,n){n.d(t,{T:function(){return r}});const r=2.1}}]);
//# sourceMappingURL=2882.c78c1981c76526e421d6.js.map