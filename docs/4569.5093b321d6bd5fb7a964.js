"use strict";(self.webpackChunkreact_redux_arcgis_boilerplate=self.webpackChunkreact_redux_arcgis_boilerplate||[]).push([[618,2942,4569,5265,5670],{90618:function(e,t,n){n.d(t,{c:function(){return r},g:function(){return i}});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},92942:function(e,t,n){n.r(t),n.d(t,{hydratedAdapter:function(){return c}});var r=n(8e3),i=n(67709),s=n(1912),o=n(65648),a=n(38648);const c={convertToGEGeometry:function(e,t){if(null==t)return null;let n="cache"in t?t.cache._geVersion:void 0;return null==n&&(n=e.convertJSONToGeometry(t),"cache"in t&&(t.cache._geVersion=n)),n},exportPoint:function(e,t,n){const r=e.hasZ(t),i=e.hasM(t),o=new s.A({x:e.getPointX(t),y:e.getPointY(t),spatialReference:n});return r&&(o.z=e.getPointZ(t)),i&&(o.m=e.getPointM(t)),o.cache._geVersion=t,o},exportPolygon:function(e,t,n){const r=new o.A({rings:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportPolyline:function(e,t,n){const r=new a.A({paths:e.exportPaths(t),hasZ:e.hasZ(t),hasM:e.hasM(t),spatialReference:n});return r.cache._geVersion=t,r},exportMultipoint:function(e,t,n){const r=new i.A({hasZ:e.hasZ(t),hasM:e.hasM(t),points:e.exportPoints(t),spatialReference:n});return r.cache._geVersion=t,r},exportExtent:function(e,t,n){const i=e.hasZ(t),s=e.hasM(t),o=new r.A({xmin:e.getXMin(t),ymin:e.getYMin(t),xmax:e.getXMax(t),ymax:e.getYMax(t),spatialReference:n});if(i){const n=e.getZExtent(t);o.zmin=n.vmin,o.zmax=n.vmax}if(s){const n=e.getMExtent(t);o.mmin=n.vmin,o.mmax=n.vmax}return o.cache._geVersion=t,o}}},65670:function(e,t,n){n.r(t),n.d(t,{buffer:function(){return S},changeDefaultSpatialReferenceTolerance:function(){return J},clearDefaultSpatialReferenceTolerance:function(){return Y},clip:function(){return u},contains:function(){return h},convexHull:function(){return V},crosses:function(){return l},cut:function(){return d},densify:function(){return F},difference:function(){return A},disjoint:function(){return v},distance:function(){return f},equals:function(){return p},extendedSpatialReferenceInfo:function(){return c},flipHorizontal:function(){return j},flipVertical:function(){return b},generalize:function(){return k},geodesicArea:function(){return O},geodesicBuffer:function(){return R},geodesicDensify:function(){return I},geodesicLength:function(){return D},intersect:function(){return G},intersectLinesToPoints:function(){return H},intersects:function(){return g},isSimple:function(){return _},nearestCoordinate:function(){return M},nearestVertex:function(){return z},nearestVertices:function(){return X},offset:function(){return T},overlaps:function(){return m},planarArea:function(){return Z},planarLength:function(){return N},relate:function(){return w},rotate:function(){return C},simplify:function(){return E},symmetricDifference:function(){return L},touches:function(){return x},union:function(){return P},within:function(){return y}});n(3313);var r=n(8636),i=n(47313),s=n(92942),o=n(44153);function a(e){const t=Array.isArray(e)?e[0].spatialReference:e.spatialReference;return t?(0,r.PZ)(o.A,t):o.A.WGS84}function c(e){return i.G.extendedSpatialReferenceInfo(e)}function u(e,t){return i.G.clip(s.hydratedAdapter,a(e),e,t)}function d(e,t){return i.G.cut(s.hydratedAdapter,a(e),e,t)}function h(e,t){return i.G.contains(s.hydratedAdapter,a(e),e,t)}function l(e,t){return i.G.crosses(s.hydratedAdapter,a(e),e,t)}function f(e,t,n){return i.G.distance(s.hydratedAdapter,a(e),e,t,n)}function p(e,t){return i.G.equals(s.hydratedAdapter,a(e),e,t)}function g(e,t){return i.G.intersects(s.hydratedAdapter,a(e),e,t)}function x(e,t){return i.G.touches(s.hydratedAdapter,a(e),e,t)}function y(e,t){return i.G.within(s.hydratedAdapter,a(e),e,t)}function v(e,t){return i.G.disjoint(s.hydratedAdapter,a(e),e,t)}function m(e,t){return i.G.overlaps(s.hydratedAdapter,a(e),e,t)}function w(e,t,n){return i.G.relate(s.hydratedAdapter,a(e),e,t,n)}function _(e){return i.G.isSimple(s.hydratedAdapter,a(e),e)}function E(e){return i.G.simplify(s.hydratedAdapter,a(e),e)}function V(e,t=!1){return i.G.convexHull(s.hydratedAdapter,a(e),e,t)}function A(e,t){return i.G.difference(s.hydratedAdapter,a(e),e,t)}function L(e,t){return i.G.symmetricDifference(s.hydratedAdapter,a(e),e,t)}function G(e,t){return i.G.intersect(s.hydratedAdapter,a(e),e,t)}function P(e,t=null){return i.G.union(s.hydratedAdapter,a(e),e,t)}function T(e,t,n,r,o,c){return i.G.offset(s.hydratedAdapter,a(e),e,t,n,r,o,c)}function S(e,t,n,r=!1){return i.G.buffer(s.hydratedAdapter,a(e),e,t,n,r)}function R(e,t,n,r,o,c){return i.G.geodesicBuffer(s.hydratedAdapter,a(e),e,t,n,r,o,c)}function M(e,t,n=!0){return i.G.nearestCoordinate(s.hydratedAdapter,a(e),e,t,n)}function z(e,t){return i.G.nearestVertex(s.hydratedAdapter,a(e),e,t)}function X(e,t,n,r){return i.G.nearestVertices(s.hydratedAdapter,a(e),e,t,n,r)}function q(e){return"xmin"in e?"center"in e?e.center:null:"x"in e?e:"extent"in e?e.extent?.center??null:null}function C(e,t,n){if(null==e)throw new B;const r=e.spatialReference;if(null==(n=n??q(e)))throw new B;const s=e.constructor.fromJSON(i.G.rotate(e,t,n));return s.spatialReference=r,s}function j(e,t){if(null==e)throw new B;const n=e.spatialReference;if(null==(t=t??q(e)))throw new B;const r=e.constructor.fromJSON(i.G.flipHorizontal(e,t));return r.spatialReference=n,r}function b(e,t){if(null==e)throw new B;const n=e.spatialReference;if(null==(t=t??q(e)))throw new B;const r=e.constructor.fromJSON(i.G.flipVertical(e,t));return r.spatialReference=n,r}function k(e,t,n,r){return i.G.generalize(s.hydratedAdapter,a(e),e,t,n,r)}function F(e,t,n){return i.G.densify(s.hydratedAdapter,a(e),e,t,n)}function I(e,t,n,r=0){return i.G.geodesicDensify(s.hydratedAdapter,a(e),e,t,n,r)}function Z(e,t){return i.G.planarArea(s.hydratedAdapter,a(e),e,t)}function N(e,t){return i.G.planarLength(s.hydratedAdapter,a(e),e,t)}function O(e,t,n){return i.G.geodesicArea(s.hydratedAdapter,a(e),e,t,n)}function D(e,t,n){return i.G.geodesicLength(s.hydratedAdapter,a(e),e,t,n)}function H(e,t){return i.G.intersectLinesToPoints(s.hydratedAdapter,a(e),e,t)}function J(e,t){i.G.changeDefaultSpatialReferenceTolerance(e,t)}function Y(e){i.G.clearDefaultSpatialReferenceTolerance(e)}class B extends Error{constructor(){super("Illegal Argument Exception")}}},24060:function(e,t,n){n.d(t,{SelfSnappingEngine:function(){return F}});var r=n(82392),i=n(73783),s=n(58842),o=n(81482),a=(n(6273),n(80861),n(67498),n(26325)),c=n(80575),u=n(7743),d=n(19913),h=n(19541),l=n(93617),f=n(5262),p=n(53334),g=n(51879),x=n(53981),y=n(5073);class v{constructor(e,t){this.view=e,this.options=t,this.squaredShortLineThreshold=g.N.shortLineThreshold*g.N.shortLineThreshold}snap(e,t){return null!=t.vertexHandle?"vertex"!==t.vertexHandle.type?[]:this.snapExistingVertex(e,t):this.snapNewVertex(e,t)}edgeExceedsShortLineThreshold(e,t){return this.exceedsShortLineThreshold((0,l.Lp)(e.leftVertex.pos,this.view,t),(0,l.Lp)(e.rightVertex.pos,this.view,t),t)}exceedsShortLineThreshold(e,t,{spatialReference:n}){return 0===this.squaredShortLineThreshold||(0,x.pM)((0,y.j)(t,n,h.qt,this.view),(0,y.j)(e,n,h.qt,this.view))>this.squaredShortLineThreshold}isVertical(e,t,{spatialReference:n}){const r=(0,f.GA)(n);return(0,p.Io)((0,l.Xz)(e),(0,l.Xz)(t))*r<g.N.verticalLineThresholdMeters}squaredProximityThreshold(e){return"touch"===e?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){const{distance:e,touchSensitivityMultiplier:t}=this.options,n=e*t;return n*n}}var m=n(28488),w=n(96871),_=n(34664),E=n(95376),V=n(4215);class A extends v{snapNewVertex(e,t){const n=t.editGeometryOperations.data.components[0],r=n.edges.length,i=[];if(r<1)return i;const{spatialReference:s}=t,o=(0,y.j)(e,s,h.qt,this.view),{view:a}=this,c=n.edges[r-1];let u=c;do{if(this.edgeExceedsShortLineThreshold(u,t)){const n=(0,x.is)(u,a,t);this._processCandidateProposal(n.left,n.right,e,o,t,i)}u=u.leftVertex.leftEdge}while(u&&u!==c);return i}snapExistingVertex(e,t){const n=[],r=t.vertexHandle,i=r.component;if(i.edges.length<2)return n;const{view:s}=this,{spatialReference:o}=t,a=(0,y.j)(e,o,h.qt,s),c=r.leftEdge,u=r.rightEdge;c&&u&&this.edgeExceedsShortLineThreshold(c,t)&&this.edgeExceedsShortLineThreshold(u,t)&&this._processCandidateProposal((0,l.Lp)(c.leftVertex.pos,s,t),(0,l.Lp)(u.rightVertex.pos,s,t),e,a,t,n);const d=i.edges[0];let f=d;do{if(f!==r.leftEdge&&f!==r.rightEdge&&this.edgeExceedsShortLineThreshold(f,t)){const r=(0,x.is)(f,s,t);this._processCandidateProposal(r.left,r.right,e,a,t,n)}f=f.rightVertex.rightEdge}while(f&&f!==d);return n}_processCandidateProposal(e,t,n,r,i,s){const{spatialReference:o,pointer:a}=i,f=(0,d.vt)();!function(e,t,n,r,i){(function(e,t,n,r,{spatialReference:i}){const s=(0,w.IP)(t,n,i,i);if(null==s)return!1;const o=(0,w.IP)(n,r,i,i);if(null==o)return!1;const a=(0,_.n3)(n,r,i);if(null==a)return!1;const d=Math.abs(c.wf.shortestSignedDiff(s,o))>Math.PI/2?c.uC.normalize(s+Math.PI):s;return(0,w.rT)(e,n,i,(0,u.l3)(a,"meters"),(0,u.Wq)(d,"radians","geographic"),"geodesic"),e[2]=r[2],!0})(e,t,n,r,i)||function(e,t,n,r){(0,E.Yv)(t,{start:n,end:r,type:V.Vv.LINE},e),e[2]=t[2]}(e,r,t,n)}(f,e,t,n,i);const p=(0,l.de)((0,l._7)(f));(0,x.pM)(r,(0,y.j)(p,o,h.qt,this.view))<this.squaredProximityThreshold(a)&&s.push(new m.o({lineStart:e,lineEnd:t,targetPoint:p,isDraped:"on-the-ground"===i.elevationInfo?.mode}))}}var L=n(56560),G=n(95101);class P extends v{snapNewVertex(e,t){const n=t.editGeometryOperations.data.components[0],r=n.edges.length,i=n.vertices.length,s=[];if(r<2)return s;const{view:o}=this,a=(0,y.j)(e,t.spatialReference,h.qt,o),c=(0,l.Lp)(n.vertices[i-1].pos,o,t),u=(0,l.Lp)(n.vertices[0].pos,o,t),d=n.edges[r-1];let f=d;do{if(this.edgeExceedsShortLineThreshold(f,t)){const n=(0,x.is)(f,o,t);this._checkEdgeForParallelLines(n,c,e,a,t,s),this._checkEdgeForParallelLines(n,u,e,a,t,s)}f=f.leftVertex.leftEdge}while(f&&f!==d);return s}snapExistingVertex(e,t){const n=[],r=t.vertexHandle,i=r.component;if(i.edges.length<3)return n;const{view:s}=this,o=(0,y.j)(e,t.spatialReference,h.qt,s),a=r.leftEdge,c=r.rightEdge,u=i.vertices[0],d=(0,l.Lp)(u.pos,s,t),f=i.vertices.length,p=i.vertices[f-1],g=(0,l.Lp)(p.pos,s,t),v=i.edges[0];let m=v;do{if(m!==a&&m!==c&&this.edgeExceedsShortLineThreshold(m,t)){const i=(0,x.is)(m,s,t);a&&this._checkEdgeForParallelLines(i,(0,l.Lp)(a.leftVertex.pos,s,t),e,o,t,n),c&&this._checkEdgeForParallelLines(i,(0,l.Lp)(c.rightVertex.pos,s,t),e,o,t,n),r===u?this._checkEdgeForParallelLines(i,g,e,o,t,n):r===p&&this._checkEdgeForParallelLines(i,d,e,o,t,n)}m=m.rightVertex.rightEdge}while(m&&m!==v);return n}_checkEdgeForParallelLines(e,t,n,r,i,s){const o=e.left,a=e.right;if((0,V.fg)(T,(0,l.Xz)(t),(0,l.Xz)(o),(0,l.Xz)(a)),(0,p.hG)(T,(0,l.Xz)(t))<g.N.parallelLineThreshold)return;(0,V.fg)(T,(0,l.Xz)(n),(0,l.Xz)(o),(0,l.Xz)(a),(0,l.Xz)(t));const{spatialReference:c,pointer:u}=i,d=(0,l.de)((0,l.fA)(T[0],T[1],n[2]));if((0,x.pM)(r,(0,y.j)(d,c,h.qt,this.view))<this.squaredProximityThreshold(u)){if(this.isVertical(d,t,i)||this.isVertical(o,a,i))return;if(function(e,t){const n=e.left,r=e.right;for(const i of t)if((0,V.fg)(T,(0,l.Xz)(r),(0,l.Xz)(i.constraint.start),(0,l.Xz)(i.constraint.end),(0,l.Xz)(n)),(0,p.hG)(T,(0,l.Xz)(r))<g.N.parallelLineThreshold)return i.addReferenceLine(e),!0;return!1}(e,s))return;s.push(new G.B({referenceLine:e,lineStart:t,targetPoint:d,isDraped:"on-the-ground"===i.elevationInfo?.mode}))}}}const T=(0,L.vt)();var S=n(80347),R=n(46984),M=n(48257);class z extends v{snapNewVertex(e,t){const n=t.editGeometryOperations.data.components[0],r=[];if(n.vertices.length<2)return r;const{view:i}=this,s=(0,y.j)(e,t.spatialReference,h.qt,i),o=n.vertices.at(-1);this._checkForSnappingCandidate(M._b.LastVertex,r,o.leftEdge,o,o.leftEdge.leftVertex,e,s,t);const a=n.vertices[0];return this._checkForSnappingCandidate(M._b.FirstVertex,r,a.rightEdge,a,a.rightEdge.rightVertex,e,s,t),r}snapExistingVertex(e,t){const n=[],r=t.vertexHandle;if(r.component.vertices.length<3)return n;const{view:i}=this,s=(0,y.j)(e,t.spatialReference,h.qt,i),o=r.leftEdge,a=r.rightEdge;if(o?.leftVertex.leftEdge){const r=o.leftVertex.leftEdge;this._checkForSnappingCandidate(M._b.ExistingEdge,n,r,r.rightVertex,r.leftVertex,e,s,t)}if(a?.rightVertex.rightEdge){const r=a.rightVertex.rightEdge;this._checkForSnappingCandidate(M._b.ExistingEdge,n,r,r.leftVertex,r.rightVertex,e,s,t)}return n}_checkForSnappingCandidate(e,t,n,r,i,s,o,a){if(!this.edgeExceedsShortLineThreshold(n,a))return;const h=this.view,f=(0,l.Lp)(r.pos,h,a),g=(0,l.Lp)(i.pos,h,a);(function(e,t,n,r,i){(function(e,t,n,r,{spatialReference:i}){const s=(0,w.IP)(t,n,i,i);if(null==s)return!1;const o=(0,w.IP)(n,r,i,i);if(null==o)return!1;const a=Math.sign(c.uC.shortestSignedDiff(s,o))*Math.PI*.5,h=(0,u.Wq)(s+a,"radians","geographic"),l=(0,d.vt)(),f=(0,_.n3)(n,r,i);return null!=f&&((0,w.rT)(l,n,i,(0,u.l3)(f,"meters"),h,"geodesic"),(0,S.d)(e,l,n),!0)})(e,t,n,r,i)||function(e,t,n){const r=(0,p.Re)(X,(0,l.Xz)(n),(0,l.Xz)(t));(0,S.i)(e,r[1],-r[0],0)}(e,t,n)})(q,g,f,s,a),this._checkForSnappingCandidateAlongProjectedRay(e,t,g,f,q,s,o,a)}_checkForSnappingCandidateAlongProjectedRay(e,t,n,r,i,s,o,a){const{spatialReference:c,pointer:u}=a,f=(0,p.Re)(X,(0,l.Xz)(s),(0,l.Xz)(r)),g=(0,p.Om)(i,f)/(0,p.m3)(i),v=(0,p.Ln)(X,(0,l.Xz)(r),i,g),m=(0,l.de)((0,l.fA)(v[0],v[1],s[2]));if((0,x.pM)(o,(0,y.j)(m,c,h.qt,this.view))>this.squaredProximityThreshold(u)||this.isVertical(m,r,a)||this.isVertical(r,n,a))return;const w=(0,S.b)((0,d.vt)(),r,i,Math.sign(g));t.push(new M.HJ({targetPoint:m,constraint:new R.FX(r,(0,l._7)(w)),previousVertex:n,otherVertex:r,otherVertexType:M.pn.CENTER,selfSnappingType:e,isDraped:"on-the-ground"===a.elevationInfo?.mode}))}}const X=(0,L.vt)(),q=(0,d.vt)();var C=n(57945);class j extends v{snapNewVertex(e,t){const n=t.editGeometryOperations.data.components[0],r=[],i=n.vertices.length;if("polygon"!==t.editGeometryOperations.data.type||i<2)return r;const{view:s}=this,o=n.vertices[0],a=n.vertices[i-1],c=(0,l.Lp)(o.pos,s,t),u=(0,l.Lp)(a.pos,s,t);return this._processCandidateProposal(c,u,e,t,r),r}snapExistingVertex(e,t){const n=[],r=t.vertexHandle,i=r.component;if(i.edges.length<2)return n;if("polyline"===t.editGeometryOperations.data.type&&(0===r.index||r.index===i.vertices.length-1))return n;const{view:s}=this,o=(0,l.Lp)(r.leftEdge.leftVertex.pos,s,t),a=(0,l.Lp)(r.rightEdge.rightVertex.pos,s,t);return this._processCandidateProposal(o,a,e,t,n),n}_processCandidateProposal(e,t,n,r,i){if(!this.exceedsShortLineThreshold(e,t,r))return;const s=(0,p.Cc)(b,(0,l.Xz)(e),(0,l.Xz)(t),.5),o=.5*(0,p.Io)((0,l.Xz)(e),(0,l.Xz)(t)),a=(0,V.Dh)(b,(0,l.Xz)(n),s,o),c=(0,l.de)((0,l.fA)(a[0],a[1],n[2])),{spatialReference:u,pointer:d}=r,f=(0,y.j)(n,u,h.qt,this.view);if((0,x.pM)(f,(0,y.j)(c,u,h.qt,this.view))<this.squaredProximityThreshold(d)){if(this.isVertical(e,c,r)||this.isVertical(c,t,r))return;i.push(new C.R({targetPoint:c,point1:e,point2:t,isDraped:"on-the-ground"===r.elevationInfo?.mode}))}}}const b=(0,L.vt)();var k=n(49982);let F=class extends i.A{constructor(e){super(e),this.updating=!1,this._snappers=new s.A,this._domain=k.n.SELF}initialize(){this._snappers.push(new P(this.view,this.options),new A(this.view,this.options),new z(this.view,this.options),new j(this.view,this.options))}set options(e){this._set("options",e);for(const t of this._snappers)t.options=e}async fetchCandidates(e,t,n){if(!(t&this._domain&&this.options.effectiveSelfEnabled))return[];const r=[];for(const t of this._snappers.items)for(const i of t.snap(e,n))r.push(i);return(0,x.xX)(e,r),r}};(0,r._)([(0,o.MZ)({readOnly:!0})],F.prototype,"updating",void 0),(0,r._)([(0,o.MZ)({constructOnly:!0})],F.prototype,"view",void 0),(0,r._)([(0,o.MZ)()],F.prototype,"options",null),F=(0,r._)([(0,a.$)("esri.views.interactive.snapping.SelfSnappingEngine")],F)},34664:function(e,t,n){n.d(t,{Og:function(){return d},mh:function(){return u},n3:function(){return h}});var r=n(7743),i=n(19913),s=n(65670),o=n(22538),a=n(67488),c=n(7540);function u(e){const{spatialReference:t}=e;return(0,c.M0)(t,p,g,e)}function d(e,t){if(!(0,a.aI)(e.spatialReference,t.spatialReference))return null;const{spatialReference:n}=e;return y[0]=e.x,y[1]=e.y,y[2]=e.hasZ?e.z:0,v[0]=t.x,v[1]=t.y,v[2]=t.hasZ?t.z:0,h(y,v,n)}function h(e,t,n){return(0,c.M0)(n,l,f,e,t,n)}function l(e,t,n){return(0,r.d_)((0,o._3)(x,e,t,n).distance,"meters")}function f(e,t,n){return(0,r.d_)((0,s.geodesicLength)(function(e,t,n){return{type:"polyline",spatialReference:n,paths:[[[...e],[...t]]]}}(e,t,n),"meters"),"meters")}function p(e){return(0,r.d_)((0,o.l1)([e],"meters")[0],"meters")}function g(e){return(0,r.d_)((0,s.geodesicLength)(e,"meters"),"meters")}const x=new o.Zj,y=(0,i.vt)(),v=(0,i.vt)()},7540:function(e,t,n){n.d(t,{M0:function(){return o},yF:function(){return s}});var r=n(22538),i=n(67488);function s(e){return(0,r.TT)(e)||(0,i.K8)(e)}function o(e,t,n,...s){return(0,r.TT)(e)?t.apply(void 0,s):(0,i.K8)(e)?n.apply(void 0,s):null}}}]);
//# sourceMappingURL=4569.5093b321d6bd5fb7a964.js.map