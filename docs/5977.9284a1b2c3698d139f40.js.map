{"version":3,"file":"5977.9284a1b2c3698d139f40.js","mappings":"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","sources":["webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/core/ByteSizeUnit.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/layers/TileLayer.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/layers/mixins/ArcGISCachedService.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/layers/support/TileInfoTilemapCache.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/layers/support/TilemapCache.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/layers/support/Tilemap.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/geometry/support/UintArray.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nvar E;!function(E){E[E.KILOBYTES=1024]=\"KILOBYTES\",E[E.MEGABYTES=1048576]=\"MEGABYTES\",E[E.GIGABYTES=1073741824]=\"GIGABYTES\"}(E||(E={}));export{E as ByteSizeUnit};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import r from\"../request.js\";import t from\"../core/Error.js\";import{loadAll as s}from\"../core/loadAll.js\";import{MultiOriginJSONMixin as i}from\"../core/MultiOriginJSONSupport.js\";import{throwIfAbortError as o}from\"../core/promiseUtils.js\";import{urlToObject as a,objectToQuery as l,makeAbsolute as n}from\"../core/urlUtils.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import{cast as c}from\"../core/accessorSupport/decorators/cast.js\";import\"../core/RandomLCG.js\";import\"../core/has.js\";import{reader as u}from\"../core/accessorSupport/decorators/reader.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import{writer as h}from\"../core/accessorSupport/decorators/writer.js\";import d from\"../geometry/SpatialReference.js\";import y from\"./Layer.js\";import{APIKeyMixin as f}from\"./mixins/APIKeyMixin.js\";import{ArcGISCachedService as v}from\"./mixins/ArcGISCachedService.js\";import{ArcGISMapService as g}from\"./mixins/ArcGISMapService.js\";import{ArcGISService as S}from\"./mixins/ArcGISService.js\";import{BlendLayer as _}from\"./mixins/BlendLayer.js\";import{CustomParametersMixin as j}from\"./mixins/CustomParametersMixin.js\";import{OperationalLayer as T}from\"./mixins/OperationalLayer.js\";import{PortalLayer as b}from\"./mixins/PortalLayer.js\";import{RefreshableLayer as w}from\"./mixins/RefreshableLayer.js\";import{ScaleRangeLayer as O}from\"./mixins/ScaleRangeLayer.js\";import{SublayersOwner as L}from\"./mixins/SublayersOwner.js\";import{parse as R,isHostedAgolService as U,isArcGISUrl as P}from\"./support/arcgisLayerUrl.js\";import{url as x}from\"./support/commonProperties.js\";import{createTileBitmap as A}from\"./support/imageBitmapUtils.js\";import M from\"./support/Sublayer.js\";var W;const I=[\"Canvas/World_Dark_Gray_Base\",\"Canvas/World_Dark_Gray_Reference\",\"Canvas/World_Light_Gray_Base\",\"Canvas/World_Light_Gray_Reference\",\"Elevation/World_Hillshade\",\"Elevation/World_Hillshade_Dark\",\"Ocean/World_Ocean_Base\",\"Ocean/World_Ocean_Reference\",\"Ocean_Basemap\",\"Reference/World_Boundaries_and_Places\",\"Reference/World_Boundaries_and_Places_Alternate\",\"Reference/World_Transportation\",\"World_Imagery\",\"World_Street_Map\",\"World_Topo_Map\"];let B=W=class extends(_(O(L(v(g(T(b(S(i(w(f(j(y))))))))))))){constructor(...e){super(...e),this.listMode=\"show\",this.isReference=null,this.operationalLayerType=\"ArcGISTiledMapServiceLayer\",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type=\"tile\",this.url=null}normalizeCtorArgs(e,r){return\"string\"==typeof e?{url:e,...r}:e}load(e){const r=null!=e?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:[\"Map Service\"]},e).catch(o).then((()=>this._fetchService(r)))),Promise.resolve(this)}get attributionDataUrl(){const e=this.parsedUrl?.path.toLowerCase();return e?this._getDefaultAttribution(this._getMapName(e)):null}readSpatialReference(e,r){return(e=e||r.tileInfo?.spatialReference)&&d.fromJSON(e)}writeSublayers(e,r,t,s){if(!this.loaded||!e)return;const i=e.slice().reverse().flatten((({sublayers:e})=>e&&e.toArray().reverse())).toArray(),o=[],a={writeSublayerStructure:!1,...s};i.forEach((e=>{const r=e.write({},a);o.push(r)}));o.some((e=>Object.keys(e).length>1))&&(r.layers=o)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl?.path)}castTileServers(e){return Array.isArray(e)?e.map((e=>a(e).path)):null}fetchTile(e,t,s,i={}){const{signal:o}=i,a=this.getTileUrl(e,t,s),l={responseType:\"image\",signal:o,query:{...this.refreshParameters}};return r(a,l).then((e=>e.data))}async fetchImageBitmapTile(e,t,s,i={}){const{signal:o}=i;if(this.fetchTile!==W.prototype.fetchTile){const r=await this.fetchTile(e,t,s,i);return A(r,e,t,s,o)}const a=this.getTileUrl(e,t,s),l={responseType:\"blob\",signal:o,query:{...this.refreshParameters}},{data:n}=await r(a,l);return A(n,e,t,s,o)}getTileUrl(e,r,t){const s=!this.capabilities.operations.supportsTileMap&&this.supportsBlankTile,i=l({...this.parsedUrl?.query,blankTile:!s&&null,...this.customParameters,token:this.apiKey}),o=this.tileServers;return`${o&&o.length?o[r%o.length]:this.parsedUrl?.path}/tile/${e}/${r}/${t}${i?\"?\"+i:\"\"}`}loadAll(){return s(this,(e=>{e(this.allSublayers)}))}_fetchService(e){return new Promise(((s,i)=>{if(this.sourceJSON){if(null!=this.sourceJSON.bandCount&&null!=this.sourceJSON.pixelSizeX)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");return void s({data:this.sourceJSON})}if(!this.parsedUrl)throw new t(\"tile-layer:undefined-url\",\"layer's url is not defined\");const o=R(this.parsedUrl.path);if(null!=o&&\"ImageServer\"===o.serverType)throw new t(\"tile-layer:unsupported-url\",\"use ImageryTileLayer to open a tiled image service\");r(this.parsedUrl.path,{query:{f:\"json\",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:\"json\",signal:e}).then(s,i)})).then((r=>{let t=this.url;if(r.ssl&&(t=this.url=t.replace(/^http:/i,\"https:\")),this.sourceJSON=r.data,this.read(r.data,{origin:\"service\",url:this.parsedUrl}),10.1===this.version&&!U(t))return this._fetchServerVersion(t,e).then((e=>{this.read({currentVersion:e})})).catch((()=>{}))}))}_fetchServerVersion(e,s){if(!P(e))return Promise.reject();const i=e.replace(/(.*\\/rest)\\/.*/i,\"$1\")+\"/info\";return r(i,{query:{f:\"json\",...this.customParameters,token:this.apiKey},responseType:\"json\",signal:s}).then((e=>{if(e.data&&e.data.currentVersion)return e.data.currentVersion;throw new t(\"tile-layer:version-not-available\")}))}_getMapName(e){const r=e.match(/^(?:https?:)?\\/\\/(server\\.arcgisonline\\.com|services\\.arcgisonline\\.com|ibasemaps-api\\.arcgis\\.com)\\/arcgis\\/rest\\/services\\/([^/]+(\\/[^/]+)*)\\/mapserver/i);return r?r[2]:void 0}_getDefaultAttribution(e){if(null==e)return null;let r;e=e.toLowerCase();for(let t=0,s=I.length;t<s;t++)if(r=I[t],r.toLowerCase().includes(e))return n(\"//static.arcgis.com/attribution/\"+r);return null}_getDefaultTileServers(e){if(null==e)return[];const r=-1!==e.search(/^(?:https?:)?\\/\\/server\\.arcgisonline\\.com/i),t=-1!==e.search(/^(?:https?:)?\\/\\/services\\.arcgisonline\\.com/i);return r||t?[e,e.replace(r?/server\\.arcgisonline/i:/services\\.arcgisonline/i,r?\"services.arcgisonline\":\"server.arcgisonline\")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile[C]}};e([p({readOnly:!0})],B.prototype,\"attributionDataUrl\",null),e([p({type:[\"show\",\"hide\",\"hide-children\"]})],B.prototype,\"listMode\",void 0),e([p({json:{read:!0,write:!0}})],B.prototype,\"blendMode\",void 0),e([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],B.prototype,\"isReference\",void 0),e([p({readOnly:!0,type:[\"ArcGISTiledMapServiceLayer\"]})],B.prototype,\"operationalLayerType\",void 0),e([p({type:Boolean})],B.prototype,\"resampling\",void 0),e([p()],B.prototype,\"sourceJSON\",void 0),e([p({type:d})],B.prototype,\"spatialReference\",void 0),e([u(\"spatialReference\",[\"spatialReference\",\"tileInfo\"])],B.prototype,\"readSpatialReference\",null),e([p({type:String,json:{origins:{\"web-scene\":{read:!0,write:!0}},read:!1}})],B.prototype,\"path\",void 0),e([p({readOnly:!0})],B.prototype,\"sublayers\",void 0),e([h(\"sublayers\",{layers:{type:[M]}})],B.prototype,\"writeSublayers\",null),e([p({json:{read:!1,write:!1}})],B.prototype,\"popupEnabled\",void 0),e([p()],B.prototype,\"tileServers\",null),e([c(\"tileServers\")],B.prototype,\"castTileServers\",null),e([p({readOnly:!0,json:{read:!1}})],B.prototype,\"type\",void 0),e([p(x)],B.prototype,\"url\",void 0),B=W=e([m(\"esri.layers.TileLayer\")],B);const C=Symbol(\"default-fetch-tile\");B.prototype.fetchTile[C]=!0;const N=B;export{N as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import\"../../geometry.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{reader as r}from\"../../core/accessorSupport/decorators/reader.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import l from\"../support/TileInfo.js\";import i from\"../support/TileInfoTilemapCache.js\";import{TilemapCache as s}from\"../support/TilemapCache.js\";import a from\"../../geometry/SpatialReference.js\";const p=p=>{let n=class extends p{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}destroy(){this.tilemapCache?.destroy?.()}readMinScale(e,o){return null!=o.minLOD&&null!=o.maxLOD?e:0}readMaxScale(e,o){return null!=o.minLOD&&null!=o.maxLOD?e:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(e,o,r){const t=o.capabilities?.includes(\"Tilemap\");let{minLOD:a,maxLOD:p,minScale:n,maxScale:c}=o;if(null==a&&null==p&&0!==n&&0!==c){const e=e=>Math.round(1e4*e)/1e4;n=e(n||o.tileInfo.lods[0].scale),c=e(c||o.tileInfo.lods[o.tileInfo.lods.length-1].scale);for(const r of o.tileInfo.lods){const o=e(r.scale);a=o>=n?r.level:a,p=o>=c?r.level:p}}if(t)return new s({layer:this,minLOD:a,maxLOD:p});if(o.tileInfo){const e=new l;return e.read(o.tileInfo,r),new i(e,a,p)}return null}};return e([o({json:{read:{source:\"copyrightText\"}}})],n.prototype,\"copyright\",void 0),e([o()],n.prototype,\"minScale\",void 0),e([r(\"service\",\"minScale\")],n.prototype,\"readMinScale\",null),e([o()],n.prototype,\"maxScale\",void 0),e([r(\"service\",\"maxScale\")],n.prototype,\"readMaxScale\",null),e([o({type:a})],n.prototype,\"spatialReference\",void 0),e([o({readOnly:!0})],n.prototype,\"supportsBlankTile\",null),e([o({type:l})],n.prototype,\"tileInfo\",void 0),e([o()],n.prototype,\"tilemapCache\",void 0),e([r(\"service\",\"tilemapCache\",[\"capabilities\",\"tileInfo\"])],n.prototype,\"readTilemapCache\",null),e([o()],n.prototype,\"version\",void 0),n=e([t(\"esri.layers.mixins.ArcGISCachedService\")],n),n};export{p as ArcGISCachedService};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport l from\"../../core/Error.js\";import{waitTick as t,isAbortError as i}from\"../../core/promiseUtils.js\";class e{constructor(l,t=0,i=l.lods[l.lods.length-1].level){this.tileInfo=l,this.minLOD=t,this.maxLOD=i,l.lodAt(t)||(this.minLOD=l.lods[0].level),l.lodAt(i)||(this.maxLOD=l.lods[l.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(l,t,i){const e=this.tileInfo?.lodAt(l);return!e||l<this.minLOD||l>this.maxLOD?\"unavailable\":e.cols&&e.rows?i>=e.cols[0]&&i<=e.cols[1]&&t>=e.rows[0]&&t<=e.rows[1]?\"unknown\":\"unavailable\":\"unknown\"}async fetchAvailability(i,e,o,s){await t(s);const a=this.getAvailability(i,e,o);if(\"unavailable\"===a)throw new l(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:i,row:e,col:o});return a}async fetchAvailabilityUpsample(l,e,o,s,a){await t(a),s.level=l,s.row=e,s.col=o;const n=this.tileInfo;return n.updateTileInfo(s),this.fetchAvailability(l,e,o,a).catch((l=>{if(i(l))throw l;if(n.upsampleTile(s))return this.fetchAvailabilityUpsample(s.level,s.row,s.col,s,a);throw l}))}}export{e as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../request.js\";import i from\"../../core/Accessor.js\";import{ByteSizeUnit as r}from\"../../core/ByteSizeUnit.js\";import s from\"../../core/Error.js\";import{makeHandle as l}from\"../../core/handleUtils.js\";import\"../../core/has.js\";import{LRUCache as o}from\"../../core/LRUCache.js\";import a from\"../../core/PooledArray.js\";import{isAbortError as n,isAborted as c,onAbort as h,createAbortError as p}from\"../../core/promiseUtils.js\";import{watch as m,initial as f}from\"../../core/reactiveUtils.js\";import{waitTicks as u}from\"../../core/scheduling.js\";import{objectToQuery as v}from\"../../core/urlUtils.js\";import{property as y}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as d}from\"../../core/accessorSupport/decorators/subclass.js\";import{TileKey as _}from\"./TileKey.js\";import{Tilemap as b,tilemapDefinitionId as g}from\"./Tilemap.js\";var j;function w(e,t,i){return new s(\"tile-map:tile-unavailable\",\"Tile is not available\",{level:e,row:t,col:i})}let T=j=class extends i{constructor(e){super(e),this._pendingTilemapRequests={},this.request=t,this.size=32,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new o(2*r.MEGABYTES),this.addHandles(m((()=>{const{layer:e}=this;return[e?.parsedUrl,e?.tileServers,e?.apiKey,e?.customParameters]}),(()=>this._initializeTilemapDefinition()),f))}get effectiveMinLOD(){return this.minLOD??this.layer.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.layer.tileInfo.lods[this.layer.tileInfo.lods.length-1].level}getAvailability(e,t,i){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return\"unavailable\";const r=this._tilemapFromCache(e,t,i,this._tmpTilemapDefinition);return r?r.getAvailability(t,i):\"unknown\"}fetchAvailability(e,t,i,r){return!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD?Promise.reject(w(e,t,i)):this._fetchTilemap(e,t,i,r).catch((e=>e)).then((r=>{if(r instanceof b){const s=r.getAvailability(t,i);if(\"unavailable\"===s)throw w(e,t,i);return s}if(n(r))throw r;return\"unknown\"}))}fetchAvailabilityUpsample(e,t,i,r,s){r.level=e,r.row=t,r.col=i;const l=this.layer.tileInfo;l.updateTileInfo(r);const o=this.fetchAvailability(e,t,i,s).catch((e=>{if(n(e))throw e;if(l.upsampleTile(r))return this.fetchAvailabilityUpsample(r.level,r.row,r.col,r,s);throw e}));return this._fetchAvailabilityUpsamplePrefetch(r.id,e,t,i,s,o),o}async _fetchAvailabilityUpsamplePrefetch(e,t,i,r,s,o){if(!this._prefetchingEnabled||null==e)return;const a=`prefetch-${e}`;if(this.hasHandles(a))return;const n=new AbortController;o.then((()=>n.abort()),(()=>n.abort()));let h=!1;const p=l((()=>{h||(h=!0,n.abort())}));if(this.addHandles(p,a),await u(10,n.signal).catch((()=>{})),h||(h=!0,this.removeHandles(a)),c(n))return;const m=new _(e,t,i,r),f={...s,signal:n.signal},v=this.layer.tileInfo;for(let l=0;j._prefetches.length<j._maxPrefetch&&v.upsampleTile(m);++l){const e=this.fetchAvailability(m.level,m.row,m.col,f);j._prefetches.push(e);const t=()=>{j._prefetches.removeUnordered(e)};e.then(t,t)}}_fetchTilemap(e,t,i,r){if(!this.layer.tileInfo.lodAt(e)||e<this.effectiveMinLOD||e>this.effectiveMaxLOD)return Promise.reject(new s(\"tilemap-cache:level-unavailable\",`Level ${e} is unavailable in the service`));const l=this._tmpTilemapDefinition,o=this._tilemapFromCache(e,t,i,l);if(o)return Promise.resolve(o);const a=r?.signal;return r={...r,signal:null},new Promise(((e,t)=>{h(a,(()=>t(p())));const i=g(l);let s=this._pendingTilemapRequests[i];if(!s){s=b.fromDefinition(l,r).then((e=>(this._tilemapCache.put(i,e,e.byteSize),e)));const e=()=>{delete this._pendingTilemapRequests[i]};this._pendingTilemapRequests[i]=s,s.then(e,e)}s.then(e,t)}))}_initializeTilemapDefinition(){if(!this.layer.parsedUrl)return;const{parsedUrl:e,apiKey:t,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:e.path,query:v({...e.query,...i,token:t??e.query?.token}),tileServers:this.layer.tileServers,request:this.request},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,i,r){r.level=e,r.row=t-t%this.size,r.col=i-i%this.size;const s=g(r);return this._tilemapCache.get(s)}get test(){}};T._maxPrefetch=4,T._prefetches=new a({initialSize:j._maxPrefetch}),e([y({constructOnly:!0})],T.prototype,\"layer\",void 0),e([y({constructOnly:!0})],T.prototype,\"minLOD\",void 0),e([y({constructOnly:!0})],T.prototype,\"maxLOD\",void 0),e([y({constructOnly:!0})],T.prototype,\"request\",void 0),e([y({constructOnly:!0})],T.prototype,\"size\",void 0),T=j=e([d(\"esri.layers.support.TilemapCache\")],T);export{T as TilemapCache};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport t from\"../../request.js\";import i from\"../../core/Error.js\";import{clone as e}from\"../../core/lang.js\";import{estimateSize as a}from\"../../core/typedArrayUtil.js\";import{newUintArray as o}from\"../../geometry/support/UintArray.js\";class l{constructor(t){s(t);const{location:i,data:l}=t;this.location=Object.freeze(e(i));const r=this.location.width,n=this.location.height;let h=!0,c=!0;const m=Math.ceil(r*n/32),f=o(m);let w=0;for(let e=0;e<l.length;e++){const t=e%32;l[e]?(c=!1,f[w]|=1<<t):h=!1,31===t&&++w}c?(this._availability=\"unavailable\",this.byteSize=40):h?(this._availability=\"available\",this.byteSize=40):(this._availability=f,this.byteSize=40+a(f))}getAvailability(t,i){if(\"unavailable\"===this._availability||\"available\"===this._availability)return this._availability;const e=(t-this.location.top)*this.location.width+(i-this.location.left),a=e%32,o=e>>5,l=this._availability;return o<0||o>l.length?\"unknown\":l[o]&1<<a?\"available\":\"unavailable\"}static fromDefinition(e,a){const o=e.service.request||t,{row:r,col:s,width:h,height:c}=e,m={query:{f:\"json\"}};return a=a?{...m,...a}:m,o(n(e),a).then((t=>t.data)).catch((t=>{if(422===t?.details?.httpStatus)return{location:{top:r,left:s,width:h,height:c},valid:!0,data:new Array(h*c).fill(0)};throw t})).then((t=>{if(t.location&&(t.location.top!==r||t.location.left!==s||t.location.width!==h||t.location.height!==c))throw new i(\"tilemap:location-mismatch\",\"Tilemap response for different location than requested\",{response:t,definition:{top:r,left:s,width:h,height:c}});return l.fromJSON(t)}))}static fromJSON(t){return Object.freeze(new l(t))}}function r(t){return`${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}function n(t){let i;if(t.service.tileServers?.length){const e=t.service.tileServers;i=`${e&&e.length?e[t.row%e.length]:t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`}else i=`${t.service.url}/tilemap/${t.level}/${t.row}/${t.col}/${t.width}/${t.height}`;const e=t.service.query;return e&&(i=`${i}?${e}`),i}function s(t){if(!t?.location)throw new i(\"tilemap:missing-location\",\"Location missing from tilemap response\");if(!1===t.valid)throw new i(\"tilemap:invalid\",\"Tilemap response was marked as invalid\");if(!t.data)throw new i(\"tilemap:missing-data\",\"Data missing from tilemap response\");if(!Array.isArray(t.data))throw new i(\"tilemap:data-mismatch\",\"Data must be an array of numbers\");if(t.data.length!==t.location.width*t.location.height)throw new i(\"tilemap:data-mismatch\",\"Number of data items does not match width/height of tilemap\")}export{l as Tilemap,r as tilemapDefinitionId};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{nativeArrayMaxSize as r}from\"../../core/typedArrayUtil.js\";function n(n,e=!1){return n<=r?e?new Array(n).fill(0):new Array(n):new Uint32Array(n)}function e(r,n,e){return Array.isArray(r)?r.slice(n,n+e):r.subarray(n,n+e)}export{n as newUintArray,e as uintSubArray};\n"],"names":["E","KILOBYTES","MEGABYTES","GIGABYTES","W","I","B","constructor","e","super","this","listMode","isReference","operationalLayerType","resampling","sourceJSON","spatialReference","path","sublayers","type","url","normalizeCtorArgs","r","load","signal","addResolvingPromise","loadFromPortal","supportedTypes","catch","then","_fetchService","Promise","resolve","attributionDataUrl","parsedUrl","toLowerCase","_getDefaultAttribution","_getMapName","readSpatialReference","tileInfo","fromJSON","writeSublayers","t","s","loaded","i","slice","reverse","flatten","toArray","o","a","writeSublayerStructure","forEach","write","push","some","Object","keys","length","layers","tileServers","_getDefaultTileServers","castTileServers","Array","isArray","map","fetchTile","getTileUrl","l","responseType","query","refreshParameters","data","fetchImageBitmapTile","prototype","n","capabilities","operations","supportsTileMap","supportsBlankTile","blankTile","customParameters","token","apiKey","loadAll","allSublayers","bandCount","pixelSizeX","serverType","f","ssl","replace","read","origin","version","_fetchServerVersion","currentVersion","reject","match","includes","search","hasOverriddenFetchTile","C","readOnly","json","Boolean","enabled","overridePolicy","String","origins","Symbol","N","p","arguments","copyright","minScale","maxScale","tilemapCache","destroy","readMinScale","minLOD","maxLOD","readMaxScale","readTilemapCache","c","Math","round","lods","scale","level","layer","source","lodAt","effectiveMinLOD","effectiveMaxLOD","getAvailability","cols","rows","fetchAvailability","row","col","fetchAvailabilityUpsample","updateTileInfo","upsampleTile","j","location","valid","width","height","freeze","h","fill","Uint32Array","ceil","w","_availability","byteSize","top","left","fromDefinition","service","request","m","details","httpStatus","response","definition","T","_pendingTilemapRequests","size","_prefetchingEnabled","initialize","_tilemapCache","addHandles","_initializeTilemapDefinition","_tilemapFromCache","_tmpTilemapDefinition","_fetchTilemap","_fetchAvailabilityUpsamplePrefetch","id","hasHandles","AbortController","abort","removeHandles","v","_prefetches","_maxPrefetch","removeUnordered","put","clear","get","test","initialSize","constructOnly"],"sourceRoot":""}