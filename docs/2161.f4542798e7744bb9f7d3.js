"use strict";(self.webpackChunkreact_redux_arcgis_boilerplate=self.webpackChunkreact_redux_arcgis_boilerplate||[]).push([[2161],{3800:function(t,n,e){e.d(n,{a:function(){return p},c:function(){return O},e:function(){return A},f:function(){return R},g:function(){return N},k:function(){return P},l:function(){return E},m:function(){return g},n:function(){return M},o:function(){return y},p:function(){return L},s:function(){return U},w:function(){return I}});e(6273),e(80861);var r=e(4506),o=e(25336),i=e(80347),s=e(19913),c=e(74772),u=e(76982),a=e(78115),f=e(60929),l=e(63918);function h(t,n){const e=(0,i.l)(t),o=(0,r.YN)(t[2]/e),s=Math.atan2(t[1]/e,t[0]/e);return(0,i.i)(n,e,o,s),n}var d=e(74695),T=e(11631);const _=O();function O(){return(0,u.vt)()}const g=c.e,m=c.e;function A(t,n){return(0,c.c)(n,t)}function E(t,n){return(0,u.fA)(t[0],t[1],t[2],n)}function I(t){return t}function N(t){return t[3]}function p(t){return t}function R(t,n,e,r){return(0,u.fA)(t,n,e,r)}function S(t,n,e){if(null==n)return!1;if(!b(t,n,v))return!1;let{t0:r,t1:o}=v;if((r<0||o<r&&o>0)&&(r=o),r<0)return!1;if(e){const{origin:t,direction:o}=n;e[0]=t[0]+o[0]*r,e[1]=t[1]+o[1]*r,e[2]=t[2]+o[2]*r}return!0}function M(t,n,e){const r=(0,l.Cr)(n,e);if(!b(t,r,v))return[];const{origin:o,direction:c}=r,{t0:u,t1:f}=v,h=n=>{const e=(0,s.vt)();return(0,i.b)(e,o,c,n),L(t,e,e)};return Math.abs(u-f)<(0,a.FD)()?[h(u)]:[h(u),h(f)]}const v={t0:0,t1:0};function b(t,n,e){const{origin:r,direction:o}=n,i=F;i[0]=r[0]-t[0],i[1]=r[1]-t[1],i[2]=r[2]-t[2];const s=o[0]*o[0]+o[1]*o[1]+o[2]*o[2];if(0===s)return!1;const c=2*(o[0]*i[0]+o[1]*i[1]+o[2]*i[2]),u=c*c-4*s*(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]-t[3]*t[3]);if(u<0)return!1;const a=Math.sqrt(u);return e.t0=(-c-a)/(2*s),e.t1=(-c+a)/(2*s),!0}const F=(0,s.vt)();function P(t,n){return S(t,n,null)}function C(t,n,e){const r=T.rq.get(),s=T.Rc.get();(0,i.e)(r,n.origin,n.direction);const c=N(t);(0,i.e)(e,r,n.origin),(0,i.h)(e,e,1/(0,i.l)(e)*c);const u=D(t,n.origin),a=(0,d.g7)(n.origin,e);return(0,o.$0)(s,a+u,r),(0,i.t)(e,e,s),e}function L(t,n,e){const r=(0,i.d)(T.rq.get(),n,t),o=(0,i.h)(T.rq.get(),r,t[3]/(0,i.l)(r));return(0,i.g)(e,o,t)}function D(t,n){const e=(0,i.d)(T.rq.get(),n,t),o=(0,i.l)(e),s=N(t),c=s+Math.abs(s-o);return(0,r.XM)(s/c)}const w=(0,s.vt)();function B(t,n,e,r){const o=(0,i.d)(w,n,t);switch(e){case f._.X:{const t=h(o,w)[2];return(0,i.i)(r,-Math.sin(t),Math.cos(t),0)}case f._.Y:{const t=h(o,w),n=t[1],e=t[2],s=Math.sin(n);return(0,i.i)(r,-s*Math.cos(e),-s*Math.sin(e),Math.cos(n))}case f._.Z:return(0,i.n)(r,o);default:return}}function x(t,n){const e=(0,i.d)(j,n,t);return(0,i.l)(e)-t[3]}function y(t,n){const e=(0,i.s)(t,n),r=N(t);return e<=r*r}const j=(0,s.vt)(),V=O(),U=Object.freeze(Object.defineProperty({__proto__:null,NullSphere:_,altitudeAt:x,angleToSilhouette:D,axisAt:B,cameraFrustumCoverage:function(t,n,e,r){const o=N(t),i=o*o,s=n+.5*Math.PI,c=e*e+i-2*Math.cos(s)*e*o,u=Math.sqrt(c),a=c-i;if(a<=0)return.5;const f=Math.sqrt(a),l=Math.acos(f/u)-Math.asin(o/(u/Math.sin(s)));return Math.min(1,(l+.5*r)/r)},clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,n,e){return S(t,n,e)?e:((0,l.oC)(n,t,e),L(t,e,e))},closestPointOnSilhouette:C,containsPoint:y,copy:A,create:O,distanceToSilhouette:function(t,n){const e=(0,i.d)(T.rq.get(),n,t),r=(0,i.k)(e),o=t[3]*t[3];return Math.sqrt(Math.abs(r-o))},elevate:function(t,n,e){return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e[3]=t[3]+n,e},equals:m,exactEquals:g,fromCenterAndRadius:E,fromRadius:function(t,n){return t[0]=t[1]=t[2]=0,t[3]=n,t},fromValues:R,getCenter:p,getExtent:function(t,n){return n},getRadius:N,intersectLine:M,intersectRay:S,intersectRayClosestSilhouette:function(t,n,e){if(S(t,n,e))return e;const r=C(t,n,T.rq.get());return(0,i.g)(e,n.origin,(0,i.h)(T.rq.get(),n.direction,(0,i.j)(n.origin,r)/(0,i.l)(n.direction))),e},intersectsRay:P,projectPoint:L,setAltitudeAt:function(t,n,e,r){const o=x(t,n),s=B(t,n,f._.Z,j),c=(0,i.h)(j,s,e-o);return(0,i.g)(r,n,c)},setExtent:function(t,n,e){return t!==e&&A(t,e),e},tmpSphere:V,union:function(t,n,e=(0,u.vt)()){const r=(0,i.j)(t,n),o=t[3],s=n[3];return r+s<o?((0,c.c)(e,t),e):r+o<s?((0,c.c)(e,n),e):((0,i.m)(e,t,n,(r+s-o)/(2*r)),e[3]=(r+o+s)/2,e)},wrap:I},Symbol.toStringTag,{value:"Module"}))},82444:function(t,n,e){e.d(n,{I:function(){return o}});var r=e(71709);class o{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*i);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,i));t++)this._items.push(this._allocator())}}const i=1024},79441:function(t,n,e){function r(){return[1,0,0,0,1,0,0,0,1]}function o(t,n,e,r,o,i,s,c,u){return[t,n,e,r,o,i,s,c,u]}e.d(n,{fA:function(){return o},vt:function(){return r},zK:function(){return i}});const i=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:function(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},create:r,createView:function(t,n){return new Float64Array(t,n,9)},fromValues:o},Symbol.toStringTag,{value:"Module"}))},26110:function(t,n,e){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]}e.d(n,{o8:function(){return o},vt:function(){return r},zK:function(){return i}});const i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:o,create:r,createView:function(t,n){return new Float64Array(t,n,16)},fromValues:function(t,n,e,r,o,i,s,c,u,a,f,l,h,d,T,_){return[t,n,e,r,o,i,s,c,u,a,f,l,h,d,T,_]}},Symbol.toStringTag,{value:"Module"}))},19165:function(t,n,e){function r(){return[0,0,0,1]}function o(t){return[t[0],t[1],t[2],t[3]]}e.d(n,{o8:function(){return o},vt:function(){return r},zK:function(){return i}});const i=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:i,clone:o,create:r,fromValues:function(t,n,e,r){return[t,n,e,r]}},Symbol.toStringTag,{value:"Module"}))},74860:function(t,n,e){e.d(n,{C:function(){return g},vt:function(){return O},ui:function(){return m},m7:function(){return A}});var r=e(82444),o=e(25336),i=e(80347),s=e(19913),c=e(74772),u=e(76982),a=e(63918);function f(t){return t?{ray:(0,a.vt)(t.ray),c0:t.c0,c1:t.c1}:{ray:(0,a.vt)(),c0:0,c1:Number.MAX_VALUE}}new r.I((()=>f()));var l,h,d,T=e(87368),_=e(11631);function O(t){return t?[(0,T.vt)(t[0]),(0,T.vt)(t[1]),(0,T.vt)(t[2]),(0,T.vt)(t[3]),(0,T.vt)(t[4]),(0,T.vt)(t[5])]:[(0,T.vt)(),(0,T.vt)(),(0,T.vt)(),(0,T.vt)(),(0,T.vt)(),(0,T.vt)()]}function g(t,n){for(let e=0;e<E;e++)(0,T.C)(t[e],n[e]);return t}function m(t,n,e,r=p){const s=(0,o.lw)(_.Rc.get(),n,t);(0,o.B8)(s,s);for(let t=0;t<I;++t){const n=(0,c.t)(_.Km.get(),N[t],s);(0,i.i)(r[t],n[0]/n[3],n[1]/n[3],n[2]/n[3])}!function(t,n){(0,T.Cr)(n[h.FAR_BOTTOM_LEFT],n[h.NEAR_BOTTOM_LEFT],n[h.NEAR_TOP_LEFT],t[l.LEFT]),(0,T.Cr)(n[h.NEAR_BOTTOM_RIGHT],n[h.FAR_BOTTOM_RIGHT],n[h.FAR_TOP_RIGHT],t[l.RIGHT]),(0,T.Cr)(n[h.FAR_BOTTOM_LEFT],n[h.FAR_BOTTOM_RIGHT],n[h.NEAR_BOTTOM_RIGHT],t[l.BOTTOM]),(0,T.Cr)(n[h.NEAR_TOP_LEFT],n[h.NEAR_TOP_RIGHT],n[h.FAR_TOP_RIGHT],t[l.TOP]),(0,T.Cr)(n[h.NEAR_BOTTOM_LEFT],n[h.NEAR_BOTTOM_RIGHT],n[h.NEAR_TOP_RIGHT],t[l.NEAR]),(0,T.Cr)(n[h.FAR_BOTTOM_RIGHT],n[h.FAR_BOTTOM_LEFT],n[h.FAR_TOP_LEFT],t[l.FAR])}(e,r)}function A(t,n){for(let e=0;e<E;e++){const r=t[e];if(r[0]*n[0]+r[1]*n[1]+r[2]*n[2]+r[3]>=n[3])return!1}return!0}(d=l||(l={}))[d.LEFT=0]="LEFT",d[d.RIGHT=1]="RIGHT",d[d.BOTTOM=2]="BOTTOM",d[d.TOP=3]="TOP",d[d.NEAR=4]="NEAR",d[d.FAR=5]="FAR",function(t){t[t.NEAR_BOTTOM_LEFT=0]="NEAR_BOTTOM_LEFT",t[t.NEAR_BOTTOM_RIGHT=1]="NEAR_BOTTOM_RIGHT",t[t.NEAR_TOP_RIGHT=2]="NEAR_TOP_RIGHT",t[t.NEAR_TOP_LEFT=3]="NEAR_TOP_LEFT",t[t.FAR_BOTTOM_LEFT=4]="FAR_BOTTOM_LEFT",t[t.FAR_BOTTOM_RIGHT=5]="FAR_BOTTOM_RIGHT",t[t.FAR_TOP_RIGHT=6]="FAR_TOP_RIGHT",t[t.FAR_TOP_LEFT=7]="FAR_TOP_LEFT"}(h||(h={}));h.FAR_BOTTOM_RIGHT,h.NEAR_BOTTOM_RIGHT,h.NEAR_BOTTOM_LEFT,h.FAR_BOTTOM_LEFT,h.NEAR_BOTTOM_LEFT,h.NEAR_BOTTOM_RIGHT,h.NEAR_TOP_RIGHT,h.NEAR_TOP_LEFT,h.FAR_BOTTOM_RIGHT,h.FAR_BOTTOM_LEFT,h.FAR_TOP_LEFT,h.FAR_TOP_RIGHT,h.NEAR_BOTTOM_RIGHT,h.FAR_BOTTOM_RIGHT,h.FAR_TOP_RIGHT,h.NEAR_TOP_RIGHT,h.FAR_BOTTOM_LEFT,h.NEAR_BOTTOM_LEFT,h.NEAR_TOP_LEFT,h.FAR_TOP_LEFT,h.FAR_TOP_LEFT,h.NEAR_TOP_LEFT,h.NEAR_TOP_RIGHT,h.FAR_TOP_RIGHT;const E=6,I=8,N=[(0,u.fA)(-1,-1,-1,1),(0,u.fA)(1,-1,-1,1),(0,u.fA)(1,1,-1,1),(0,u.fA)(-1,1,-1,1),(0,u.fA)(-1,-1,1,1),(0,u.fA)(1,-1,1,1),(0,u.fA)(1,1,1,1),(0,u.fA)(-1,1,1,1)],p=(new r.I(f),[(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,s.vt)()])},94669:function(t,n,e){e.d(n,{Cr:function(){return a},H6:function(){return h},_I:function(){return l},kb:function(){return f},vt:function(){return u}});var r=e(4506),o=e(82444),i=e(80347),s=e(19913),c=e(11631);function u(t){return t?{origin:(0,s.o8)(t.origin),vector:(0,s.o8)(t.vector)}:{origin:(0,s.vt)(),vector:(0,s.vt)()}}function a(t,n,e=u()){return(0,i.c)(e.origin,t),(0,i.d)(e.vector,n,t),e}function f(t,n){const e=(0,i.d)(c.rq.get(),n,t.origin),o=(0,i.f)(t.vector,e),s=(0,i.f)(t.vector,t.vector),u=(0,r.qE)(o/s,0,1),a=(0,i.d)(c.rq.get(),(0,i.h)(c.rq.get(),t.vector,u),e);return(0,i.f)(a,a)}function l(t,n,e){return h(t,n,0,1,e)}function h(t,n,e,o,s){const{vector:u,origin:a}=t,f=(0,i.d)(c.rq.get(),n,a),l=(0,i.f)(u,f)/(0,i.k)(u);return(0,i.h)(s,u,(0,r.qE)(l,e,o)),(0,i.g)(s,s,t.origin)}(0,s.vt)(),(0,s.vt)(),new o.I((()=>u()))},95431:function(t,n,e){e.d(n,{b:function(){return i}});var r=e(4506),o=e(51831);function i(t,n,e){const i=Array.isArray(t),f=i?t.length/n:t.byteLength/(4*n),l=i?t:new Uint32Array(t,0,f*n),h=e?.minReduction??0,d=e?.originalIndices||null,T=d?d.length:0,_=e?.componentOffsets||null;let O=0;if(_)for(let t=0;t<_.length-1;t++){const n=_[t+1]-_[t];n>O&&(O=n)}else O=f;const g=Math.floor(1.1*O)+1;(null==a||a.length<2*g)&&(a=new Uint32Array((0,r.cU)(2*g)));for(let t=0;t<2*g;t++)a[t]=0;let m=0;const A=!!_&&!!d,E=A?T:f;let I=(0,o.my)(f);const N=new Uint32Array(T),p=1.96;let R=0!==h?Math.ceil(4*p*p/(h*h)*h*(1-h)):E,S=1,M=_?_[1]:E;for(let t=0;t<E;t++){if(t===R){const n=1-m/t;if(n+p*Math.sqrt(n*(1-n)/t)<h)return null;R*=2}if(t===M){for(let t=0;t<2*g;t++)a[t]=0;if(d)for(let t=_[S-1];t<_[S];t++)N[t]=I[d[t]];M=_[++S]}const e=A?d[t]:t,r=e*n,o=u(l,r,n);let i=o%g,c=m;for(;0!==a[2*i+1];){if(a[2*i]===o){const t=a[2*i+1]-1;if(s(l,r,t*n,n)){c=I[t];break}}i++,i>=g&&(i-=g)}c===m&&(a[2*i]=o,a[2*i+1]=e+1,m++),I[e]=c}if(0!==h&&1-m/f<h)return null;if(A){for(let t=_[S-1];t<N.length;t++)N[t]=I[d[t]];I=(0,o.Dg)(N)}const v=i?new Array(m):new Uint32Array(m*n);m=0;for(let t=0;t<E;t++)I[t]===m&&(c(l,(A?d[t]:t)*n,v,m*n,n),m++);if(d&&!A){const t=new Uint32Array(T);for(let n=0;n<t.length;n++)t[n]=I[d[n]];I=(0,o.Dg)(t)}return{buffer:Array.isArray(v)?v:v.buffer,indices:I,uniqueCount:m}}function s(t,n,e,r){for(let o=0;o<r;o++)if(t[n+o]!==t[e+o])return!1;return!0}function c(t,n,e,r,o){for(let i=0;i<o;i++)e[r+i]=t[n+i]}function u(t,n,e){let r=0;for(let o=0;o<e;o++)r=t[n+o]+r|0,r=r+(r<<11)+(r>>>2)|0;return r>>>0}let a=null},87368:function(t,n,e){e.d(n,{C:function(){return l},Cr:function(){return _},Io:function(){return L},LV:function(){return f},O_:function(){return T},Qj:function(){return h},T7:function(){return v},Tj:function(){return F},U5:function(){return S},Ui:function(){return M},Z1:function(){return C},_I:function(){return P},fA:function(){return d},gv:function(){return b},lU:function(){return O},mN:function(){return D},mP:function(){return p},mR:function(){return R},vt:function(){return a}});var r=e(4506),o=e(80347),i=e(19913),s=(e(74772),e(74695)),c=e(11631),u=e(45773);function a(t=y){return[t[0],t[1],t[2],t[3]]}function f(t=y[0],n=y[1],e=y[2],r=y[3]){return d(t,n,e,r,c.Km.get())}function l(t,n){return d(n[0],n[1],n[2],n[3],t)}function h(t){return t}function d(t,n,e,r,o=a()){return o[0]=t,o[1]=n,o[2]=e,o[3]=r,o}function T(t,n,e){const r=n[0]*n[0]+n[1]*n[1]+n[2]*n[2],o=Math.abs(r-1)>1e-5&&r>1e-12?1/Math.sqrt(r):1;return e[0]=n[0]*o,e[1]=n[1]*o,e[2]=n[2]*o,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function _(t,n,e,r=a()){const o=e[0]-n[0],i=e[1]-n[1],s=e[2]-n[2],c=t[0]-n[0],u=t[1]-n[1],f=t[2]-n[2],l=i*f-s*u,h=s*c-o*f,d=o*u-i*c,T=l*l+h*h+d*d,_=Math.abs(T-1)>1e-5&&T>1e-12?1/Math.sqrt(T):1;return r[0]=l*_,r[1]=h*_,r[2]=d*_,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function O(t,n,e,r=0,i=Math.floor(e*(1/3)),s=Math.floor(e*(2/3))){if(e<3)return!1;n(m,r);let c=i,u=!1;for(;c<e-1&&!u;)n(A,c),c++,u=!(0,o.p)(m,A);if(!u)return!1;for(c=Math.max(c,s),u=!1;c<e&&!u;)n(E,c),c++,(0,o.d)(I,m,A),(0,o.n)(I,I),(0,o.d)(N,A,E),(0,o.n)(N,N),u=!(0,o.p)(m,E)&&!(0,o.p)(A,E)&&Math.abs((0,o.f)(I,N))<g;return u?(_(m,A,E,t),!0):(0!==r||1!==i||2!==s)&&O(t,n,e,0,1,2)}const g=.99619469809,m=(0,i.vt)(),A=(0,i.vt)(),E=(0,i.vt)(),I=(0,i.vt)(),N=(0,i.vt)();function p(t,n,e){return n!==t&&l(t,n),t[3]=-(0,o.f)(t,e),t}function R(t,n,e,r){return(0,o.e)(E,n,t),T(e,E,r)}function S(t,n,e,r){return B(x(t,n,(0,o.d)(c.rq.get(),e,n),V,r))}function M(t,n,e){return null!=n&&B(x(t,n.origin,n.direction,U,e))}function v(t,n,e){return B(x(t,n.origin,n.vector,j.NONE,e))}function b(t,n,e){return B(x(t,n.origin,n.vector,j.CLAMP,e))}function F(t,n){return D(t,n)>=0}function P(t,n,e){const r=(0,o.h)(c.rq.get(),t,-t[3]),i=function(t,n,e){const r=(0,o.h)(c.rq.get(),t,(0,o.f)(t,n));return(0,o.d)(e,n,r),e}(t,(0,o.d)(c.rq.get(),n,r),c.rq.get());return(0,o.g)(e,i,r),e}function C(t,n,e,r){const i=t,a=c.rq.get(),f=c.rq.get();(0,u.VV)(i,a,f);const l=(0,o.d)(c.rq.get(),e,n),h=(0,s.gr)(a,l),d=(0,s.gr)(f,l),T=(0,s.gr)(i,l);return(0,o.i)(r,h,d,T)}function L(t,n){return Math.abs(D(t,n))}function D(t,n){return(0,o.f)(t,n)+t[3]}var w;function B(t){return t===w.INTERSECTS_INSIDE_OUT||t===w.INTERSECTS_OUTSIDE_IN}function x(t,n,e,i,s){const c=(0,o.f)(t,e),u=D(t,n);if(0===c)return u>=0?w.INSIDE:w.OUTSIDE;let a=-u/c;return i&j.CLAMP&&(a=(0,r.qE)(a,0,1)),!(i&j.INFINITE_MIN)&&a<0||!(i&j.INFINITE_MAX)&&a>1?u>=0?w.INSIDE:w.OUTSIDE:((0,o.g)(s,n,(0,o.h)(s,e,a)),u>=0?w.INTERSECTS_INSIDE_OUT:w.INTERSECTS_OUTSIDE_IN)}!function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"}(w||(w={}));const y=[0,0,1,0];var j;!function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"}(j||(j={}));const V=j.INFINITE_MIN|j.INFINITE_MAX,U=j.INFINITE_MAX},63918:function(t,n,e){e.d(n,{C:function(){return l},Cr:function(){return h},LV:function(){return f},kb:function(){return d},oC:function(){return T},vt:function(){return u}});e(3223);var r=e(82444),o=(e(82541),e(79441)),i=e(80347),s=e(19913),c=e(11631);function u(t){return t?a((0,s.o8)(t.origin),(0,s.o8)(t.direction)):a((0,s.vt)(),(0,s.vt)())}function a(t,n){return{origin:t,direction:n}}function f(t,n){const e=_.get();return e.origin=t,e.direction=n,e}function l(t,n=u()){return function(t,n,e=u()){return(0,i.c)(e.origin,t),(0,i.c)(e.direction,n),e}(t.origin,t.direction,n)}function h(t,n,e=u()){return(0,i.c)(e.origin,t),(0,i.d)(e.direction,n,t),e}function d(t,n){const e=(0,i.e)(c.rq.get(),(0,i.n)(c.rq.get(),t.direction),(0,i.d)(c.rq.get(),n,t.origin));return(0,i.f)(e,e)}function T(t,n,e){const r=(0,i.f)(t.direction,(0,i.d)(e,n,t.origin));return(0,i.g)(e,t.origin,(0,i.h)(e,t.direction,r)),e}const _=new r.I((()=>u()));(0,s.vt)(),(0,s.vt)(),(0,s.vt)(),(0,o.vt)()},74695:function(t,n,e){e.d(n,{EJ:function(){return u},g7:function(){return c},gr:function(){return s}});var r=e(4506),o=e(80347),i=e(19913);function s(t,n){return(0,o.f)(t,n)/(0,o.l)(t)}function c(t,n){const e=(0,o.f)(t,n)/((0,o.l)(t)*(0,o.l)(n));return-(0,r.XM)(e)}function u(t,n,e){(0,o.n)(a,t),(0,o.n)(f,n);const i=(0,o.f)(a,f),s=(0,r.XM)(i),c=(0,o.e)(a,a,f);return(0,o.f)(c,e)<0?2*Math.PI-s:s}const a=(0,i.vt)(),f=(0,i.vt)()},11631:function(t,n,e){e.d(n,{Rc:function(){return T},J8:function(){return _},oG:function(){return l},rq:function(){return h},Km:function(){return d}});e(6273);var r=e(71709),o=e(79441),i=e(26110),s=e(19165),c=e(56560),u=e(19913),a=e(76982);class f{constructor(t){this._create=t,this._items=new Array,this._itemsPtr=0}get(){return 0===this._itemsPtr&&(0,r.d)((()=>this._reset())),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){const t=2*this._itemsPtr;this._items.length>t&&(this._items.length=t),this._itemsPtr=0}static createVec2f64(){return new f(c.vt)}static createVec3f64(){return new f(u.vt)}static createVec4f64(){return new f(a.vt)}static createMat3f64(){return new f(o.vt)}static createMat4f64(){return new f(i.vt)}static createQuatf64(){return new f(s.vt)}get test(){}}const l=f.createVec2f64(),h=f.createVec3f64(),d=f.createVec4f64(),T=(f.createMat3f64(),f.createMat4f64()),_=f.createQuatf64()},45773:function(t,n,e){e.d(n,{VV:function(){return c},hG:function(){return i},wp:function(){return s}});e(4506);var r=e(80347),o=e(19913);function i(t){const n=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],r=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(n,e,r))}function s(t,n){const e=Math.sqrt(n[0]*n[0]+n[4]*n[4]+n[8]*n[8]),o=Math.sqrt(n[1]*n[1]+n[5]*n[5]+n[9]*n[9]),i=Math.sqrt(n[2]*n[2]+n[6]*n[6]+n[10]*n[10]);return(0,r.i)(t,e,o,i),t}function c(t,n,e){Math.abs(t[0])>Math.abs(t[1])?(0,r.i)(n,0,1,0):(0,r.i)(n,1,0,0),(0,r.e)(e,t,n),(0,r.e)(n,e,t),(0,r.n)(e,e),(0,r.n)(n,n)}(0,o.vt)(),(0,o.vt)(),(0,o.vt)(),(0,o.vt)(),(0,o.vt)()},935:function(t,n,e){e.d(n,{A:function(){return q}});var r=e(39744),o=e(41785),i=e(80347),s=e(19913),c=e(74860),u=e(63918),a=e(3800),f=e(26421);class l{get bounds(){return this._root.bounds}get halfSize(){return this._root.halfSize}get root(){return this._root.node}get maximumObjectsPerNode(){return this._maximumObjectsPerNode}get maximumDepth(){return this._maximumDepth}get objectCount(){return this._objectCount}constructor(t,n){this.objectToBoundingSphere=t,this._maximumObjectsPerNode=10,this._maximumDepth=20,this._degenerateObjects=new Set,this._root=new h,this._objectCount=0,n&&(void 0!==n.maximumObjectsPerNode&&(this._maximumObjectsPerNode=n.maximumObjectsPerNode),void 0!==n.maximumDepth&&(this._maximumDepth=n.maximumDepth))}destroy(){this._degenerateObjects.clear(),h.clearPool(),b[0]=null,D.prune(),V.prune()}add(t,n=t.length){this._objectCount+=n,this._grow(t,n);const e=h.acquire();for(let r=0;r<n;r++){const n=t[r];this._isDegenerate(n)?this._degenerateObjects.add(n):(e.init(this._root),this._add(n,e))}h.release(e)}remove(t,n=null){this._objectCount-=t.length;const e=h.acquire();for(const r of t){const t=n??(0,a.e)(this.objectToBoundingSphere(r),w);R(t[3])?(e.init(this._root),_(r,t,e)):this._degenerateObjects.delete(r)}h.release(e),this._shrink()}update(t,n){if(!R(n[3])&&this._isDegenerate(t))return;const e=function(t){return b[0]=t,b}(t);this.remove(e,n),this.add(e)}forEachAlongRay(t,n,e){const r=(0,u.LV)(t,n);d(this._root,(t=>{if(!function(t,n){return E((0,a.a)(n.bounds),2*-n.halfSize,C),E((0,a.a)(n.bounds),2*n.halfSize,L),(0,f.O_)(t.origin,t.direction,C,L)}(r,t))return!1;const n=t.node;return n.terminals.forAll((t=>{this._intersectsObject(r,t)&&e(t)})),null!==n.residents&&n.residents.forAll((t=>{this._intersectsObject(r,t)&&e(t)})),!0}))}forEachAlongRayWithVerticalOffset(t,n,e,r){const o=(0,u.LV)(t,n);d(this._root,(t=>{if(!function(t,n,e){return E((0,a.a)(n.bounds),2*-n.halfSize,C),E((0,a.a)(n.bounds),2*n.halfSize,L),e.applyToMinMax(C,L),(0,f.O_)(t.origin,t.direction,C,L)}(o,t,r))return!1;const n=t.node;return n.terminals.forAll((t=>{this._intersectsObjectWithOffset(o,t,r)&&e(t)})),null!==n.residents&&n.residents.forAll((t=>{this._intersectsObjectWithOffset(o,t,r)&&e(t)})),!0}))}forEach(t){d(this._root,(n=>{const e=n.node;return e.terminals.forAll(t),null!==e.residents&&e.residents.forAll(t),!0})),this._degenerateObjects.forEach(t)}forEachDegenerateObject(t){this._degenerateObjects.forEach(t)}findClosest(t,n,e,r=()=>!0,o=1/0){let s=1/0,u=1/0,f=null;const l=N(t,n),h=i=>{if(--o,!r(i))return;const l=this.objectToBoundingSphere(i);if(!(0,c.m7)(e,l))return;const h=p(t,n,(0,a.a)(l)),d=h-l[3],T=h+l[3];d<s&&(s=d,u=T,f=i)};return T(this._root,(r=>{if(o<=0||!(0,c.m7)(e,r.bounds))return!1;if((0,i.h)(P,l,r.halfSize),(0,i.g)(P,P,(0,a.a)(r.bounds)),p(t,n,P)>u)return!1;const s=r.node;return s.terminals.forAll((t=>h(t))),null!==s.residents&&s.residents.forAll((t=>h(t))),!0}),t,n),f}forEachInDepthRange(t,n,e,r,o,s,u){let f=-1/0,h=1/0;const d={setRange:t=>{e===l.DepthOrder.FRONT_TO_BACK?(f=Math.max(f,t.near),h=Math.min(h,t.far)):(f=Math.max(f,-t.far),h=Math.min(h,-t.near))}};d.setRange(r);const _=p(n,e,t),O=N(n,e),g=N(n,-e),m=t=>{if(!u(t))return;const r=this.objectToBoundingSphere(t),i=(0,a.a)(r),l=p(n,e,i)-_,T=l-r[3],O=l+r[3];T>h||O<f||!(0,c.m7)(s,r)||o(t,d)};T(this._root,(t=>{if(!(0,c.m7)(s,t.bounds))return!1;if((0,i.h)(P,O,t.halfSize),(0,i.g)(P,P,(0,a.a)(t.bounds)),p(n,e,P)-_>h)return!1;if((0,i.h)(P,g,t.halfSize),(0,i.g)(P,P,(0,a.a)(t.bounds)),p(n,e,P)-_<f)return!1;const r=t.node;return r.terminals.forAll((t=>m(t))),null!==r.residents&&r.residents.forAll((t=>m(t))),!0}),n,e)}forEachNode(t){d(this._root,(n=>t(n.node,n.bounds,n.halfSize,n.depth)))}forEachNeighbor(t,n){const e=(0,a.g)(n),r=(0,a.a)(n),o=n=>{const o=this.objectToBoundingSphere(n),s=(0,a.g)(o),c=e+s;return!((0,i.s)((0,a.a)(o),r)-c*c<=0)||t(n)};let s=!0;const c=t=>{s&&(s=o(t))};d(this._root,(t=>{const n=(0,a.g)(t.bounds),o=e+n;if((0,i.s)((0,a.a)(t.bounds),r)-o*o>0)return!1;const u=t.node;return u.terminals.forAll(c),s&&null!==u.residents&&u.residents.forAll(c),s})),s&&this.forEachDegenerateObject(c)}_intersectsObject(t,n){const e=this.objectToBoundingSphere(n);return!(e[3]>0)||(0,a.k)(e,t)}_intersectsObjectWithOffset(t,n,e){const r=this.objectToBoundingSphere(n);return!(r[3]>0)||(0,a.k)(e.applyToBoundingSphere(r),t)}_add(t,n){n.advanceTo(this.objectToBoundingSphere(t))?n.node.terminals.push(t):(n.node.residents.push(t),n.node.residents.length>this._maximumObjectsPerNode&&n.depth<this._maximumDepth&&this._split(n))}_split(t){const n=t.node.residents;t.node.residents=null;for(let e=0;e<n.length;e++){const r=h.acquire().init(t);this._add(n.at(e),r),h.release(r)}}_grow(t,n){if(0!==n&&(I(t,n,(t=>this.objectToBoundingSphere(t)),B),R(B[3])&&!this._fitsInsideTree(B)))if(g(this._root.node))(0,a.e)(B,this._root.bounds),this._root.halfSize=1.25*this._root.bounds[3],this._root.updateBoundsRadiusFromHalfSize();else{const t=this._rootBoundsForRootAsSubNode(B);this._placingRootViolatesMaxDepth(t)?this._rebuildTree(B,t):this._growRootAsSubNode(t),h.release(t)}}_rebuildTree(t,n){(0,i.c)((0,a.a)(x),(0,a.a)(n.bounds)),x[3]=n.halfSize,I([t,x],2,(t=>t),y);const e=h.acquire().init(this._root);this._root.initFrom(null,y,y[3]),this._root.increaseHalfSize(1.25),d(e,(t=>(this.add(t.node.terminals.data,t.node.terminals.length),null!==t.node.residents&&this.add(t.node.residents.data,t.node.residents.length),!0))),h.release(e)}_placingRootViolatesMaxDepth(t){const n=Math.log(t.halfSize/this._root.halfSize)*Math.LOG2E;let e=0;return d(this._root,(t=>(e=Math.max(e,t.depth),e+n<=this._maximumDepth))),e+n>this._maximumDepth}_rootBoundsForRootAsSubNode(t){const n=t[3],e=t;let r=-1/0;const o=this._root.bounds,i=this._root.halfSize;for(let t=0;t<3;t++){const s=o[t]-i-(e[t]-n),c=e[t]+n-(o[t]+i),u=Math.max(0,Math.ceil(s/(2*i))),a=Math.max(0,Math.ceil(c/(2*i)))+1,f=2**Math.ceil(Math.log(u+a)*Math.LOG2E);r=Math.max(r,f),j[t].min=u,j[t].max=a}for(let t=0;t<3;t++){let n=j[t].min,e=j[t].max;const s=(r-(n+e))/2;n+=Math.ceil(s),e+=Math.floor(s);const c=o[t]-i-n*i*2;F[t]=c+(e+n)*i}const s=r*i;return F[3]=s*v,h.acquire().initFrom(null,F,s,0)}_growRootAsSubNode(t){const n=this._root.node;(0,i.c)((0,a.a)(B),(0,a.a)(this._root.bounds)),B[3]=this._root.halfSize,this._root.init(t),t.advanceTo(B,null,!0),t.node.children=n.children,t.node.residents=n.residents,t.node.terminals=n.terminals}_shrink(){for(;;){const t=this._findShrinkIndex();if(-1===t)break;this._root.advance(t),this._root.depth=0}}_findShrinkIndex(){if(0!==this._root.node.terminals.length||this._root.isLeaf())return-1;let t=null;const n=this._root.node.children;let e=0,r=0;for(;r<n.length&&null==t;)e=r++,t=n[e];for(;r<n.length;)if(n[r++])return-1;return e}_isDegenerate(t){return!R(this.objectToBoundingSphere(t)[3])}_fitsInsideTree(t){const n=this._root.bounds,e=this._root.halfSize;return t[3]<=e&&t[0]>=n[0]-e&&t[0]<=n[0]+e&&t[1]>=n[1]-e&&t[1]<=n[1]+e&&t[2]>=n[2]-e&&t[2]<=n[2]+e}toJSON(){const{maximumDepth:t,maximumObjectsPerNode:n,_objectCount:e}=this,r=this._nodeToJSON(this._root.node);return{maximumDepth:t,maximumObjectsPerNode:n,objectCount:e,root:{bounds:this._root.bounds,halfSize:this._root.halfSize,depth:this._root.depth,node:r}}}_nodeToJSON(t){const n=t.children.map((t=>t?this._nodeToJSON(t):null)),e=t.residents?.map((t=>this.objectToBoundingSphere(t))),r=t.terminals?.map((t=>this.objectToBoundingSphere(t)));return{children:n,residents:e,terminals:r}}static fromJSON(t){const n=new l((t=>t),{maximumDepth:t.maximumDepth,maximumObjectsPerNode:t.maximumObjectsPerNode});return n._objectCount=t.objectCount,n._root.initFrom(t.root.node,t.root.bounds,t.root.halfSize,t.root.depth),n}}class h{constructor(){this.bounds=(0,a.c)(),this.halfSize=0,this.initFrom(null,null,0,0)}init(t){return this.initFrom(t.node,t.bounds,t.halfSize,t.depth)}initFrom(t,n,e,r=this.depth){return this.node=null!=t?t:h.createEmptyNode(),n&&(0,a.e)(n,this.bounds),this.halfSize=e,this.depth=r,this}increaseHalfSize(t){this.halfSize*=t,this.updateBoundsRadiusFromHalfSize()}updateBoundsRadiusFromHalfSize(){this.bounds[3]=this.halfSize*v}advance(t){let n=this.node.children[t];n||(n=h.createEmptyNode(),this.node.children[t]=n),this.node=n,this.halfSize/=2,this.depth++;const e=S[t];return this.bounds[0]+=e[0]*this.halfSize,this.bounds[1]+=e[1]*this.halfSize,this.bounds[2]+=e[2]*this.halfSize,this.updateBoundsRadiusFromHalfSize(),this}advanceTo(t,n,e=!1){for(;;){if(this.isTerminalFor(t))return n&&n(this,-1),!0;if(this.isLeaf()){if(!e)return n&&n(this,-1),!1;this.node.residents=null}const r=this._childIndex(t);n&&n(this,r),this.advance(r)}}isLeaf(){return null!=this.node.residents}isTerminalFor(t){return t[3]>this.halfSize/2}_childIndex(t){const n=this.bounds;return(n[0]<t[0]?1:0)+(n[1]<t[1]?2:0)+(n[2]<t[2]?4:0)}static createEmptyNode(){return{children:[null,null,null,null,null,null,null,null],terminals:new o.A({shrink:!0}),residents:new o.A({shrink:!0})}}static acquire(){return h._pool.acquire()}static release(t){h._pool.release(t)}static clearPool(){h._pool.prune()}}function d(t,n){let e=h.acquire().init(t);const r=[e];for(;0!==r.length;){if(e=r.pop(),n(e)&&!e.isLeaf())for(let t=0;t<e.node.children.length;t++)e.node.children[t]&&r.push(h.acquire().init(e).advance(t));h.release(e)}}function T(t,n,e,r=l.DepthOrder.FRONT_TO_BACK){let o=h.acquire().init(t);const i=[o];for(function(t,n,e){if(!V.length)for(let t=0;t<8;++t)V.push({index:0,distance:0});for(let e=0;e<8;++e){const r=S[e];V.data[e].index=e,V.data[e].distance=p(t,n,r)}V.sort(((t,n)=>t.distance-n.distance));for(let t=0;t<8;++t)e[t]=V.data[t].index}(e,r,U);0!==i.length;){if(o=i.pop(),n(o)&&!o.isLeaf())for(let t=7;t>=0;--t){const n=U[t];o.node.children[n]&&i.push(h.acquire().init(o).advance(n))}h.release(o)}}function _(t,n,e){D.clear();const r=e.advanceTo(n,((t,n)=>{D.push(t.node),D.push(n)}))?e.node.terminals:e.node.residents;if(r.removeUnordered(t),0===r.length)for(let t=D.length-2;t>=0&&O(D.data[t],D.data[t+1]);t-=2);}function O(t,n){return n>=0&&(t.children[n]=null),!!g(t)&&(null===t.residents&&(t.residents=new o.A({shrink:!0})),!0)}function g(t){if(0!==t.terminals.length)return!1;if(null!==t.residents)return 0===t.residents.length;for(let n=0;n<t.children.length;n++)if(t.children[n])return!1;return!0}function m(t,n){t[0]=Math.min(t[0],n[0]-n[3]),t[1]=Math.min(t[1],n[1]-n[3]),t[2]=Math.min(t[2],n[2]-n[3])}function A(t,n){t[0]=Math.max(t[0],n[0]+n[3]),t[1]=Math.max(t[1],n[1]+n[3]),t[2]=Math.max(t[2],n[2]+n[3])}function E(t,n,e){e[0]=t[0]+n,e[1]=t[1]+n,e[2]=t[2]+n}function I(t,n,e,r){if(1===n){const n=e(t[0]);(0,a.e)(n,r)}else{C[0]=1/0,C[1]=1/0,C[2]=1/0,L[0]=-1/0,L[1]=-1/0,L[2]=-1/0;for(let r=0;r<n;r++){const n=e(t[r]);R(n[3])&&(m(C,n),A(L,n))}(0,i.m)((0,a.a)(r),C,L,.5),r[3]=Math.max(L[0]-C[0],L[1]-C[1],L[2]-C[2])/2}}function N(t,n){let e,r=1/0;for(let o=0;o<8;++o){const i=p(t,n,M[o]);i<r&&(r=i,e=M[o])}return e}function p(t,n,e){return n*(t[0]*e[0]+t[1]*e[1]+t[2]*e[2])}function R(t){return!isNaN(t)&&t!==-1/0&&t!==1/0&&t>0}h._pool=new r.A(h),function(t){var n;(n=t.DepthOrder||(t.DepthOrder={}))[n.FRONT_TO_BACK=1]="FRONT_TO_BACK",n[n.BACK_TO_FRONT=-1]="BACK_TO_FRONT"}(l||(l={}));const S=[(0,s.fA)(-1,-1,-1),(0,s.fA)(1,-1,-1),(0,s.fA)(-1,1,-1),(0,s.fA)(1,1,-1),(0,s.fA)(-1,-1,1),(0,s.fA)(1,-1,1),(0,s.fA)(-1,1,1),(0,s.fA)(1,1,1)],M=[(0,s.fA)(-1,-1,-1),(0,s.fA)(-1,-1,1),(0,s.fA)(-1,1,-1),(0,s.fA)(-1,1,1),(0,s.fA)(1,-1,-1),(0,s.fA)(1,-1,1),(0,s.fA)(1,1,-1),(0,s.fA)(1,1,1)],v=Math.sqrt(3),b=[null];const F=(0,a.c)(),P=(0,s.vt)(),C=(0,s.vt)(),L=(0,s.vt)(),D=new o.A,w=(0,a.c)(),B=(0,a.c)(),x=(0,a.c)(),y=(0,a.c)(),j=[{min:0,max:0},{min:0,max:0},{min:0,max:0}],V=new o.A,U=[0,0,0,0,0,0,0,0],q=l},33763:function(t,n,e){var r;e.d(n,{r:function(){return r}}),function(t){t.POSITION="position",t.NORMAL="normal",t.NORMALCOMPRESSED="normalCompressed",t.UV0="uv0",t.COLOR="color",t.SYMBOLCOLOR="symbolColor",t.SIZE="size",t.ROTATION="rotation",t.TANGENT="tangent",t.OFFSET="offset",t.PERSPECTIVEDIVIDE="perspectiveDivide",t.CENTEROFFSETANDDISTANCE="centerOffsetAndDistance",t.LENGTH="length",t.PREVPOSITION="prevPosition",t.NEXTPOSITION="nextPosition",t.SUBDIVISIONFACTOR="subdivisionFactor",t.COLORFEATUREATTRIBUTE="colorFeatureAttribute",t.SIZEFEATUREATTRIBUTE="sizeFeatureAttribute",t.OPACITYFEATUREATTRIBUTE="opacityFeatureAttribute",t.DISTANCETOSTART="distanceToStart",t.UVMAPSPACE="uvMapSpace",t.BOUNDINGRECT="boundingRect",t.UVREGION="uvRegion",t.PROFILERIGHT="profileRight",t.PROFILEUP="profileUp",t.PROFILEVERTEXANDNORMAL="profileVertexAndNormal",t.FEATUREVALUE="featureValue",t.INSTANCEMODELORIGINHI="instanceModelOriginHi",t.INSTANCEMODELORIGINLO="instanceModelOriginLo",t.INSTANCEMODEL="instanceModel",t.INSTANCEMODELNORMAL="instanceModelNormal",t.INSTANCECOLOR="instanceColor",t.INSTANCEFEATUREATTRIBUTE="instanceFeatureAttribute",t.LOCALTRANSFORM="localTransform",t.GLOBALTRANSFORM="globalTransform",t.BOUNDINGSPHERE="boundingSphere",t.MODELORIGIN="modelOrigin",t.MODELSCALEFACTORS="modelScaleFactors",t.FEATUREATTRIBUTE="featureAttribute",t.STATE="state",t.LODLEVEL="lodLevel",t.POSITION0="position0",t.POSITION1="position1",t.NORMAL2COMPRESSED="normal2Compressed",t.COMPONENTINDEX="componentIndex",t.VARIANTOFFSET="variantOffset",t.VARIANTSTROKE="variantStroke",t.VARIANTEXTENSION="variantExtension",t.SIDENESS="sideness",t.START="start",t.END="end",t.UP="up",t.START_UP="startUp",t.END_UP="endUp",t.EXTRUDE="extrude",t.OBJECTANDLAYERIDCOLOR="objectAndLayerIdColor",t.INSTANCEOBJECTANDLAYERIDCOLOR="instanceObjectAndLayerIdColor"}(r||(r={}))},3628:function(t,n,e){e.d(n,{I$:function(){return s},In:function(){return a},gr:function(){return u}});var r=e(29386),o=e(7724),i=e(33763);const s=(0,o.BP)().vec3f(i.r.POSITION).u16(i.r.COMPONENTINDEX).freeze(),c=(0,o.BP)().vec2u8(i.r.SIDENESS).freeze(),u=((0,r.U)(c),(0,o.BP)().vec3f(i.r.POSITION0).vec3f(i.r.POSITION1).vec2i16(i.r.NORMALCOMPRESSED).u16(i.r.COMPONENTINDEX).u8(i.r.VARIANTOFFSET,{glNormalized:!0}).u8(i.r.VARIANTSTROKE).u8(i.r.VARIANTEXTENSION,{glNormalized:!0}).freeze()),a=(0,o.BP)().vec3f(i.r.POSITION0).vec3f(i.r.POSITION1).vec2i16(i.r.NORMALCOMPRESSED).vec2i16(i.r.NORMAL2COMPRESSED).u16(i.r.COMPONENTINDEX).u8(i.r.VARIANTOFFSET,{glNormalized:!0}).u8(i.r.VARIANTSTROKE).u8(i.r.VARIANTEXTENSION,{glNormalized:!0}).freeze();new Map([[i.r.POSITION0,0],[i.r.POSITION1,1],[i.r.COMPONENTINDEX,2],[i.r.VARIANTOFFSET,3],[i.r.VARIANTSTROKE,4],[i.r.VARIANTEXTENSION,5],[i.r.NORMALCOMPRESSED,6],[i.r.NORMAL2COMPRESSED,7],[i.r.SIDENESS,8]])},93271:function(t,n,e){e.d(n,{K:function(){return u}});var r=e(4506),o=e(41785),i=e(80347),s=e(19913);const c=-1;function u(t,n,e){const r=t.vertices.position,o=t.vertices.componentIndex,s=_.position0,u=_.position1,l=_.faceNormal0,d=_.faceNormal1,{edges:T,normals:O}=f(t),g=T.length/4,m=n.allocate(g);let A=0;const E=g,p=e?.allocate(E);let S=0,M=0,v=0;h.length=0;for(let t=0;t<g;++t){const n=4*t;r.getVec(T.data[n],s),r.getVec(T.data[n+1],u);const e=h.pushNew();e.index=4*t,e.length=(0,i.j)(s,u)}h.sort(((t,n)=>n.length-t.length));const b=new Array,F=new Array;h.forAll((({length:t,index:f})=>{const h=T.data[f],g=T.data[f+1],E=T.data[f+2],P=T.data[f+3],C=P===c;if(r.getVec(h,s),r.getVec(g,u),C){const t=3*E;(0,i.i)(l,O.data[t],O.data[t+1],O.data[t+2]),(0,i.c)(d,l),_.componentIndex=o.get(h),_.cosAngle=(0,i.f)(l,d)}else{let t=3*E;if((0,i.i)(l,O.data[t],O.data[t+1],O.data[t+2]),t=3*P,(0,i.i)(d,O.data[t],O.data[t+1],O.data[t+2]),_.componentIndex=o.get(h),_.cosAngle=(0,i.f)(l,d),function(t,n){return t.cosAngle>n}(_,N))return;_.cosAngle<-.9999&&(0,i.c)(d,l)}M+=t,v++,C||function(t,n){return t.cosAngle<n}(_,R)?(n.write(m,A++,_),b.push(t)):a(_,I)&&(p&&e&&e.write(p,S++,_),F.push(t))}));const P=new Float32Array(b.reverse()),C=new Float32Array(F.reverse()),L=p&&e?{instancesData:p.slice(0,S),lodInfo:{lengths:C}}:void 0;return{regular:{instancesData:m.slice(0,A),lodInfo:{lengths:P}},silhouette:L,averageEdgeLength:M/v}}function a(t,n){const e=(0,r.XM)(t.cosAngle);return(0,i.o)(g,t.position1,t.position0),e*((0,i.f)((0,i.e)(O,t.faceNormal0,t.faceNormal1),g)>0?-1:1)>n}function f(t){const n=t.faces.length/3,e=t.faces,r=t.neighbors,o=t.vertices.position;d.length=T.length=0;for(let t=0;t<n;t++){const n=3*t,s=r[n],u=r[n+1],a=r[n+2],f=e[n],l=e[n+1],h=e[n+2];o.getVec(f,m),o.getVec(l,A),o.getVec(h,E),(0,i.d)(A,A,m),(0,i.d)(E,E,m),(0,i.e)(m,A,E),(0,i.n)(m,m),T.pushArray(m),(s===c||f<l)&&(d.push(f),d.push(l),d.push(t),d.push(s)),(u===c||l<h)&&(d.push(l),d.push(h),d.push(t),d.push(u)),(a===c||h<f)&&(d.push(h),d.push(f),d.push(t),d.push(a))}return{edges:d,normals:T}}class l{constructor(){this.index=0,this.length=0}}const h=new o.A({allocator:t=>t||new l,deallocator:null}),d=new o.A({deallocator:null}),T=new o.A({deallocator:null}),_=new class{constructor(){this.position0=(0,s.vt)(),this.position1=(0,s.vt)(),this.faceNormal0=(0,s.vt)(),this.faceNormal1=(0,s.vt)(),this.componentIndex=0,this.cosAngle=0}},O=(0,s.vt)(),g=(0,s.vt)(),m=(0,s.vt)(),A=(0,s.vt)(),E=(0,s.vt)(),I=(0,r.kU)(4),N=Math.cos(I),p=(0,r.kU)(35),R=Math.cos(p)},4628:function(t,n,e){e.d(n,{o6:function(){return b},HY:function(){return w},hx:function(){return F},Jb:function(){return D}});var r=e(95431);function o(t,n,e){const r=n/3,o=new Uint32Array(e+1),i=new Uint32Array(e+1),s=(t,n)=>{t<n?o[t+1]++:i[n+1]++};for(let n=0;n<r;n++){const e=t[3*n],r=t[3*n+1],o=t[3*n+2];s(e,r),s(r,o),s(o,e)}let c=0,u=0;for(let t=0;t<e;t++){const n=o[t+1],e=i[t+1];o[t+1]=c,i[t+1]=u,c+=n,u+=e}const a=new Uint32Array(6*r),f=o[e],l=(t,n,e)=>{if(t<n){const r=o[t+1]++;a[2*r]=n,a[2*r+1]=e}else{const r=i[n+1]++;a[2*f+2*r]=t,a[2*f+2*r+1]=e}};for(let n=0;n<r;n++){const e=t[3*n],r=t[3*n+1],o=t[3*n+2];l(e,r,n),l(r,o,n),l(o,e,n)}const h=(t,n)=>{const e=2*t,r=n-t;for(let t=1;t<r;t++){const n=a[e+2*t],r=a[e+2*t+1];let o=t-1;for(;o>=0&&a[e+2*o]>n;o--)a[e+2*o+2]=a[e+2*o],a[e+2*o+3]=a[e+2*o+1];a[e+2*o+2]=n,a[e+2*o+3]=r}};for(let t=0;t<e;t++)h(o[t],o[t+1]),h(f+i[t],f+i[t+1]);const d=new Int32Array(3*r),T=(n,e)=>n===t[3*e]?0:n===t[3*e+1]?1:n===t[3*e+2]?2:-1,_=(t,n)=>{const e=T(t,n);d[3*n+e]=-1},O=(t,n,e,r)=>{const o=T(t,n);d[3*n+o]=r;const i=T(e,r);d[3*r+i]=n};for(let t=0;t<e;t++){let n=o[t];const e=o[t+1];let r=i[t];const s=i[t+1];for(;n<e&&r<s;){const e=a[2*n],o=a[2*f+2*r];e===o?(O(t,a[2*n+1],o,a[2*f+2*r+1]),n++,r++):e<o?(_(t,a[2*n+1]),n++):(_(o,a[2*f+2*r+1]),r++)}for(;n<e;)_(t,a[2*n+1]),n++;for(;r<s;)_(a[2*f+2*r],a[2*f+2*r+1]),r++}return d}var i=e(7724),s=e(33763),c=e(3628),u=e(67498),a=e(80347),f=e(19913),l=e(29386),h=e(4506);e(68435);function d(t,n,e,r,o,i=2){const s=1/(Math.abs(e)+Math.abs(r)+Math.abs(o)),c=e*s,u=r*s,a=o<=0?(c>=0?1:-1)*(1-Math.abs(u)):c,f=o<=0?(u>=0?1:-1)*(1-Math.abs(c)):u,l=n*i;t[l]=T(a),t[l+1]=T(f)}function T(t){return(0,h.qE)(Math.round(32767*t),-32767,32767)}class _{updateSettings(t){this.settings=t,this._edgeHashFunction=t.reducedPrecision?E:A}write(t,n,e){M.seed=this._edgeHashFunction(e);const r=M.getIntRange(0,255),o=M.getIntRange(0,this.settings.variants-1),i=M.getFloat(),s=255*(.5*function(t,n){return Math.abs(t)**n*Math.sign(t)}(-(1-Math.min(i/.7,1))+Math.max(0,i-.7)/(1-.7),1.2)+.5);t.position0.setVec(n,e.position0),t.position1.setVec(n,e.position1),t.componentIndex.set(n,e.componentIndex),t.variantOffset.set(n,r),t.variantStroke.set(n,o),t.variantExtension.set(n,s)}}const O=new Float32Array(6),g=new Uint32Array(O.buffer),m=new Uint32Array(1);function A(t){return O[0]=t.position0[0],O[1]=t.position0[1],O[2]=t.position0[2],O[3]=t.position1[0],O[4]=t.position1[1],O[5]=t.position1[2],m[0]=31*(31*(31*(31*(31*(166811+g[0])+g[1])+g[2])+g[3])+g[4])+g[5],m[0]}function E(t){const n=O;n[0]=N(t.position0[0]),n[1]=N(t.position0[1]),n[2]=N(t.position0[2]),n[3]=N(t.position1[0]),n[4]=N(t.position1[1]),n[5]=N(t.position1[2]),m[0]=5381;for(let t=0;t<g.length;t++)m[0]=31*m[0]+g[t];return m[0]}const I=1e4;function N(t){return Math.round(t*I)/I}class p{constructor(){this._commonWriter=new _}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return c.gr.createBuffer(t)}write(t,n,e){this._commonWriter.write(t,n,e),(0,a.g)(S,e.faceNormal0,e.faceNormal1),(0,a.n)(S,S);const{typedBuffer:r,typedBufferStride:o}=t.normalCompressed;d(r,n,S[0],S[1],S[2],o)}}p.Layout=c.gr,p.glLayout=(0,l.U)(c.gr,1);class R{constructor(){this._commonWriter=new _}updateSettings(t){this._commonWriter.updateSettings(t)}allocate(t){return c.In.createBuffer(t)}write(t,n,e){this._commonWriter.write(t,n,e);{const{typedBuffer:r,typedBufferStride:o}=t.normalCompressed;d(r,n,e.faceNormal0[0],e.faceNormal0[1],e.faceNormal0[2],o)}{const{typedBuffer:r,typedBufferStride:o}=t.normal2Compressed;d(r,n,e.faceNormal1[0],e.faceNormal1[1],e.faceNormal1[2],o)}}}R.Layout=c.In,R.glLayout=(0,l.U)(c.In,1);const S=(0,f.vt)(),M=new u.A;var v=e(93271);function b(t){const n=F(t.data,t.skipDeduplicate,t.indices,t.indicesLength);return C.updateSettings(t.writerSettings),L.updateSettings(t.writerSettings),(0,v.K)(n,C,L)}function F(t,n,e,i){if(n){const n=o(e,i,t.count);return new P(e,i,n,t)}const s=(0,r.b)(t.buffer,t.stride/4,{originalIndices:e,originalIndicesLength:i}),u=o(s.indices,i,s.uniqueCount);return{faces:s.indices,facesLength:s.indices.length,neighbors:u,vertices:c.I$.createView(s.buffer)}}class P{constructor(t,n,e,r){this.faces=t,this.facesLength=n,this.neighbors=e,this.vertices=r}}const C=new p,L=new R,D=(0,i.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1),w=(0,i.BP)().vec3f(s.r.POSITION0).vec3f(s.r.POSITION1).u16(s.r.COMPONENTINDEX)},72161:function(t,n,e){e.r(n),e.d(n,{default:function(){return T}});var r=e(82392),o=e(37623),i=(e(80861),e(6273),e(67498),e(62991),e(26325)),s=e(80347),c=e(19913),u=e(94669),a=e(3800),f=e(935),l=e(4628);function h(t,n,e){const r=(0,a.c)(),o=(0,a.a)(r);return(0,s.b)(o,o,t,.5),(0,s.b)(o,o,n,.5),r[3]=(0,s.j)(o,t),(0,s.g)(o,o,e),r}let d=class{constructor(){this._idToComponent=new Map,this._components=new f.A((t=>t.bounds)),this._edges=new f.A((t=>t.bounds)),this._tmpLineSegment=(0,u.vt)(),this._tmpP1=(0,c.vt)(),this._tmpP2=(0,c.vt)(),this._tmpP3=(0,c.vt)(),this.remoteClient=null}async fetchCandidates(t,n){await Promise.resolve(),(0,o.Te)(n),await this._ensureEdgeLocations(t,n);const e=[];return this._edges.forEachNeighbor((n=>(this._addCandidates(t,n,e),e.length<1e3)),t.bounds),{result:{candidates:e}}}async _ensureEdgeLocations(t,n){const e=[];if(this._components.forEachNeighbor((t=>{if(null==t.info){const{id:n,uid:r}=t;e.push({id:n,uid:r})}return!0}),t.bounds),!e.length)return;const r={components:e},o=await this.remoteClient.invoke("fetchAllEdgeLocations",r,n??{});for(const t of o.components)this._setFetchEdgeLocations(t)}async add(t){const n=new O(t.id,t.bounds);return this._idToComponent.set(n.id,n),this._components.add([n]),{result:{}}}async remove(t){const n=this._idToComponent.get(t.id);if(n){const t=[];this._edges.forEachNeighbor((e=>(e.component===n&&t.push(e),!0)),n.bounds),this._edges.remove(t),this._components.remove([n]),this._idToComponent.delete(n.id)}return{result:{}}}_setFetchEdgeLocations(t){const n=this._idToComponent.get(t.id);if(null==n||t.uid!==n.uid)return;const e=l.HY.createView(t.locations),r=new Array(e.count),o=(0,c.vt)(),i=(0,c.vt)();for(let s=0;s<e.count;s++){e.position0.getVec(s,o),e.position1.getVec(s,i);const c=h(o,i,t.origin),u=new g(n,s,c);r[s]=u}this._edges.add(r);const{objectIds:s,origin:u}=t;n.info={locations:e,objectIds:s,origin:u}}_addCandidates(t,n,e){const{info:r}=n.component,{origin:o,objectIds:i}=r,c=r.locations,u=c.position0.getVec(n.index,this._tmpP1),a=c.position1.getVec(n.index,this._tmpP2);(0,s.g)(u,u,o),(0,s.g)(a,a,o);const f=i[c.componentIndex.get(n.index)];this._addEdgeCandidate(t,f,u,a,e),_(t,f,u,e),_(t,f,a,e)}_addEdgeCandidate(t,n,e,r,o){if(!t.returnEdge)return;const i=(0,a.a)(t.bounds),f=(0,u.Cr)(e,r,this._tmpLineSegment),l=(0,u._I)(f,i,this._tmpP3);(0,a.o)(t.bounds,l)&&o.push({type:"edge",objectId:n,target:(0,c.o8)(l),distance:(0,s.j)(i,l),start:(0,c.o8)(e),end:(0,c.o8)(r)})}};d=(0,r._)([(0,i.$)("esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker")],d);const T=d;function _(t,n,e,r){if(!t.returnVertex||!(0,a.o)(t.bounds,e))return;const o=(0,a.a)(t.bounds);r.push({type:"vertex",objectId:n,target:(0,c.o8)(e),distance:(0,s.j)(o,e)})}class O{constructor(t,n){this.id=t,this.bounds=n,this.info=null,this.uid=++O.uid}}O.uid=0;class g{constructor(t,n,e){this.component=t,this.index=n,this.bounds=e}}}}]);
//# sourceMappingURL=2161.f4542798e7744bb9f7d3.js.map