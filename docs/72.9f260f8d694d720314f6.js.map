{"version":3,"file":"72.9f260f8d694d720314f6.js","mappings":"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","sources":["webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/grid/constants.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/grid/gridUtils.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/interactive/snapping/GridSnappingEngine.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nconst o=50,t=5;export{t as minimumPixelsPerStrideForDisplayWhenScalingOff,o as pixelsPerCell};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport\"../../../geometry.js\";import{getMetersPerUnitForSR as e}from\"../../../core/unitUtils.js\";import{isSupported as t,geodesicLengths as r}from\"../../../geometry/support/geodesicUtils.js\";import{straightLineDensify as o}from\"../../../geometry/support/normalizeUtils.js\";import{isValid as s}from\"../../../geometry/support/spatialReferenceUtils.js\";import{webMercatorToGeographic as n}from\"../../../geometry/support/webMercatorUtils.js\";import{pixelsPerCell as i}from\"./constants.js\";import m from\"../../../geometry/SpatialReference.js\";import p from\"../../../geometry/Point.js\";import c from\"../../../geometry/Polyline.js\";function a(e,t){return Math.log(e)/Math.log(t)}function l(e,t,r){const o=1===e?10:e;return o**(r?Math.round(a(i/t,o)):0)}function f(e){const{isGeographic:t,isWebMercator:r}=e;return!t&&!r}function u(i,a,l){const u=\"number\"==typeof i?null:i,y=l??u?.spatialReference;if(null==y||!s(y)||f(y))return e(y);let g=u?.x??i,j=u?.y??a;const h=1/Math.sqrt(2);let M=g+h,x=j+h;const{isWebMercator:R,isGeographic:U}=y;let b=U&&!t(y)?m.WGS84:y;if(R){let e=new p({x:g,y:j,spatialReference:y});n(e,!0,e),g=e.x,j=e.y,e=new p({x:M,y:x,spatialReference:y}),n(e,!0,e),M=e.x,x=e.y,b=m.WGS84}const w=new c({paths:[[[g,j],[M,x]]],spatialReference:b}),G=o(w,10);let W;try{[W]=r([G],\"meters\")}catch{return e(y)}return W}export{l as getScaleFactor,u as measureMetersPerUnitAtReferencePoint,f as shouldUsePlanar};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Accessor.js\";import r from\"../../../core/Logger.js\";import{deg2rad as i}from\"../../../core/mathUtils.js\";import{convertUnit as n}from\"../../../core/unitUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as s}from\"../../../core/accessorSupport/decorators/subclass.js\";import{K as a}from\"../../../chunks/vec32.js\";import{isLoadedOrLoadFor as p,project as l}from\"../../../geometry/projection.js\";import{getClosestDenormalizedXToReference as c}from\"../../../geometry/support/normalizeUtils.js\";import{getResolutionForScale as u}from\"../../../geometry/support/scaleUtils.js\";import{minimumPixelsPerStrideForDisplayWhenScalingOff as d}from\"../../2d/grid/constants.js\";import{getScaleFactor as g,measureMetersPerUnitAtReferencePoint as f}from\"../../2d/grid/gridUtils.js\";import{create as h,createWritable as m}from\"../sketch/normalizedPoint.js\";import{gridPlacementGraphicSymbol as S}from\"./snappingUtils.js\";import{IntersectionSnappingCandidate as y}from\"./candidates/IntersectionSnappingCandidate.js\";import{LineSnappingCandidate as v}from\"./candidates/LineSnappingCandidate.js\";let w=class extends t{constructor(e){super(e),this.options=null}destroy(){this._set(\"options\",null)}get grid(){return this.view.grid}get effectiveViewRotation(){return this.grid?.rotateWithMap?0:i(this.view.rotation??0)}get gridRotation(){return i(this.grid?.rotation??0)}get gridCenter(){const{spatialReference:e,grid:t}=this;if(!t||!e||!p(t.center.spatialReference,e))return null;try{const r=l(t.center,e),i=e.isWrappable&&null!=this.view?.center?c(r.x,this.view.center.x,e):r.x;return h(i,r.y,r.z)}catch(i){return r.getLogger(this).errorOnce(\"Grid Snapping - Failed to project grid center.\",i),null}}get offsetScaleFactor(){const{pixelsPerStride:e,grid:t}=this;if(!t||!e)return 1;const{majorLineInterval:r,dynamicScaling:i}=t;return r<1?null:g(r,e,i)}get spatialReference(){return this.view.spatialReference}get gridMetersPerStride(){const{grid:e}=this;return e?n(e.spacing,e.units,\"meters\"):null}get viewMetersPerPixel(){const{viewMetersPerSRUnit:e}=this;return null==e?null:e*u(this.view.scale,this.view.spatialReference)}get viewMetersPerSRUnit(){const{spatialReference:e}=this.view;return this.gridCenter?f(this.gridCenter[0],this.gridCenter[1],e):null}get pixelsPerStride(){const{gridMetersPerStride:e,viewMetersPerPixel:t}=this;return t&&e?e/t:null}get updating(){return null!=this.grid&&null!=this.spatialReference&&null==this.viewMetersPerSRUnit}async fetchCandidates(e,t,r){const{options:i,view:n}=this;if(!i?.effectiveGridEnabled||!n.grid||r.feature?.attributes&&S in r.feature.attributes)return[];const o=r.coordinateHelper.arrayToPoint(e),s=i.distance*(\"touch\"===r.pointer?i.touchSensitivityMultiplier:1);return this.fetchCandidatesSync(o,s)}fetchCandidatesSync(e,t){const r=[],{grid:i,effectiveViewRotation:n,gridRotation:o,gridCenter:s,viewMetersPerPixel:a,viewMetersPerSRUnit:c,offsetScaleFactor:u,spatialReference:g,gridMetersPerStride:f,pixelsPerStride:m}=this;if(!(i&&a&&c&&s&&g&&u&&f&&m))return r;if(!i.dynamicScaling&&m<d)return r;if(!p(e.spatialReference,g))return r;const S=l(e,g),w=h(S.x,S.y,S.z),x=P(w,-o,s,-n),C=f/c*u,U=j(x,C,s),{shouldSnapX:b,shouldSnapY:L}=R(U,x,t,a,c);if(!b&&!L)return[];const z=h((b?U:x)[0],(L?U:x)[1]),E=P(z,o,s,n),F=P(U,o,s,n);if(L){const e=M(U,x,C,\"y\"),t=P(e,o,s,n);r.push(new v({lineStart:F,lineEnd:t,targetPoint:E,isDraped:!1}))}if(b){const e=M(U,x,C,\"x\"),t=P(e,o,s,n);r.push(new v({lineStart:F,lineEnd:t,targetPoint:E,isDraped:!1}))}return b&&L&&r.push(new y(E,r[0],r[1],!1)),r}};e([o({constructOnly:!0})],w.prototype,\"view\",void 0),e([o()],w.prototype,\"options\",void 0),e([o()],w.prototype,\"grid\",null),e([o()],w.prototype,\"effectiveViewRotation\",null),e([o()],w.prototype,\"gridRotation\",null),e([o()],w.prototype,\"gridCenter\",null),e([o()],w.prototype,\"offsetScaleFactor\",null),e([o()],w.prototype,\"spatialReference\",null),e([o()],w.prototype,\"gridMetersPerStride\",null),e([o()],w.prototype,\"viewMetersPerPixel\",null),e([o()],w.prototype,\"viewMetersPerSRUnit\",null),e([o()],w.prototype,\"pixelsPerStride\",null),e([o()],w.prototype,\"updating\",null),w=e([s(\"esri.views.interactive.snapping.GridSnappingEngine\")],w);const P=(e,t,r,i)=>{const n=m(e[0],e[1],e[2]);return a(n,a(n,n,r,t),r,i)},j=(e,t,r)=>{const i=(e[0]-r[0])/t,n=(e[1]-r[1])/t,o=Math.trunc(i),s=Math.trunc(n),a=Math.round(i%1),p=Math.round(n%1),l=r[0]+(o+a)*t,c=r[1]+(s+p)*t;return h(l,c)},R=(e,t,r,i,n)=>{if(i<=0)return{shouldSnapX:!1,shouldSnapY:!1};const o=(e[0]-t[0])/i,s=(e[1]-t[1])/i;return{shouldSnapX:Math.abs(o*n)<r,shouldSnapY:Math.abs(s*n)<r}},M=(e,t,r,i)=>{if(\"y\"===i){const i=t[0]>e[0]?1:-1;return h(e[0]+r*i,e[1])}const n=t[1]>e[1]?1:-1;return h(e[0],e[1]+r*n)};export{w as GridSnappingEngine};\n"],"names":["o","t","l","e","r","Math","round","log","a","u","i","y","spatialReference","isGeographic","isWebMercator","f","g","x","j","h","sqrt","M","R","U","b","WGS84","w","paths","G","W","constructor","super","this","options","destroy","_set","grid","view","effectiveViewRotation","rotateWithMap","rotation","gridRotation","gridCenter","center","isWrappable","z","getLogger","errorOnce","offsetScaleFactor","pixelsPerStride","majorLineInterval","dynamicScaling","gridMetersPerStride","spacing","units","viewMetersPerPixel","viewMetersPerSRUnit","scale","updating","fetchCandidates","n","effectiveGridEnabled","feature","attributes","coordinateHelper","arrayToPoint","s","distance","pointer","touchSensitivityMultiplier","fetchCandidatesSync","c","m","S","P","C","shouldSnapX","shouldSnapY","L","E","F","push","lineStart","lineEnd","targetPoint","isDraped","constructOnly","prototype","trunc","p","abs"],"sourceRoot":""}