"use strict";
(self["webpackChunkreact_redux_arcgis_boilerplate"] = self["webpackChunkreact_redux_arcgis_boilerplate"] || []).push([["vendors-node_modules_arcgis_core_webdoc_support_webdocSaveUtils_js"],{

/***/ "./node_modules/@arcgis/core/core/accessorSupport/originUtils.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/accessorSupport/originUtils.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   updateOrigins: function() { return /* binding */ i; }
/* harmony export */ });
/* harmony import */ var _multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../multiOriginJSONSupportUtils.js */ "./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function i(i){i?.writtenProperties&&i.writtenProperties.forEach((({target:i,propName:t,newOrigin:e})=>{(0,_multiOriginJSONSupportUtils_js__WEBPACK_IMPORTED_MODULE_0__.isMultiOriginJSONMixin)(i)&&e&&i.originOf(t)!==e&&i.updateOrigin(t,e)}))}


/***/ }),

/***/ "./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js":
/*!***********************************************************************!*\
  !*** ./node_modules/@arcgis/core/core/multiOriginJSONSupportUtils.js ***!
  \***********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   isMultiOriginJSONMixin: function() { return /* binding */ i; }
/* harmony export */ });
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
function i(i){return i&&"getAtOrigin"in i&&"originOf"in i}


/***/ }),

/***/ "./node_modules/@arcgis/core/portal/support/resourceUtils.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/portal/support/resourceUtils.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   addOrUpdateResources: function() { return /* binding */ a; },
/* harmony export */   contentToBlob: function() { return /* binding */ p; },
/* harmony export */   fetchResources: function() { return /* binding */ o; },
/* harmony export */   getSiblingOfSameType: function() { return /* binding */ f; },
/* harmony export */   getSiblingOfSameTypeI: function() { return /* binding */ m; },
/* harmony export */   removeAllResources: function() { return /* binding */ c; },
/* harmony export */   removeResource: function() { return /* binding */ n; },
/* harmony export */   splitPrefixFileNameAndExtension: function() { return /* binding */ i; }
/* harmony export */ });
/* harmony import */ var _request_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../request.js */ "./node_modules/@arcgis/core/request.js");
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
async function o(e,t={},s){await e.load(s);const o=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.join)(e.itemUrl,"resources"),{start:a=1,num:n=10,sortOrder:c="asc",sortField:l="resource"}=t,i={query:{start:a,num:n,sortOrder:c,sortField:l,token:e.apiKey},signal:s?.signal},u=await e.portal.request(o,i);return{total:u.total,nextStart:u.nextStart,resources:u.resources.map((({created:t,size:r,resource:s})=>({created:new Date(t),size:r,resource:e.resourceFromPath(s)})))}}async function a(e,s,o,a){const n=new Map;for(const{resource:r,content:i,compress:u,access:p}of s){if(!r.hasPath())throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"](`portal-item-resource-${o}:invalid-path`,"Resource does not have a valid path");const[e,s]=l(r.path),a=`${e}/${u??""}/${p??""}`;n.has(a)||n.set(a,{prefix:e,compress:u,access:p,files:[]});n.get(a).files.push({fileName:s,content:i})}await e.load(a);const c=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.join)(e.userItemUrl,"add"===o?"addResources":"updateResources");for(const{prefix:t,compress:r,access:l,files:i}of n.values()){const s=25;for(let o=0;o<i.length;o+=s){const n=i.slice(o,o+s),u=new FormData;t&&"."!==t&&u.append("resourcesPrefix",t),r&&u.append("compress","true"),l&&u.append("access",l);let p=0;for(const{fileName:e,content:t}of n)u.append("file"+ ++p,t,e);u.append("f","json"),await e.portal.request(c,{method:"post",body:u,signal:a?.signal})}}}async function n(e,s,o){if(!s.hasPath())throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_1__["default"]("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await e.load(o);const a=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.join)(e.userItemUrl,"removeResources");await e.portal.request(a,{method:"post",query:{resource:s.path},signal:o?.signal}),s.portalItem=null}async function c(e,t){await e.load(t);const s=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.join)(e.userItemUrl,"removeResources");return e.portal.request(s,{method:"post",query:{deleteAll:!0},signal:t?.signal})}function l(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function i(e){const[t,r]=u(e),[s,o]=l(t);return[s,o,r]}function u(e){const t=(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.getPathExtension)(e);return null==t?[e,""]:[e.slice(0,e.length-t.length-1),`.${t}`]}async function p(t){if("blob"===t.type)return t.blob;if("json"===t.type)return new Blob([t.jsonString],{type:"application/json"});return(await (0,_request_js__WEBPACK_IMPORTED_MODULE_0__["default"])(t.url,{responseType:"blob"})).data}function f(e,t){if(!e.hasPath())return null;const[s,,o]=i(e.path);return e.portalItem.resourceFromPath((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.join)(s,t+o))}function m(e,t){if(!e.hasPath())return null;const[s,,o]=i(e.path);return e.portalItem.resourceFromPath((0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_2__.join)(s,t+o))}


/***/ }),

/***/ "./node_modules/@arcgis/core/webdoc/support/resourceUtils.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@arcgis/core/webdoc/support/resourceUtils.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   saveResources: function() { return /* binding */ p; },
/* harmony export */   updateItemWithResources: function() { return /* binding */ n; }
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/promiseUtils.js */ "./node_modules/@arcgis/core/core/promiseUtils.js");
/* harmony import */ var _core_uuid_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/uuid.js */ "./node_modules/@arcgis/core/core/uuid.js");
/* harmony import */ var _portal_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../portal/support/resourceUtils.js */ "./node_modules/@arcgis/core/portal/support/resourceUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
async function p(e,t,r){const o=await u(e,t,r);await h(o,t,r)}async function n(e,t,r,o,s){const a=await u(r,o,s);await e.update({data:t}),await h(a,o,s)}async function u(o,p,n){if(!p?.resources)return;const u=p.portalItem===o.portalItem?new Set(o.paths):new Set;o.paths.length=0,o.portalItem=p.portalItem;const h=new Set(p.resources.toKeep.map((e=>e.resource.path))),i=new Set,m=[];h.forEach((e=>{u.delete(e),o.paths.push(e)}));const f=[],l=[],w=[];for(const e of p.resources.toUpdate)if(u.delete(e.resource.path),h.has(e.resource.path)||i.has(e.resource.path)){const{resource:t,content:r,finish:p}=e,n=(0,_portal_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_3__.getSiblingOfSameTypeI)(t,(0,_core_uuid_js__WEBPACK_IMPORTED_MODULE_2__.generateUUID)());o.paths.push(n.path),f.push({resource:n,content:await (0,_portal_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_3__.contentToBlob)(r),compress:e.compress}),p&&w.push((()=>p(n)))}else{o.paths.push(e.resource.path),l.push({resource:e.resource,content:await (0,_portal_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_3__.contentToBlob)(e.content),compress:e.compress});const t=e.finish;t&&w.push((()=>t(e.resource))),i.add(e.resource.path)}for(const e of p.resources.toAdd)if(o.paths.push(e.resource.path),u.has(e.resource.path))u.delete(e.resource.path);else{f.push({resource:e.resource,content:await (0,_portal_support_resourceUtils_js__WEBPACK_IMPORTED_MODULE_3__.contentToBlob)(e.content),compress:e.compress});const t=e.finish;t&&w.push((()=>t(e.resource)))}if(f.length||l.length){const{addOrUpdateResources:e}=await Promise.resolve(/*! import() */).then(__webpack_require__.bind(__webpack_require__, /*! ../../portal/support/resourceUtils.js */ "./node_modules/@arcgis/core/portal/support/resourceUtils.js"));await e(p.portalItem,f,"add",n),await e(p.portalItem,l,"update",n)}if(w.forEach((e=>e())),0===m.length)return u;const d=await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.allSettledErrors)(m);if((0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.throwIfAborted)(n),d.length>0)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("save:resources","Failed to save one or more resources",{errors:d});return u}async function h(e,t,r){if(!e||!t.portalItem)return;const s=[];for(const o of e){const e=t.portalItem.resourceFromPath(o);s.push(e.portalItem.removeResource(e,r))}await (0,_core_promiseUtils_js__WEBPACK_IMPORTED_MODULE_1__.eachAlways)(s)}


/***/ }),

/***/ "./node_modules/@arcgis/core/webdoc/support/saveUtils.js":
/*!***************************************************************!*\
  !*** ./node_modules/@arcgis/core/webdoc/support/saveUtils.js ***!
  \***************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   beforeSave: function() { return /* binding */ r; },
/* harmony export */   evaluateWriteErrors: function() { return /* binding */ t; }
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
async function r(e){const r=[];for(const o of e.allLayers)if("beforeSave"in o&&"function"==typeof o.beforeSave){const e=o.beforeSave();e&&r.push(e)}await Promise.allSettled(r)}const o=new Set(["layer:unsupported","property:unsupported","symbol:unsupported","symbol-layer:unsupported","url:unsupported"]);function t(r,t,n){let s=(r.messages??[]).filter((({type:e})=>"error"===e)).map((({name:r,message:o,details:t})=>new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](r,o,t)));if(r.blockedRelativeUrls&&(s=s.concat(r.blockedRelativeUrls.map((r=>new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"]("url:unsupported",`Relative url '${r}' is not supported`))))),n){const{ignoreUnsupported:e,supplementalUnsupportedErrors:r=[],requiredPropertyChecksDisabled:t}=n;e&&(s=s.filter((({name:e})=>!(o.has(e)||r.includes(e))))),t&&(s=s.filter((e=>"web-document-write:property-required"!==e.name)))}if(s.length>0)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](t.errorName,"Failed to save due to unsupported or invalid content. See 'details.errors' for more detailed information",{errors:s})}


/***/ }),

/***/ "./node_modules/@arcgis/core/webdoc/support/webdocSaveUtils.js":
/*!*********************************************************************!*\
  !*** ./node_modules/@arcgis/core/webdoc/support/webdocSaveUtils.js ***!
  \*********************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   createJSON: function() { return /* binding */ O; },
/* harmony export */   initializeNewItem: function() { return /* binding */ _e; },
/* harmony export */   isCopyAllowed: function() { return /* binding */ ge; },
/* harmony export */   save: function() { return /* binding */ A; },
/* harmony export */   saveAs: function() { return /* binding */ T; }
/* harmony export */ });
/* harmony import */ var _core_Error_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../core/Error.js */ "./node_modules/@arcgis/core/core/Error.js");
/* harmony import */ var _core_MultiOriginJSONSupport_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../core/MultiOriginJSONSupport.js */ "./node_modules/@arcgis/core/core/MultiOriginJSONSupport.js");
/* harmony import */ var _core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../core/reactiveUtils.js */ "./node_modules/@arcgis/core/core/reactiveUtils.js");
/* harmony import */ var _core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../core/urlUtils.js */ "./node_modules/@arcgis/core/core/urlUtils.js");
/* harmony import */ var _core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../core/accessorSupport/originUtils.js */ "./node_modules/@arcgis/core/core/accessorSupport/originUtils.js");
/* harmony import */ var _geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../geometry/SpatialReference.js */ "./node_modules/@arcgis/core/geometry/SpatialReference.js");
/* harmony import */ var _geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../geometry/support/spatialReferenceUtils.js */ "./node_modules/@arcgis/core/geometry/support/spatialReferenceUtils.js");
/* harmony import */ var _geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../geometry/support/webMercatorUtils.js */ "./node_modules/@arcgis/core/geometry/support/webMercatorUtils.js");
/* harmony import */ var _layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../layers/support/arcgisLayerUrl.js */ "./node_modules/@arcgis/core/layers/support/arcgisLayerUrl.js");
/* harmony import */ var _layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../layers/support/layerUtils.js */ "./node_modules/@arcgis/core/layers/support/layerUtils.js");
/* harmony import */ var _portal_Portal_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../portal/Portal.js */ "./node_modules/@arcgis/core/portal/Portal.js");
/* harmony import */ var _portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../../portal/PortalItem.js */ "./node_modules/@arcgis/core/portal/PortalItem.js");
/* harmony import */ var _portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../../portal/support/jsonContext.js */ "./node_modules/@arcgis/core/portal/support/jsonContext.js");
/* harmony import */ var _portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../../portal/support/portalItemUtils.js */ "./node_modules/@arcgis/core/portal/support/portalItemUtils.js");
/* harmony import */ var _rest_geometryService_project_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../../rest/geometryService/project.js */ "./node_modules/@arcgis/core/rest/geometryService/project.js");
/* harmony import */ var _rest_support_ProjectParameters_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../../rest/support/ProjectParameters.js */ "./node_modules/@arcgis/core/rest/support/ProjectParameters.js");
/* harmony import */ var _support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../../support/basemapUtils.js */ "./node_modules/@arcgis/core/support/basemapUtils.js");
/* harmony import */ var _resourceUtils_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./resourceUtils.js */ "./node_modules/@arcgis/core/webdoc/support/resourceUtils.js");
/* harmony import */ var _saveUtils_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./saveUtils.js */ "./node_modules/@arcgis/core/webdoc/support/saveUtils.js");
/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
const I=["NatGeo_World_Map","Ocean_Basemap","USA_Topo_Maps","World_Imagery","World_Street_Map","World_Terrain_Base","World_Topo_Map","World_Hillshade","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Reference/World_Boundaries_and_Places","Reference/World_Reference_Overlay","Reference/World_Transportation"].map((e=>e.toLowerCase()));async function A(e,t,r){r??={},U(e,t),await (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.whenOnce)((()=>!t.updatingFromView)),await t.load(),await E(t),await (0,_saveUtils_js__WEBPACK_IMPORTED_MODULE_18__.beforeSave)(t),await M(e,t);const a=t.portalItem,{json:i,jsonContext:n}=await O(t,a);return (0,_saveUtils_js__WEBPACK_IMPORTED_MODULE_18__.evaluateWriteErrors)(n,{errorName:`${e.name}:save`},r),await V(t,a),await ye(e,t,a,i,n),await Promise.all([t.updateItemThumbnail(),(0,_resourceUtils_js__WEBPACK_IMPORTED_MODULE_17__.saveResources)(t.resourceReferences,n)]),a}async function O(e,t){const o=(0,_portal_support_jsonContext_js__WEBPACK_IMPORTED_MODULE_12__.createForItemWrite)(t,"web-map",!0),r=e.write({},o);return await Promise.all(o.resources.pendingOperations),{json:r,jsonContext:o}}async function T(e,t,r,a){a??={};const i=D(e,r);await (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.whenOnce)((()=>!t.updatingFromView)),await t.load(),await E(t),await (0,_saveUtils_js__WEBPACK_IMPORTED_MODULE_18__.beforeSave)(t),await M(e,t);const{json:n,jsonContext:s}=await O(t,i);(0,_saveUtils_js__WEBPACK_IMPORTED_MODULE_18__.evaluateWriteErrors)(s,{errorName:`${e.name}:save`},a),await X(t,i);const l=t.getThumbnailState();return await he(e,t,i,n,s,a)&&(t.resourceReferences.portalItem=i),t.restoreThumbnailFromState(l),await Promise.all([t.updateItemThumbnail(),(0,_resourceUtils_js__WEBPACK_IMPORTED_MODULE_17__.saveResources)(t.resourceReferences,s)]),i}function U(t,o){if(!o.portalItem)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${t.name}:portal-item-not-set`,"Portal item to save to has not been set on the WebMap");C(t,o.portalItem)}function C(t,o){if(o.type!==t.itemType)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${t.name}:portal-item-wrong-type`,`Portal item needs to have type "${t.itemType}"`)}async function M(t,r){if(!r.basemap?.baseLayers.length)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${t.name}:save`,"Map does not have a valid basemap with a base layer.");let a=null;if(await (0,_core_reactiveUtils_js__WEBPACK_IMPORTED_MODULE_2__.whenOnce)((()=>{const e=(0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_16__.findSpatialReference)(r.initialViewProperties,r.basemap);return a=e.spatialReference,!e.updating})),!(0,_geometry_support_spatialReferenceUtils_js__WEBPACK_IMPORTED_MODULE_6__.equals)(a,r.initialViewProperties.spatialReference))throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${t.name}:save`,"The spatial reference of the basemap is not compatible with the one from the map.",{expected:r.initialViewProperties.spatialReference,actual:a})}function D(e,t){let o=_portal_PortalItem_js__WEBPACK_IMPORTED_MODULE_11__["default"].from(t);return o.id&&(o=o.clone(),o.id=null),o.type||(o.type=e.itemType),o.portal||(o.portal=_portal_Portal_js__WEBPACK_IMPORTED_MODULE_10__["default"].getDefault()),C(e,o),o}function E(e){const t=[];return e.basemap&&t.push(e.basemap.load()),e.ground&&t.push(e.ground.load()),Promise.allSettled(t).then((()=>{}))}async function V(e,t){t.extent=await pe(e.portalItem,e.initialViewProperties.viewpoint.targetGeometry),await Y(e,t)}const k=_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.typeKeyword.JSAPI,x="CollectorDisabled",G="Collector",L="Data Editing",N="OfflineDisabled",$="Offline",B="Workforce Project",F="Workforce Worker",K="Workforce Dispatcher",H="Offline Map Areas",J="FieldMapsDisabled",q=_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.typeKeyword.DEVELOPER_BASEMAP,z="UtilityNetwork",Q="IPS";async function X(e,t){(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,x),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,J),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.typeKeyword.METADATA),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,N),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,H),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,K),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,B),(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,F),await V(e,t)}async function Y(e,t){(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t,k),await Z(e),re(e,t),ae(e,t),ie(e,t),ne(e,t),se(e,t),le(e,t),t.typeKeywords&&(t.typeKeywords=t.typeKeywords.filter(((e,t,o)=>o.indexOf(e)===t)))}function Z(e){const t=ee(e).map((e=>e.load())).toArray();return Promise.allSettled(t).then((()=>{}))}function ee(e){return e.allLayers.concat(e.allTables)}function te(e){return ee(e).some((e=>e.loaded&&(0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_9__.isLayerWithFeatureLayerSource)(e)&&e.capabilities.operations.supportsEditing&&e.editingEnabled&&("subtype-group"!==e.type||e.sublayers.some((e=>e.editingEnabled)))))}function oe(e){return ee(e).filter((e=>"group"!==e.type)).every((t=>t.loaded&&me(e,t)))}function re(e,t){(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.hasTypeKeyword)(t,x)||(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.hasTypeKeyword)(t,B)||(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.hasTypeKeyword)(t,F)||(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.hasTypeKeyword)(t,K)||!te(e)?(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,G):(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t,G)}function ae(e,t){te(e)?(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t,L):(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,L)}function ie(e,t){!(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.hasTypeKeyword)(t,N)&&oe(e)?(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t,$):(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,$)}function ne(e,t){(0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_16__.hasDeveloperBasemapLayer)(e.basemap)?(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t,q):(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,q)}function se(e,t){e.utilityNetworks?.length?(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t,z):(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,z)}function le(e,t){e.ipsInfo?(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.addTypeKeyword)(t,Q):(0,_portal_support_portalItemUtils_js__WEBPACK_IMPORTED_MODULE_13__.removeTypeKeyword)(t,Q)}async function pe(e,t){const o=t.clone().normalize();let r;if(o.length>1)for(const a of o)r?a.width>r.width&&(r=a):r=a;else r=o[0];return ce(e,r)}async function ce(e,t){const o=t.spatialReference;if(o.isWGS84)return t.clone();if(o.isWebMercator)return (0,_geometry_support_webMercatorUtils_js__WEBPACK_IMPORTED_MODULE_7__.webMercatorToGeographic)(t);const{getGeometryServiceURL:r}=await __webpack_require__.e(/*! import() */ "node_modules_arcgis_core_portal_support_geometryServiceUtils_js").then(__webpack_require__.bind(__webpack_require__, /*! ../../portal/support/geometryServiceUtils.js */ "./node_modules/@arcgis/core/portal/support/geometryServiceUtils.js")),a=await r(e),i=new _rest_support_ProjectParameters_js__WEBPACK_IMPORTED_MODULE_15__["default"]({geometries:[t],outSpatialReference:_geometry_SpatialReference_js__WEBPACK_IMPORTED_MODULE_5__["default"].WGS84});return(await (0,_rest_geometryService_project_js__WEBPACK_IMPORTED_MODULE_14__.project)(a,i))[0]}function ue(e){return (0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_9__.isFeatureCollectionLayer)(e)||"map-notes"===e.type||"route"===e.type}function me(e,t){return (0,_layers_support_layerUtils_js__WEBPACK_IMPORTED_MODULE_9__.isLayerWithFeatureLayerSource)(t)&&t.capabilities.operations.supportsSync||ue(t)&&!t.portalItem||fe(t)&&!de(t)&&t.spatialReference.equals(e.initialViewProperties.spatialReference)}function fe(e){return("tile"===e.type||"vector-tile"===e.type)&&(e.capabilities.operations.supportsExportTiles||we(e)||(0,_support_basemapUtils_js__WEBPACK_IMPORTED_MODULE_16__.isDeveloperBasemapLayer)(e))}function de(e){return"vector-tile"===e.type&&Object.keys(e.sourceNameToSource).length>1}function we(e){return"tile"===e.type&&((0,_layers_support_arcgisLayerUrl_js__WEBPACK_IMPORTED_MODULE_8__.isServerOrServicesAGOLUrl)(e.url)&&I.some((t=>e.url?.toLowerCase().includes("/"+t+"/"))))}async function ye(e,t,o,r,a){await o.update({data:r}),be(e,t,o,r,a)}async function he(t,o,r,a,i,n){const s=o.portalItem,l={item:s,authenticated:!(!s?.id||!s.portal.user)},p=r.portal;await p.signIn();const{copyAllowed:c,itemReloaded:u}=await ge(l,p);if(l.authenticated||=u,!c)throw new _core_Error_js__WEBPACK_IMPORTED_MODULE_0__["default"](`${t.name}:save-as-copy-not-allowed`,"Owner of this map does not allow others to save a copy");const m=await _e(r,l,a,n);return o.portalItem=r,be(t,o,r,a,i),m}async function ge(e,t){const{item:o,authenticated:r}=e;return o?.id&&o.typeKeywords?.includes("useOnly")?o.portal.portalHostname!==t.portalHostname?{copyAllowed:!1,itemReloaded:!1}:(r||await o.reload(),{copyAllowed:"admin"===o.itemControl||"update"===o.itemControl,itemReloaded:!0}):{copyAllowed:!0,itemReloaded:!1}}async function _e(e,t,o,a){const i=e.portal,{item:n}=t,{folder:s,copyAllResources:l}=a;let p=!1;if(l&&n?.id&&(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.hasSameCanonicalPortal)(n.portal.url,i.url)&&parseInt(n.portal.currentVersion,10)>=2023){const{total:e}=await n.fetchResources();p=!!e}if(p){const t=await n.copy({copyResources:"all",folder:s});e.id=t.id,e.portal=t.portal;const r=e.toJSON();await e.load(),e.read(r),await e.update({data:o})}else await i.user.addItem({item:e,folder:s,data:o});return p}function be(e,o,r,n,s){_core_MultiOriginJSONSupport_js__WEBPACK_IMPORTED_MODULE_1__.MultiOriginJSONSupport.prototype.read.call(o,{version:n.version,authoringApp:n.authoringApp,authoringAppVersion:n.authoringAppVersion},{origin:e.origin,ignoreDefaults:!0,url:r.itemUrl?(0,_core_urlUtils_js__WEBPACK_IMPORTED_MODULE_3__.urlToObject)(r.itemUrl):void 0}),(0,_core_accessorSupport_originUtils_js__WEBPACK_IMPORTED_MODULE_4__.updateOrigins)(s),o.resourceInfo=n}


/***/ })

}]);
//# sourceMappingURL=vendors-node_modules_arcgis_core_webdoc_support_webdocSaveUtils_js.4abd0692db6a005e872b.js.map