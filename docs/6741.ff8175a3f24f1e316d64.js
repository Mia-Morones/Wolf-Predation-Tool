"use strict";(self.webpackChunkreact_redux_arcgis_boilerplate=self.webpackChunkreact_redux_arcgis_boilerplate||[]).push([[6741],{18546:function(e,t,r){r.d(t,{a:function(){return s},f:function(){return i},n:function(){return o}});var n=r(62088);function o(e,t){s(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function s(e,t,r=2,o=r){const s=t.length/2;let i=0,u=0;if((0,n.cy)(t)||(0,n.dk)(t)){for(let n=0;n<s;++n)e[i]=t[u],e[i+1]=t[u+1],i+=r,u+=o;return}const a=(0,n.a3)(t);if((0,n.JI)(t))for(let n=0;n<s;++n)e[i]=Math.max(t[u]/a,-1),e[i+1]=Math.max(t[u+1]/a,-1),i+=r,u+=o;else for(let n=0;n<s;++n)e[i]=t[u]/a,e[i+1]=t[u+1]/a,i+=r,u+=o}function i(e,t,r,n){const o=e.typedBuffer,s=e.typedBufferStride,i=n?.count??e.count;let u=(n?.dstIndex??0)*s;for(let e=0;e<i;++e)o[u]=t,o[u+1]=r,u+=s}Object.freeze(Object.defineProperty({__proto__:null,fill:i,normalizeIntegerBuffer:s,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:"Module"}))},72449:function(e,t,r){r.d(t,{a:function(){return c},b:function(){return i},c:function(){return s},d:function(){return n},e:function(){return l},f:function(){return a},n:function(){return f},s:function(){return u},t:function(){return o}});r(6273),r(80861);function n(e,t,r){o(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function o(e,t,r,n=3,o=n){if(e.length/n!==Math.ceil(t.length/o))return e;const s=e.length/n,i=r[0],u=r[1],a=r[2],c=r[4],l=r[5],f=r[6],d=r[8],m=r[9],p=r[10],y=r[12],h=r[13],g=r[14];let x=0,b=0;for(let r=0;r<s;r++){const r=t[x],s=t[x+1],w=t[x+2];e[b]=i*r+c*s+d*w+y,e[b+1]=u*r+l*s+m*w+h,e[b+2]=a*r+f*s+p*w+g,x+=o,b+=n}return e}function s(e,t,r){i(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function i(e,t,r,n=3,o=n){if(e.length/n!==Math.ceil(t.length/o))return;const s=e.length/n,i=r[0],u=r[1],a=r[2],c=r[3],l=r[4],f=r[5],d=r[6],m=r[7],p=r[8];let y=0,h=0;for(let r=0;r<s;r++){const r=t[y],s=t[y+1],g=t[y+2];e[h]=i*r+c*s+d*g,e[h+1]=u*r+l*s+m*g,e[h+2]=a*r+f*s+p*g,y+=o,h+=n}}function u(e,t,r){a(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function a(e,t,r,n=3,o=n){const s=Math.min(e.length/n,t.length/o);let i=0,u=0;for(let a=0;a<s;a++)e[u]=r*t[i],e[u+1]=r*t[i+1],e[u+2]=r*t[i+2],i+=o,u+=n;return e}function c(e,t,r,n=3,o=n){const s=e.length/n;if(s!==Math.ceil(t.length/o))return e;let i=0,u=0;for(let a=0;a<s;a++)e[u]=t[i]+r[0],e[u+1]=t[i+1]+r[1],e[u+2]=t[i+2]+r[2],i+=o,u+=n;return e}function l(e,t){f(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function f(e,t,r=3,n=r){const o=Math.min(e.length/r,t.length/n);let s=0,i=0;for(let u=0;u<o;u++){const o=t[s],u=t[s+1],a=t[s+2],c=o*o+u*u+a*a;if(c>0){const t=1/Math.sqrt(c);e[i]=t*o,e[i+1]=t*u,e[i+2]=t*a}s+=n,i+=r}}Object.freeze(Object.defineProperty({__proto__:null,normalize:f,normalizeView:l,scale:a,scaleView:u,shiftRight:function(e,t,r){const n=Math.min(e.count,t.count),o=e.typedBuffer,s=e.typedBufferStride,i=t.typedBuffer,u=t.typedBufferStride;let a=0,c=0;for(let e=0;e<n;e++)o[c]=i[a]>>r,o[c+1]=i[a+1]>>r,o[c+2]=i[a+2]>>r,a+=u,c+=s},transformMat3:i,transformMat3View:s,transformMat4:o,transformMat4View:n,translate:c},Symbol.toStringTag,{value:"Module"}))},80820:function(e,t,r){function n(e,t){o(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function o(e,t,r=3,n=r){const o=t.length/n;let s=0,i=0;for(let u=0;u<o;++u)e[s]=t[i],e[s+1]=t[i+1],e[s+2]=t[i+2],s+=r,i+=n}function s(e,t,r,n,o){const s=e.typedBuffer,i=e.typedBufferStride,u=o?.count??e.count;let a=(o?.dstIndex??0)*i;for(let e=0;e<u;++e)s[a]=t,s[a+1]=r,s[a+2]=n,a+=i}r.d(t,{a:function(){return n},c:function(){return o},f:function(){return s}});Object.freeze(Object.defineProperty({__proto__:null,copy:o,copyView:n,fill:s},Symbol.toStringTag,{value:"Module"}))},66335:function(e,t,r){r.d(t,{a:function(){return o},b:function(){return a},n:function(){return i},s:function(){return u},t:function(){return s}});r(6273);var n=r(80861);function o(e,t,r){s(e.typedBuffer,t.typedBuffer,r,e.typedBufferStride,t.typedBufferStride)}function s(e,t,r,n=4,o=n){if(e.length/n!=t.length/o)return;const s=e.length/n,i=r[0],u=r[1],a=r[2],c=r[3],l=r[4],f=r[5],d=r[6],m=r[7],p=r[8];let y=0,h=0;for(let r=0;r<s;r++){const r=t[y],s=t[y+1],g=t[y+2],x=t[y+3];e[h]=i*r+c*s+d*g,e[h+1]=u*r+l*s+m*g,e[h+2]=a*r+f*s+p*g,e[h+3]=x,y+=o,h+=n}}function i(e,t){const r=Math.min(e.count,t.count),n=e.typedBuffer,o=e.typedBufferStride,s=t.typedBuffer,i=t.typedBufferStride;for(let e=0;e<r;e++){const t=e*o,r=e*i,u=s[r],a=s[r+1],c=s[r+2],l=u*u+a*a+c*c;if(l>0){const e=1/Math.sqrt(l);n[t]=e*u,n[t+1]=e*a,n[t+2]=e*c}}}function u(e,t,r){a(e.typedBuffer,t,r,e.typedBufferStride)}function a(e,t,r,n=4){const o=Math.min(e.length/n,t.count),s=t.typedBuffer,i=t.typedBufferStride;let u=0,a=0;for(let t=0;t<o;t++)e[a]=r*s[u],e[a+1]=r*s[u+1],e[a+2]=r*s[u+2],e[a+3]=r*s[u+3],u+=i,a+=n}Object.freeze(Object.defineProperty({__proto__:null,normalize:i,scale:a,scaleView:u,transformMat3:s,transformMat3View:o,transformMat4:function(e,t,r,o=4,s=o){if(e.length/o!=t.length/s)return void n.A.getLogger("esri.views.3d.support.buffer.math").error("source and destination buffers need to have the same number of elements");const i=e.length/o,u=r[0],a=r[1],c=r[2],l=r[3],f=r[4],d=r[5],m=r[6],p=r[7],y=r[8],h=r[9],g=r[10],x=r[11],b=r[12],w=r[13],v=r[14],B=r[15];let T=0,S=0;for(let r=0;r<i;r++){const r=t[T],n=t[T+1],i=t[T+2],M=t[T+3];e[S]=u*r+f*n+y*i+b*M,e[S+1]=a*r+d*n+h*i+w*M,e[S+2]=c*r+m*n+g*i+v*M,e[S+3]=l*r+p*n+x*i+B*M,T+=s,S+=o}},transformMat4View:function(e,t,r){if(e.count!==t.count)return;const n=e.count,o=r[0],s=r[1],i=r[2],u=r[3],a=r[4],c=r[5],l=r[6],f=r[7],d=r[8],m=r[9],p=r[10],y=r[11],h=r[12],g=r[13],x=r[14],b=r[15],w=e.typedBuffer,v=e.typedBufferStride,B=t.typedBuffer,T=t.typedBufferStride;for(let e=0;e<n;e++){const t=e*v,r=e*T,n=B[r],S=B[r+1],M=B[r+2],R=B[r+3];w[t]=o*n+a*S+d*M+h*R,w[t+1]=s*n+c*S+m*M+g*R,w[t+2]=i*n+l*S+p*M+x*R,w[t+3]=u*n+f*S+y*M+b*R}}},Symbol.toStringTag,{value:"Module"}))},22715:function(e,t,r){function n(e,t){o(e.typedBuffer,t,e.typedBufferStride)}function o(e,t,r=4){const n=t.typedBuffer,o=t.typedBufferStride,s=t.count;let i=0,u=0;for(let t=0;t<s;++t)e[i]=n[u],e[i+1]=n[u+1],e[i+2]=n[u+2],e[i+3]=n[u+3],i+=r,u+=o}function s(e,t,r,n,o,s){const i=e.typedBuffer,u=e.typedBufferStride,a=s?.count??e.count;let c=(s?.dstIndex??0)*u;for(let e=0;e<a;++e)i[c]=t,i[c+1]=r,i[c+2]=n,i[c+3]=o,c+=u}r.d(t,{a:function(){return o},c:function(){return n},f:function(){return s}});Object.freeze(Object.defineProperty({__proto__:null,copy:o,copyView:n,fill:s},Symbol.toStringTag,{value:"Module"}))},85012:function(e,t,r){function n(e){return e=e||globalThis.location.hostname,c.some((t=>null!=e?.match(t)))}function o(e,t){return e?(t=t||globalThis.location.hostname)?null!=t.match(s)||null!=t.match(u)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(i)||null!=t.match(a)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e:null}r.d(t,{EM:function(){return o},b5:function(){return n}});const s=/^devext\.arcgis\.com$/,i=/^qaext\.arcgis\.com$/,u=/^[\w-]*\.mapsdevext\.arcgis\.com$/,a=/^[\w-]*\.mapsqa\.arcgis\.com$/,c=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local\.esri\.com$/,s,i,/^jsapps\.esri\.com$/,u,a]},22380:function(e,t,r){r.d(t,{R:function(){return a}});var n=r(38116),o=r(3132),s=r(62991),i=r(37623),u=r(19759);class a{constructor(e){this._streamDataRequester=e}async loadJSON(e,t){return this._load("json",e,t)}async loadBinary(e,t){return(0,u.DB)(e)?((0,i.Te)(t),(0,u.lJ)(e)):this._load("binary",e,t)}async loadImage(e,t){return this._load("image",e,t)}async _load(e,t,r){if(null==this._streamDataRequester)return(await(0,n.A)(t,{responseType:c[e]})).data;const u=await(0,o.Ke)(this._streamDataRequester.request(t,e,r));if(!0===u.ok)return u.value;throw(0,i.QP)(u.error),new s.A("glt-loader-request-error",`Request for resource failed: ${u.error}`)}}const c={image:"image",binary:"array-buffer",json:"json","image+type":void 0}},61764:function(e,t,r){r.d(t,{G:function(){return i}});var n=r(79441),o=r(14571),s=r(82541);function i(e){if(null==e)return null;const t=null!=e.offset?e.offset:o.uY,r=null!=e.rotation?e.rotation:0,i=null!=e.scale?e.scale:o.Un,u=(0,n.fA)(1,0,0,0,1,0,t[0],t[1],1),a=(0,n.fA)(Math.cos(r),-Math.sin(r),0,Math.sin(r),Math.cos(r),0,0,0,1),c=(0,n.fA)(i[0],0,0,0,i[1],0,0,0,1),l=(0,n.vt)();return(0,s.lw)(l,a,c),(0,s.lw)(l,u,l),l}},82021:function(e,t,r){r.d(t,{x:function(){return i}});var n=r(62088),o=r(51831),s=r(68716);function i(e,t){switch(t){case s.WR.TRIANGLES:return"number"==typeof(r=e)?(0,o.tM)(r):(0,n.mg)(r)?new Uint16Array(r):r;case s.WR.TRIANGLE_STRIP:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return[];const r=t-2,n=(0,o.my)(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;t+=1)t%2==0?(n[e++]=t,n[e++]=t+1,n[e++]=t+2):(n[e++]=t+1,n[e++]=t,n[e++]=t+2)}else{let t=0;for(let o=0;o<r;o+=1)o%2==0?(n[t++]=e[o],n[t++]=e[o+1],n[t++]=e[o+2]):(n[t++]=e[o+1],n[t++]=e[o],n[t++]=e[o+2])}return n}(e);case s.WR.TRIANGLE_FAN:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const r=t-2,n=r<=65536?new Uint16Array(3*r):new Uint32Array(3*r);if("number"==typeof e){let e=0;for(let t=0;t<r;++t)n[e++]=0,n[e++]=t+1,n[e++]=t+2;return n}const o=e[0];let s=e[1],i=0;for(let t=0;t<r;++t){const r=e[t+2];n[i++]=o,n[i++]=s,n[i++]=r,s=r}return n}(e)}var r}},17079:function(e,t,r){r.d(t,{KB:function(){return u},Xi:function(){return s},pn:function(){return a},x3:function(){return i}});var n=r(6273),o=r(10875);class s{constructor(e){this.data=e,this.type="encoded-mesh-texture",this.encoding=o.JS.KTX2_ENCODING}}function i(e){return"encoded-mesh-texture"===e?.type}async function u(e){const t=new Blob([e]),r=await t.text();return JSON.parse(r)}async function a(e,t){if(t===o.JS.KTX2_ENCODING)return new s(e);const r=new Blob([e],{type:t}),i=URL.createObjectURL(r),u=new Image;if((0,n.A)("esri-iPhone"))return new Promise(((e,t)=>{const r=()=>{o(),e(u)},n=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(i),u.removeEventListener("load",r),u.removeEventListener("error",n)};u.addEventListener("load",r),u.addEventListener("error",n),u.src=i}));try{u.src=i,await u.decode()}catch(e){}return URL.revokeObjectURL(i),u}},6741:function(e,t,r){r.d(t,{fetch:function(){return ee}});var n=r(85012),o=r(4506),s=r(82541),i=r(79441),u=r(25336),a=r(26110),c=r(56560),l=r(80347),f=r(19913),d=r(46373),m=r(68435),p=r(40041),y=r(72449),h=r(66335),g=r(18546),x=r(80820),b=r(22715),w=r(22380),v=r(82021),B=r(17079),T=r(61764);class S{constructor(){this.geometries=new Array,this.materials=new Array,this.textures=new Array}}class M{constructor(e,t,r){this.name=e,this.lodThreshold=t,this.pivotOffset=r,this.stageResources=new S,this.numberOfVertices=0}}var R=r(38116),A=r(3132),O=r(88188),I=r(62991),E=r(80861),_=r(13926),P=r(37623),U=r(27805),L=r(51831),C=r(60938),F=r(10941),N=r(10875),j=r(16869),k=r(41038),q=r(33763),V=r(14103),G=r(68716);const $=()=>E.A.getLogger("esri.views.3d.layers.graphics.objectResourceUtils");async function z(e,t){const r=await async function(e,t){const r=t?.streamDataRequester;if(r)return async function(e,t,r){const n=await(0,A.Ke)(t.request(e,"json",r));if(!0===n.ok)return n.value;(0,P.QP)(n.error),D(n.error.details.url)}(e,r,t);const n=await(0,A.Ke)((0,R.A)(e,t));if(!0===n.ok)return n.value.data;(0,P.QP)(n.error),D(n.error)}(e,t),n=await async function(e,t){const r=new Array;for(const n in e){const o=e[n],s=o.images[0].data;if(!s){$().warn("Externally referenced texture data is not yet supported");continue}const i=o.encoding+";base64,"+s,u="/textureDefinitions/"+n,a="rgba"===o.channels?o.alphaChannelUsage||"transparency":"none",c={noUnpackFlip:!0,wrap:{s:G.pF.REPEAT,t:G.pF.REPEAT},preMultiplyAlpha:K(a)!==N.sf.Opaque},l=t?.disableTextures?Promise.resolve(null):(0,C.D)(i,t);r.push(l.then((e=>({refId:u,image:e,parameters:c,alphaChannelUsage:a}))))}const n=await Promise.all(r),o={};for(const e of n)o[e.refId]=e;return o}(r.textureDefinitions??{},t);let o=0;for(const e in n)if(n.hasOwnProperty(e)){const t=n[e];o+=t?.image?t.image.width*t.image.height*4:0}return{resource:r,textures:n,size:o+(0,O.iL)(r)}}function D(e){throw new I.A("",`Request for object resource failed: ${e}`)}function W(e){const t=e.params,r=t.topology;let n=!0;switch(t.vertexAttributes||($().warn("Geometry must specify vertex attributes"),n=!1),t.topology){case"PerAttributeArray":break;case"Indexed":case null:case void 0:{const e=t.faces;if(e){if(t.vertexAttributes)for(const r in t.vertexAttributes){const t=e[r];t?.values?(null!=t.valueType&&"UInt32"!==t.valueType&&($().warn(`Unsupported indexed geometry indices type '${t.valueType}', only UInt32 is currently supported`),n=!1),null!=t.valuesPerElement&&1!==t.valuesPerElement&&($().warn(`Unsupported indexed geometry values per element '${t.valuesPerElement}', only 1 is currently supported`),n=!1)):($().warn(`Indexed geometry does not specify face indices for '${r}' attribute`),n=!1)}}else $().warn("Indexed geometries must specify faces"),n=!1;break}default:$().warn(`Unsupported topology '${r}'`),n=!1}e.params.material||($().warn("Geometry requires material"),n=!1);const o=e.params.vertexAttributes;for(const e in o)o[e].values||($().warn("Geometries with externally defined attributes are not yet supported"),n=!1);return n}function J(e){const t=(0,d.Ie)();return e.forEach((e=>{const r=e.boundingInfo;null!=r&&((0,d.iT)(t,r.bbMin),(0,d.iT)(t,r.bbMax))})),t}function K(e){switch(e){case"mask":return N.sf.Mask;case"maskAndTransparency":return N.sf.MaskBlend;case"none":return N.sf.Opaque;default:return N.sf.Blend}}function X(e){const t=e.params;return{id:1,material:t.material,texture:t.texture,region:t.texture}}const Q=new U.R(1,2,"wosr");var H=r(3525),Y=r(33550),Z=r(40327);async function ee(e,t){const i=function(e){const t=e.match(/(.*\.(gltf|glb))(\?lod=([0-9]+))?$/);return t?{fileType:"gltf",url:t[1],specifiedLodIndex:null!=t[4]?Number(t[4]):null}:e.match(/(.*\.(json|json\.gz))$/)?{fileType:"wosr",url:e,specifiedLodIndex:null}:{fileType:"unknown",url:e,specifiedLodIndex:null}}((0,n.EM)(e));if("wosr"===i.fileType){const e=await(t.cache?t.cache.loadWOSR(i.url,t):z(i.url,t)),{engineResources:r,referenceBoundingBox:n}=function(e,t){const r=new Array,n=new Array,o=new Array,s=new _.O,i=e.resource,u=U.R.parse(i.version||"1.0","wosr");Q.validate(u);const a=i.model.name,c=i.model.geometries,l=i.materialDefinitions??{},d=e.textures;let m=0;const p=new Map;for(let e=0;e<c.length;e++){const i=c[e];if(!W(i))continue;const u=X(i),a=i.params.vertexAttributes,y=[],h=e=>{if("PerAttributeArray"===i.params.topology)return null;const t=i.params.faces;for(const r in t)if(r===e)return t[r].values;return null},g=a[q.r.POSITION],x=g.values.length/g.valuesPerElement;for(const e in a){const t=a[e],r=t.values,n=h(e)??(0,L.tM)(x);y.push([e,new F.n(r,n,t.valuesPerElement,!0)])}const b=u.texture,w=d&&d[b];if(w&&!p.has(b)){const{image:e,parameters:t}=w,r=new k.g(e,t);n.push(r),p.set(b,r)}const v=p.get(b),B=v?v.id:void 0,T=u.material;let S=s.get(T,b);if(null==S){const e=l[T.slice(T.lastIndexOf("/")+1)].params;1===e.transparency&&(e.transparency=0);const r=w&&w.alphaChannelUsage,n=e.transparency>0||"transparency"===r||"maskAndTransparency"===r,o=w?K(w.alphaChannelUsage):void 0,i={ambient:(0,f.ci)(e.diffuse),diffuse:(0,f.ci)(e.diffuse),opacity:1-(e.transparency||0),transparent:n,textureAlphaMode:o,textureAlphaCutoff:.33,textureId:B,initTextureTransparent:!0,doubleSided:!0,cullFace:N.s2.None,colorMixMode:e.externalColorMixMode||"tint",textureAlphaPremultiplied:w?.parameters.preMultiplyAlpha??!1};t?.materialParameters&&Object.assign(i,t.materialParameters),S=new V.$U(i,t),s.set(T,b,S)}o.push(S);const M=new j.V(S,y);m+=y.find((e=>e[0]===q.r.POSITION))?.[1]?.indices.length??0,r.push(M)}return{engineResources:[{name:a,stageResources:{textures:n,materials:o,geometries:r},pivotOffset:i.model.pivotOffset,numberOfVertices:m,lodThreshold:null}],referenceBoundingBox:J(r)}}(e,t);return{lods:r,referenceBoundingBox:n,isEsriSymbolResource:!1,isWosr:!0}}let S;if(t.cache)S=await t.cache.loadGLTF(i.url,t,!!t.usePBR);else{const{loadGLTF:e}=await r.e(6400).then(r.bind(r,66400));S=await e(new w.R(t.streamDataRequester),i.url,t,t.usePBR)}const R=S.model.meta?.ESRI_proxyEllipsoid,A=S.meta.isEsriSymbolResource&&null!=R&&"EsriRealisticTreesStyle"===S.meta.ESRI_webstyle;A&&!S.customMeta.esriTreeRendering&&(S.customMeta.esriTreeRendering=!0,function(e,t){for(let r=0;r<e.model.lods.length;++r){const n=e.model.lods[r];for(const o of n.parts){const n=o.attributes.normal;if(null==n)return;const s=o.attributes.position,i=s.count,c=(0,f.vt)(),d=(0,f.vt)(),m=(0,f.vt)(),y=new Uint8Array(4*i),h=new Float64Array(3*i),g=(0,u.B8)((0,a.vt)(),o.transform);let x=0,b=0;for(let u=0;u<i;u++){s.getVec(u,d),n.getVec(u,c),(0,l.t)(d,d,o.transform),(0,l.d)(m,d,t.center),(0,l.E)(m,m,t.radius);const i=m[2],a=(0,l.l)(m),f=Math.min(.45+.55*a*a,1);(0,l.E)(m,m,t.radius),null!==g&&(0,l.t)(m,m,g),(0,l.n)(m,m),r+1!==e.model.lods.length&&e.model.lods.length>1&&(0,l.m)(m,m,c,i>-1?.2:Math.min(-4*i-3.8,1)),h[x]=m[0],h[x+1]=m[1],h[x+2]=m[2],x+=3,y[b]=255*f,y[b+1]=255*f,y[b+2]=255*f,y[b+3]=255,b+=4}o.attributes.normal=new p.xs(h),o.attributes.color=new p.XP(y)}}}(S,R));const O=!!t.usePBR,I=S.meta.isEsriSymbolResource?{usePBR:O,isSchematic:!1,treeRendering:A,mrrFactors:Z.SY}:{usePBR:O,isSchematic:!1,treeRendering:!1,mrrFactors:Z.mb},E={...t.materialParameters,treeRendering:A},{engineResources:P,referenceBoundingBox:C}=function(e,t,r,n,i){const u=e.model,a=new Array,l=new Map,f=new Map,w=u.lods.length,S=(0,d.Ie)();return u.lods.forEach(((e,R)=>{const A=!0===n.skipHighLods&&(w>1&&0===R||w>3&&1===R)||!1===n.skipHighLods&&null!=i&&R!==i;if(A&&0!==R)return;const O=new M(e.name,e.lodThreshold,[0,0,0]);e.parts.forEach((e=>{const i=A?new V.$U({},n):function(e,t,r,n,o,s,i,u){const a=t.material+(t.attributes.normal?"_normal":"")+(t.attributes.color?"_color":"")+(t.attributes.texCoord0?"_texCoord0":"")+(t.attributes.tangent?"_tangent":""),l=e.materials.get(t.material),f=null!=t.attributes.texCoord0,d=null!=t.attributes.normal;if(null==l)return null;const m=function(e){switch(e){case"BLEND":return N.sf.Blend;case"MASK":return N.sf.Mask;case"OPAQUE":case null:case void 0:return N.sf.Opaque}}(l.alphaMode);if(!s.has(a)){if(f){const t=(t,r=!1)=>{if(null!=t&&!i.has(t)){const n=e.textures.get(t);if(null!=n){const e=n.data;i.set(t,new k.g((0,B.x3)(e)?e.data:e,{...n.parameters,preMultiplyAlpha:!(0,B.x3)(e)&&r,encoding:(0,B.x3)(e)&&null!=e.encoding?e.encoding:void 0}))}}};t(l.textureColor,m!==N.sf.Opaque),t(l.textureNormal),t(l.textureOcclusion),t(l.textureEmissive),t(l.textureMetallicRoughness)}const r=l.color[0]**(1/Y.T),p=l.color[1]**(1/Y.T),y=l.color[2]**(1/Y.T),h=l.emissiveFactor[0]**(1/Y.T),g=l.emissiveFactor[1]**(1/Y.T),x=l.emissiveFactor[2]**(1/Y.T),b=null!=l.textureColor&&f?i.get(l.textureColor):null,w=(0,Z.Jr)({normalTexture:l.textureNormal,metallicRoughnessTexture:l.textureMetallicRoughness,metallicFactor:l.metallicFactor,roughnessFactor:l.roughnessFactor,emissiveTexture:l.textureEmissive,emissiveFactor:l.emissiveFactor,occlusionTexture:l.textureOcclusion}),v=null!=l.normalTextureTransform?.scale?l.normalTextureTransform?.scale:c.Un;s.set(a,new V.$U({...n,transparent:m===N.sf.Blend,customDepthTest:N.it.Lequal,textureAlphaMode:m,textureAlphaCutoff:l.alphaCutoff,diffuse:[r,p,y],ambient:[r,p,y],opacity:l.opacity,doubleSided:l.doubleSided,doubleSidedType:"winding-order",cullFace:l.doubleSided?N.s2.None:N.s2.Back,hasVertexColors:!!t.attributes.color,hasVertexTangents:!!t.attributes.tangent,normalType:d?H.W.Attribute:H.W.ScreenDerivative,castShadows:!0,receiveShadows:l.receiveShadows,receiveAmbientOcclusion:l.receiveAmbientOcclustion,textureId:null!=b?b.id:void 0,colorMixMode:l.colorMixMode,normalTextureId:null!=l.textureNormal&&f?i.get(l.textureNormal).id:void 0,textureAlphaPremultiplied:null!=b&&!!b.parameters.preMultiplyAlpha,occlusionTextureId:null!=l.textureOcclusion&&f?i.get(l.textureOcclusion).id:void 0,emissiveTextureId:null!=l.textureEmissive&&f?i.get(l.textureEmissive).id:void 0,metallicRoughnessTextureId:null!=l.textureMetallicRoughness&&f?i.get(l.textureMetallicRoughness).id:void 0,emissiveFactor:[h,g,x],mrrFactors:w?Z.Bt:[l.metallicFactor,l.roughnessFactor,n.mrrFactors[2]],isSchematic:w,colorTextureTransformMatrix:(0,T.G)(l.colorTextureTransform),normalTextureTransformMatrix:(0,T.G)(l.normalTextureTransform),scale:[v[0],v[1]],occlusionTextureTransformMatrix:(0,T.G)(l.occlusionTextureTransform),emissiveTextureTransformMatrix:(0,T.G)(l.emissiveTextureTransform),metallicRoughnessTextureTransformMatrix:(0,T.G)(l.metallicRoughnessTextureTransform),...o},u))}const p=s.get(a);if(r.stageResources.materials.push(p),f){const e=e=>{null!=e&&r.stageResources.textures.push(i.get(e))};e(l.textureColor),e(l.textureNormal),e(l.textureOcclusion),e(l.textureEmissive),e(l.textureMetallicRoughness)}return p}(u,e,O,t,r,l,f,n),{geometry:a,vertexCount:w}=function(e,t){const r=e.attributes.position.count,n=(0,v.x)(e.indices||r,e.primitiveType),i=(0,m.oe)(3*r),{typedBuffer:u,typedBufferStride:a}=e.attributes.position;(0,y.t)(i,u,e.transform,3,a);const c=[[q.r.POSITION,new F.n(i,n,3,!0)]];if(null!=e.attributes.normal){const t=(0,m.oe)(3*r),{typedBuffer:i,typedBufferStride:u}=e.attributes.normal;(0,s.Ge)(te,e.transform),(0,y.b)(t,i,te,3,u),(0,o.or)(te)&&(0,y.n)(t,t),c.push([q.r.NORMAL,new F.n(t,n,3,!0)])}if(null!=e.attributes.tangent){const t=(0,m.oe)(4*r),{typedBuffer:i,typedBufferStride:u}=e.attributes.tangent;(0,s.z0)(te,e.transform),(0,h.t)(t,i,te,4,u),(0,o.or)(te)&&(0,y.n)(t,t,4),c.push([q.r.TANGENT,new F.n(t,n,4,!0)])}if(null!=e.attributes.texCoord0){const t=(0,m.oe)(2*r),{typedBuffer:o,typedBufferStride:s}=e.attributes.texCoord0;(0,g.a)(t,o,2,s),c.push([q.r.UV0,new F.n(t,n,2,!0)])}const l=e.attributes.color;if(null!=l){const t=new Uint8Array(4*r);4===l.elementCount?l instanceof p.Eq?(0,h.b)(t,l,255):l instanceof p.XP?(0,b.a)(t,l):l instanceof p.Uz&&(0,h.b)(t,l,1/256):(t.fill(255),l instanceof p.xs?(0,y.f)(t,l.typedBuffer,255,4,l.typedBufferStride):e.attributes.color instanceof p.eI?(0,x.c)(t,l.typedBuffer,4,e.attributes.color.typedBufferStride):e.attributes.color instanceof p.nS&&(0,y.f)(t,l.typedBuffer,1/256,4,l.typedBufferStride)),c.push([q.r.COLOR,new F.n(t,n,4,!0)])}return{geometry:new j.V(t,c),vertexCount:r}}(e,i??new V.$U({},n)),M=a.boundingInfo;null!=M&&0===R&&((0,d.iT)(S,M.bbMin),(0,d.iT)(S,M.bbMax)),null!=i&&(O.stageResources.geometries.push(a),O.numberOfVertices+=w)})),A||a.push(O)})),{engineResources:a,referenceBoundingBox:S}}(S,I,E,t,i.specifiedLodIndex);return{lods:P,referenceBoundingBox:C,isEsriSymbolResource:S.meta.isEsriSymbolResource,isWosr:!1}}const te=(0,i.vt)()},33550:function(e,t,r){r.d(t,{T:function(){return n}});const n=2.1}}]);
//# sourceMappingURL=6741.ff8175a3f24f1e316d64.js.map