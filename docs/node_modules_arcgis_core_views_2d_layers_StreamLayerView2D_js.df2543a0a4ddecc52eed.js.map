{"version":3,"file":"node_modules_arcgis_core_views_2d_layers_StreamLayerView2D_js.df2543a0a4ddecc52eed.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAC0qB,oBAAoB,uEAAC,CAAC,+DAAC,GAAG,cAAc,+FAA+F,aAAa,iBAAiB,6DAAC,8CAA8C,mEAAmE,qDAAqD,gEAAgE,qDAAqD,uJAAuJ,GAAG,6DAAC,qDAAqD,6DAAC,2FAA2F,UAAU,gBAAgB,sBAAsB,oCAAoC,sDAAC,oDAAoD,QAAQ,2BAA2B,kEAAC,2BAA2B,yDAAyD,mEAAmE,6BAA6B,OAAO,gEAAC,OAAO,2HAA2H,GAAG,mCAAmC,kHAAkH,sDAAC,gHAAgH,+BAA+B,OAAO,qFAAC,iFAAiF,QAAQ,mEAAC,aAAa,+BAA+B,4CAA4C,KAAK,OAAO,mEAAC,EAAE,YAAY,GAAG,SAAS,4DAA4D,8BAA8B,qCAAqC,WAAW,+FAA+F,YAAY,wGAAwG,gBAAgB,2EAA2E,aAAa,sEAAsE,WAAW,wHAAwH,uBAAuB,4CAA4C,OAAO,qBAAqB,0BAA0B,iBAAiB,qCAAqC,uDAAC,EAAE,sFAAC,mDAAmD,uDAAC,EAAE,sFAAC,8CAA8C,uDAAC,EAAE,sFAAC,EAAE,YAAY,uCAAuC,uDAAC,EAAE,sFAAC,EAAE,YAAY,iDAAiD,uDAAC,EAAE,sFAAC,+CAA+C,UAA+B;;;;;;;;;;;;;;;;;;;;;;ACJ//G;AACA;AACA;AACA;AACoV,YAAY,sBAAsB,SAAS,uDAAuD,QAAQ,sDAAsD,aAAa,qBAAqB,UAAU,kBAAkB,QAAQ,gBAAgB,kBAAkB,mDAAmD,uBAAuB,6HAA6H,sBAAsB,yDAAyD,OAAO,uDAAC,EAAE,sFAAC,wCAAwC,uDAAC,EAAE,sFAAC,EAAE,YAAY,wCAAwC,uDAAC,EAAE,sFAAC,EAAE,KAAK,wEAAC,CAAC,kCAAkC,uDAAC,EAAE,sFAAC,6CAAkE","sources":["webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js","webpack://react-redux-arcgis-boilerplate/./node_modules/@arcgis/core/views/layers/StreamLayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Error.js\";import{handlesGroup as t,makeHandle as s}from\"../../../core/handleUtils.js\";import{watch as n}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../rest/support/FeatureSet.js\";import c from\"./FeatureLayerView2D.js\";import{handleNoEngineError as l}from\"./support/handleNoEngineError.js\";import h from\"../../layers/StreamLayerView.js\";let p=class extends(h(c)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null}initialize(){this.addHandles([n((()=>this.layer.customParameters),(async e=>{(await this.getWorker()).streamMessenger.updateCustomParameters(e)})),this.layer.on(\"send-message-to-socket\",(async e=>{(await this.getWorker()).streamMessenger.sendMessageToSocket(e)})),this.layer.on(\"send-message-to-client\",(async e=>{(await this.getWorker()).streamMessenger.sendMessageToClient(e),this._isUserPaused&&\"type\"in e&&\"clear\"===e.type&&this.incrementSourceRefreshVersion()})),n((()=>this.layer.purgeOptions),(()=>this._update())),n((()=>this.suspended),this._onSuspendedChange.bind(this))],\"constructor\"),this._doResume()}destroy(){this._doPause()}get connectionError(){return this.pipelineErrorString?new r(\"stream-controller\",this.pipelineErrorString):null}on(e,r){if(Array.isArray(e))return t(e.map((e=>this.on(e,r))));const n=[\"data-received\",\"message-received\"].includes(e);n&&this.getWorker().then((r=>r.streamMessenger.enableEvent(e,!0)));const o=super.on(e,r),i=this;return s((()=>{o.remove(),n&&(i._workerProxy.closed||i.hasEventListener(e)||i.getWorker().then((r=>r.streamMessenger.enableEvent(e,!1))))}))}async queryLatestObservations(e,t){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new r(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");const s=await this.getWorker();return l(s.features.executeQueryForLatestObservations(this._cleanUpQuery(e),t).then((e=>{const r=a.fromJSON(e);return r.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),r})),new a({features:[]}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){null!=this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}_doResume(){this._refreshInterval=setInterval((()=>this.incrementSourceRefreshVersion()),this.layer.updateInterval)}_doDisconnect(){this.getWorker().then((e=>e.streamMessenger.disconnect())),this._doPause()}_doConnect(){this.getWorker().then((e=>e.streamMessenger.connect())),this.resume()}_doClear(){this.getWorker().then((e=>e.streamMessenger.clear())),null==this._refreshInterval&&this.incrementSourceRefreshVersion()}_createClientOptions(){const e=super._createClientOptions(),r=this;return{...e,get container(){return r.featureContainer},setProperty:e=>{this.set(e.propertyName,e.value)}}}};e([o()],p.prototype,\"pipelineConnectionStatus\",void 0),e([o()],p.prototype,\"pipelineErrorString\",void 0),e([o({readOnly:!0})],p.prototype,\"connectionError\",null),e([o({readOnly:!0})],p.prototype,\"_streamConnectionStatus\",null),p=e([i(\"esri.views.2d.layers.StreamLayerView2D\")],p);const u=p;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.31/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../layers/support/FeatureFilter.js\";const r=r=>{let i=class extends r{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}disconnect(){this._doDisconnect()}connect(){this._doConnect()}clear(){this._doClear()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return(this._isUserPaused||this.suspended)&&\"connected\"===this._streamConnectionStatus?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],i.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],i.prototype,\"connectionStatus\",null),s([e({type:o})],i.prototype,\"filter\",void 0),i=s([t(\"esri.views.layers.StreamLayerView\")],i),i};export{r as default};\n"],"names":[],"sourceRoot":""}